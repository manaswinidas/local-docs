<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 25. Configuring Individual JAX-RS Resource Beans</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Configuring_Individual_JAX-RS_Resource_Beans">
      ⁠</a>Chapter 25. Configuring Individual JAX-RS Resource Beans</h1></div></div></div><div class="para">
		When you scan your path for JAX-RS annotated resource beans, your beans are registered in <span class="emphasis"><em>per-request mode</em></span>. This means that an instance will be created for every HTTP request served. You will usually require information from your environment. If you run a <code class="filename">WAR</code> in a Servlet container with Beta 2 or lower, you can only use JNDI lookups to obtain references to Java EE resources and configuration information. In this case, define your EE configuration (that is, <code class="literal">ejb-ref</code>, <code class="literal">env-entry</code>, <code class="literal">persistence-context-ref</code>, etc.) in the <code class="filename">web.xml</code> of your RESTEasy <code class="filename">WAR</code> file. Then, within your code, perform JNDI lookups in the <code class="literal">java:comp</code> namespace. For example:
	</div><div class="para">
		<code class="filename">web.xml</code>
	</div><pre class="programlisting">

&lt;ejb-ref&gt;
  &lt;ejb-ref-name&gt;ejb/foo&lt;/ejb-ref-name&gt;
  ...
&lt;/ejb-ref&gt;

</pre><div class="para">
		<span class="emphasis"><em>Resource Code:</em></span>
	</div><pre class="programlisting">
@Path("/")
public class MyBean {

   public Object getSomethingFromJndi() {
      new InitialContext.lookup("java:comp/ejb/foo");
   }
...
}
</pre><div class="para">
		You can also configure and register your beans manually through the Registry. In a <code class="filename">WAR</code>-based deployment, you must write a specific <code class="literal">ServletContextListener</code> to do this. The listener lets you obtain a reference to the Registry, like so:
	</div><pre class="programlisting">

public class MyManualConfig implements ServletContextListener
{
   public void contextInitialized(ServletContextEvent event)
   {

      Registry registry = (Registry) event.getServletContext().getAttribute(Registry.class.getName());

   }
...
}

</pre><div class="para">
		We recommend investigating Spring Integration and the Embedded Container's Spring Integration for a full understanding of this process.
	</div></div></body></html>