<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 34. EJB Integration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="RESTEasy_EJB_Integration">
      ⁠</a>Chapter 34. EJB Integration</h1></div></div></div><div class="para">
		To integrate with Enterprise JavaBeans (EJB), you must first modify your EJB's published interfaces. Currently, RESTEasy only has simple portable integration with EJBs, so you must manually configure your RESTEasy <code class="filename">WAR</code>.
	</div><div class="para">
		To make an EJB a JAX-RS resource, annotate a stateless session bean's <code class="literal">@Remote</code> or <code class="literal">@Local</code> interface with JAX-RS annotations, as follows:
	</div><pre class="programlisting">
@Local
@Path("/Library")
public interface Library {
   
   @GET
   @Path("/books/{isbn}")
   public String getBook(@PathParam("isbn") String isbn);
}

@Stateless
public class LibraryBean implements Library {

...

}
</pre><div class="para">
		Next, in RESTEasy's <code class="filename">web.xml</code>, manually register the EJB with RESTEasy by using the <code class="literal">resteasy.jndi.resources &lt;context-param&gt;</code>:
	</div><pre class="programlisting">
&lt;web-app&gt;
   &lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;
   &lt;context-param&gt;
      &lt;param-name&gt;resteasy.jndi.resources&lt;/param-name&gt;
      &lt;param-value&gt;LibraryBean/local&lt;/param-value&gt;
   &lt;/context-param&gt;

   &lt;listener&gt;
      &lt;listener-class&gt;org.resteasy.plugins.server.servlet.ResteasyBootstrap&lt;/listener-class&gt;
   &lt;/listener&gt;

   &lt;servlet&gt;
      &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
      &lt;servlet-class&gt;org.resteasy.plugins.server.servlet.HttpServletDispatcher&lt;/servlet-class&gt;
   &lt;/servlet&gt;

   &lt;servlet-mapping&gt;
      &lt;servlet-name&gt;Resteasy&lt;/servlet-name&gt;
      &lt;url-pattern&gt;/*&lt;/url-pattern&gt;
   &lt;/servlet-mapping&gt;

&lt;/web-app&gt;
</pre><div class="para">
		At present, this is the only portable integration method for EJBs. Future versions of RESTEasy will be more tightly integrated with EAP, so manual registrations and modifications to <code class="filename">web.xml</code> will be unnecessary.
	</div><div class="para">
		If you are using RESTEasy with an <code class="filename">EAR</code> and EJBs, the following structure is helpful:
	</div><pre class="programlisting">
my-ear.ear
|------myejb.jar
|------resteasy-jaxrs.war
       |
       ----WEB-INF/web.xml
       ----WEB-INF/lib (nothing)
|------lib/
       |
       ----All Resteasy jar files
</pre><div class="para">
		Remove all libraries from <code class="filename">WEB-INF/lib</code> and place them in a common <code class="filename">EAR</code> library, or place the RESTEasy <code class="filename">JAR</code> dependencies in your application server's system classpath (that is, in EAP, place them in <code class="filename">server/default/lib</code>).
	</div></div></body></html>