<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 2. Installation/Configuration</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Installation_Configuration">
      ⁠</a>Chapter 2. Installation/Configuration</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="Using_RESTEasy_In_Your_Application">
      ⁠</a>2.1. Using RESTEasy in your Application</h1></div></div></div><div class="para">
			RESTEasy is deployed as a <code class="filename">WAR</code> archive, so it must be deployed inside a Servlet container.
		</div><div class="para">
			You can obtain the <code class="filename">resteasy-jaxrs-war</code> from the enterprise code source. The file is located in the <code class="filename">/resteasy</code> folder of the source code archive. Download the archive from the Red Hat Customer Support Portal.
		</div><div class="para">
			Place your JAX-RS annotated class resources and providers in one or more <code class="filename">JAR</code>s within <code class="literal">/WEB-INF/lib</code>. Alternatively, place your raw class files within <code class="literal">/WEB-INF/classes</code>. By default, RESTEasy is configured to scan <code class="filename">JAR</code>s and classes within these directories for JAX-RS annotated classes, and to deploy and register them within the system.
		</div><div class="para">
			RESTEasy is implemented as a <code class="literal">ServletContextListener</code> and a Servlet, and deployed within a <code class="filename">WAR</code> file. The <code class="filename">WEB-INF/web.xml</code> file contains the following:
		</div><div class="para">
			
<pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;web-app&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;display-name&gt;</span>Archetype Created Web Application<span xmlns="" class="perl_Keyword">&lt;/display-name&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!--Set this if you want Resteasy to scan for JAX-RS classes</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        &lt;param-name&gt;resteasy.scan&lt;/param-name&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        &lt;param-value&gt;true&lt;/param-value&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;/context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- set this if you map the Resteasy servlet to something other than /*</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">       &lt;param-name&gt;resteasy.servlet.mapping.prefix&lt;/param-name&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">       &lt;param-value&gt;/resteasy&lt;/param-value&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;/context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">&lt;!-- to turn on security</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        &lt;param-name&gt;resteasy.role.based.security&lt;/param-name&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">        &lt;param-value&gt;true&lt;/param-value&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    &lt;/context-param&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Comment">    --&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;listener&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;listener-class&gt;</span>org.jboss.resteasy.plugins.server.servlet.ResteasyBootstrap<span xmlns="" class="perl_Keyword">&lt;/listener-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/listener&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;servlet&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>Resteasy<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;servlet-class&gt;</span>org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher<span xmlns="" class="perl_Keyword">&lt;/servlet-class&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/servlet&gt;</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>Resteasy<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>        <span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">&lt;/servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/web-app&gt;</span>
</pre>

		</div><div class="para">
			The <code class="literal">ResteasyBootstrap</code> listener initializes some of RESTEasy's basic components and scans for annotation classes that exist in your <code class="filename">WAR</code> file. It also receives configuration options from <span class="markup">&lt;context-param&gt;</span> elements.
		</div><div class="para">
			These configuration options must be set if the <span class="markup">&lt;servlet-mapping&gt;</span> for the RESTEasy Servlet has a URL pattern other than <code class="literal">/*</code>. For example, if the URL pattern is:
		</div><pre class="programlisting"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;servlet-mapping&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;servlet-name&gt;</span>Resteasy<span xmlns="" class="perl_Keyword">&lt;/servlet-name&gt;</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">&lt;url-pattern&gt;</span>/restful-services/*<span xmlns="" class="perl_Keyword">&lt;/url-pattern&gt;</span>
<span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">&lt;/servlet-mapping&gt;</span></pre><div class="para">
			Then the value of <em class="parameter"><code>resteasy-servlet.mapping.prefix</code></em> must be:
		</div><pre class="programlisting">&lt;context-param&gt;
  &lt;param-name&gt;resteasy.servlet.mapping.prefix&lt;/param-name&gt;
  &lt;param-value&gt;/restful-services&lt;/param-value&gt;
&lt;/context-param&gt;</pre><div class="para">
			The available <span class="markup">&lt;param-name&gt;</span> values are outlined below with the <span class="markup">&lt;param-value&gt;</span> defaults (or expected patterns) listed for reference.
		</div><div class="variablelist"><p class="title"><strong>Available &lt;context-param&gt; Parameter Names</strong></p><dl class="variablelist"><dt><span class="term"> <code class="option">resteasy.servlet.mapping.prefix</code> </span></dt><dd><div class="para">
						Defines the URL pattern for the RESTEasy <code class="literal">servlet-mapping</code>, if not <code class="literal">/*</code>.
					</div></dd><dt><span class="term"> <code class="option">resteasy.scan.providers</code> </span></dt><dd><div class="para">
						Scans for <code class="literal">@Provider</code> classes and registers them. The default value is <code class="literal">false</code>.
					</div></dd><dt><span class="term"> <code class="option">resteasy.scan.resources</code> </span></dt><dd><div class="para">
						Scans for JAX-RS resource classes. The default value is <code class="literal">false</code>.
					</div></dd><dt><span class="term"> <code class="option">resteasy.scan</code> </span></dt><dd><div class="para">
						Scans for both <code class="literal">@Provider</code> and JAX-RS resource classes (<code class="literal">@Path</code>, <code class="literal">@GET</code>, <code class="literal">@POST</code>, etc.) and registers them.
					</div></dd><dt><span class="term"> <code class="option">resteasy.providers</code> </span></dt><dd><div class="para">
						A comma-delimited list of fully-qualified <code class="literal">@Provider</code> class names you want to register.
					</div></dd><dt><span class="term"> <code class="option">resteasy.use.builtin.providers</code> </span></dt><dd><div class="para">
						Determines whether default, built-in <code class="literal">@Provider</code> classes are registered. The default value is <code class="literal">true</code>.
					</div></dd><dt><span class="term"> <code class="option">resteasy.resources</code> </span></dt><dd><div class="para">
						Comma-delimited list of fully-qualified JAX-RS resource class names you want to register.
					</div></dd><dt><span class="term"> <code class="option">resteasy.jndi.resources</code> </span></dt><dd><div class="para">
						A comma-delimited list of JNDI names referencing the objects that you want to register as JAX-RS resources.
					</div></dd><dt><span class="term"> <code class="option">javax.ws.rs.core.Application</code> </span></dt><dd><div class="para">
						Fully-qualified name of the Application class to bootstrap in a spec-portable way.
					</div></dd></dl></div><div class="para">
			The <code class="literal">ResteasyBootstrap</code> listener configures an instance of the <code class="literal">ResteasyProviderFactory</code> and <code class="literal">Registry</code>. You can obtain <code class="literal">ResteasyProviderFactory</code> and <code class="literal">Registry</code> instances from the <code class="literal">ServletContext</code> attributes <code class="literal">org.jboss.resteasy.spi.ResteasyProviderFactory</code> and <code class="literal">org.jboss.resteasy.spi.Registry</code>.
		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="javax.ws.rs.core.Application">
      ⁠</a>2.2. javax.ws.rs.core.Application</h1></div></div></div><div class="para">
			<code class="literal">javax.ws.rs.core.Application</code> is a standard JAX-RS class that can be implemented to provide information about your deployment. It is a class that lists all JAX-RS root resources and providers.
		</div><pre class="programlisting">
/**
 * Defines the components of a JAX-RS application and supplies additional
 * metadata. A JAX-RS application or implementation supplies a concrete
 * subclass of this abstract class.
 */
public abstract class Application
{
   private static final Set&lt;Object&gt; emptySet = Collections.emptySet();

   /**
    * Get a set of root resource and provider classes. The default lifecycle
    * for resource class instances is per-request. The default lifecycle for
    * providers is singleton.
    * &lt;p/&gt;
    * &lt;p&gt;Implementations should warn about and ignore classes that do not
    * conform to the requirements of root resource or provider classes.
    * Implementations should warn about and ignore classes for which
    * {@link #getSingletons()} returns an instance. Implementations MUST
    * NOT modify the returned set.&lt;/p&gt;
    *
    * @return a set of root resource and provider classes. Returning null
    *         is equivalent to returning an empty set.
    */
   public abstract Set&lt;Class&lt;?&gt;&gt; getClasses();

   /**
    * Get a set of root resource and provider instances. Fields and properties
    * of returned instances are injected with their declared dependencies
    * (see {@link Context}) by the runtime prior to use.
    * &lt;p/&gt;
    * &lt;p&gt;Implementations should warn about and ignore classes that do not
    * conform to the requirements of root resource or provider classes.
    * Implementations should flag an error if the returned set includes
    * more than one instance of the same class. Implementations MUST
    * NOT modify the returned set.&lt;/p&gt;
    * &lt;p/&gt;
    * &lt;p&gt;The default implementation returns an empty set.&lt;/p&gt;
    *
    * @return a set of root resource and provider instances. Returning null
    *         is equivalent to returning an empty set.
    */
   public Set&lt;Object&gt; getSingletons()
   {
      return emptySet;
   }

}
</pre><div class="para">
			To use Application you must set the Servlet <code class="literal">context-param</code>, <code class="literal">javax.ws.rs.core.Application</code>, with a fully-qualified class that implements Application. For example:
		</div><div class="para">
			
<pre class="programlisting">

   &lt;context-param&gt;
      &lt;param-name&gt;javax.ws.rs.core.Application&lt;/param-name&gt;
      &lt;param-value&gt;com.mycom.MyApplicationConfig&lt;/param-value&gt;
   &lt;/context-param&gt;



</pre>

		</div><div class="para">
			If you have this set, you should probably turn off automatic scanning as this will probably result in duplicate classes being registered.
		</div><div class="para">

		</div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="RESTEasyLogging">
      ⁠</a>2.3. RESTEasyLogging</h1></div></div></div><div class="para">
			RESTEasy logs various events using <span class="application"><strong>slf4j</strong></span>.
		</div><div class="para">
			The slf4j API is intended to serve as a simple facade for various logging APIs, allowing you to plug in the desired implementation at deployment time. By default, RESTEasy is configured to use <span class="application"><strong>Apache log4j</strong></span>, but you can use any logging provider supported by slf4j.
		</div><div class="para">
			The initial set of logging categories defined in the framework is listed below. Further logging categories are being added, but these should make it easier to troubleshoot issues.
		</div><div class="table"><a id="idm140379101379088">
      ⁠</a><p class="title"><strong>Table 2.1. Logging Categories</strong></p><div class="table-contents"><table xmlns:d="http://docbook.org/ns/docbook" class="lt-4-cols lt-7-rows" summary="Logging Categories"><colgroup><col/><col/></colgroup><thead><tr><th> Category </th><th> Function </th></tr></thead><tbody><tr><td> <code class="literal">org.jboss.resteasy.core</code> </td><td> Logs all activity by the core RESTEasy implementation. </td></tr><tr><td> <code class="literal">org.jboss.resteasy.plugins.providers</code> </td><td> Logs all activity by RESTEasy entity providers. </td></tr><tr><td> <code class="literal">org.jboss.resteasy.plugins.server</code> </td><td> Logs all activity by the RESTEasy server implementation. </td></tr><tr><td> <code class="literal">org.jboss.resteasy.specimpl</code> </td><td> Logs all activity by JAX-RS implementing classes. </td></tr><tr><td> <code class="literal">org.jboss.resteasy.mock</code> </td><td> Logs all activity by the RESTEasy mock framework. </td></tr></tbody></table></div></div><div class="para">
			If you are developing RESTEasy code, the <code class="literal">LoggerCategories</code> class provides easy access to category names and the various loggers.
		</div></div></div></body></html>