<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title xmlns:d="http://docbook.org/ns/docbook">Chapter 21. The XTS API</title><link rel="stylesheet" type="text/css" href="Common_Content/css/epub.css"/><meta xmlns:d="http://docbook.org/ns/docbook" name="generator" content="publican v4.3.3"/><meta xmlns:d="http://docbook.org/ns/docbook" name="package" content=""/></head><body><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="sec-xts-api">
      ⁠</a>Chapter 21. The XTS API</h1></div></div></div><a id="idm140019181777424" class="indexterm"/><a id="idm140019170886960" class="indexterm"/><a id="idm140019177118496" class="indexterm"/><a id="idm140019160391648" class="indexterm"/><a id="idm140019150434016" class="indexterm"/><a id="idm140019109022464" class="indexterm"/><a id="idm140019182762768" class="indexterm"/><a id="idm140019179784032" class="indexterm"/><a id="idm140019148196336" class="indexterm"/><a id="idm140019153307552" class="indexterm"/><a id="idm140019108880976" class="indexterm"/><div class="para">
		This chapter discusses the XTS API. You can use this information to write client and server applications which consume transactional Web Services and coordinate back-end systems.
	</div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140019149275024">
      ⁠</a>21.1. API for the Atomic Transaction Protocol</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019147540256">
      ⁠</a>21.1.1. Vote</h2></div></div></div><div class="para">
				During the two-phase commit protocol, a participant is asked to vote on whether it can prepare to confirm the work that it controls. It must return an instance of one of the subtypes of <code class="interfacename">com.arjuna.wst11.Vote</code> listed in <a class="xref" href="sec-xts-api.html#vote-subclasses">Subclasses of <code class="interfacename">com.arjuna.wst11.Vote</code></a>.
			</div><div class="variablelist"><a id="vote-subclasses">
      ⁠</a><p class="title"><strong>Subclasses of <code class="interfacename">com.arjuna.wst11.Vote</code></strong></p><dl class="variablelist"><dt><span class="term">Prepared</span></dt><dd><div class="para">
							Indicates that the participant can prepare if the coordinator requests it. Nothing has been committed, because the participant does not know the final outcome of the transaction.
						</div></dd><dt><span class="term">Aborted</span></dt><dd><div class="para">
							The participant cannot prepare, and has rolled back. The participant should not expect to get a second phase message.
						</div></dd><dt><span class="term">ReadOnly</span></dt><dd><div class="para">
							The participant has not made any changes to state, and it does not need to know the final outcome of the transaction. Essentially the participant is resigning from the transaction.
						</div></dd></dl></div><div class="example"><a id="idm140019171047216">
      ⁠</a><p class="title"><strong>Example 21.1. Example Implementation of 2PC Participant's <code class="methodname">prepare</code> Method</strong></p><div class="example-contents"><pre class="programlisting JAVA"><span xmlns="" class="line">​</span><span xmlns="" class="perl_Keyword">public</span> Vote <span xmlns="" class="perl_Function">prepare</span> () <span xmlns="" class="perl_Keyword">throws</span> WrongStateException, SystemException
<span xmlns="" class="line">​</span>{
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Comment">// Some participant logic here</span>
<span xmlns="" class="line">​</span>
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">if</span>(<span xmlns="" class="perl_Comment">/* some condition based on the outcome of the business logic */</span>)
<span xmlns="" class="line">​</span>  {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// Vote to confirm</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> com.<span xmlns="" class="perl_Function">arjuna</span>.<span xmlns="" class="perl_Function">wst</span>.<span xmlns="" class="perl_Function">Prepared</span>();
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">else</span> <span xmlns="" class="perl_Keyword">if</span>(<span xmlns="" class="perl_Comment">/*another condition based on the outcome of the business logic*/</span>)
<span xmlns="" class="line">​</span>  {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// Resign</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> com.<span xmlns="" class="perl_Function">arjuna</span>.<span xmlns="" class="perl_Function">wst</span>.<span xmlns="" class="perl_Function">ReadOnly</span>();
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>  <span xmlns="" class="perl_Keyword">else</span>
<span xmlns="" class="line">​</span>  {
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Comment">// Vote to cancel</span>
<span xmlns="" class="line">​</span>    <span xmlns="" class="perl_Keyword">return</span> <span xmlns="" class="perl_Keyword">new</span> com.<span xmlns="" class="perl_Function">arjuna</span>.<span xmlns="" class="perl_Function">wst</span>.<span xmlns="" class="perl_Function">Aborted</span>();
<span xmlns="" class="line">​</span>  }
<span xmlns="" class="line">​</span>}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019169206464">
      ⁠</a>21.1.2. TXContext</h2></div></div></div><div class="para">
				<span class="package">com.arjuna.mw.wst11.TxContext</span> is an opaque representation of a transaction context. It returns one of two possible values, as listed in <a class="xref" href="sec-xts-api.html#TxContext-values">TxContext Return Values</a>.
			</div><div class="variablelist"><a id="TxContext-values">
      ⁠</a><p class="title"><strong>TxContext Return Values</strong></p><dl class="variablelist"><dt><span class="term">valid</span></dt><dd><div class="para">
							Indicates whether the contents are valid.
						</div></dd><dt><span class="term">equals</span></dt><dd><div class="para">
							Can be used to compare two instances for equality.
						</div></dd></dl></div><div xmlns:d="http://docbook.org/ns/docbook" class="note"><div class="admonition_header"><p><strong>Note</strong></p></div><div class="admonition"><div class="para">
					The corresponding participant interfaces used in the 1.0 protocol implementation are located in package <span class="package">com.arjuna.wst</span>.
				</div></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref-UserTransaction">
      ⁠</a>21.1.3. UserTransaction</h2></div></div></div><div class="para">
				<code class="classname">com.arjuna.mw.wst11.UserTransaction</code> is the class that clients typically employ. Before a client can begin a new atomic transaction, it must first obtain a <code class="classname">UserTransaction</code> from the <code class="classname">UserTransactionFactory</code>. This class isolates the user from the underlying protocol-specific aspects of the XTS implementation. A <code class="classname">UserTransaction</code> does not represent a specific transaction. Instead, it provides access to an implicit per-thread transaction context, similar to the <code class="classname">UserTransaction</code> in the JTA specification. All of the <code class="classname">UserTransaction</code> methods implicitly act on the current thread of control.
			</div><div class="variablelist"><p class="title"><strong><code class="classname">userTransaction</code> Methods</strong></p><dl class="variablelist"><dt><span class="term">begin</span></dt><dd><div class="para">
							Used to begin a new transaction and associate it with the invoking thread.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">timeout</span></dt><dd><div class="para">
										This optional parameter, measured in milliseconds, specifies a time interval after which the newly created transaction may be automatically rolled back by the coordinator
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">WrongStateException</code></span></dt><dd><div class="para">
										A transaction is already associated with the thread.
									</div></dd></dl></div></dd><dt><span class="term">commit</span></dt><dd><div class="para">
							 Volatile2PC and Durable2PC participants enrolled in the transaction are requested first to prepare and then to commit their changes. If any of the participants fails to prepare in the first phase then all other participants are requested to abort.
						</div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">UnknownTransactionException</code></span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd><dt><span class="term"><code class="methodname">TransactionRolledBackException</code></span></dt><dd><div class="para">
										 The transaction was rolled back either because of a timeout or because a participant was unable to commit.
									</div></dd></dl></div></dd><dt><span class="term">rollback</span></dt><dd><div class="para">
							Terminates the transaction. Upon completion, the <code class="methodname">rollback</code> method disassociates the transaction from the current leaving it unassociated with any transactions.
						</div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">UnknownTransactionException</code></span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019156984832">
      ⁠</a>21.1.4. UserTransactionFactory</h2></div></div></div><div class="para">
				Call the <code class="methodname">getUserTransaction</code> method to obtain a <a class="xref" href="sec-xts-api.html#ref-UserTransaction">Section 21.1.3, “UserTransaction”</a> instance from a <code class="classname">UserTransactionFactory</code>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref-TransactionManager">
      ⁠</a>21.1.5. TransactionManager</h2></div></div></div><div class="para">
				Defines the interaction between a transactional web service and the underlying transaction service implementation. A <code class="classname">TransactionManager</code> does not represent a specific transaction. Instead, it provides access to an implicit per-thread transaction context.
			</div><div class="variablelist"><p class="title"><strong>Methods</strong></p><dl class="variablelist"><dt><span class="term"><code class="methodname">currentTransaction</code></span></dt><dd><div class="para">
							Returns a <code class="systemitem">TxContext</code> for the current transaction, or null if there is no context. Use the <code class="methodname">currentTransaction</code> method to determine whether a web service has been invoked from within an existing transaction. You can also use the returned value to enable multiple threads to execute within the scope of the same transaction. Calling the <code class="methodname">currentTransaction</code> method does not disassociate the current thread from the transaction.
						</div></dd><dt><span class="term"><code class="methodname">suspend</code></span></dt><dd><div class="para">
							Dissociates a thread from any transaction. This enables a thread to do work that is not associated with a specific transaction.
						</div><div class="para">
							The <code class="methodname">suspend</code> method returns a <code class="systemitem">TxContext</code> instance, which is a handle on the transaction.
						</div></dd><dt><span class="term"><code class="methodname">resume</code></span></dt><dd><div class="para">
							Associates or re-associates a thread with a transaction, using its <code class="systemitem">TxContext</code>. Prior to association or re-association, the thread is disassociated from any transaction with which it may be currently associated. If the <code class="systemitem">TxContext</code> is null, then the thread is associated with no transaction. In this way, the result is the same as if the <code class="methodname">suspend</code> method were used instead.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">txContext</span></dt><dd><div class="para">
										A TxContext instance as return by <code class="methodname">suspend</code>, identifying the transaction to be resumed.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">UnknownTransactionException</code></span></dt><dd><div class="para">
										The transaction referred to by the <code class="systemitem">TxContext</code> is invalid in the scope of the invoking thread.
									</div></dd></dl></div></dd><dt><span class="term"><code class="varname">enlistForVolitaleTwoPhase</code></span></dt><dd><div class="para">
							Enroll the specified participant with the current transaction, causing it to participate in the Volatile2PC protocol. You must pass a unique identifier for the participant.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">participant</span></dt><dd><div class="para">
										An implementation of interface Volatile2PCParticipant whose prepare, commit and abort methods are called when the corresponding coordinator message is received.
									</div></dd><dt><span class="term">id</span></dt><dd><div class="para">
										A unique identifier for the participant. The value of this String should differ for each enlisted participant. It should also be possible for a given identifier to determine that the participant belongs to the enlisting web service rather than some other web service deployed to the same container.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term">UnknownTransactionException</span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd><dt><span class="term"><code class="systemitem">WrongStateException</code></span></dt><dd><div class="para">
										The transaction is not in a state that allows participants to be enrolled. For instance, it may be in the process of terminating.
									</div></dd></dl></div></dd><dt><span class="term"><code class="varname">enlistForDurableTwoPhase</code></span></dt><dd><div class="para">
							Enroll the specified participant with the current transaction, causing it to participate in the Durable2PC protocol. You must pass a unique identifier for the participant.
						</div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term">UnknownTransactionException</span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd><dt><span class="term"><code class="systemitem">WrongStateException</code></span></dt><dd><div class="para">
										The transaction is not in a state that allows participants to be enrolled. For instance, it may be in the process of terminating.
									</div></dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019169977584">
      ⁠</a>21.1.6. TransactionManagerFactory</h2></div></div></div><div class="para">
				Use the <code class="methodname">getTransactionManager</code> method to obtain a <a class="xref" href="sec-xts-api.html#ref-TransactionManager">Section 21.1.5, “TransactionManager”</a> from a <code class="classname">TransactionManagerFactory</code>.
			</div></div></div><div class="section"><div class="titlepage"><div><div><h1 class="title"><a id="idm140019169974576">
      ⁠</a>21.2. API for the Business Activity Protocol</h1></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019156092624">
      ⁠</a>21.2.1. Compatibility</h2></div></div></div><div class="para">
				Previous implementations of XTS locate the Business Activity Protocol classes in the <span class="package">com.arjuna.mw.wst</span> package. In the current implementation, these classes are located in the <span class="package">com.arjuna.mw.wst11</span> package.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref-UserBusinessActivity">
      ⁠</a>21.2.2. UserBusinessActivity</h2></div></div></div><div class="para">
				<code class="classname">com.arjuna.wst11.UserBusinessActivity</code> is the class that most clients employ. A client begins a new business activity by first obtaining a <code class="classname">UserBusinessActivity</code> from the <code class="classname">UserBusinessActivityFactory</code>. This class isolates them from the underlying protocol-specific aspects of the XTS implementation. A UserBusinessActivity does not represent a specific business activity. Instead, it provides access to an implicit per-thread activity. Therefore, all of the <code class="classname">UserBusinessActivity</code> methods implicitly act on the current thread of control.
			</div><div class="variablelist"><p class="title"><strong>Methods</strong></p><dl class="variablelist"><dt><span class="term"><code class="methodname">begin</code></span></dt><dd><div class="para">
							Begins a new activity, associating it with the invoking thread.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">timeout</span></dt><dd><div class="para">
										The interval, in milliseconds, after which an activity times out. Optional.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">WrongStateException</code></span></dt><dd><div class="para">
										The thread is already associated with a business activity.
									</div></dd></dl></div></dd><dt><span class="term"><code class="methodname">close</code></span></dt><dd><div class="para">
							First, all Coordinator Completion participants enlisted in the activity are requested to complete the activity. Next all participants, whether they enlisted for Coordinator or Participant Completion, are requested to close the activity. If any of the Coordinator Completion participants fails to complete at the first stage then all completed participants are asked to compensate the activity while any remaining uncompleted participants are requested to cancel the activity.
						</div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term">UnknownTransactionException</span></dt><dd><div class="para">
										No activity is associated with the invoking thread.
									</div></dd><dt><span class="term">TransactionRolledBackException</span></dt><dd><div class="para">
										The activity has been canceled because one of the Coordinator Completion participants failed to complete. This exception may also thrown if one of the Participant Completion participants has not completed before the client calls close.
									</div></dd></dl></div></dd><dt><span class="term">cancel</span></dt><dd><div class="para">
							Terminates the business activity. All Participant Completion participants enlisted in the activity which have already completed are requested to compensate the activity. All uncompleted Participant Completion participants and all Coordinator Completion participants are requested to cancel the activity.
						</div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">UnknownTransactionException</code></span></dt><dd><div class="para">
										No activity is associated with the invoking thread. Any participants that previous completed are directed to compensate their work.
									</div></dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019119101088">
      ⁠</a>21.2.3. UserBusinessActivityFactory</h2></div></div></div><div class="para">
				Use the <code class="methodname">getuserbusinessActivity</code> method to obtain a <a class="xref" href="sec-xts-api.html#ref-UserBusinessActivity">Section 21.2.2, “UserBusinessActivity”</a> instance from a <code class="classname">userBusinessActivityFactory</code>.
			</div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="ref-BusinessActivityManager">
      ⁠</a>21.2.4. BusinessActivityManager</h2></div></div></div><div class="para">
				<span class="package">com.arjuna.mw.wst11.BusinessActivityManager</span> is the class that web services typically employ. Defines how a web service interacts with the underlying business activity service implementation. A <code class="classname">BusinessActivityManager</code> does not represent a specific activity. Instead, it provides access to an implicit per-thread activity.
			</div><div class="variablelist"><p class="title"><strong>Methods</strong></p><dl class="variablelist"><dt><span class="term"><code class="methodname">currentTransaction</code></span></dt><dd><div class="para">
							Returns the <code class="systemitem">TxContext</code> for the current business activity, or <code class="literal">NULL</code> if there is no <code class="systemitem">TxContext</code>. The returned value can be used to enable multiple threads to execute within the scope of the same business activity. Calling the <code class="methodname">currenTransaction</code> method does not dissociate the current thread from its activity.
						</div></dd><dt><span class="term"><code class="methodname">suspend</code></span></dt><dd><div class="para">
							Dissociates a thread from any current business activity, so that it can perform work not associated with a specific activity. The <code class="methodname">suspend</code> method returns a <code class="systemitem">TxContext</code> instance, which is a handle on the activity. The thread is then no longer associated with any activity.
						</div></dd><dt><span class="term"><code class="methodname">resume</code></span></dt><dd><div class="para">
							Associates or re-associates a thread with a business activity, using its <code class="systemitem">TxContext</code>. Before associating or re-associating the thread, it is disassociated from any business activity with which it is currently associated. If the <code class="systemitem">TxContext</code> is <code class="literal">NULL</code>, the thread is disassociated with all business activities, as though the <code class="methodname">suspend</code> method were called.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">txContext</span></dt><dd><div class="para">
										A TxContext instance as returned by <code class="methodname">suspend</code>, identifying the transaction to be resumed.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term"><code class="systemitem">UnknownTransactionException</code></span></dt><dd><div class="para">
										The business activity to which the <code class="systemitem">TxContext</code> refers is invalid in the scope of the invoking thread.
									</div></dd></dl></div></dd><dt><span class="term"><code class="varname">enlistForBusinessAgreementWithParticipantCompletion</code></span></dt><dd><div class="para">
							Enroll the specified participant with current business activity, causing it to participate in the <code class="systemitem">BusinessAgreementWithParticipantCompletion</code> protocol. A unique identifier for the participant is also required.
						</div><div class="para">
							The return value is an instance of BAParticipantManager which can be used to notify the coordinator of changes in the participant state. In particular, since the participant is enlisted for the Participant Completion protocol it is expected to call the completed method of this returned instance when it has completed all the work it expects to do in this activity and has made all its changes permanent. Alternatively, if the participant does not need to perform any compensation actions should some other participant fail it can leave the activity by calling the exit method of the returned BAParticipantManager instance.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">participant</span></dt><dd><div class="para">
										An implementation of interface <code class="interfacename">BusinessAgreementWithParticipantCompletionParticipant</code> whose <code class="methodname">close</code>, <code class="methodname">cancel</code>, and <code class="methodname">compensate</code> methods are called when the corresponding coordinator message is received.
									</div></dd><dt><span class="term">id</span></dt><dd><div class="para">
										A unique identifier for the participant. The value of this String should differ for each enlisted participant. It should also be possible for a given identifier to determine that the participant belongs to the enlisting web service rather than some other web service deployed to the same container.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term">UnknownTransactionException</span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd><dt><span class="term">WrongStateException</span></dt><dd><div class="para">
										The transaction is not in a state where new participants may be enrolled, as when it is terminating.
									</div></dd></dl></div></dd><dt><span class="term"><code class="varname">enlistForBusinessAgreementWithCoordinatorCompletion</code></span></dt><dd><div class="para">
							Enroll the specified participant with current activity, causing it to participate in the <code class="systemitem">BusinessAgreementWithCoordinatorCompletion</code> protocol. A unique identifier for the participant is also required.
						</div><div class="para">
							The return value is an instance of <code class="interfacename">BAParticipantManager</code> which can be used to notify the coordinator of changes in the participant state. Note that in this case it is an error to call the <code class="methodname">completed</code> method of this returned instance. With the Coordinator Completion protocol the participant is expected to wait until its <code class="methodname">completed</code> method is called before it makes all its changes permanent. Alternatively, if the participant determines that it has no changes to make, it can leave the activity by calling the <code class="methodname">exit</code> method of the returned <code class="interfacename">BAParticipantManager</code> instance.
						</div><div class="variablelist"><p class="title"><strong>Parameters</strong></p><dl class="variablelist"><dt><span class="term">participant</span></dt><dd><div class="para">
										An implementation of interface BusinessAgreementWithCoordinatorCompletionParticipant whose completed, close, cancel and compensate methods are called when the corresponding coordinator message is received.
									</div></dd><dt><span class="term">id</span></dt><dd><div class="para">
										A unique identifier for the participant. The value of this String should differ for each enlisted participant. It should also be possible for a given identifier to determine that the participant belongs to the enlisting web service rather than some other web service deployed to the same container.
									</div></dd></dl></div><div class="variablelist"><p class="title"><strong>Exceptions</strong></p><dl class="variablelist"><dt><span class="term">&gt;UnknownTransactionException</span></dt><dd><div class="para">
										No transaction is associated with the invoking thread.
									</div></dd><dt><span class="term">WrongStateException</span></dt><dd><div class="para">
										The transaction is not in a state where new participants may be enrolled, as when it is terminating.
									</div></dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="idm140019159833808">
      ⁠</a>21.2.5. BusinessActivityManagerFactory</h2></div></div></div><div class="para">
				Use the <code class="methodname">getBusinessActivityManager</code> method to obtain a <a class="xref" href="sec-xts-api.html#ref-BusinessActivityManager">Section 21.2.4, “BusinessActivityManager”</a> instance from a <code class="classname">BusinessActivityManagerFactory</code>.
			</div></div></div></div></body></html>