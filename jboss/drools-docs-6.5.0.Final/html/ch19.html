<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 19. Authoring Rule Assets</title><link rel="stylesheet" type="text/css" href="css/jbossorg.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><link rel="home" href="index.html" title="Drools Documentation"/><link rel="up" href="pt05.html" title="Part V. Drools Workbench"/><link rel="prev" href="ch18.html" title="Chapter 18. Workbench (General)"/><link rel="next" href="ch20.html" title="Chapter 20. Workbench Integration"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="ch18.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="ch20.html"><strong>Next</strong></a></li></ul><div class="chapter" title="Chapter 19. Authoring Rule Assets"><div class="titlepage"><div><div><h2 class="title"><a id="drools.AuthoringAssets"/>Chapter 19. Authoring Rule Assets</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch19.html#drools.NewPackage">19.1. Creating a package</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#d0e20580">19.1.1. Empty package</a></span></dt><dt><span class="section"><a href="ch19.html#d0e20599">19.1.2. Copy, Rename and Delete Packages</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditor">19.2. Business rules with the guided editor</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorParts">19.2.1. Parts of the Guided Rule Editor</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorLHS">19.2.2. The "WHEN" (left-hand side) of a Rule</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorRHS">19.2.3. The "THEN" (right-hand side) of a Rule</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorOptionalAttributes">19.2.4. Optional attributes</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorToolbar">19.2.5. Pattern/Action toolbar</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorEnumerations">19.2.6. User driven drop down lists</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorDSL">19.2.7. Augmenting with DSL sentences</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleEditorComplexExample">19.2.8. A more complex example:</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.GuidedRuleTemplateEditor">19.3. Templates of assets/rules</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.GuidedRuleTemplateEditorCreating">19.3.1. Creating a rule template</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleTemplateEditorDefining">19.3.2. Define the template</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleTemplateEditorDefiningData">19.3.3. Defining the template data</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedRuleTemplateEditorGeneratedDRL">19.3.4. Generated DRL</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditor">19.4. Guided decision tables (web based)</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorTypesOfDecisionTable">19.4.1. Types of decision table</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorConcepts">19.4.2. Main components\concepts</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorDefining">19.4.3. Defining a web based decision table</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorRuleDefinitions">19.4.4. Rule definition</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorAuditLog">19.4.5. Audit Log</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTableEditorVerification">19.4.6. Real Time Validation and Verification</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.GuidedDecisionTreeEditor">19.5. Guided Decision Trees</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#d0e21644">19.5.1. The initial editor layout</a></span></dt><dt><span class="section"><a href="ch19.html#d0e21692">19.5.2. First steps</a></span></dt><dt><span class="section"><a href="ch19.html#d0e21730">19.5.3. Editing Data Object nodes</a></span></dt><dt><span class="section"><a href="ch19.html#d0e21743">19.5.4. Editing Field Constraint nodes</a></span></dt><dt><span class="section"><a href="ch19.html#d0e21756">19.5.5. Editing Action nodes</a></span></dt><dt><span class="section"><a href="ch19.html#d0e21789">19.5.6. Managing the tree</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.XLSDecisionTable">19.6. Spreadsheet decision tables</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedScoreCardEditor">19.7. Scorecards</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.GuidedScoreCardEditorSetupParameters">19.7.1. (a) Setup Parameters</a></span></dt><dt><span class="section"><a href="ch19.html#drools.GuidedScoreCardEditorCharacteristics">19.7.2. (b) Characteristics</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.TestScenarioEditor">19.8. Test Scenario</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.KSessionSelector">19.8.1. Knowledge Session Selector</a></span></dt><dt><span class="section"><a href="ch19.html#drools.TestScenarioEditorGivenSection">19.8.2. Given Section</a></span></dt><dt><span class="section"><a href="ch19.html#drools.TestScenarioEditorExpectedSection">19.8.3. Expect Section</a></span></dt><dt><span class="section"><a href="ch19.html#drools.TestScenarioEditorGlobalSection">19.8.4. Global Section</a></span></dt><dt><span class="section"><a href="ch19.html#drools.TestScenarioEditorInpuotSection">19.8.5. New Input Section</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.FunctionEditor">19.9. Functions</a></span></dt><dt><span class="section"><a href="ch19.html#drools.DSLEditor">19.10. DSL editor</a></span></dt><dt><span class="section"><a href="ch19.html#drools.EnumerationEditor">19.11. Data enumerations (drop down list configurations)</a></span></dt><dd><dl><dt><span class="section"><a href="ch19.html#drools.AdvancedEnumConcepts">19.11.1. Advanced enumeration concepts</a></span></dt></dl></dd><dt><span class="section"><a href="ch19.html#drools.DRLEditor">19.12. Technical rules (DRL)</a></span></dt></dl></div><div class="section" title="19.1. Creating a package"><div class="titlepage"><div><div><h2 class="title"><a id="drools.NewPackage"/>19.1. Creating a package</h2></div></div></div><p>Configuring packages is generally something that is done once, and by
  someone with some experience with rules/models. Generally speaking, very few
  people will need to configure packages, and once they are setup, they can be
  copied over and over if needed. Package configuration is most definitely a
  technical task that requires the appropriate expertise.</p><p>All assets live in "packages" in Drools Workbench - a package is like a
  folder (it also serves as a "namespace"). A home folder for rule assets to
  live in. Rules in particular need to know what the fact model is, what the
  namespace is etc.</p><p>So while rules (and assets in general) can appear in any number of
    categories, they only live in one package. If you think of Drools Workbench as a
  file system, then each package is a folder, and the assets live in that
  folder - as one big happy list of files.</p><p>To create an empty package select "Package" from the "New item" menu.</p><div class="figure"><a id="d0e20574"/><p class="title"><strong>Figure 19.1. New Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/newItemMenu.png" align="middle" alt="New Package"/></div></div></div><br class="figure-break"/><div class="section" title="19.1.1. Empty package"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20580"/>19.1.1. Empty package</h3></div></div></div><p>An empty package can be created by simply specifying a name.</p><div class="figure"><a id="d0e20585"/><p class="title"><strong>Figure 19.2. New empty Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/newItem-package.png" align="middle" alt="New empty Package"/></div></div></div><br class="figure-break"/><p>Once the Package has been created it will appear in the Project Explorer.</p><div class="figure"><a id="d0e20593"/><p class="title"><strong>Figure 19.3. Project Explorer showing new Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/newItem-package-project-explorer.png" align="middle" alt="Project Explorer showing new Package"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.1.2. Copy, Rename and Delete Packages"><div class="titlepage"><div><div><h3 class="title"><a id="d0e20599"/>19.1.2. Copy, Rename and Delete Packages</h3></div></div></div><p>As already mentioned on <a class="link" href="ch18.html#wb.ProjectExplorerCopyRenameDeleteActions" title="18.7.4.6. Copy, Rename, Delete and Download Actions">Project Explorer</a>
      section, users can copy, rename or delete a package directly from Project Explorer.</p><p>As you can see in the following screenshots, those operations behave very similar to counter part actions in
      most workbench editors.</p><div class="figure"><a id="d0e20609"/><p class="title"><strong>Figure 19.4. Copying a Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/package-copy.png" align="middle" alt="Copying a Package"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e20615"/><p class="title"><strong>Figure 19.5. Renaming a Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/package-rename.png" align="middle" alt="Renaming a Package"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e20621"/><p class="title"><strong>Figure 19.6. Excluding a Package</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/package-delete.png" align="middle" alt="Excluding a Package"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.2. Business rules with the guided editor"><div class="titlepage"><div><div><h2 class="title"><a id="drools.GuidedRuleEditor"/>19.2. Business rules with the guided editor</h2></div></div></div><p>Guided Rules are authored with a UI to control and prompt user input based on knowledge of the object
    model.</p><p>This can also be augmented with DSL sentences.</p><div class="section" title="19.2.1. Parts of the Guided Rule Editor"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorParts"/>19.2.1. Parts of the Guided Rule Editor</h3></div></div></div><p>The Guided Rule Editor is composed of three main sections.</p><p>The following diagram shows the editor in action. The following descriptions apply to the lettered boxes in
    the diagram:-</p><div class="figure"><a id="d0e20641"/><p class="title"><strong>Figure 19.7. The guided BRL editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedEditor-overview.png" align="middle" alt="The guided BRL editor"/></div></div></div><br class="figure-break"/><p>A : The different parts of a rule:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The "WHEN" part, or conditions, of the rule.</p></li><li class="listitem"><p>The "THEN" action part of the rule.</p></li><li class="listitem"><p>Optional attributes that may effect the operation of the rule.</p></li></ul></div></div><div class="section" title="19.2.2. The &#34;WHEN&#34; (left-hand side) of a Rule"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorLHS"/>19.2.2. The "WHEN" (left-hand side) of a Rule</h3></div></div></div><p>B : This shows a pattern which is declaring that the rule is looking for a "LoanApplication" fact (the fields
    are listed below, in this case none). Another pattern, "Applicant", is listed below "LoanApplication". Fields
    "creditRating" and "applicationDate" are listed. Clicking on the fact name ("LoanApplication") will pop-up a list of
    options to add to the fact declaration:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Add more fields (e.g. their "location").</p></li><li class="listitem"><p>Assign a variable name to the fact (which you can use later on if needs be)</p></li><li class="listitem"><p>Add "multiple field" constraints - i.e. constraints that span across fields (e.g. age &gt; 42 or risk
          &gt; 2).</p></li></ul></div><p>C : The "minus" icon ("[-]") indicates you can remove something. In this case it would remove the whole
    "LoanApplication" fact declaration. Depending upon the placement of the icon different components of the rule
    declaration can be removed, for example a Fact Pattern, Field Constraint, other Conditional Element ("exists", "not
    exists", "from" etc) or an Action.</p><p>D : The "plus" icon ("+") allows you to add more patterns to the condition or the action part of the rule, or
    more attributes. In all cases, a popup option box is provided. For the "WHEN" part of the rule, you can choose from
    a list of Conditional Elements to add: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>A Constraint on a Fact: it will give you a list of facts.</p></li><li class="listitem"><p>"The following does not exist": the fact plus constraints must not exist.</p></li><li class="listitem"><p>"The following exists": at least one match should exist (but there only needs to be one - it will not
          trigger for each match).</p></li><li class="listitem"><p>"Any of the following are true": any of the patterns can match (you then add patterns to these higher
          level patterns).</p></li><li class="listitem"><p>"From": this will insert a new From Conditional Element to the rule.</p></li><li class="listitem"><p>"From Accumulate": this will insert a new Accumulate Conditional Element to the rule.</p></li><li class="listitem"><p>"From Collect": this will insert a new Collect Conditional Element to the rule.</p></li><li class="listitem"><p>"From Entry-point": this allows you to define an Entry Point for the pattern.</p></li><li class="listitem"><p>"Free Form DRL": this will let you insert a free chunk of DRL.</p></li></ul></div><p> If you just put a fact (like is shown above) then all the patterns are combined together so they
    are all true ("and").</p><p>E : This shows the constraint for the "creditRating" field. Looking from left to right you find:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The field name: "creditRating". Clicking on it you can assign a variable name to it, or access nested
          properties of it.</p></li><li class="listitem"><p>A list of constraint operations ("equal to" being selected): The content of this list changes depending
          on the field's data type.</p></li><li class="listitem"><p>The value field: It could be one of the following:-</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A literal value: depending on the field's data type different components will be displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>String -&gt; Textbox</p></li><li class="listitem"><p>Any numerical value -&gt; Textbox restricting entry to values valid for the numerical sub-type
                  (e.g. a byte can hold values from -128 to 127). BigDecimal and BigInteger data-types are also
                  supported. Please ensure the appropriate Class has been imported in the Package configuration. The
                  import will be added automatically if a POJO model has been uploaded that exposes an accessor or
                  mutator for a BigDecimal or BigInteger field. BigDecimal values are automatically suffixed with "B"
                  indicating to the underlying Engine that the literal value should be interpreted as a BigDecimal.
                  BigIntegers are suffixed with "I". The user does not need to enter the suffix.</p></li><li class="listitem"><p>Date -&gt; Calendar</p></li><li class="listitem"><p>Enumeration -&gt; Listbox</p></li><li class="listitem"><p>Boolean -&gt; Checkbox</p></li></ul></div></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li><li class="listitem"><p>An Expression - this will let you use an Expression Builder to build up a full mvel expression. (At
              the moment only basic expressions are supported)</p></li></ol></div></li></ul></div><p>F : This shows the constraint for the "applicationDate" field. Looking from left to right you find:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The field name: "applicationDate".</p></li><li class="listitem"><p>A list of constraint operations: "after" being selected.</p></li><li class="listitem"><p>A "clock" icon. Since the "applicationDate" is a Date data-type the list of available operators includes
          those relating to Complex Event Processing (CEP). When a CEP operator is used this additional icon is
          displayed to allow you to enter additional CEP operator parameters. Clicking the "clock" will cycle the
          available combinations of CEP operator parameters.</p></li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Complex Event Processing operators are also available when the Fact has been declared as an event. Refer
          to the "Fact Model" chapter of this user-guide for details on how to add annotations to your Fact
          model. Events
          have access to the full range of CEP operators; Date field-types are restricted to "after", "before" and
          "coincides".</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Facts annotated as Events can also have CEP sliding windows defined.</p></div><div class="section" title="19.2.2.1. Adding Patterns"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedRuleEditorAddingPatterns"/>19.2.2.1. Adding Patterns</h4></div></div></div><p>When clicking on the + button of the WHEN section, a new popup will appear letting you to add a new Pattern
      to the Rule. The popup will looks similar to the image below. In this popup you could select the type of Pattern
      to add by selecting one of the list items. In the list you will have an entry for each defined Fact Type, in
      addition to the already mentioned Conditional Elements like "exists", "doesn't exist", "from", "collect",
      "accumulate", "from entry-point" and "free form DRL". Once you have selected one of these elements, you can add a
      new Pattern by clicking on the "Ok" button. The new pattern will be added at the bottom of the rule's left hand
      side. If you want to choose a different position, you can use the combobox placed at the top of the popup.</p><p>You can also open this popup by clicking in the [+] button from a Pattern's action toolbar. If that is the
      case, the pop-up that appears wouldn't constraint the position combobox, because the new Pattern will be added just
      after the Pattern where you clicked.</p><div class="figure"><a id="d0e20770"/><p class="title"><strong>Figure 19.8. Adding Patterns</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedLHSPatterns.png" align="middle" alt="Adding Patterns"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.2.2.2. Adding constraints"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedRuleEditorAddingConstraints"/>19.2.2.2. Adding constraints</h4></div></div></div><p>The below dialog is what you will get when you want to add constraints to a fact. In the top half are the
      simple options: you can either add a field constraint straight away (a list of fields of the applicable fact will
      be shown), or you can add a "Multiple field constraint" using AND or OR operands. In the bottom half of the window
      you have the Advanced options: you can add a formula (which resolves to True or False - this is like in the
      example above: "... salary &gt; (2500 * 4.1)". You can also assign a Variable name to the fact (which means you
      can then access that variable on the action part of the rule, to set a value etc).</p><div class="figure"><a id="d0e20781"/><p class="title"><strong>Figure 19.9. Adding constraints</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedLHSConstraints.png" align="middle" alt="Adding constraints"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.2.3. The &#34;THEN&#34; (right-hand side) of a Rule"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorRHS"/>19.2.3. The "THEN" (right-hand side) of a Rule</h3></div></div></div><p>H : This shows an "action" of the rule, the Right Hand Side of a rule consists in a list of actions. In this
    case, we are updating the "explanation" field of the "LoanApplication" fact. There are quite a few other types of
    actions you can use:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Insert a completely new Fact and optionally set a field on the Fact.</p><p>The value field can be one of the following:-</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A literal value: depending on the field's data type different components will be displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>String -&gt; Textbox</p></li><li class="listitem"><p>Any numerical value -&gt; Textbox restricting entry to values valid for the numerical sub-type
                  (e.g. a byte can hold values from -128 to 127). BigDecimal and BigInteger data-types are also
                  supported. Please ensure the appropriate Class has been imported in the Package configuration. The
                  import will be added automatically if a POJO model has been uploaded that exposes an accessor or
                  mutator for a BigDecimal or BigInteger field. BigDecimal values are automatically suffixed with "B"
                  indicating to the underlying Engine that the literal value should be interpreted as a BigDecimal.
                  BigIntegers are suffixed with "I". The user does not need to enter the suffix.</p></li><li class="listitem"><p>Date -&gt; Calendar</p></li><li class="listitem"><p>Enumeration -&gt; Listbox</p></li><li class="listitem"><p>Boolean -&gt; Checkbox</p></li></ul></div></li><li class="listitem"><p>A variable bound to a Fact or Field in the left-hand side. The data-type of the field being set must
              match the data-type of the variable.</p></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li></ol></div></li><li class="listitem"><p>Logically insert a completely new Fact (see "Truth Maintenance" in the Expert documentation) and
          optionally set a field on the Fact.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A literal value: depending on the field's data type different components will be displayed:</p><p>The value field can be one of the following:-</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p>A literal value: depending on the field's data type different components will be
                  displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>String -&gt; Textbox</p></li><li class="listitem"><p>Any numerical value -&gt; Textbox restricting entry to values valid for the numerical
                      sub-type (e.g. a byte can hold values from -128 to 127). BigDecimal and BigInteger data-types are
                      also supported. Please ensure the appropriate Class has been imported in the Package
                      configuration. The import will be added automatically if a POJO model has been uploaded that
                      exposes an accessor or mutator for a BigDecimal or BigInteger field. BigDecimal values are
                      automatically suffixed with "B" indicating to the underlying Engine that the literal value should
                      be interpreted as a BigDecimal. BigIntegers are suffixed with "I". The user does not need to enter
                      the suffix.</p></li><li class="listitem"><p>Date -&gt; Calendar</p></li><li class="listitem"><p>Enumeration -&gt; Listbox</p></li><li class="listitem"><p>Boolean -&gt; Checkbox</p></li></ul></div></li><li class="listitem"><p>A variable bound to a Fact or Field in the left-hand side. The data-type of the field being set
                  must match the data-type of the variable.</p></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li></ol></div></li><li class="listitem"><p>A variable bound to a Fact or Field in the left-hand side. The data-type of the field being set must
              match the data-type of the variable.</p></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li></ol></div></li><li class="listitem"><p>Modify a field of an existing fact (which tells the engine the fact has changed).</p><p>The value field can be one of the following:-</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A literal value: depending on the field's data type different components will be displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>String -&gt; Textbox</p></li><li class="listitem"><p>Any numerical value -&gt; Textbox restricting entry to values valid for the numerical sub-type
                  (e.g. a byte can hold values from -128 to 127). BigDecimal and BigInteger data-types are also
                  supported. Please ensure the appropriate Class has been imported in the Package configuration. The
                  import will be added automatically if a POJO model has been uploaded that exposes an accessor or
                  mutator for a BigDecimal or BigInteger field. BigDecimal values are automatically suffixed with "B"
                  indicating to the underlying Engine that the literal value should be interpreted as a BigDecimal.
                  BigIntegers are suffixed with "I". The user does not need to enter the suffix.</p></li><li class="listitem"><p>Date -&gt; Calendar</p></li><li class="listitem"><p>Enumeration -&gt; Listbox</p></li><li class="listitem"><p>Boolean -&gt; Checkbox</p></li></ul></div></li><li class="listitem"><p>A variable bound to a Fact or Field in the left-hand side. The data-type of the field being set must
              match the data-type of the variable.</p></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li></ol></div></li><li class="listitem"><p>Set a field on a fact (in which case the engine doesn't know about the change - normally because you are
          setting a result).</p><p>The value field can be one of the following:-</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A literal value: depending on the field's data type different components will be displayed:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>String -&gt; Textbox</p></li><li class="listitem"><p>Any numerical value -&gt; Textbox restricting entry to values valid for the numerical sub-type
                  (e.g. a byte can hold values from -128 to 127). BigDecimal and BigInteger data-types are also
                  supported. Please ensure the appropriate Class has been imported in the Package configuration. The
                  import will be added automatically if a POJO model has been uploaded that exposes an accessor or
                  mutator for a BigDecimal or BigInteger field. BigDecimal values are automatically suffixed with "B"
                  indicating to the underlying Engine that the literal value should be interpreted as a BigDecimal.
                  BigIntegers are suffixed with "I". The user does not need to enter the suffix.</p></li><li class="listitem"><p>Date -&gt; Calendar</p></li><li class="listitem"><p>Enumeration -&gt; Listbox</p></li><li class="listitem"><p>Boolean -&gt; Checkbox</p></li></ul></div></li><li class="listitem"><p>A variable bound to a Fact or Field in the left-hand side. The data-type of the field being set must
              match the data-type of the variable.</p></li><li class="listitem"><p>A "formula": this is an expression which is calculated (this is for advanced users only)</p></li></ol></div></li><li class="listitem"><p>Delete a fact from the Engine's Working Memory.</p></li><li class="listitem"><p>Add Facts to existing global lists.</p></li><li class="listitem"><p>Call a method on a variable.</p></li><li class="listitem"><p>Write a chunk of free form code.</p></li></ul></div></div><div class="section" title="19.2.4. Optional attributes"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorOptionalAttributes"/>19.2.4. Optional attributes</h3></div></div></div><p>The attributes section of a rule provides the means to define metadata and attributes (such as "salience",
    "no-loop" etc).</p><p>Click on the "+" icon to add a new metadata or attribute definition. Each defined will appear listed in this
    section.</p><p>Click on the "-" icon beside each metadata or attribute to remove it.</p><div class="section" title="19.2.4.1. Salience"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedRuleEditorOptionalAttributesSalience"/>19.2.4.1. Salience</h4></div></div></div><p>
			Each rule has a salience value which is an integer value that defaults to zero. The salience value 
			represents the priority of the rule with higher salience values representing higher priority. Salience 
			values can be positive or negative.
		</p></div></div><div class="section" title="19.2.5. Pattern/Action toolbar"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorToolbar"/>19.2.5. Pattern/Action toolbar</h3></div></div></div><p>G : Next to each Pattern or Action you will find a toolbar containing 3 buttons.</p><p>The first "+" icon lets you insert a new Pattern/Action at an arbitrary location. The other "+" icons allow
    you to insert a new Pattern/Action below that you have selected.</p><p>The remaining arrow icons allow you to move the current Pattern/Action up or down.</p></div><div class="section" title="19.2.6. User driven drop down lists"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorEnumerations"/>19.2.6. User driven drop down lists</h3></div></div></div><div class="figure"><a id="d0e20965"/><p class="title"><strong>Figure 19.10. Data enumeration showing as a drop down list</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/EnumDropDown.png" align="middle" alt="Data enumeration showing as a drop down list"/></div></div></div><br class="figure-break"/><p>Note that is it possible to limit field values to items in a pre-configured list. This list is either defined
    by a Java enumeration or configured as part of the package (using a data enumeration to provide values for the drop
    down list). These values can be a fixed list, or (for example) loaded from a database. This is useful for codes, and
    other fields where there are set values. It is also possible to have what is displayed on screen, in a drop down, be
    different to the value (or code) used in a rule. See the section on data enumerations for how these are
    configured.</p><p>It is possible to define a list of values for one field that are dependent upon the value of one or more other
    fields, on the same Fact (e.g. a list of "Cities" depending on the selected "Country region"). Please refer to the
    section on "Enumerations" for more information.</p></div><div class="section" title="19.2.7. Augmenting with DSL sentences"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorDSL"/>19.2.7. Augmenting with DSL sentences</h3></div></div></div><p>If the package the rule is part of has a DSL configuration, when you add conditions or actions, then it
    will provide a list of "DSL Sentences" which you can choose from - when you choose one, it will add a row to the
    rule - where the DSL specifies values come from a user, then a edit box (text) will be shown (so it ends up looking
    a bit like a form). This is optional, and there is another DSL editor. Please note that the DSL capabilities in this
    editor are slightly less then the full set of DSL features (basically you can do [when] and [then] sections of the
    DSL only - which is no different to drools 3 in effect).</p><p>The following diagram shows the DSL sentences in action in the guided editor:</p><div class="figure"><a id="d0e20982"/><p class="title"><strong>Figure 19.11. DSL in guided editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDSL.png" align="middle" alt="DSL in guided editor"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.2.8. A more complex example:"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleEditorComplexExample"/>19.2.8. A more complex example:</h3></div></div></div><div class="figure"><a id="d0e20991"/><p class="title"><strong>Figure 19.12. A more complex BRL example</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedComplex.png" align="middle" alt="A more complex BRL example"/></div></div></div><br class="figure-break"/><p>In the above example, you can see how to use a mixture of Conditional Elements, literal values, and formulas.
    The rule has 4 "top level" Patterns and 1 Action. The "top level" Patterns are:</p><div class="orderedlist"><ol class="orderedlist" type="1" compact="compact"><li class="listitem"><p>A Fact Pattern on Person. This Pattern contains two field constraints: one for birthDate field and the
        other one is a formula. Note that the value of the birthDate restriction is selected from a calendar. Another
        thing to note is that you can make calculations and use nested fields in the formula restriction (i.e.
        car.brand). Finally, we are setting a variable name ($p) to the Person Fact Type. You can then use this variable
        in other Patterns.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The generated DRL from this Pattern will be:</p><pre><code class="no-highlight">$p : Person( birthDate &lt; "19-Dec-1982" , eval( car.brand == "Ford" &amp;&amp; salary &gt; (2500 * 4.1) ))</code></pre></div></li><li class="listitem"><p>A From Pattern. This condition will create a match for every Address whose street name is "Elm St." from
        the Person's list of addresses. The left side of the from is a regular Fact Pattern and the right side is an
        Expression Builder that let us inspect variable's fields.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The generated DRL from this Pattern will be: <code class="code">Address( street == "Elm St." ) from
          $p.addresses</code></p></div></li><li class="listitem"><p>A "Not Exist" Conditional Element. This condition will match when its content doesn't create a match. In
        this case, its content is a regular Fact Pattern (on Person). In this Fact Pattern you can see how variables
        ($p) could be used inside a formula value.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The generated DRL from this Pattern will be: <code class="code">not Person( salary == ( $p.salary * 2 )
          )</code></p></div></li><li class="listitem"><p>A "From Accumulate" Conditional Element. This is maybe one of the most complex Patterns you can use. It
        consist in a Left Pattern (It must be a Fact Pattern. In this case is a Number Pattern. The Number is named
        $totalAddresses), a Source Pattern (Which could be a Fact Pattern, From, Collect or Accumulate conditional
        elements. In this case is an Address Pattern Restriction with a field restriction in its zip field) and a
        Formula Section where you can use any built-in or custom Accumulate Function (in this example a count() function
        is used). Basically, this Conditional Element will count the addresses having a zip code of 43240 from the
        Person's list of addresses.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The generated DRL from this Pattern will be: <code class="code">$totalAddresses : Number() from accumulate ($a :
          Address( zipCode == " 43240") from $p.addresses, count($a)) </code></p></div></li></ol></div></div></div><div class="section" title="19.3. Templates of assets/rules"><div class="titlepage"><div><div><h2 class="title"><a id="drools.GuidedRuleTemplateEditor"/>19.3. Templates of assets/rules</h2></div></div></div><p>The guided rule editor is great when you need to define a single rule,
  however if you need to define multiple rules following the same structure
  but with different values in field constraints or action sections a "Rule
  Template" is a valuable asset. Rule templates allow the user to define a
  rule structure with place-holders for values that are to be interpolated
  from a table of data. Literal values, formulae and expressions can also
  continue to be used.</p><p>Rule Templates can often be used as an alternative for Decision Tables
    in Drools Workbench.</p><div class="section" title="19.3.1. Creating a rule template"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleTemplateEditorCreating"/>19.3.1. Creating a rule template</h3></div></div></div><p>To create a template for a rule simply select the "Guided Rule
    Template" from the "New Item" menu.</p></div><div class="section" title="19.3.2. Define the template"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleTemplateEditorDefining"/>19.3.2. Define the template</h3></div></div></div><p>Once a rule template has been created the editor is displayed. The
    editor takes the form of the standard guided editor explained in more
    detail under the "Rule Authoring" section. As the rule is constructed you
    are given the ability to insert "Template Keys" as place-holders within
    your field constraints and action sections. Literal values, formulae and
    expressions can continue to be used as in the standard guided
    editor.</p><div class="figure"><a id="d0e21049"/><p class="title"><strong>Figure 19.13. Template Key popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template1.png" align="middle" alt="Template Key popup"/></div></div></div><br class="figure-break"/><p>The following screenshot illustrates a simple rule that has been
    defined with a "Template Key" for the applicants' maximum age, minimum age
    and credit rating. The template keys have been defined as "$max_age",
    "$min_age" and "$cr" respectively.</p><div class="figure"><a id="d0e21057"/><p class="title"><strong>Figure 19.14. Rule template in the guided editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template2.png" align="middle" alt="Rule template in the guided editor"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.3.3. Defining the template data"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleTemplateEditorDefiningData"/>19.3.3. Defining the template data</h3></div></div></div><p>When you have completed the definition of your rule template you
    need to enter the data that will be used to interpolate the "Template Key"
    place-holders. Drools Workbench provides the facility to enter data in a
    flexible grid within the guided editor screen. The data entry section is located on the Data tab within the editor.</p><p>The rule template data grid is very flexible; with different pop-up
    editors for the underlying fields' data-types. Columns can be resized and
    sorted; and cells can be merged and grouped to facilitate rapid data
    entry.</p><p>One row of data interpolates the "Template Key" place-holders for a
    single rule; thus one row becomes one rule.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>If any cells for a row are left blank a rule for the applicable
      row is not generated.</p></div><div class="figure"><a id="d0e21075"/><p class="title"><strong>Figure 19.15. Template data grid</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template3.png" align="middle" alt="Template data grid"/></div></div></div><br class="figure-break"/><div class="section" title="19.3.3.1. Cell merging"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedRuleTemplateEditorCellMerging"/>19.3.3.1. Cell merging</h4></div></div></div><p>The icon in the top left of the grid toggles cell merging on and
      off. When cells are merged those in the same column with identical
      values are merged into a single cell. This simplifies changing the value
      of multiple cells that shared the same original value. When cells are
      merged they also gain an icon in the top-left of the cell that allows
      rows spanning the merged cell to be grouped.</p><div class="figure"><a id="d0e21086"/><p class="title"><strong>Figure 19.16. Cell merging</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template4.png" align="middle" alt="Cell merging"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.3.3.2. Cell grouping"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedRuleTemplateEditorCellGrouping"/>19.3.3.2. Cell grouping</h4></div></div></div><p>Cells that have been merged can be further collapsed into a single
      row. Clicking the [+\-] icon in the top left of a merged cell collapses
      the corresponding rows into a single entry. Cells in other columns
      spanning the collapsed rows that have identical values are shown
      unchanged. Cells in other columns spanning the collapsed rows that have
      different values are highlighted and the first value displayed.</p><div class="figure"><a id="d0e21097"/><p class="title"><strong>Figure 19.17. Cell grouping</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template5.png" align="middle" alt="Cell grouping"/></div></div></div><br class="figure-break"/><p>When the value of a grouped cell is altered all cells that have
      been collapsed also have their values updated.</p></div></div><div class="section" title="19.3.4. Generated DRL"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedRuleTemplateEditorGeneratedDRL"/>19.3.4. Generated DRL</h3></div></div></div><p>Whilst not necessary, rule authors can view the DRL that will be generated for a "Rule Template" and
      associated data. This feature and its operation is no different to that for other assets. Select the "Source" tab
      from the bottom of the editor screen. The DRL for all rules will be displayed.</p><div class="figure"><a id="d0e21110"/><p class="title"><strong>Figure 19.18. Generated DRL</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-template6.png" align="middle" alt="Generated DRL"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.4. Guided decision tables (web based)"><div class="titlepage"><div><div><h2 class="title"><a id="drools.GuidedDecisionTableEditor"/>19.4. Guided decision tables (web based)</h2></div></div></div><p>The guided decision table feature allows decision tables to be edited in place on the web. This works similar to
  the guided editor by introspecting what facts and fields are available to guide the creation of a decision table. Rule
  attributes, meta-data, conditions and actions can be defined in a tabular format thus facilitating rapid entry of
  large sets of related rules. Web-based decision table rules are compiled into DRL like all other rule assets.</p><div class="section" title="19.4.1. Types of decision table"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorTypesOfDecisionTable"/>19.4.1. Types of decision table</h3></div></div></div><p>There are broadly two different types of decision table, both of which are supported in Drools Workbench:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Extended Entry</p></li><li class="listitem"><p>Limited Entry</p></li></ul></div><div class="section" title="19.4.1.1. Extended Entry"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorExtendedEntryDecisionTable"/>19.4.1.1. Extended Entry</h4></div></div></div><p>An Extended Entry decision table is one for which the column definitions, or stubs, specify Pattern, Field
      and operator but not value. The values, or states, are themselves held in the body of the decision table. It is
      normal, but not essential, for the range of possible values to be restricted by limiting entry to values from a
      list. Drools Workbench supports use of Java enumerations, Drools Workbench enumerations or decision table "optional value lists" to
      restrict value entry.</p><div class="figure"><a id="d0e21138"/><p class="title"><strong>Figure 19.19. Extended Entry Decision table</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-complete1.png" align="middle" alt="Extended Entry Decision table"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.1.2. Limited Entry"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorLimitedEntryDecisionTable"/>19.4.1.2. Limited Entry</h4></div></div></div><p>A Limited Entry decision table is one for which the column definitions specify value in addition to Pattern,
      Field and operator. The decision table states, held in the body of the table, are boolean where a positive value
      (a checked tick-box) has the effect of meaning the column should apply, or be matched. A negative value (a cleared
      tick-box) means the column does not apply.</p><div class="figure"><a id="d0e21149"/><p class="title"><strong>Figure 19.20. Limited Entry Decision table</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-complete2.png" align="middle" alt="Limited Entry Decision table"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.4.2. Main components\concepts"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorConcepts"/>19.4.2. Main components\concepts</h3></div></div></div><p>The guided decision table is split into two main sections:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The upper section allows table columns to be defined representing rule attributes, meta-data, conditions
        and actions.</p></li><li class="listitem"><p>The lower section contains the actual table itself; where individual rows define separate rules.</p></li></ul></div><div class="figure"><a id="d0e21167"/><p class="title"><strong>Figure 19.21. Main components</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-sections.png" align="middle" alt="Main components"/></div></div></div><br class="figure-break"/><div class="section" title="19.4.2.1. Navigation"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorNavigation"/>19.4.2.1. Navigation</h4></div></div></div><p>Cells can be selected in a variety of ways:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Firstly individual cells can be double-clicked and a pop-up editor corresponding to the underlying
          data-type will appear. Groups of cells in the same column can be selected by either clicking in the first and
          dragging the mouse pointer or clicking in the first and clicking the extent of the required range with the
          shift key pressed.</p></li><li class="listitem"><p>Secondly the keyboard cursor keys can be used to navigate around the table. Pressing the enter key will
          pop-up the corresponding editor. Ranges can be selected by pressing the shift key whilst extending the range
          with the cursor keys.</p></li></ul></div><p>Columns can be resized by hovering over the corresponding divider in the table header. The mouse cursor will
      change and then the column width dragged either narrower or wider.</p></div><div class="section" title="19.4.2.2. Cell merging"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorCellMerging"/>19.4.2.2. Cell merging</h4></div></div></div><p>The icon in the top left of the decision table toggles cell merging on and off. When cells are merged those
      in the same column with identical values are merged into a single cell. This simplifies changing the value of
      multiple cells that shared the same original value. When cells are merged they also gain an icon in the top-left
      of the cell that allows rows spanning the merged cell to be grouped.</p><div class="figure"><a id="d0e21192"/><p class="title"><strong>Figure 19.22. Cell merging</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-merged.png" align="middle" alt="Cell merging"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.2.3. Cell grouping"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorCellGrouping"/>19.4.2.3. Cell grouping</h4></div></div></div><p>Cells that have been merged can be further collapsed into a single row. Clicking the [+\-] icon in the top
      left of a merged cell collapses the corresponding rows into a single entry. Cells in other columns spanning the
      collapsed rows that have identical values are shown unchanged. Cells in other columns spanning the collapsed rows
      that have different values are highlighted and the first value displayed.</p><div class="figure"><a id="d0e21203"/><p class="title"><strong>Figure 19.23. Cell grouping</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-grouped.png" align="middle" alt="Cell grouping"/></div></div></div><br class="figure-break"/><p>When the value of a grouped cell is altered all cells that have been collapsed also have their values
      updated.</p></div><div class="section" title="19.4.2.4. Operation of &#34;otherwise&#34;"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorOtherwiseOperation"/>19.4.2.4. Operation of "otherwise"</h4></div></div></div><p>Condition columns defined with literal values that use either the equality (==) or inequality (!=) operators
      can take advantage of a special decision table cell value of "otherwise". This special value allows a rule to be
      defined that matches on all values not explicitly defined in all other rules defined in the table. This is best
      illustrated with an example:-</p><pre><code class="no-highlight">when
  Cheese( name not in ("Cheddar", "Edam", "Brie") )
  ...
then
  ...
end</code></pre><pre><code class="no-highlight">when
  Cheese( name in ("Cheddar", "Edam", "Brie") )
  ...
then
  ...
end</code></pre></div><div class="section" title="19.4.2.5. Re-arranging columns"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorRearrangeColumns"/>19.4.2.5. Re-arranging columns</h4></div></div></div><p>Whole patterns and individual conditions can be re-arranged by dragging and dropping them in the
      configuration section of the screen. This allows constraints to be re-ordered to maximise performance of the
      resulting rules, by placing generalised constraints before more specific. Action columns can also be re-arranged
      by dragging and dropping them.</p><div class="figure"><a id="d0e21225"/><p class="title"><strong>Figure 19.24. Re-arranging Condition patterns</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-rearranging-patterns.png" align="middle" alt="Re-arranging Condition patterns"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21231"/><p class="title"><strong>Figure 19.25. Re-arranging columns</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-rearranging-columns.png" align="middle" alt="Re-arranging columns"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.4.3. Defining a web based decision table"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorDefining"/>19.4.3. Defining a web based decision table</h3></div></div></div><div class="section" title="19.4.3.1. Manual creation"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorDefiningManually"/>19.4.3.1. Manual creation</h4></div></div></div><p>When a new empty decision table has been created you need to define columns for Facts, their constraints and
      corresponding actions.</p><div class="section" title="19.4.3.1.1. Column configuration"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorDefiningManuallyColumns"/>19.4.3.1.1. Column configuration</h5></div></div></div><p>Expand the "Decision table" element and you will see three further sections for "Conditions", "Actions"
        and "Options". Expanding either the "Conditions" or "Actions" sections reveals the "New column" icon. This can
        be used to add new column definitions to the corresponding section. Existing columns can be removed by clicking
        the "-" icon beside each column name, or edited by clicking the "pencil" icon also beside each column name. The
        "Options" section functions slightly differently however the principle is the same: clicking the "Add
        Attribute/Metadata" icon allows columns for table attributes to be defined (such as "salience", "no-loop" etc)
        or metadata added.</p><div class="figure"><a id="d0e21250"/><p class="title"><strong>Figure 19.26. Column configuration</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-config.png" align="middle" alt="Column configuration"/></div></div></div><br class="figure-break"/><div class="section" title="19.4.3.1.1.1. Utility columns"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorDefinitionUtilityColumns"/>19.4.3.1.1.1. Utility columns</h6></div></div></div><p>All decision table contain two utility columns containing rule number and rule description.</p></div><div class="section" title="19.4.3.1.1.2. Adding columns"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorAddingColumns"/>19.4.3.1.1.2. Adding columns</h6></div></div></div><p>To add a column click on the "New column" icon.</p><p>You are presented with the following column type selection popup.</p><div class="figure"><a id="d0e21268"/><p class="title"><strong>Figure 19.27. Column type popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-type-popup.png" align="middle" alt="Column type popup"/></div></div></div><br class="figure-break"/><p>By default the column type popup only shows the following simple types:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Add a new Metadata\Attribute column</p></li><li class="listitem"><p>Add a simple Condition</p></li><li class="listitem"><p>Set the value of a field</p></li><li class="listitem"><p>Set the value of a field on a new fact</p></li><li class="listitem"><p>Delete an existing fact</p></li></ul></div><p>Clicking on "Include advanced options" adds the following additional "advanced" column types for more
          advanced use cases:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Add a Condition BRL fragment</p></li><li class="listitem"><p>Execute a Work Item</p></li><li class="listitem"><p>Set the value of a field with a Work Item parameter</p></li><li class="listitem"><p>Set the value of a field on a new Fact with a Work Item parameter</p></li><li class="listitem"><p>Add an Action BRL fragment</p></li></ul></div></div><div class="section" title="19.4.3.1.1.3. Simple column types"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorSimpleColumns"/>19.4.3.1.1.3. Simple column types</h6></div></div></div><div class="section" title="19.4.3.1.1.3.1. Metadata"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorMetaDataColumns"/>19.4.3.1.1.3.1. Metadata</h6></div></div></div><p>Zero or more meta-data columns can be defined, each represents the normal meta-data annotation on DRL
            rules.</p></div><div class="section" title="19.4.3.1.1.3.2. Attributes"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorAttributeColumns"/>19.4.3.1.1.3.2. Attributes</h6></div></div></div><p>Zero or more attribute columns representing any of the DRL rule attributes (e.g. salience, timer,
            enabled etc) can be added. An additional pseudo attribute is provided in the guided decision table editor to
            "negate" a rule. Use of this attribute allows complete rules to be negated. For example the following simple
            rule can be negated as also shown.</p><pre><code class="no-highlight">when
  $c : Cheese( name == "Cheddar" )
then
  ...
end</code></pre><pre><code class="no-highlight">when
  not Cheese( name == "Cheddar" )
then
  ...
end</code></pre></div><div class="section" title="19.4.3.1.1.3.3. Simple Condition"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorSimpleCondition"/>19.4.3.1.1.3.3. Simple Condition</h6></div></div></div><p>Conditions represent constraints on Fact Patterns defined in the left-hand side, or "when" portion, of
            a rule. To define a condition column you must first select or define a Fact Pattern bound to a model class.
            You can choose to negate the pattern. Once this has been completed you can define field constraints. If two
            or more columns are defined using the same fact pattern binding the field constraints become composite field
            constraints on the same pattern. If you define multiple bindings for a single model class each binding
            becomes a separate model class in the left-hand side of the rule.</p><p>When you edit or create a new column, you will be given a choice of the type of constraint:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Literal : The value in the cell will be compared with the field using the operator.</p></li><li class="listitem"><p>Formula: The expression in the cell will be evaluated and then compared with the field.</p></li><li class="listitem"><p>Predicate : No field is needed, the expression will be evaluated to true or false.</p></li></ul></div><div class="figure"><a id="d0e21344"/><p class="title"><strong>Figure 19.28. Simple Condition popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-condition-popup.png" align="middle" alt="Simple Condition popup"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.1.1.3.4. Set the value of a field"><div class="titlepage"><div><div><h6 class="title"><a id="drools.DecisionTableSetField"/>19.4.3.1.1.3.4. Set the value of a field</h6></div></div></div><p>An Action to set the value of a field on previously bound fact. You have the option to notify the Rule
            Engine of the modified values which could lead to other rules being re-activated.</p><div class="figure"><a id="d0e21355"/><p class="title"><strong>Figure 19.29. Set the value of a field popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-setField-popup.png" align="middle" alt="Set the value of a field popup"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.1.1.3.5. Set the value of a field on a new fact"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorSetFieldOnNewFact"/>19.4.3.1.1.3.5. Set the value of a field on a new fact</h6></div></div></div><p>An Action to insert a new Fact into the Rule Engine Working Memory and set the a value of one of the
            new Facts' fields. You can choose to have the new Fact "logically inserted" meaning it will be automatically
            deleted should the conditions leading to the action being invoked cease to be true. Please refer to the
            Drools Expert documentation for details on Truth Maintenance and Logical insertions.</p><div class="figure"><a id="d0e21366"/><p class="title"><strong>Figure 19.30. Set the value of a field on a new fact popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-insertField-popup.png" align="middle" alt="Set the value of a field on a new fact popup"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.1.1.3.6. Delete an existing fact"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorDeleteFact"/>19.4.3.1.1.3.6. Delete an existing fact</h6></div></div></div><p>An Action to delete a bound Fact.</p><div class="figure"><a id="d0e21377"/><p class="title"><strong>Figure 19.31. Delete an existing fact popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-deleteFact-popup.png" align="middle" alt="Delete an existing fact popup"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.4.3.1.1.4. Advanced column types"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorAdvancedColumns"/>19.4.3.1.1.4. Advanced column types</h6></div></div></div><div class="section" title="19.4.3.1.1.4.1. Condition BRL fragments"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorConditionBRL"/>19.4.3.1.1.4.1. Condition BRL fragments</h6></div></div></div><p>A construct that allows a BRL fragment to be used in the left-hand side of a rule. A BRL fragment is
            authored using the Guided Rule Editor and hence all features available in that editor can be used to define
            a decision table column; such as "from", "collect" and "accumulate" etc. When using the embedded Guided Rule
            Editor field values defined as "Template Keys" will form columns in the decision table. Facts and Fact's
            fields bound in the BRL fragment can be referenced by the simpler column types and vice-versa.</p><p>In the following example two Template Keys have been defined and hence two columns appear in the
            decision table.</p><div class="figure"><a id="d0e21393"/><p class="title"><strong>Figure 19.32. Defining a Condition with BRL</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-condition-brl1-popup.png" align="middle" alt="Defining a Condition with BRL"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21399"/><p class="title"><strong>Figure 19.33. The resulting decision table</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-condition-brl2-popup.png" align="middle" alt="The resulting decision table"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.1.1.4.2. Execute a Work Item"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorExecuteWorkItem"/>19.4.3.1.1.4.2. Execute a Work Item</h6></div></div></div><p>An Action invoking a jBPM Work Item Handler setting its input parameters to bound Facts\Facts fields
            values.</p></div><div class="section" title="19.4.3.1.1.4.3. Set the value of a field with a Work Item parameter"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorSetWorkItemParameter"/>19.4.3.1.1.4.3. Set the value of a field with a Work Item parameter</h6></div></div></div><p>An Action setting the value of a Fact's field to that of a jBPM Work Item Handler's result
            parameter.</p></div><div class="section" title="19.4.3.1.1.4.4. Set the value of a field on a new Fact with a Work Item parameter"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorSetFactFromWorkItemParameter"/>19.4.3.1.1.4.4. Set the value of a field on a new Fact with a Work Item parameter</h6></div></div></div><p>An Action setting the value of a new Fact's field to that of a jBPM Work Item Handler's result
            parameter.</p></div><div class="section" title="19.4.3.1.1.4.5. Action BRL fragment"><div class="titlepage"><div><div><h6 class="title"><a id="drools.GuidedDecisionTableEditorActionBRL"/>19.4.3.1.1.4.5. Action BRL fragment</h6></div></div></div><p>A construct that allows a BRL fragment to be used in the right-hand side of a rule. A BRL fragment is
            authored using the Guided Rule Editor and hence all features available in that editor can be used to define
            a decision table column. When using the embedded Guided Rule Editor field values defined as "Template Keys"
            will form columns in the decision table. Facts bound in the BRL fragment can be referenced by the simpler
            column types and vice-versa.</p><p>In the following example two Template Keys have been defined and hence two columns appear in the
            decision table.</p><div class="figure"><a id="d0e21427"/><p class="title"><strong>Figure 19.34. Defining an Action with BRL</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-action-brl1-popup.png" align="middle" alt="Defining an Action with BRL"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21433"/><p class="title"><strong>Figure 19.35. The resulting decision table</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-column-action-brl2-popup.png" align="middle" alt="The resulting decision table"/></div></div></div><br class="figure-break"/></div></div></div></div><div class="section" title="19.4.3.2. Using a Wizard"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorWizard"/>19.4.3.2. Using a Wizard</h4></div></div></div><p>A Wizard can also be used to assist with defining the decision table columns.</p><p>The wizard can be chosen when first electing to create a new rule. The wizard provides a number of pages to
      define the table:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Summary</p></li><li class="listitem"><p>Add Fact Patterns</p></li><li class="listitem"><p>Add Constraints</p></li><li class="listitem"><p>Add Actions to update facts</p></li><li class="listitem"><p>Add Actions to insert facts</p></li><li class="listitem"><p>Columns to expand</p></li></ul></div><div class="section" title="19.4.3.2.1. Selecting the wizard"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorSelectingWizard"/>19.4.3.2.1. Selecting the wizard</h5></div></div></div><p>The "New Wizard" dialog shows a "Use wizard" checkbox.</p><div class="figure"><a id="d0e21470"/><p class="title"><strong>Figure 19.36. Selecting the wizard</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard1.png" align="middle" alt="Selecting the wizard"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.2. Summary page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardSummaryPage"/>19.4.3.2.2. Summary page</h5></div></div></div><p>The summary page shows a few basic details about the decision table and allows the asset name to be
          changed.</p><div class="figure"><a id="d0e21481"/><p class="title"><strong>Figure 19.37. Summary page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard2.png" align="middle" alt="Summary page"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.3. Add Fact Patterns page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardFactPatternsPage"/>19.4.3.2.3. Add Fact Patterns page</h5></div></div></div><p>This page allows Fact types to be defined that will form the "When" columns of the rules. Fact types that
        are available in your model will be shown in the left-hand listbox. Select a Fact type and use the "&gt;&gt;"
        button to add it to your list of chosen facts on the right-hand listbox. Removal is a similar process: the Fact
        that is no longer required can be selected in the right-hand listbox and the "&lt;&lt;" button used to remove
        it. All Fact types need to be bound to a variable. Incomplete Fact types will be highlighted and a warning
        message displayed. You will be unable to finish your definition until all warnings have been resolved.</p><div class="figure"><a id="d0e21492"/><p class="title"><strong>Figure 19.38. Add Fact Patterns page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard3a.png" align="middle" alt="Add Fact Patterns page"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21498"/><p class="title"><strong>Figure 19.39. Example of an incomplete Fact definition</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard3b.png" align="middle" alt="Example of an incomplete Fact definition"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.4. Add Constraints page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardAddConstraintPage"/>19.4.3.2.4. Add Constraints page</h5></div></div></div><p>This page allows field constraints on the Fact types you have chosen to use in the decision table to be
        defined. Fact types chosen on the previous Wizard page are listed in the right-hand listbox. Selecting a Fact
        type by clicking on it will result in a list of available fields being shown in the middle listbox together with
        an option to create a predicate that do not require a specific field. Fields can be added to the pattern's
        constraints by clicking on the field and then the "&gt;&gt;" button. Fields can be removed from the pattern
        definition by clicking on the Condition in the right-hand listbox and then the "&lt;&lt;" button. All fields
        need to have a column header and operator. Incomplete fields will be highlighted and a warning message
        displayed. You will be unable to finish your definition until all warnings have been resolved.</p><div class="figure"><a id="d0e21509"/><p class="title"><strong>Figure 19.40. Add Constraints page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard4.png" align="middle" alt="Add Constraints page"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.5. Add Actions to update facts page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardUpdateFactsPage"/>19.4.3.2.5. Add Actions to update facts page</h5></div></div></div><p>Fact types that have been defined can be updated in the consequence, or action, part of a rule. This page
        allows such actions to be defined. Fact types added to the decision table definition are listed in the left-hand
        listbox. Selecting a Fact type by clicking on it will result in a list of available fields being shown in the
        middle listbox. Fields that need to be updated by the rule can be added by selecting an available field and
        pressing the "&gt;&gt;" button. Fields can be removed similarly by clicking on a chosen field and then the
        "&lt;&lt;" button. All actions require a column header. Any incomplete actions will be highlighted and a warning
        message displayed. You will be unable to finish your definition until all warnings have been resolved.</p><div class="figure"><a id="d0e21520"/><p class="title"><strong>Figure 19.41. Add Actions to update facts page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard5.png" align="middle" alt="Add Actions to update facts page"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.6. Add Actions to insert facts page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardInsertFactsPage"/>19.4.3.2.6. Add Actions to insert facts page</h5></div></div></div><p>Actions can also be defined to insert new Facts into the Rule Engine. A list of Fact types available in
        your model are listed in the left-hand listbox. Select those you wish to include in your decision table
        definition by clicking on them and pressing the "&gt;&gt;" button between the left most listbox and that titled
        "Chosen patterns". Removal is a similar process whereby a chosen pattern can be selected and removed by pressing
        the "&lt;&lt;" button. Selection of a chosen pattern presents the user with a list of available fields. Fields
        that need to have values set by the action can be added by selecting them and pressing the "&gt;&gt;" button
        between the "Available fields" and "Chosen fields" listbox. Removal is a similar process as already described.
        New Facts need to be bound to a variable and have a column heading specified. Incomplete Facts and\or fields
        will be highlighted and a warning message displayed. You will be unable to finish your definition until all
        warnings have been resolved.</p><div class="figure"><a id="d0e21531"/><p class="title"><strong>Figure 19.42. Add Actions to insert facts page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard6.png" align="middle" alt="Add Actions to insert facts page"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.3.2.7. Columns to expand page"><div class="titlepage"><div><div><h5 class="title"><a id="drools.GuidedDecisionTableEditorWizardExpandColumnsPage"/>19.4.3.2.7. Columns to expand page</h5></div></div></div><p>This page controls how the decision table, based upon Conditions defined on the prior pages, will be
        created. Condition columns defined with an optional list of permitted values can be used to create rows in the
        decision table. Where a number of Condition columns have been defined with lists of permitted values the
        resulting table will contain a row for every combination of values; i.e. the decision table will be in expanded
        form. By default all Condition columns defined with value lists will be included in the expansion however you
        are able to select a sub-set of columns if so required. This can be accomplished by unticking the "Fully expand"
        checkbox and adding columns to the right-hand listbox. If no expansion is required untick the "Fully expand"
        checkbox and ensure zero columns are added to the right-hand listbox.</p><div class="figure"><a id="d0e21542"/><p class="title"><strong>Figure 19.43. Columns to expand page</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard7a.png" align="middle" alt="Columns to expand page"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21548"/><p class="title"><strong>Figure 19.44. Example of a Condition column with optional values defined</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard7b.png" align="middle" alt="Example of a Condition column with optional values defined"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21554"/><p class="title"><strong>Figure 19.45. Example of a decision table generated with expanded columns</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-wizard7c.png" align="middle" alt="Example of a decision table generated with expanded columns"/></div></div></div><br class="figure-break"/></div></div></div><div class="section" title="19.4.4. Rule definition"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorRuleDefinitions"/>19.4.4. Rule definition</h3></div></div></div><p>This section allows individual rules to be defined using the columns defined earlier.</p><p>Rows can be appended to the end of the table by selecting the "Add Row" button. Rows can also be inserted by
    clicking the "+" icon beside an existing row. The "-" icon can be used to delete rows.</p><div class="figure"><a id="d0e21567"/><p class="title"><strong>Figure 19.46. Rule definition</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/dtable-body.png" align="middle" alt="Rule definition"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.5. Audit Log"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorAuditLog"/>19.4.5. Audit Log</h3></div></div></div><p>An audit log has been added to the web-guided Decision Table editor to track additions, deletions and
    modifications.</p><p>By default the audit log is not configured to record any events, however, users can easily select the events
    in which they are interested.</p><p>The audit log is persisted whenever the asset is checked in.</p><div class="figure"><a id="d0e21582"/><p class="title"><strong>Figure 19.47. An empty audit log</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-dtable-audit-log1.png" align="middle" alt="An empty audit log"/></div></div></div><br class="figure-break"/><p>Once the capture of events has been enabled all susbsequent operations are recorded. Users are able to perform
    the following:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Record an explanatory note beside each event.</p></li><li class="listitem"><p>Delete an event from the log. Event details remain in the underlying repository.</p></li></ul></div><div class="figure"><a id="d0e21597"/><p class="title"><strong>Figure 19.48. Example of audit events</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/guided-dtable-audit-log2.png" align="middle" alt="Example of audit events"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.4.6. Real Time Validation and Verification"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedDecisionTableEditorVerification"/>19.4.6. Real Time Validation and Verification</h3></div></div></div><p>Decision tables are validated after each cell change. If any issues are found the results will be shown in the column on the right side of the table. Validation and verification covers the following issues:</p><div class="section" title="19.4.6.1. Redundancy"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorVerificationRedundancy"/>19.4.6.1. Redundancy</h4></div></div></div><p>Redundancy exists between two rows when both rows execute the same actions when given the same set of facts.</p><p>Redundancy might not be a problem if the redundant rules are setting a value on an existing fact, this just sets the value twice. Problems occur when the two rules increase a counter or add more facts into the working memory, since this causes unwanted side effects. In both cases the other row is not needed.</p></div><div class="section" title="19.4.6.2. Subsumption"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorVerificationSubsumption"/>19.4.6.2. Subsumption</h4></div></div></div><p>Subsumption exists when one row executes the same action as another row when given the same set of facts. The rows are not redundant since the another row is more complicated and it can fire with a set of facts that do not fire the subsumptant row.</p><p>The problems with subsumption are similar to the case with redundancy.</p></div><div class="section" title="19.4.6.3. Conflicts"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorVerificationConflicts"/>19.4.6.3. Conflicts</h4></div></div></div><p>Conflicts can exist either on a single row or between rows.</p><p>A single row conflict prevents the row actions from ever being executed.</p><p>Conflict between two rows exists when the conditions of two rules are met with a same set of facts, but the actions set fact fields to different values. The conditions can be redundant or just subsumptant. Conflicts are a problem because it is impossible to know what action is made last. Conditions might set a loan to both approbed and rejected. The end result may be different on each time the rules are ran and with each rule engine software version.</p></div><div class="section" title="19.4.6.4. Missing Columns"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedDecisionTableEditorVerificationMissingRHSLHS"/>19.4.6.4. Missing Columns</h4></div></div></div><p>In some cases, usually by accident, the user can delete all the condition or action columns. When the conditions are removed all the actions are executed and when the actions columns are missing the rows do nothing. </p></div></div></div><div class="section" title="19.5. Guided Decision Trees"><div class="titlepage"><div><div><h2 class="title"><a id="drools.GuidedDecisionTreeEditor"/>19.5. Guided Decision Trees</h2></div></div></div><p>The Workbench supports authoring of simple Decision Trees.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The editor does not support nested Data Objects at present. It is therefore advised to
      only use Guided Decision Trees with flat Data Object models.</p></div><div class="section" title="19.5.1. The initial editor layout"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21644"/>19.5.1. The initial editor layout</h3></div></div></div><p>When a new Guided Decision Tree is created the editor is initially blank.</p><p>The left-hand side is a palette of available Data Objects, their fields and
      Actions.</p><p>The right-hand side is the area where you can drag and drop Data Objects, their fields or
      Actions to build a tree.</p><p>The editor will show a connector between the node being dragged and applicable children to
      which it can be attached. When the drag is complete the new node will be attached to the
      applicable child. Root nodes will not have a connector shown when being dragged to an empty
      tree. Completing the drag positions the root node in the centre of the editor.</p><p>There are various restrictions when composing a tree:- </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>A tree must have a Data Object at the root.</p></li><li class="listitem"><p>A tree can only have one root.</p></li><li class="listitem"><p>Data Objects can have either other Data Objects, field constraints or Actions as
            children.</p><p>The field constraints must be on fields of the same Data Object as the parent
            node.</p></li><li class="listitem"><p>Field constraints can have either other field constraints or Actions as
            children.</p><p>The field constraints must be on fields of the same Data Object as the parent
            node.</p></li><li class="listitem"><p>Actions can only have other Actions as children.</p></li></ol></div><p>
    </p><div class="figure"><a id="d0e21678"/><p class="title"><strong>Figure 19.49. Guided Decision Trees - Empty editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor1.png" align="middle" alt="Guided Decision Trees - Empty editor"/></div></div></div><br class="figure-break"/><p>Expanding the palette reveals Tree Nodes for the Data Object and its fields.</p><div class="figure"><a id="d0e21686"/><p class="title"><strong>Figure 19.50. Guided Decision Trees - Expanded palette</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor2.png" align="middle" alt="Guided Decision Trees - Expanded palette"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.5.2. First steps"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21692"/>19.5.2. First steps</h3></div></div></div><p>Drag a Data Object on to the tree authoring area.</p><div class="figure"><a id="d0e21697"/><p class="title"><strong>Figure 19.51. Guided Decision Trees - Data Object root node</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor3.png" align="middle" alt="Guided Decision Trees - Data Object root node"/></div></div></div><br class="figure-break"/><p>Clicking on a node selects it.</p><p>Icons to manipulate the node appear when the node is selected.</p><p>The icons are: </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Delete</p><p>Deleting a node will also delete all children.</p></li><li class="listitem"><p>Edit</p><p>Collapsed nodes cannot be edited as they contain numerous children.</p></li><li class="listitem"><p>Collapse</p></li></ol></div><p>
    </p><div class="figure"><a id="d0e21724"/><p class="title"><strong>Figure 19.52. Guided Decision Trees - Selected node</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor4.png" align="middle" alt="Guided Decision Trees - Selected node"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.5.3. Editing Data Object nodes"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21730"/>19.5.3. Editing Data Object nodes</h3></div></div></div><p>Selecting a Data Object node and clicking the edit icon shows a popup to manage the
      node.</p><p>The popup shows the Data Object type and allows it to be bound to a variable. Bound Data
      Objects can be modified or retracted by Actions.</p><div class="figure"><a id="d0e21737"/><p class="title"><strong>Figure 19.53. Guided Decision Trees - Data Object Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor5.png" align="middle" alt="Guided Decision Trees - Data Object Editor"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.5.4. Editing Field Constraint nodes"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21743"/>19.5.4. Editing Field Constraint nodes</h3></div></div></div><p>Selecting a Field Constraint node and clicking the edit icon shows a popup to manage
      the node.</p><p>The popup shows the Data Object type and field and allows the field to be bound to a
      variable. An operator, applicable to the Data Model field's data-type, can be selected and a
      corresponding value entered.</p><div class="figure"><a id="d0e21750"/><p class="title"><strong>Figure 19.54. Guided Decision Trees - Field Constraint Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditor6.png" align="middle" alt="Guided Decision Trees - Field Constraint Editor"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.5.5. Editing Action nodes"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21756"/>19.5.5. Editing Action nodes</h3></div></div></div><p>Selecting an Insert Action node and clicking the edit icon shows a popup to manage the
      node.</p><p>The popup allows selection of the Data Object to be inserted and whether it's insertion is
      "logical". Please refer to Drools documentation regarding Truth Maintenance for more
      information. Fields for the new Data Object can have values set.</p><div class="figure"><a id="d0e21763"/><p class="title"><strong>Figure 19.55. Guided Decision Trees - Action "Insert" Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditorActionInsert.png" align="middle" alt="Guided Decision Trees - Action &#34;Insert&#34; Editor"/></div></div></div><br class="figure-break"/><p>Selecting an Insert Retract node and clicking the edit icon shows a popup to manage the
      node.</p><p>The popup allows any Data Object bound in the path from the selected node to the root node
      to be selected for retraction.</p><div class="figure"><a id="d0e21773"/><p class="title"><strong>Figure 19.56. Guided Decision Trees - Action "Retract" Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditorActionRetract.png" align="middle" alt="Guided Decision Trees - Action &#34;Retract&#34; Editor"/></div></div></div><br class="figure-break"/><p>Selecting an Insert Update node and clicking the edit icon shows a popup to manage the
      node.</p><p>The popup allows any Data Object bound in the path from the selected node to the root node
      to be modified. Fields for the modified Data Object can have values set.</p><div class="figure"><a id="d0e21783"/><p class="title"><strong>Figure 19.57. Guided Decision Trees - Action "Update" Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditorActionUpdate.png" align="middle" alt="Guided Decision Trees - Action &#34;Update&#34; Editor"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.5.6. Managing the tree"><div class="titlepage"><div><div><h3 class="title"><a id="d0e21789"/>19.5.6. Managing the tree</h3></div></div></div><p>Even simple trees can grow in size and become difficult to maintain.</p><p>It is therefore possible to collapse parts of the tree, giving more space in the user interface to maintain different parts of the tree.</p><p>If a node has children, when selected, it will have an icon to collapse the children. Clicking this icon will collapse children.</p><p>A collapsed node can equally be expanded by selecting it and clicking on the exapnd icon. A collapsed node cannot be edited as it contains numerous children. Deleting a collapsed node deletes all children too.</p><div class="figure"><a id="d0e21800"/><p class="title"><strong>Figure 19.58. Guided Decision Trees - Collapsing nodes</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditorCollapse1.png" align="middle" alt="Guided Decision Trees - Collapsing nodes"/></div></div></div><br class="figure-break"/><div class="figure"><a id="d0e21806"/><p class="title"><strong>Figure 19.59. Guided Decision Trees - Collapsed node</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GuidedDecisionTreeEditorCollapse2.png" align="middle" alt="Guided Decision Trees - Collapsed node"/></div></div></div><br class="figure-break"/></div></div><div class="section" title="19.6. Spreadsheet decision tables"><div class="titlepage"><div><div><h2 class="title"><a id="drools.XLSDecisionTable"/>19.6. Spreadsheet decision tables</h2></div></div></div><p>Multiple rules can be stored in a spreadsheet. Each row in the spreadsheet is a rule, and each column is either
    a condition, an action, or an option. The Drools Expert section of this document discusses spreadsheet decision
    tables in more detail.</p><div class="figure"><a id="d0e21817"/><p class="title"><strong>Figure 19.60. Spreadsheet decision table</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/DecisionTable.png" align="middle" alt="Spreadsheet decision table"/></div></div></div><br class="figure-break"/><p>To use a spreadsheet, you upload an XLS file. To create a new decision table: launch the new "Decision Table
    (Spreadsheet)" wizard, you will get an option to upload one.</p></div><div class="section" title="19.7. Scorecards"><div class="titlepage"><div><div><h2 class="title"><a id="drools.GuidedScoreCardEditor"/>19.7. Scorecards</h2></div></div></div><p>A scorecard is a graphical representation of a formula used to calculate an overall score. A scorecard can
    be used to predict the likelihood or probability of a certain outcome. Drools now supports additive scorecards. An
    additive scorecard calculates an overall score by adding all partial scores assigned to individual rule
    conditions.
  </p><p>Additionally, Drools Scorecards will allows for reason codes to be set, which help in identifying the
    specific rules (buckets) that have contributed to the overall score. Drools Scorecards will be based on the PMML
    4.1 Standard.
  </p><p>The New Item menu now allows for creation of scorecard assets.</p><div class="figure"><a id="d0e21834"/><p class="title"><strong>Figure 19.61. Scorecard Asset - Guided Editor</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/scorecard_asset_webeditor.png" align="middle" alt="Scorecard Asset - Guided Editor"/></div></div></div><br class="figure-break"/><p>
    The above image shows a scorecard with one characteristic. Each scorecard consists of two sections (a) Setup
    Parameters (b) Characteristic Section
  </p><div class="section" title="19.7.1. (a) Setup Parameters"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedScoreCardEditorSetupParameters"/>19.7.1. (a) Setup Parameters</h3></div></div></div><p>
      The setup section consits of parameters that define the overall behaviour of this scorecard.
    </p><div class="orderedlist"><ol class="orderedlist" type="1" compact="compact"><li class="listitem"><p>Facts: This dropdown shows a list of facts that are visible for this asset. </p></li><li class="listitem"><p>
          Resultant Score Field: Shows a list of fields from the selected fact. Only fields of type 'double' are shown.
          If this dropdown is empty double check your fact model.
          The final calculated score will be stored in this field.
        </p></li><li class="listitem"><p>Initial Score: Numeric Text Field to capture the initial score. The generated rules will initialize the
          'Resultant Score Field' with this score
          and then is added to the overall score whenever partial scores are summed up.
        </p></li><li class="listitem"><p>Use Reason Codes: Boolean indicator to compute reason codes along with the final score. Selecting Yes/No
          in this field will enable/disable the
          'Resultant Reason Codes Field', 'Reason Code Algorithm' and the 'Baseline Score' field.
        </p></li><li class="listitem"><p>Resultant Reason Codes Field: Shows a list of fields from the selected fact. Only fields of type
          'java.util.List' are shown. This collection will hold
          the reason codes selected by this scorecard.
        </p></li><li class="listitem"><p>Reason Code Algorithm: May be "none", "pointsAbove" or "pointsBelow", describing how reason codes shall be
          ranked, relative to the
          baseline score of each Characteristic, or as set at the top-level scorecard.
        </p></li><li class="listitem"><p>Baseline Score: A single value to use as the baseline comparison score for all characteristics, when
          determining reason code ranking. Alternatively,
          unique baseline scores may be set for each individual Characteristic as shown below. This value is required
          only when UseReasonCodes is "true"
          and baselineScore is not given for each Characteristic.
        </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>
        If UseReasonCodes is "true", then BaselineScore must be defined at the Scorecard level or for each
        Characteristic, and ReasonCode must be provided for each Characteristic or for each of its input Attributes. If UseReasonCodes
        is "false", then baselineScore and reasonCode are not required.
      </p></div></div><div class="section" title="19.7.2. (b) Characteristics"><div class="titlepage"><div><div><h3 class="title"><a id="drools.GuidedScoreCardEditorCharacteristics"/>19.7.2. (b) Characteristics</h3></div></div></div><p>
      On Clicking the 'New Characteristic' button, a new empty characteristic editor is added to the scorecard. Defines
      the point allocation strategy for each scorecard characteristic (numeric or categorical). Each scorecard characteristic
      is assigned a single partial score which is used to compute the overall score. The overall score is simply the sum
      of all partial scores. Partial scores are assumed to be continuous values of type "double".
    </p><div class="section" title="19.7.2.1. Creating Characterstics"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedScoreCardEditorCreatingCharacteristics"/>19.7.2.1. Creating Characterstics</h4></div></div></div><p>Every scorecard must have at least one characteristic</p><div class="figure"><a id="d0e21882"/><p class="title"><strong>Figure 19.62. New Characteristic</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/scorecards_new_characteristic.png" align="middle" alt="New Characteristic"/></div></div></div><br class="figure-break"/><div class="orderedlist"><ol class="orderedlist" type="1" compact="compact"><li class="listitem"><p>Name: Descriptive name for this characteristic. For informational reasons only.
          </p></li><li class="listitem"><p>
            Remove Charteristic: Will remove this characteristic from the scorecard after a confirmation dialog is
            shown.
          </p></li><li class="listitem"><p>
            Add Attribute: Will add a line entry for an attribute (bin).
          </p></li><li class="listitem"><p>
            Fact: Select the class which will be evaluated for calculating the partial score.
          </p></li><li class="listitem"><p>
            Characteristic: Shows the list of fields from the selected Fact. Only fields of type "String", "int",
            "double", "boolean" are shown.
          </p></li><li class="listitem"><p>
            Baseline Score: Sets the characteristic's baseline score against which to compare the actual partial score
            when determining the ranking of reason codes. This value is required when useReasonCodes attribute is "true" and
            baselineScore is not defined in element Scorecard. Whenever baselineScore is defined for a Characteristic,
            it takes precedence over the baselineScore value defined in element Scorecard.
          </p></li><li class="listitem"><p>
            Reason Code: Contains the characteristic's reason code, usually associated with an adverse decision.
          </p></li></ol></div></div><div class="section" title="19.7.2.2. Creating Attributes"><div class="titlepage"><div><div><h4 class="title"><a id="drools.GuidedScoreCardEditorCreatingAttributes"/>19.7.2.2. Creating Attributes</h4></div></div></div><p>
        On Clicking the 'New Attribute' button, a new empty attribute editor. In scorecard models, all the elements defining the Attributes for a particular Characteristic must all reference a
        single field.
      </p><div class="figure"><a id="d0e21915"/><p class="title"><strong>Figure 19.63. New Attribute</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/scorecards_new_attribute.png" align="middle" alt="New Attribute"/></div></div></div><br class="figure-break"/><div class="orderedlist"><ol class="orderedlist" type="1" compact="compact"><li class="listitem"><p>
            Operator: The condition upon which the mapping between input attribute and partial score takes place. The
            operator dropdown will show different values depending on the datatype of the selected Field.
            </p><div class="orderedlist"><ol class="orderedlist" type="a" compact="compact"><li class="listitem"><p>
                  DataType Strings: "=", "in".
                </p></li><li class="listitem"><p>
                  DataType Integers: "=", "&gt;", "&lt;", "&gt;=", "&lt;=", "&gt;..&lt;", "&gt;=..&lt;", "&gt;=..&lt;=", "&gt;..&lt;=".
                </p></li><li class="listitem"><p>
                  DataType Boolean: "true", "false".
                </p></li></ol></div><p>
            Refer to the next sub-section (values) for more details.
          </p></li><li class="listitem"><p>
            Value: Basis the operator selected the value specified can either be a single value or a set of values separated by comma (",").
            The value field is disabled for operator type boolean.
            </p><table id="d0e21939"><caption>Table 19.1. Operators / Values</caption><thead><tr>
                  <td>Data Type</td>
                  <td>Operator</td>
                  <td>Value</td>
                  <td>Remarks</td>
                </tr></thead><tbody><tr>
                  <td>String</td>
                  <td>=</td>
                  <td>Single Value</td>
                  <td>will look for an exact match</td>
                </tr><tr>
                  <td>String</td>
                  <td>in</td>
                  <td>Comma Separated Values (a,b,c,...)</td>
                  <td>The operator 'in' indicates an evaluation to TRUE if the field value is contained in the comma separated list of values</td>
                </tr><tr>
                  <td>Boolean</td>
                  <td>is true</td>
                  <td>N/A</td>
                  <td>Value Field is uneditable (readonly)</td>
                </tr><tr>
                  <td>Boolean</td>
                  <td>is false</td>
                  <td>N/A</td>
                  <td>Value Field is uneditable (readonly)</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>=</td>
                  <td>Single Value</td>
                  <td>Equals Operator</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;</td>
                  <td>Single Value</td>
                  <td>Greater Than Operator</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&lt;</td>
                  <td>Single Value</td>
                  <td>Less Than Operator</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;=</td>
                  <td>Single Value</td>
                  <td>Greater than or equal To</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&lt;=</td>
                  <td>Single Value</td>
                  <td>Less than or equal To</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;..&lt;</td>
                  <td>Comma Separated Values (a,b)</td>
                  <td>(Greater than Value 'a') and (less than value 'b')</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;=..&lt;</td>
                  <td>Comma Separated Values (a,b)</td>
                  <td>(Greater than or equal to Value 'a') and (less than value 'b')</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;=..&lt;=</td>
                  <td>Comma Separated Values (a,b)</td>
                  <td>(Greater than or equal to Value 'a') and (less than or equal to value 'b')</td>
                </tr><tr>
                  <td>Numeric</td>
                  <td>&gt;..&lt;=</td>
                  <td>Comma Separated Values (a,b)</td>
                  <td>(Greater than Value 'a') and (less than or equal to value 'b')</td>
                </tr></tbody></table></li><li class="listitem"><p>
            Partial Score: Defines the score points awarded to the Attribute.
          </p></li><li class="listitem"><p>
            Reason Code: Defines the attribute's reason code. If the reasonCode attribute is used in this level, it takes precedence over the ReasonCode associated with the Characteristic element.
          </p></li><li class="listitem"><p>
            Actions: Delete this attribute. Prompts the user for confirmation.
          </p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>
          If Use Reason Codes is "true", then Baseline Score must be defined at the Scorecard level or for each Characteristic, and Reason Code must be provided for each Characteristic or for each of its input Attributes. If Use Reason Codes is "false", then BaselineScore and ReasonCode are not required.
        </p></div></div></div></div><div class="section" title="19.8. Test Scenario"><div class="titlepage"><div><div><h2 class="title"><a id="drools.TestScenarioEditor"/>19.8. Test Scenario</h2></div></div></div><p>Test Scenarios are used to validate that rules and knowledge base work as expected. When the knowledge base
    evolves, Test Scenarios guard against regression.</p><div class="figure"><a id="d0e22157"/><p class="title"><strong>Figure 19.64. Example Test Scenario</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/TestScenario.png" align="middle" alt="Example Test Scenario"/></div></div></div><br class="figure-break"/><p>Given section lists the facts needed for the behaviour. Expect section lists the expected changes and actions
    done by the behaviour. Given facts are passed for the Test Scenario before execution. During the rule execution,
    changes in the knowledge base are recorded. After the execution ends the recorded actions, existing facts in the
    knowledge base and knowledge base output is compared against the expectations.</p><div class="figure"><a id="d0e22165"/><p class="title"><strong>Figure 19.65. Example Test Scenario after execution</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/TestScenarioAfterRunningIt.png" align="middle" alt="Example Test Scenario after execution"/></div></div></div><br class="figure-break"/><div class="section" title="19.8.1. Knowledge Session Selector"><div class="titlepage"><div><div><h3 class="title"><a id="drools.KSessionSelector"/>19.8.1. Knowledge Session Selector</h3></div></div></div><div class="figure"><a id="d0e22174"/><p class="title"><strong>Figure 19.66. Knowledge Session Selector</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/KSessionSelector.png" align="middle" alt="Knowledge Session Selector"/></div></div></div><br class="figure-break"/><p>
      Knowledge session selector is used to select the session that the rules are ran against. The knowledge session needs to be stateful and use the pseudo clock when simulated time is used. Knowledge sessions are defined in the Project Editor, in the Knowledge bases and Sessions section.
    </p></div><div class="section" title="19.8.2. Given Section"><div class="titlepage"><div><div><h3 class="title"><a id="drools.TestScenarioEditorGivenSection"/>19.8.2. Given Section</h3></div></div></div><div class="figure"><a id="d0e22185"/><p class="title"><strong>Figure 19.67. Given popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/GivenSection.png" align="middle" alt="Given popup"/></div></div></div><br class="figure-break"/><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Insert a new fact - Adds a new fact that will be inserted into the knowledge base before execution.</p></li><li class="listitem"><p>Modify an existing fact - Allows editing a fact between knowledge base executions.</p></li><li class="listitem"><p>Delete an existing fact - Allows removing facts between executions.</p></li><li class="listitem"><p>Activate rule flow group - Allows rules from a rule flow group to be tested, by activating the group in
          advance.</p></li></ul></div></div><div class="section" title="19.8.3. Expect Section"><div class="titlepage"><div><div><h3 class="title"><a id="drools.TestScenarioEditorExpectedSection"/>19.8.3. Expect Section</h3></div></div></div><div class="figure"><a id="d0e22207"/><p class="title"><strong>Figure 19.68. Expect popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/ExpectSection.png" align="middle" alt="Expect popup"/></div></div></div><br class="figure-break"/><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Rule - Validate that a certain rule fired.</p></li><li class="listitem"><p>Fact value - Validate fact values for a fact created in the Given section.</p></li><li class="listitem"><p>Any fact that matches - Validate that there is at least one fact in the knowledge base with the specified
          field values.</p></li></ul></div></div><div class="section" title="19.8.4. Global Section"><div class="titlepage"><div><div><h3 class="title"><a id="drools.TestScenarioEditorGlobalSection"/>19.8.4. Global Section</h3></div></div></div><div class="figure"><a id="d0e22226"/><p class="title"><strong>Figure 19.69. Global popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/NewGlobal.png" align="middle" alt="Global popup"/></div></div></div><br class="figure-break"/><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Global - Validate that the global field values.</p></li></ul></div></div><div class="section" title="19.8.5. New Input Section"><div class="titlepage"><div><div><h3 class="title"><a id="drools.TestScenarioEditorInpuotSection"/>19.8.5. New Input Section</h3></div></div></div><div class="figure"><a id="d0e22239"/><p class="title"><strong>Figure 19.70. New Input popup</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/NewInput.png" align="middle" alt="New Input popup"/></div></div></div><br class="figure-break"/><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>Call method on an existing fact - Call a method from a fact in the beginning of the rule execution.</p></li></ul></div></div></div><div class="section" title="19.9. Functions"><div class="titlepage"><div><div><h2 class="title"><a id="drools.FunctionEditor"/>19.9. Functions</h2></div></div></div><p>Functions are another asset type. They are NOT rules, and should only
  be used when necessary. The function editor is a textual editor.
  Functions</p><div class="figure"><a id="d0e22254"/><p class="title"><strong>Figure 19.71. Function</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/Function.png" align="middle" alt="Function"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.10. DSL editor"><div class="titlepage"><div><div><h2 class="title"><a id="drools.DSLEditor"/>19.10. DSL editor</h2></div></div></div><p>The DSL editor allows DSL Sentences to be authored. The reader should
  take time to explore DSL features in the Drools Expert documentation; as the
  syntax in Drools Workbench's DSL Editor is identical. The normal syntax is extended to
  provide "hints" to control how the DSL variable is rendered and validated
  within the user-interface.</p><p>The following "hints" are supported:-</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>{&lt;varName&gt;:&lt;regular expression&gt;}</p><p>This will render a text field in place of the DSL variable when
      the DSL Sentence is used in the guided editor. The content of the text
      field will be validated against the regular expression.</p></li><li class="listitem"><p>{&lt;varName&gt;:ENUM:&lt;factType.fieldName&gt;}</p><p>This will render an enumeration in place of the DSL variable when
      the DSL Sentence is used in the guided editor.
      &lt;factType.fieldName&gt; binds the enumeration to the model Fact and
      Field enumeration definition. This could be either a "Drools Workbench
      enumeration" (i.e. defined within the Workbench) or a Java
      enumeration (i.e. defined in a model POJO JAR file).</p></li><li class="listitem"><p>{&lt;varName&gt;:DATE:&lt;dateFormat&gt;}</p><p>This will render a Date selector in place of the DSL variable when
      the DSL Sentence is used in the guided editor.</p></li><li class="listitem"><p>{&lt;varName&gt;:BOOLEAN:&lt;[checked | unchecked]&gt;}</p><p>This will render a dropdown selector in place of the DSL variable,
      providing boolean choices, when the DSL Sentence is used in the guided
      editor.</p></li><li class="listitem"><p>{&lt;varName&gt;:CF:&lt;factType.fieldName&gt;}</p><p>This will render a button that will allow you to set the value of
      this variable using a Custom Form. In order to use this feature, a 
      Working-Set containing a Custom Form Configuration for factType.fieldName
      must be active. If there is no such Working-Set, a simple text box
      is used (just like a regular variable).</p><p>For more information, please read more about Working-Sets and
      Custom Form Configurations.</p></li></ul></div><div class="figure"><a id="d0e22295"/><p class="title"><strong>Figure 19.72. DSL rule</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/DSLEditor.png" align="middle" alt="DSL rule"/></div></div></div><br class="figure-break"/></div><div class="section" title="19.11. Data enumerations (drop down list configurations)"><div class="titlepage"><div><div><h2 class="title"><a id="drools.EnumerationEditor"/>19.11. Data enumerations (drop down list configurations)</h2></div></div></div><p>Data enumerations are an optional asset type that technical folk can
  configure to provide drop down lists for the guided editor. These are stored
  and edited just like any other asset, and apply to the package that they
  belong to.</p><p>The contents of an enum config are a mapping of <code class="code">Fact.field</code> to a list
  of values to be used in a drop down. The strings are either a value to be shown in a drop down, or a mapping from
  the code value (what ends up used in the rule) and a display value.</p><div class="figure"><a id="d0e22311"/><p class="title"><strong>Figure 19.73. Data enumeration</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/EnumConfig.png" align="middle" alt="Data enumeration"/></div></div></div><br class="figure-break"/><p>If you wish to use a mapping between value used in the rule and the value shown in the UI you
    need to separate the code value and display value with an equals sign. For
    example:</p><pre><code class="no-highlight">'Person.gender' : ['M=Male','F=Female']</code></pre><p>In this example
      <code class="code">F</code> will be used in the rules but <code class="code">Female</code> shown in the UI.</p><p>Drop down lists can also depend on other field values.</p><p>Lets imagine a simple fact model, we have a class called Vehicle, which has 2 fields:
    <code class="code">engineType</code> and <code class="code">fuelType</code>. We want to have a choice for the <code class="code">engineType</code>
    of "Petrol" or "Diesel". Now, obviously the choice type for fuel must be
    dependent on the engine type (so for Petrol we have ULP and PULP, and for
    Diesel we have BIO and NORMAL). We can express this dependency in an
    enumeration as:</p><div class="figure"><a id="d0e22341"/><p class="title"><strong>Figure 19.74. </strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/EnumVehicleEngine.png" align="middle"/></div></div></div><br class="figure-break"/><p>This shows how it is possible to make the choices dependent on other
    field values. Note that once you pick the engineType, the choice list for
    the fuelType will be determined.</p><div class="section" title="19.11.1. Advanced enumeration concepts"><div class="titlepage"><div><div><h3 class="title"><a id="drools.AdvancedEnumConcepts"/>19.11.1. Advanced enumeration concepts</h3></div></div></div><p>There are a few other advanced things you can do with data enumerations.</p><div class="section" title="19.11.1.1. External data-sources"><div class="titlepage"><div><div><h4 class="title"><a id="drools.AdvanceEnumConcepts.external"/>19.11.1.1. External data-sources</h4></div></div></div><p>Instead of defining a static list you can retrieve the list from an external data-source
        by using a helper class.</p><p>The helper class must be on the Project's classpath; by adding a JAR containng the class
        as a project dependency. The helper class must be instantiable and have a non-static method
        that returns a <code class="code">java.util.List</code>. Population of the list is implementation
        specific.</p><p>For
        example:</p><pre><code class="no-highlight">'Person.age' : (new org.yourco.DataHelper()).getListOfAges()</code></pre><p>In some other cases you may want to load the enumeration data entirely from an external
        data source (such as a relational database). To do this, you can implement a class that
        returns a <code class="code">Map&lt;String, List&lt;String&gt;&gt;</code>. The key of the map is the <code class="code">Fact.field</code> 
        and the value is a <code class="code">java.util.List&lt;String&gt;</code> of values to be used.</p><pre><code class="language-java">public class SampleDataSource2 {

  public Map&lt;String&gt;, List&lt;String&gt; loadData() {
    Map data = new HashMap();

    List d = new ArrayList();
    d.add("value1");
    d.add("value2");
    data.put("Fact.field", d);

    return data;
  }

}</code></pre><p>The enumeration definition would simply be as follows (with no reference to fact or
        field names):</p><pre><code class="language-java">=(new SampleDataSource2()).loadData()</code></pre><p>The <code class="code">=</code> operator informs the workbench to load all enumeration data from the
        helper class.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>The helper methods will be statically evaluated when the
          enumeration definition is requested for use in an editor.</p></div></div><div class="section" title="19.11.1.2. Dynamic lookup"><div class="titlepage"><div><div><h4 class="title"><a id="drools.AdvanceEnumConcepts.dynamic"/>19.11.1.2. Dynamic lookup</h4></div></div></div><p>All of the above cases retrieve the list of values by statically evaluating the
        enumeration definition when enumerations are required by an editor.</p><p>It is also possible to load
        dependent enumeration definitions dynamically from a helper class by enclosing the call to
        the helper class within quotation marks. For
        example:</p><pre><code class="no-highlight">'Country.region[countryCode]' : '(new org.yourco.DataHelper()).getListOfRegions("@{countryCode}")'</code></pre></div></div></div><div class="section" title="19.12. Technical rules (DRL)"><div class="titlepage"><div><div><h2 class="title"><a id="drools.DRLEditor"/>19.12. Technical rules (DRL)</h2></div></div></div><p>Technical (DRL) rules are stored as text - they can be managed in Drools Workbench. 
    A DRL can either be a whole chunk of rules, or an individual rule.
  If it's an individual rule, no package statement or imports are required (in
  fact, you can skip the "rule" statement altogether, just use "when" and
  "then" to mark the condition and action sections respectively). Normally you
  would use the IDE to edit raw DRL files, since it has all the advanced
  tooling and content assistance and debugging. However, there are times when
  a rule may have to deal with something fairly technical in a package in
  Drools Workbench. In any typical package of rules, you generally have a need for some
  "technical rules" - you can mix and match all the rule types together of
  course.</p><div class="figure"><a id="d0e22405"/><p class="title"><strong>Figure 19.75. DRL technical rule</strong></p><div class="figure-contents"><div class="mediaobject" align="center"><img src="images/Workbench/AuthoringAssets/DRLRule.png" align="middle" alt="DRL technical rule"/></div></div></div><br class="figure-break"/></div></div><script type="text/javascript" src="highlight.js/highlight.pack.js"> </script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><ul class="docnav"><li class="previous"><a accesskey="p" href="ch18.html"><strong>Prev</strong>Chapter 18. Workbench (General)</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="ch20.html"><strong>Next</strong>Chapter 20. Workbench Integration</a></li></ul></body></html>