<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 17. JMX monitoring with RHQ/JON</title><link rel="stylesheet" type="text/css" href="css/jbossorg.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><link rel="home" href="index.html" title="Drools Documentation"/><link rel="up" href="pt04.html" title="Part IV. Drools Integration"/><link rel="prev" href="ch16.html" title="Chapter 16. Drools Camel Server"/><link rel="next" href="pt05.html" title="Part V. Drools Workbench"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="ch16.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="pt05.html"><strong>Next</strong></a></li></ul><div class="chapter" title="Chapter 17. JMX monitoring with RHQ/JON"><div class="titlepage"><div><div><h2 class="title"><a id="RHQChapter"/>Chapter 17. JMX monitoring with RHQ/JON</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch17.html#d0e16550">17.1. Introduction</a></span></dt><dd><dl><dt><span class="section"><a href="ch17.html#d0e16555">17.1.1. Enabling JMX monitoring in a Drools application</a></span></dt><dt><span class="section"><a href="ch17.html#d0e16574">17.1.2. Installing and running the RHQ/JON plugin</a></span></dt></dl></dd></dl></div><div class="section" title="17.1. Introduction"><div class="titlepage"><div><div><h2 class="title"><a id="d0e16550"/>17.1. Introduction</h2></div></div></div><p>The Drools engine supports runtime monitoring through JMX standard
      MBeans. These MBeans expose configuration and metrics data, from live
      knowledge bases and sessions, to internal details like rule execution times.
      Any JMX compatible console can be used to access that data. This chapter
      details how to use RHQ/JON to do it, but similar steps can be used for any
      other console.</p><div class="section" title="17.1.1. Enabling JMX monitoring in a Drools application"><div class="titlepage"><div><div><h3 class="title"><a id="d0e16555"/>17.1.1. Enabling JMX monitoring in a Drools application</h3></div></div></div><p>To enable JMX monitoring in a Drools application, it is necessary to
        enable remote monitoring in the JVM. There are several tutorials on how to
        do that in the internet, but we recommend that you check the documentation
        of your specific JVM. Using the Oracle/Sun JVM, it can be as simple as
        running the engine with a few command line system properties.</p><p>For instance, to enable remote monitoring on port 19988 with
        disabled authentication (should be only used for tests/demos, as in
        production authentication should be enabled), just run the application
        with the following command line parameters:</p><pre><code class="language-xml"> -Dcom.sun.management.jmxremote.port=19988 -Dcom.sun.management.jmxremote.ssl=false -Dcom.sun.management.jmxremote.authenticate=false
</code></pre><p>The second step is to enable the Drools MBeans. As any Drools
        configuration, that can be done by setting a system property, or adding
        the property to a configuration file, or using the API.</p><p>To enable it in the command line, use:</p><pre><code class="language-xml"> -Dkie.mbeans=enabled</code></pre><p>To enable id using the API, use:</p><pre><code class="language-xml"> KieBaseConfiguration conf = ...
 conf.setOption( MBeansOption.ENABLED );</code></pre></div><div class="section" title="17.1.2. Installing and running the RHQ/JON plugin"><div class="titlepage"><div><div><h3 class="title"><a id="d0e16574"/>17.1.2. Installing and running the RHQ/JON plugin</h3></div></div></div><p>The following sequence of steps can be used to configure JON to
        monitor a Drools application:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Download the JON server and agent.</p></li><li class="listitem"><p>Download Drools plugin included in the "Drools and jBPM tools"
            bundle (http://www.jboss.org/drools/downloads.html).</p></li><li class="listitem"><p>Install server, agent, and the plugin. </p></li><li class="listitem"><p>Check that the server is running, agent is running and plugin is
            installed.</p></li><li class="listitem"><p>Execute the drools application [see details in the previous
            section].</p></li><li class="listitem"><p>On the agent console, type "discovery" command for the agent to
            find the drools application, which it will find on port 19988. </p></li><li class="listitem"><p>On JON console, click on auto-discovery queue.</p></li><li class="listitem"><p>Select the JMX Server process that is showing there, running on
            port 19988.</p></li><li class="listitem"><p>Click import.</p></li><li class="listitem"><p>Click on Resources-&gt;servers.</p></li><li class="listitem"><p>Click on the JMX Server.</p></li><li class="listitem"><p>Under JMXServer on the left hand side, you have Drools
            Service.</p></li></ol></div></div></div></div><script type="text/javascript" src="highlight.js/highlight.pack.js"> </script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><ul class="docnav"><li class="previous"><a accesskey="p" href="ch16.html"><strong>Prev</strong>Chapter 16. Drools Camel Server</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="pt05.html"><strong>Next</strong>Part V. Drools Workbench</a></li></ul></body></html>