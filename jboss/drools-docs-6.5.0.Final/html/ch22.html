<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Chapter 22. KIE Execution Server</title><link rel="stylesheet" type="text/css" href="css/jbossorg.css"/><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><link rel="home" href="index.html" title="Drools Documentation"/><link rel="up" href="pt06.html" title="Part VI. KIE Server"/><link rel="prev" href="pt06.html" title="Part VI. KIE Server"/><link rel="next" href="pt07.html" title="Part VII. Drools Examples"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body><p id="title"><a href="http://www.jboss.org" class="site_href"><strong>JBoss.org</strong></a><a href="http://docs.jboss.org/" class="doc_href"><strong>Community Documentation</strong></a></p><ul class="docnav"><li class="previous"><a accesskey="p" href="pt06.html"><strong>Prev</strong></a></li><li class="next"><a accesskey="n" href="pt07.html"><strong>Next</strong></a></li></ul><div class="chapter" title="Chapter 22. KIE Execution Server"><div class="titlepage"><div><div><h2 class="title"><a id="ch.kie.server"/>Chapter 22. KIE Execution Server</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ch22.html#d0e24210">22.1. Overview</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e24254">22.1.1. Glossary</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e24323">22.2. Installing the KIE Server</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e24374">22.2.1. Bootstrap switches</a></span></dt><dt><span class="section"><a href="ch22.html#d0e24677">22.2.2. Installation details for different containers</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e24798">22.3. Kie Server setup</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e24807">22.3.1. Managed Kie Server </a></span></dt><dt><span class="section"><a href="ch22.html#d0e24889">22.3.2. Unmanaged KIE Execution Server</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e24914">22.4. Creating a Kie Container</a></span></dt><dt><span class="section"><a href="ch22.html#d0e24991">22.5. Managing Containers</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e24996">22.5.1. Starting a Container</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25005">22.5.2. Stopping and Deleting a Container</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25010">22.5.3. Updating a Container</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e25070">22.6. Kie Server REST API</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e25090">22.6.1. [GET] /</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25100">22.6.2. [POST] /</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25140">22.6.3. [GET] /containers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25171">22.6.4. ⁠[GET] /containers/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25184">22.6.5. [PUT] /containers/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25207">22.6.6. [DELETE] /containers/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25220">22.6.7. [POST] /containers/instances/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25288">22.6.8. [GET] /containers/{id}/release-id</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25298">22.6.9. [POST] /containers/{id}/release-id</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25315">22.6.10. [GET] /containers/{id}/scanner</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25325">22.6.11. [POST] /containers/{id}/scanner</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25350">22.6.12. Native REST client for Execution Server</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e25373">22.7. OptaPlanner REST API</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e25410">22.7.1. [GET] /containers/{containerId}/solvers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25425">22.7.2. [PUT] /containers/{containerId}/solvers/{solverId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25458">22.7.3. [GET] /containers/{containerId}/solvers/{solverId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25479">22.7.4. [POST] /containers/{containerId}/solvers/{solverId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25530">22.7.5. [GET] /containers/{containerId}/solvers/{solverId}/bestsolution</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25548">22.7.6. [DELETE] /containers/{containerId}/solvers/{solverId}</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e25569">22.8. Controller REST API</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e25587">22.8.1. [GET] /management/servers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25597">22.8.2. [GET] /management/server/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25607">22.8.3. [PUT] /management/server/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25617">22.8.4. [DELETE] /management/server/{id}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25622">22.8.5. [GET] /management/server/{id}/containers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25632">22.8.6. [GET] /management/server/{id}/containers/{containerId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25642">22.8.7. [PUT] /management/server/{id}/containers/{containerId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25652">22.8.8. [DELETE] /management/server/{id}/containers/{containerId}</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25657">22.8.9. [POST] /management/server/{id}/containers/{containerId}/status/started</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25662">22.8.10. [POST] /management/server/{id}/containers/{containerId}/status/stopped</a></span></dt></dl></dd><dt><span class="section"><a href="ch22.html#d0e25667">22.9. Kie Server Java Client API</a></span></dt><dd><dl><dt><span class="section"><a href="ch22.html#d0e25672">22.9.1. Maven Configuration</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25690">22.9.2. Client Configuration</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25753">22.9.3. Server Response</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25777">22.9.4. Server Capabilities</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25798">22.9.5. Kie Containers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25826">22.9.6. Managing Containers</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25837">22.9.7. Available Clients for the Decision Server</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25870">22.9.8. Sending commands to the server</a></span></dt><dt><span class="section"><a href="ch22.html#d0e25897">22.9.9. Listing available business processes</a></span></dt></dl></dd></dl></div><div class="section" title="22.1. Overview"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24210"/>22.1. Overview</h2></div></div></div><p>The <span class="emphasis"><em>Kie Server</em></span> is a modular, standalone server component that can be
              used to instantiate and execute rules and processes. It exposes this functionality via
              REST, JMS and Java interfaces to client application. It also provides seamless
              integration with the <span class="emphasis"><em>Kie Workbench</em></span>. </p><p>At its core, the <span class="emphasis"><em>Kie Server</em></span> is a configurable web application
              packaged as a WAR file. Distributions are availables for pure web containers (like
              Tomcat) and for JEE 6 and JEE 7 containers.</p><p>Most capabilities on the Kie Server are configurable, and based on the concepts of
              extensions. Each extension can be enabled/disabled independently, allowing the user to
              configure the server to its need. </p><p>The current version of the Kie Server ships with two default extensions: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>BRM: provides support for the execution of Business Rules using
                                   the Drools rules engine.</p></li><li class="listitem"><p>BPM: provides support for the execution of Business Processes
                                   using the jBPM process engine. It supports:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>process execution</p></li><li class="listitem"><p>task execution</p></li><li class="listitem"><p>assynchronous job execution</p></li></ul></div></li></ul></div><p>Both extensions enabled by default, but can be disabled by setting the corresponding property
              (see configuration chapter for details).</p><p>This server was designed to have a low footprint, with minimal memory consumption, and
              therefore, to be easily deployable on a cloud environment. Each instance of this
              server can open and instantiate multiple <span class="emphasis"><em>Kie Containers</em></span> which
              allows you to execute multiple services in parallel.</p><div class="section" title="22.1.1. Glossary"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24254"/>22.1.1. Glossary</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Kie Server</strong></span>: execution server purely focusing
                                   on providing runtime environment for both rules and processes.
                                   These capabilities are provided by <span class="emphasis"><em>Kie Server
                                          Extensions</em></span>. More capabilities can be added by
                                   further extensions (e.g. customer could add his own extensions in
                                   case of missing functionality that will then use infrastructure
                                   of the KIE Server). A Kie Server instance is a standalone Kie
                                   Server executing on a given application server/web container. A
                                   Kie Server instantiates and provides support for multiple Kie
                                   Containers.</p></li><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Kie Server Extension</strong></span>: a "plugin" for the Kie Server that adds
                                   capabilities to the server. The Kie Server ships with two default
                                   kie server extensions: BRM and BPM.</p></li><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Kie Container</strong></span>: an in-memory instantiation of a kjar, allowing for
                                   the instantiation and usage of its assets (domain models,
                                   processes, rules, etc). A Kie Server exposes Kie Containers
                                   through a standard API over transport protocols like REST and
                                   JMS.</p></li><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Controller</strong></span>: a server-backed REST endpoint that
                                   will be responsible for managing KIE Server instances. Such end
                                   point must provide following capabilities: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>respond to connect requests </p></li><li class="listitem"><p>sync all registered containers on the
                                                  corresponding <span class="emphasis"><em>Kie Server
                                                  ID</em></span></p></li><li class="listitem"><p>respond to disconnect requests</p></li></ul></div></li><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Kie Server state</strong></span>: currently known state of
                                   given Kie Server instance. This is a local storage (by default in
                                   file) that maintains the following information: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>list of registered controllers </p></li><li class="listitem"><p>list of known containers </p></li><li class="listitem"><p>kie server configuration </p></li></ul></div><p>The server state is persisted upon receival of
                                   events like: <span class="emphasis"><em>Kie Container</em></span> created,
                                          <span class="emphasis"><em>Kie Container</em></span> is disposed, controller
                                   accepts registration of <span class="emphasis"><em>Kie Server</em></span> instance,
                                   etc. </p></li><li class="listitem"><p><span class="bold"><a id="docs-internal-guid-81eb08e8-d2fc-a4e7-6584-b666315fc14d"/><strong>Kie Server ID</strong></span>: an arbitrary assigned
                                   identifier to which configurations are assigned. At boot, each
                                   Kie Server Instance is assigned an ID, and that ID is matched to
                                   a configuration on the controller. The Kie Server Instance
                                   fetches and uses that configuration to setup itself.</p></li></ul></div></div></div><div class="section" title="22.2. Installing the KIE Server"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24323"/>22.2. Installing the KIE Server</h2></div></div></div><p>The KIE Server is distributed as a web application archive (WAR) file. The WAR file comes in
    three different packagings: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><span class="emphasis"><em>webc</em></span> - WAR for ordinary Web (Servlet) containers like
        Tomcat</li><li class="listitem"><span class="emphasis"><em>ee6</em></span> - WAR for JavaEE 6 containers like JBoss EAP 6.x</li><li class="listitem"><span class="emphasis"><em>ee7</em></span> - WAR for JavaEE 7 containers like WildFly 8.x</li></ul></div><p>
  </p><p>To install the KIE Execution Server and verify it is running, complete the following
    steps:</p><p>
    </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Deploy the WAR file into your web container.</p></li><li class="listitem"><p>Create a user with the role of <code class="code">kie-server</code> on the container.</p></li><li class="listitem"><p>Test that you can access the execution engine by navigating to the endpoint in a
          browser window: <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/</code>.</p></li><li class="listitem"><p>When prompted for username/password, type in the username and password that you
          created in step 2.</p></li><li class="listitem"><p>Once authenticated, you will see an XML response in the form of engine status, similar
          to this:</p><div class="example"><a id="d0e24368"/><p class="title"><strong>Example 22.1. Sample handshaking server response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="KIE Server info"&gt;
  &lt;kie-server-info&gt;
    &lt;version&gt;6.5.0.Final&lt;/version&gt;
  &lt;/kie-server-info&gt;
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></li></ol></div><p>
  </p><div class="section" title="22.2.1. Bootstrap switches"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24374"/>22.2.1. Bootstrap switches</h3></div></div></div><p>The Kie Server accepts a number of bootstrap switches (system properties) to configure the
      behaviour of the server. The following is a table of all the supported switches.</p><p>
      </p><div class="table"><a id="d0e24381"/><p class="title"><strong>Table 22.1. Kie Server bootstrap switches</strong></p><div class="table-contents"><table summary="Kie Server bootstrap switches" border="1"><colgroup><col width="2.0*" class="c1"/><col width="2.0*" class="c2"/><col width="4.0*" class="c3"/><col width="1.0*" class="c4"/></colgroup><thead><tr><th>Property</th><th>Value</th><th>Description</th><th>Required</th></tr></thead><tbody><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d278-cdbc-3277-34f586cd28ee"/><strong>org.drools.server.ext.disabled</strong></span></td><td>boolean (default is "false")</td><td>If true, disables the BRM support (i.e. rules support).</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d27a-35ba-25c1-375f7ecf35d9"/><strong>org.jbpm.server.ext.disabled</strong></span></td><td>boolean (default is "false")</td><td>If true, disables the BPM support (i.e. processes support)</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d276-b920-8222-1515def0d382"/><strong>org.kie.server.id</strong></span></td><td>string</td><td>An arbitrary ID to be assigned to this server. If a remote controller is
                configured, this is the ID under which the server will connect to the controller to
                fetch the kie container configurations.</td><td>No. If not provided, an ID is automatically generated.</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d286-e838-9601-f36fb91cf626"/><strong>org.kie.server.user</strong></span></td><td>string (default is "kieserver")</td><td>User name used to connect with the kieserver from the controller, required when
                running in managed mode</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d288-28ab-6e4b-a529f64bf5cf"/><strong>org.kie.server.pwd</strong></span></td><td>string (default is "kieserver1!")</td><td>Password used to connect with the kieserver from the controller, required when
                running in managed mode</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d289-27cd-441b-87c88d1aac84"/><strong>org.kie.server.controller</strong></span></td><td>comma separated list of urls</td><td>List of urls to controller REST endpoint. E.g.:
                  <code class="code">http://localhost:8080/kie-wb/rest/controller</code></td><td>Yes when using a controller</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d28a-a44b-544c-ff3012ddd077"/><strong>org.kie.server.controller.user</strong></span></td><td>string (default is "kieserver")</td><td>Username used to connect to the controller REST api</td><td>Yes when using a controller</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d28b-6920-9056-ad5537e03b3d"/><strong>org.kie.server.controller.pwd</strong></span></td><td>string (default is "kieserver1!")</td><td>Password used to connect to the controller REST api</td><td>Yes when using a controller</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d28c-0bcf-855f-17de4a1a154a"/><strong>org.kie.server.location</strong></span></td><td>URL location of kie server instance</td><td>The URL used by the controller to call back on this server. E.g.:
                  <code class="code">http://localhost:8230/kie-server/services/rest/server</code></td><td>Yes when using a controller</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d290-70e3-4337-c0623e88997d"/><strong>org.kie.server.domain</strong></span></td><td>string</td><td>JAAS LoginContext domain that shall be used to authenticate users when using
                JMS</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d291-35f6-a580-d9d9091ec570"/><strong>org.kie.server.bypass.auth.user</strong></span></td><td>boolean (default is "false")</td><td>Allows to bypass the authenticated user for task related operations e.g.
                queries</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d297-a4e6-1f15-48a5fe5d736b"/><strong>org.kie.server.repo</strong></span></td><td>valid file system path (default is ".")</td><td>Location on local file system where kie server state files will be
                stored</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d298-77f0-49d2-43c1bdf73d67"/><strong>org.kie.server.persistence.ds</strong></span></td><td>string</td><td>Datasource JNDI name</td><td>Yes when BPM support enabled</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d299-3d38-fcd9-3f423d7fecce"/><strong>org.kie.server.persistence.tm</strong></span></td><td>string</td><td>Transaction manager platform for Hibernate properties set</td><td>Yes when BPM support enabled</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29a-a314-2bf7-907d924fceae"/><strong>org.kie.server.persistence.dialect</strong></span></td><td>string</td><td>Hibernate dialect to be used</td><td>Yes when BPM support enabled</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29b-24df-ead1-cf206900593d"/><strong>org.jbpm.ht.callback</strong></span></td><td>string</td><td>One of supported callbacks for Task Service (default jaas)</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29b-bb9f-8a9d-ab034d736caf"/><strong>org.jbpm.ht.custom.callback</strong></span></td><td>string</td><td>Custom implementation of UserGroupCallback in case org.jbpm.ht.callback was set
                to ‘custom’</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29c-2bab-5ef7-13cbec1d5a68"/><strong>kie.maven.settings.custom</strong></span></td><td>valid file system path </td><td>Location of custom settings.xml for maven configuration</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29d-4700-7f41-91fa6d386ecd"/><strong>org.kie.executor.interval</strong></span></td><td>integer (default is 3)</td><td>Number of time units between polls by executor</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29d-ee54-02a8-274ef9383f41"/><strong>org.kie.executor.pool.size</strong></span></td><td>integer (default is 1)</td><td>Number of threads in the pool for async work</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d29e-9d32-e7ba-421f2a23128d"/><strong>org.kie.executor.retry.count</strong></span></td><td>integer (default is 3)</td><td>Number of retries to handle errors</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d2e4-4418-249a-eb8a85fb5da4"/><strong>org.kie.executor.timeunit</strong></span></td><td>TimeUnit (default is "SECONDS")</td><td>TimeUnit representing interval</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d2e5-23da-b5d3-f24703b68742"/><strong>org.kie.executor.disabled</strong></span></td><td>boolean (default is "false")</td><td>Disables executor completely</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d2e5-d59e-d87d-48a3630399a9"/><strong>kie.server.jms.queues.response</strong></span></td><td>string (default is "queue/KIE.SERVER.RESPONSE")</td><td>JNDI name of response queue for JMS</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d2e6-a4d9-d10c-e3b89262924b"/><strong>org.kie.server.controller.connect</strong></span></td><td>long (default is 10000)</td><td>Waiting time in milliseconds between repeated attempts to connect kie server to
                controller when kie server starts up</td><td>No</td></tr><tr><td><span class="bold"><a id="docs-internal-guid-81eb08e8-d2e6-a4d9-d10c-e3b89262924b"/><strong>org.drools.server.filter.classes</strong></span></td><td>boolean (default is "false")</td><td>If true, accept only classes which are annotated with @org.kie.api.remote.Remotable
                or @javax.xml.bind.annotation.XmlRootElement as extra JAXB classes</td><td>No</td></tr><tr><td> </td><td> </td><td> </td><td> </td></tr></tbody></table></div></div><p><br class="table-break"/>
      </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p>If you are running both KIE Server and KIE Workbench you must configure KIE Server to use a different Data Source to KIE Workbench using the
          <span class="bold"><strong>org.kie.server.persistence.ds</strong></span> property. KIE Workbench uses a jBPM Executor Service that can conflict with
          KIE Server if they share the same Data Source.</p></div><p>
    </p></div><div class="section" title="22.2.2. Installation details for different containers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24677"/>22.2.2. Installation details for different containers</h3></div></div></div><div class="section" title="22.2.2.1. Tomcat 7.x/8.x"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24680"/>22.2.2.1. Tomcat 7.x/8.x</h4></div></div></div><p>
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Download and unzip the Tomcat distribution. Let's call the root of the
              distribution <code class="code">TOMCAT_HOME</code>. This directory is named after the Tomcat
              version, so for example <code class="code">apache-tomcat-7.0.55</code>.</p></li><li class="listitem"><p>Download <span class="emphasis"><em>kie-server-6.5.0.Final-webc.war</em></span> and place it
              into <code class="code">TOMCAT_HOME/webapps</code>.</p></li><li class="listitem"><p>Configure user(s) and role(s). Make sure that file
                <code class="code">TOMCAT_HOME/conf/tomcat-users.xml</code> contains the following username and
              role definition. You can of course choose different username and password, just make
              sure that the user has role <code class="code">kie-server</code>: </p><div class="example"><a id="d0e24713"/><p class="title"><strong>Example 22.2. Username and role definition for Tomcat</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;role rolename="kie-server"/&gt;
&lt;user username="serveruser" password="my.s3cr3t.pass" roles="kie-server"/&gt;</code></pre></div></div><p><br class="example-break"/>
            </p></li><li class="listitem"><p>Start the server by running <code class="code">TOMCAT_HOME/bin/startup.[sh|bat]</code>. You can
              check out the Tomcat logs in <code class="code">TOMCAT_HOME/logs</code> to see if the application
              deployed successfully. Please read the table above for the bootstrap switches that can
              be used to properly configure the instance. For
              instance:</p><pre><code class="no-highlight">./startup.sh -Dorg.kie.server.id=first-kie-server
             -Dorg.kie.server.location=http://localhost:8080/kie-server/services/rest/server</code></pre></li><li class="listitem"><p>Verify the server is running. Go to
                <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/</code> and type the specified
              username and password. You should see simple XML message with basic information about
              the server.</p></li></ol></div><p>
        </p><p>
          </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2>You can not leverage the JMS interface when running on Tomcat, or any other Web
            container. The Web container version of the WAR contains only the REST interface.
          </div><p>
        </p><p>
      </p></div><div class="section" title="22.2.2.2. WildFly 8.x"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24743"/>22.2.2.2. WildFly 8.x</h4></div></div></div><p>
        </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Download and unzip the WildFly distribution. Let's call the root of the
              distribution <code class="code">WILDFLY_HOME</code>. This directory is named after the WildFly
              version, so for example <code class="code">wildfly-8.2.0.Final</code>. </p></li><li class="listitem"><p>Download <span class="emphasis"><em>kie-server-6.5.0.Final-ee7.war</em></span> and place it
              into <code class="code">WILDFLY_HOME/standalone/deployments</code>. </p></li><li class="listitem"><p>Configure user(s) and role(s). Execute the following command <code class="code">
                WILDFLY_HOME/bin/add-user.[sh|bat] -a -u 'kieserver' -p 'kieserver1!' -ro
                'kie-server'</code>. You can of course choose different username and password, just
              make sure that the user has role <code class="code">kie-server</code>. </p></li><li class="listitem"><p>Start the server by running <code class="code">WILDFLY_HOME/bin/standalone.[sh|bat] -c
                standalone-full.xml &lt;bootstrap_switches&gt;</code>. You can check out the standard
              output or WildFly logs in <code class="code">WILDFLY_HOME/standalone/logs</code> to see if the
              application deployed successfully. Please read the table above for the bootstrap
              switches that can be used to properly configure the instance. For
              instance:</p><pre><code class="no-highlight">./standalone.sh  --server-config=standalone-full.xml
                 -Djboss.socket.binding.port-offset=150
                 -Dorg.kie.server.id=first-kie-server
                 -Dorg.kie.server.location=http://localhost:8230/kie-server/services/rest/server</code></pre></li><li class="listitem"><p>Verify the server is running. Go to
                <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/</code> and type the specified
              username and password. You should see simple XML message with basic information about
              the server. </p><div class="screenshot"><div class="mediaobject"><img src="shared/images/KieServer/kie-server-info.png"/></div></div></li></ol></div><p>
      </p></div></div></div><div class="section" title="22.3. Kie Server setup"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24798"/>22.3. Kie Server setup</h2></div></div></div><p>
              </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p>Server setup and registration changed significantly from versions 6.2 and
                            before. The following applies only to version 6.3 and forward.</p></div><p>
       </p><div class="section" title="22.3.1. Managed Kie Server"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24807"/>22.3.1. Managed Kie Server </h3></div></div></div><p>A managed instance is one that requires a controller to be available to properly
                     startup the Kie Server instance. </p><p>A Controller is a component responsible for keeping and managing a Kie Server
                     Configuration in centralized way. Each controller can manager multiple
                     configurations at once and there can be multiple controllers in the
                     environment. Managed KIE Servers can be configured with a list of controllers
                     but will connect to only one at a time.</p><p>
                     </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>It's important to mention that even though there can be multiple
                            controllers they should be kept in sync to make sure that regardless
                            which one of them is contacted by KIE Server instance it will provide
                            same set of configuration.</div><p>
              </p><p>At startup, if a Kie Server is configured with a list of controllers, it will
                     try succesivelly to connect to each of them until a connection is successfully
                     stablished with one of them. If for any reason a connection can't be
                     stablished, the server will not start, even if there is local storage available
                     with configuration. This happens by design in order to ensure consistency. For
                     instance, if the Kie  Server was down and the configuration has changed, this
                     restriction guarantees that it will run with up to date configuration or not at
                     all. </p><p>
                     </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>In order to run the Kie Server in standalone mode, without connecting to
                            any controllers, please see "Unmanaged Kie Server". </div><p>
              </p><p>The configuration sets, among other things: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>kie containers to be deployed and started</p></li><li class="listitem"><p>configuration items - currently this is a place holder for
                                          further enhancements that will allow remotely configure
                                          KIE Execution Server components - timers, persistence, etc
                                   </p></li></ul></div><p>The Controller, besides providing configuration management, is
                     also responsible for overall management of Kie Servers. It provides a REST api
                     that is divided into two parts:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>the controller itself that is exposed to interact with KIE
                                          Execution Server instances</p></li><li class="listitem"><p>an administration API that allows to remotely manage Kie
                                          Server instances:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>add/remove servers </p></li><li class="listitem"><p>add/remove containers to/from the
                                                  servers</p></li><li class="listitem"><p>start/stop containers on servers </p></li></ul></div></li></ul></div><p>The controller deals only with the Kie Server configuration or definition to put
                     it differently. It does not handle any runtime components of KIE Execution
                     Server instances. They are always considered remote to controller. The
                     controller is responsible for persisting the configuration to preserve restarts
                     of the controller itself. It should manage the synchronization as well in case
                     multiple controllers are configured to keep all definitions up to date on all
                     instances of the controller. </p><p>By default controller is shipped with Kie Workbench and provides a fully
                     featured management interface (both REST api and UI). It uses underlying git
                     repository as persistent store and thus when GIT repositories are clustered
                     (using Apache Zookeeper and Apache Helix) it will cover the controllers
                     synchronization as well. </p><div class="screenshot"><div class="mediaobject"><img src="shared/images/KieServer/kie-server-simple-architecture.png"/></div></div><p>The diagram above illustrates the single controller (workbench) setup with
                     multiple Kie Server instances managed by it. </p><p>The diagram below illustrates the clustered setup where there are multiple
                     instances of controller synchronized over Zookeeper. </p><div class="screenshot"><div class="mediaobject"><img src="shared/images/KieServer/kie-server-architecture.png"/></div></div><p>In the above diagram we can see that the Kie Server instances are capable of
                     connecting to any controllers, but they will connect to only one. Each instance
                     will attempt to connect to controller as long as it can reach one. Once
                     connection is established with one of the controllers it will skip the others. </p><div class="section" title="22.3.1.1. Working with managed servers"><div class="titlepage"><div><div><h4 class="title"><a id="d0e24873"/>22.3.1.1. Working with managed servers </h4></div></div></div><p>There are two approaches that users can take when working with managed
                            KIE Server instances: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p><span class="emphasis"><em>Configuration first: </em></span>with this approach, a user will start working with
                                          the controller (either UI or REST api) and create and
                                          configure Kie Server definitions. That consists basically
                                          of an identification for the server definition (id and
                                          name + optionally version for improved readability) and
                                          the configuration for the Kie Containers to run on the
                                          server.</p></li><li class="listitem"><p><span class="emphasis"><em>Registration first:</em></span> with this approach, the Kie Server instances are
                                          started first and auto register themselves on controller.
                                          The user then can configure the Kie Containers. This
                                          option simply skips the registration step done in the
                                          first approach and populates it with server id, name and
                                          version directly upon auto registration. There are no
                                          other differences between the two approaches.</p></li></ul></div></div></div><div class="section" title="22.3.2. Unmanaged KIE Execution Server"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24889"/>22.3.2. Unmanaged KIE Execution Server</h3></div></div></div><p>An unmanaged Kie Server is in turn just a standalone instance, and thus must be
                     configured individually using REST/JMS api from the Kie Server itself. There is
                     no controller involved. The configuration is automatically persisted by the
                     server into a file and that is used as the internal server state, in case of
                     restarts. </p><p>The configuration is updated during the following operations: </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>deploy Kie Container </p></li><li class="listitem"><p>undeploy Kie Container </p></li><li class="listitem"><p>start Kie Container </p></li><li class="listitem"><p>stop Kie Container</p></li></ul></div><p>
                     </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2>if the Kie Server is restarted, it will try to restablish the same state
                     that was persisted before shutdown. That means that Kie Containers that were 
                     running, will be started, but the ones that were stopped/disposed before, will not.
                     </div><p>In most use cases, the Kie Server should be executed in managed mode as that
                     provides some benefits, like a web user interface (if using the workbench as a
                     controller) and some facilities for clustering.</p></div></div><div class="section" title="22.4. Creating a Kie Container"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24914"/>22.4. Creating a Kie Container</h2></div></div></div><p>Once your Execution Server is registered, you can start adding <span class="bold"><strong>Kie Containers</strong></span> to it. </p><p><span class="bold"><strong>Kie Containers</strong></span> are self contained environments that have been provisioned to hold
              instances of your packaged and deployed rule instances.</p><p>
              </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Start by clicking the <span class="bold"><strong>+</strong></span> icon next to the Execution Server where
                                   you want to deploy your Container. This will bring up the New
                                   Container screen.</p></li><li class="listitem"><p>If you know the <span class="bold"><strong>Group Name</strong></span>,
                                          <span class="bold"><strong>Artifact Id</strong></span> and <span class="bold"><strong>Version</strong></span> (GAV) of your deployed
                                   package, then you can enter those details and click the Ok button
                                   to select that instance (and provide a name for the
                                   Container);</p></li><li class="listitem"><p>If you don't know these values, you can search KIE Workbench
                                   for all packages that can be deployed. Click the <span class="bold"><strong>Search</strong></span> button
                                   without entering any value in the search field (you can narrow
                                   your search by entering any term that you know exists in the
                                   package that you want to deploy).</p><p>
                                   </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p>INSERT
                                                 SCREENSHOT HERE</p></div><p>
                            </p><p>The figure above shows that there are three deployable packages
                                   available to be used as containers on the Execution Server.
                                   Select the one that you want by clicking the Select button. This
                                   will auto-populate the <span class="bold"><strong>GAV</strong></span> and you can then click the <span class="bold"><strong>Ok</strong></span> button
                                   to use this deployable as the new Container.</p></li><li class="listitem"><p>Enter a name for this Container at the top and then press the Ok
                                   button. </p><p>
                                   </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p>The Container name must be unique inside each
                                                 execution server and must not contain any
                                                 spaces.</p></div><p>
                            </p></li></ol></div><p>
       </p><p>
              </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Just below the <span class="bold"><strong>GAV</strong></span> row, you will see an uneditable row that shows you the
                            <span class="bold"><strong>URL</strong></span> for your Container against which you will be able to execute REST
                            commands.</p></div><p>
       </p></div><div class="section" title="22.5. Managing Containers"><div class="titlepage"><div><div><h2 class="title"><a id="d0e24991"/>22.5. Managing Containers</h2></div></div></div><p>Containers within the Execution Server can be started, stopped and updated from within
              KIE Workbench.⁠ </p><div class="section" title="22.5.1. Starting a Container"><div class="titlepage"><div><div><h3 class="title"><a id="d0e24996"/>22.5.1. Starting a Container</h3></div></div></div><p>Once registered, a Container is in the 'Stopped' mode. It can be started by
                     first selecting it and then clicking the Start button. You can also select
                     multiple Containers and start them all at the same time. </p><p>Once the Container is in the 'Running' mode, a green arrow appears next to it.
                     If there are any errors starting the Container(s), red icons appear next to
                     Containers and the Execution Server that they are deployed on. </p><p>You should check the logs of both the Execution Server and the current Business
                     Central to see what the errors are before redeploying the Containers (and
                     possibly the Execution Server).⁠</p></div><div class="section" title="22.5.2. Stopping and Deleting a Container"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25005"/>22.5.2. Stopping and Deleting a Container</h3></div></div></div><p>Similar to starting a Container, select the Container(s) that you want to
                     stop (or delete) and click the Stop button (which replaces the Start button for that
                     Container once it has entered the 'Running' mode) or the Delete button.⁠</p></div><div class="section" title="22.5.3. Updating a Container"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25010"/>22.5.3. Updating a Container</h3></div></div></div><p>You can update deployed <code class="code">KieContainers</code> without restarting the
                     Execution Server. This is useful in cases where the Business Rules change,
                     creating new versions of packages to be provisioned.</p><p>You can have multiple versions of the same package provisioned and deployed,
                     each to a different <code class="code">KieContainer</code>. </p><p>To update deployments in a <code class="code">KieContainer</code> dynamically, click on the
                     icon next to the Container. This will open up the Container Info screen. An
                     example of this screen is shown here:</p><p>
                     </p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Important</h2><p>INSERT
                                   SCREENSHOT HERE</p></div><p>
              </p><p>The Container Info screen is a useful tool because it not only allows you to see
                     the endpoint for this <code class="code">KieContainer</code>, but it also allows you to
                     either manually or automatically refresh the provision if an update is
                     available. The update can be manual or automatic:</p><p><span class="bold"><strong>Manual Update:</strong></span> To manually update a
                            <code class="code">KieContainer</code>, enter the new Version number in the Version
                     box and click on the <span class="bold"><strong>Update</strong></span> button. You can of
                     course, update the Group Id or the Artifact Id , if these have changed as well.
                     Once updated, the Execution server updates the container and shows you the
                     resolved GAV attributes at the bottom of the screen in the <span class="bold"><strong>Resolved Release Id</strong></span> section. </p><p><span class="bold"><strong>Automatic Update:</strong></span> If you want a deployed
                     Container to always have the latest version of your deployment without manually
                     editing it, you will need to set the Version property to the value of
                            <code class="code">LATEST</code> and start a <code class="code">Scanner</code>. This will ensure
                     that the deployed provision always contains the latest version. The Scanner can
                     be started just once on demand by clicking the Scan Now button or you can start
                     it in the background with scans happening at a specified interval (in
                     seconds).You can also set this value to <code class="code">LATEST</code> when you are first
                     creating this deployment. The <span class="bold"><strong>Resolved Release
                            Id</strong></span> in this case will show you the actual, latest version
                     number.</p></div></div><div class="section" title="22.6. Kie Server REST API"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25070"/>22.6. Kie Server REST API</h2></div></div></div><p>The Execution Server supports the following commands via the REST API. </p><p>Please note the following before using these commands: </p><p>
              </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The base URL for these will remain as the endpoint defined earlier
                                   (for example:
                                          <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/</code>
                                   )</p></li><li class="listitem"><p>All requests require basic HTTP Authentication for the role
                                   kie-server as indicated earlier.</p></li></ul></div><p>
       </p><div class="section" title="22.6.1. [GET] /"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25090"/>22.6.1. [GET] /</h3></div></div></div><p>Returns the Execution Server information</p><div class="example"><a id="d0e25095"/><p class="title"><strong>Example 22.3. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="KIE Server info"&gt;
  &lt;kie-server-info&gt; 
    &lt;version&gt;6.2.0.redhat-1&lt;/version&gt; 
  &lt;/kie-server-info&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.2. [POST] /"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25100"/>22.6.2. [POST] /</h3></div></div></div><p>Using POST HTTP method, you can execute various commands on the Execution
                     Server. E.g: create-container, list-containers, dispose-container and call-container.</p>
                     Following is the full list of commands:
              <p>
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>CreateContainerCommand</p></li><li class="listitem"><p>GetServerInfoCommand</p></li><li class="listitem"><p>ListContainersCommand</p></li><li class="listitem"><p>CallContainerCommand</p></li><li class="listitem"><p>DisposeContainerCommand</p></li><li class="listitem"><p>GetContainerInfoCommand</p></li><li class="listitem"><p>GetScannerInfoCommand</p></li><li class="listitem"><p>UpdateScannerCommand</p></li><li class="listitem"><p>UpdateReleaseIdCommand</p></li></ul></div><p>
                The commands itself can be found in the <code class="code">org.kie.server.api.commands</code> package.
              </p></div><div class="section" title="22.6.3. [GET] /containers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25140"/>22.6.3. [GET] /containers</h3></div></div></div><p>Returns a list of containers that have been created on this Execution
                     Server.</p><div class="example"><a id="d0e25145"/><p class="title"><strong>Example 22.4. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="List of created containers"&gt;
  &lt;kie-containers&gt; 
    &lt;kie-container container-id="MyProjectContainer" status="STARTED"&gt; 
      &lt;release-id&gt;
        &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
        &lt;group-id&gt;com.redhat&lt;/group-id&gt;
        &lt;version&gt;1.0&lt;/version&gt; 
      &lt;/release-id&gt; 
      &lt;resolved-release-id&gt;
        &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
        &lt;group-id&gt;com.redhat&lt;/group-id&gt;
        &lt;version&gt;1.0&lt;/version&gt; 
      &lt;/resolved-release-id&gt; 
    &lt;/kie-container&gt;
  &lt;/kie-containers&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/><p>
             The endpoint supports also filtering based on <code class="code">ReleaseId</code> and container status. Examples:
             </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><code class="code">/containers?groupId=org.example</code> - returns only containers with the specified groupId</li><li class="listitem"><code class="code">/containers?groupId=org.example&amp;artifactId=project1&amp;version=1.0.0.Final</code>
                     - returns only containers with the specified <code class="code">ReleaseId</code></li><li class="listitem"><code class="code">/containers?status=started,failed</code> - returns containers which are either started or failed</li></ul></div><p>
           </p></div><div class="section" title="22.6.4. ⁠[GET] /containers/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25171"/>22.6.4. ⁠[GET] /containers/{id}</h3></div></div></div><p>Returns the status and information about a particular container. For example,
                     executing
                            <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer</code>
                     could return the following example container info.</p><div class="example"><a id="d0e25179"/><p class="title"><strong>Example 22.5. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">⁠&lt;response type="SUCCESS" msg="Info for container MyProjectContainer"&gt;
  &lt;kie-container container-id="MyProjectContainer" status="STARTED"&gt; 
    &lt;release-id&gt;
      &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
      &lt;group-id&gt;com.redhat&lt;/group-id&gt;
      &lt;version&gt;1.0&lt;/version&gt; 
    &lt;/release-id&gt; 
    &lt;resolved-release-id&gt;
      &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
      &lt;group-id&gt;com.redhat&lt;/group-id&gt;
      &lt;version&gt;1.0&lt;/version&gt; 
    &lt;/resolved-release-id&gt; 
  &lt;/kie-container&gt;
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.5. [PUT] /containers/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25184"/>22.6.5. [PUT] /containers/{id}</h3></div></div></div><p>Allows you to create a new Container in the Execution Server. For example, to
                     create a Container with the id of <span class="bold"><strong>MyRESTContainer</strong></span> the complete endpoint will be:
                            <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyRESTContainer</code>.
                     An example of request is:⁠</p><div class="example"><a id="d0e25195"/><p class="title"><strong>Example 22.6. Example Request to create a container</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;kie-container container-id="MyRESTContainer"&gt;
  &lt;release-id&gt;
    &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
    &lt;group-id&gt;com.redhat&lt;/group-id&gt;
    &lt;version&gt;1.0&lt;/version&gt; 
  &lt;/release-id&gt; 
&lt;/kie-container&gt;</code></pre></div></div><br class="example-break"/><p>And the response from the server, if
                     successful, would be be:</p><div class="example"><a id="d0e25202"/><p class="title"><strong>Example 22.7. Example Server Response when creating a container</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="Container MyRESTContainer successfully deployed with module com.redhat:Project1:1.0"&gt;
  &lt;kie-container container-id="MyProjectContainer" status="STARTED"&gt; 
    &lt;release-id&gt;
      &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
      &lt;group-id&gt;com.redhat&lt;/group-id&gt;
      &lt;version&gt;1.0&lt;/version&gt; 
    &lt;/release-id&gt; 
    &lt;resolved-release-id&gt;
      &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
      &lt;group-id&gt;com.redhat&lt;/group-id&gt;
      &lt;version&gt;1.0&lt;/version&gt; 
    &lt;/resolved-release-id&gt; 
  &lt;/kie-container&gt;
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.6. [DELETE] /containers/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25207"/>22.6.6. [DELETE] /containers/{id}</h3></div></div></div><p>⁠Disposes the Container specified by the id. For example, executing
                            <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/containers/MyProjectContainer</code>
                     using the DELETE HTTP method will return the following server response:⁠</p><div class="example"><a id="d0e25215"/><p class="title"><strong>Example 22.8. Example Server Response disposing a container</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="Container MyProjectContainer successfully disposed."/&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.7. [POST] /containers/instances/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25220"/>22.6.7. [POST] /containers/instances/{id}</h3></div></div></div><p>Executes operations and commands against the specified Container. You can send
      commands to this Container in the body of the POST request. For example, to fire all rules for
      Container with id MyRESTContainer
        (<code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/containers/instances/MyRESTContainer</code>),
      you would send the fire-all-rules command to it as shown below (in the body of the POST
      request):</p><div class="example"><a id="d0e25228"/><p class="title"><strong>Example 22.9. Example Server Request to fire all rules</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;fire-all-rules/&gt;</code></pre></div></div><br class="example-break"/><p>Following is the list of supported commands:
              
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>AgendaGroupSetFocusCommand</p></li><li class="listitem"><p>ClearActivationGroupCommand</p></li><li class="listitem"><p>ClearAgendaCommand</p></li><li class="listitem"><p>ClearAgendaGroupCommand</p></li><li class="listitem"><p>ClearRuleFlowGroupCommand</p></li><li class="listitem"><p>DeleteCommand</p></li><li class="listitem"><p>InsertObjectCommand</p></li><li class="listitem"><p>ModifyCommand</p></li><li class="listitem"><p>GetObjectCommand</p></li><li class="listitem"><p>InsertElementsCommand</p></li><li class="listitem"><p>FireAllRulesCommand</p></li><li class="listitem"><p>QueryCommand</p></li><li class="listitem"><p>SetGlobalCommand</p></li><li class="listitem"><p>GetGlobalCommand</p></li><li class="listitem"><p>GetObjectsCommand</p></li><li class="listitem"><p>BatchExecutionCommand</p></li></ul></div><p>
                These commands can be found in the <code class="code">org.drools.core.command.runtime</code> package.
              </p></div><div class="section" title="22.6.8. [GET] /containers/{id}/release-id"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25288"/>22.6.8. [GET] /containers/{id}/release-id</h3></div></div></div><p>Returns the full
                     release id for the Container specified by the id.</p><div class="example"><a id="d0e25293"/><p class="title"><strong>Example 22.10. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">⁠&lt;response type="SUCCESS" msg="ReleaseId for container MyProjectContainer"&gt;
  &lt;release-id&gt;
    &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
    &lt;group-id&gt;com.redhat&lt;/group-id&gt;
    &lt;version&gt;1.0&lt;/version&gt; 
  &lt;/release-id&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.9. [POST] /containers/{id}/release-id"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25298"/>22.6.9. [POST] /containers/{id}/release-id</h3></div></div></div><p>Allows you to update the release id of
                     the container deployment. Send the new complete release id to the Server.</p><div class="example"><a id="d0e25303"/><p class="title"><strong>Example 22.11. Example Server Request</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;release-id&gt;
  &lt;artifact-id&gt;Project1&lt;/artifact-id&gt;
  &lt;group-id&gt;com.redhat&lt;/group-id&gt;    
  &lt;version&gt;1.1&lt;/version&gt;
&lt;/release-id&gt; </code></pre></div></div><br class="example-break"/><p>The Server will respond with a success or error message, similar to
                     the one below:⁠</p><div class="example"><a id="d0e25310"/><p class="title"><strong>Example 22.12. Example Server Response</strong></p><div class="example-contents"><pre><code class="no-highlight">&lt;response type="SUCCESS" msg="Release id successfully updated."&gt;
  &lt;release-id&gt;
    &lt;artifact-id&gt;Project1&lt;/artifact-id&gt; 
    &lt;group-id&gt;com.redhat&lt;/group-id&gt;
    &lt;version&gt;1.0&lt;/version&gt; 
  &lt;/release-id&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.10. [GET] /containers/{id}/scanner"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25315"/>22.6.10. [GET] /containers/{id}/scanner</h3></div></div></div><p>Returns information about the scanner for this Container's
                     automatic updates.⁠</p><div class="example"><a id="d0e25320"/><p class="title"><strong>Example 22.13. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="Scanner info successfully retrieved"&gt;
  &lt;kie-scanner status="DISPOSED"/&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.6.11. [POST] /containers/{id}/scanner"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25325"/>22.6.11. [POST] /containers/{id}/scanner</h3></div></div></div><p>Allows you to start or stop a scanner that controls polling for updated
                     Container deployments. To start the scanner, send a request similar to:
                            <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/containers/{container-id}/scanner</code>
                     with the following POST data.⁠</p><div class="example"><a id="d0e25333"/><p class="title"><strong>Example 22.14. Example Server Request to start the scanner</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;kie-scanner status="STARTED" poll-interval="20"/&gt;</code></pre></div></div><br class="example-break"/><p>⁠The poll-interval attribute is in seconds. The response from the server will be similar
                     to:⁠</p><div class="example"><a id="d0e25340"/><p class="title"><strong>Example 22.15. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;response type="SUCCESS" msg="Kie scanner successfully created."&gt;
  &lt;kie-scanner status="STARTED"/&gt; 
&lt;/response&gt;</code></pre></div></div><br class="example-break"/><p>To stop the Scanner, replace the status with <code class="code">DISPOSED</code> and remove
                     the poll-interval attribute.</p></div><div class="section" title="22.6.12. Native REST client for Execution Server"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25350"/>22.6.12. Native REST client for Execution Server</h3></div></div></div><p>
       Commands outlined in this section can be sent with any REST client, whether it is curl, RESTEasy or .NET based application. However, when sending requests from Java based application, users
       can utilize out of the box native client for remote communication with Execution Server. This client is part of the <span class="bold"><strong>org.kie:kie-server-client</strong></span> project. It doesn't allow creating XML request, therefore
       it is necessary generate them before, for example, using Drools API.
       </p><div class="example"><a id="d0e25358"/><p class="title"><strong>Example 22.16. Generate XML request</strong></p><div class="example-contents"><pre><code class="language-java"> 
import java.util.ArrayList;
import java.util.List;

import org.drools.core.command.impl.GenericCommand;
import org.drools.core.command.runtime.BatchExecutionCommandImpl;
import org.drools.core.command.runtime.rule.FireAllRulesCommand;
import org.drools.core.command.runtime.rule.InsertObjectCommand;
import org.kie.api.command.BatchExecutionCommand;
import org.kie.internal.runtime.helper.BatchExecutionHelper;

public class DecisionClient {

public static void main(String args[]) {
        Bean1 bean1 = new Bean1();
        bean1.setName("Robert");

        InsertObjectCommand insertObjectCommand = new InsertObjectCommand(bean1, "f1");
        FireAllRulesCommand fireAllRulesCommand = new FireAllRulesCommand("myFireCommand");

        List&lt;GenericCommand&lt;?&gt;&gt; commands = new ArrayList&lt;GenericCommand&lt;?&gt;&gt;();
        commands.add(insertObjectCommand);
        commands.add(fireAllRulesCommand);
        BatchExecutionCommand command = new BatchExecutionCommandImpl(commands);

        String xStreamXml = BatchExecutionHelper.newXStreamMarshaller().toXML(command); // actual XML request
	}
}
         </code></pre></div></div><br class="example-break"/><p>Once the request is generated it can be sent using <span class="bold"><strong>kie-server-client</strong></span> as follows:</p><div class="example"><a id="d0e25368"/><p class="title"><strong>Example 22.17. Sending XML request with kie-server-client</strong></p><div class="example-contents"><pre><code class="language-java"> 
import org.kie.server.api.model.ServiceResponse;
import org.kie.server.client.KieServicesClient;
import org.kie.server.client.KieServicesConfiguration;
import org.kie.server.client.KieServicesFactory;

//user "anton" must have role "kie-server" assigned
KieServicesConfiguration config =  KieServicesFactory.
        newRestConfiguration("http://localhost:8080/kie-server/services/rest/server",
        "anton",
        "password1!");
 KieServicesClient client = KieServicesFactory.newKieServicesClient(config);
// the request "xStreamXml" we generated in previous step
// "ListenerReproducer" is the name of the Container
ServiceResponse&lt;String&gt; response = client.executeCommands("ListenerReproducer", xStreamXml); 
System.out.println(response.getResult());
			 </code></pre></div></div><br class="example-break"/></div></div><div class="section" title="22.7. OptaPlanner REST API"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25373"/>22.7. OptaPlanner REST API</h2></div></div></div><p>When the Planner capability is enabled, the Kie Server supports the following additional REST APIs. As usual,
  all these APIs are also available through JMS and the Java client API. Please also note:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The base URL for these will remain as the endpoint defined earlier (for example
        <code class="code">http://SERVER:PORT/CONTEXT/services/rest/server/</code> ).</p></li><li class="listitem"><p>All requests require basic HTTP Authentication for the role kie-server as indicated earlier.</p></li><li class="listitem"><p>To get a specific marshalling format, add the HTTP headers <code class="literal">Content-Type</code> and optional
        <code class="literal">X-KIE-ContentType</code> in the HTTP request. For example:</p><pre><code class="no-highlight">Content-Type: application/xml
X-KIE-ContentType: xstream</code></pre></li></ul></div><p>The example requests and responses used below presume that a kie container is build using the optacloud example
  of OptaPlanner Workbench, by calling a <code class="literal">PUT</code> on
  <code class="literal">/services/rest/server/containers/optacloud-kiecontainer-1</code> with this content:</p><pre><code class="language-xml">&lt;kie-container container-id="optacloud-kiecontainer-1"&gt;
  &lt;release-id&gt;
    &lt;group-id&gt;opta&lt;/group-id&gt;
    &lt;artifact-id&gt;optacloud&lt;/artifact-id&gt; 
    &lt;version&gt;1.0.0&lt;/version&gt; 
  &lt;/release-id&gt; 
&lt;/kie-container&gt;</code></pre><div class="section" title="22.7.1. [GET] /containers/{containerId}/solvers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25410"/>22.7.1. [GET] /containers/{containerId}/solvers</h3></div></div></div><p>Returns the list of solvers created in the container.</p><div class="example"><a id="d0e25415"/><p class="title"><strong>Example 22.18. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solvers list successfully retrieved from container 'optacloud-kiecontainer-1'&lt;/msg&gt;
  &lt;result class="org.kie.server.api.model.instance.SolverInstanceList"&gt;
    &lt;solvers&gt;
      &lt;solver-instance&gt;
        &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
        &lt;solver-id&gt;solver1&lt;/solver-id&gt;
        &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
        &lt;status&gt;NOT_SOLVING&lt;/status&gt;
      &lt;/solver-instance&gt;
      &lt;solver-instance&gt;
        &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
        &lt;solver-id&gt;solver2&lt;/solver-id&gt;
        &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
        &lt;status&gt;NOT_SOLVING&lt;/status&gt;
      &lt;/solver-instance&gt;
    &lt;/solvers&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25420"/><p class="title"><strong>Example 22.19. Example Server Response (JSON)</strong></p><div class="example-contents"><pre><code class="language-json">{
  "type" : "SUCCESS",
  "msg" : "Solvers list successfully retrieved from container 'optacloud-kiecontainer-1'",
  "result" : {
    "solver-instance-list" : {
      "solver" : [ {
        "status" : "NOT_SOLVING",
        "container-id" : "optacloud-kiecontainer-1",
        "solver-id" : "solver1",
        "solver-config-file" : "opta/optacloud/cloudSolverConfig.solver.xml"
      }, {
        "status" : "NOT_SOLVING",
        "container-id" : "optacloud-kiecontainer-1",
        "solver-id" : "solver2",
        "solver-config-file" : "opta/optacloud/cloudSolverConfig.solver.xml"
      } ]
    }
  }
}           </code></pre></div></div><br class="example-break"/></div><div class="section" title="22.7.2. [PUT] /containers/{containerId}/solvers/{solverId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25425"/>22.7.2. [PUT] /containers/{containerId}/solvers/{solverId}</h3></div></div></div><p>Creates a new solver with the given <code class="code">{solverId}</code> in the container <code class="code">{containerId}</code>. The
    request's body is a marshalled SolverInstance entity that must specify the solver configuration file.</p><p>The following is an example of the request and the corresponding response.</p><div class="example"><a id="d0e25438"/><p class="title"><strong>Example 22.20. Example Server Request (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;solver-instance&gt;
  &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
&lt;/solver-instance&gt;          </code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25443"/><p class="title"><strong>Example 22.21. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solver 'solver1' successfully created in container 'optacloud-kiecontainer-1'&lt;/msg&gt;
  &lt;result class="solver-instance"&gt;
    &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
    &lt;solver-id&gt;solver1&lt;/solver-id&gt;
    &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
    &lt;status&gt;NOT_SOLVING&lt;/status&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;         </code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25448"/><p class="title"><strong>Example 22.22. Example Server Request (JSON)</strong></p><div class="example-contents"><pre><code class="language-json">{
  "solver-config-file" : "opta/optacloud/cloudSolverConfig.solver.xml"
}           </code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25453"/><p class="title"><strong>Example 22.23. Example Server Response (JSON)</strong></p><div class="example-contents"><pre><code class="language-json">{
  "type" : "SUCCESS",
  "msg" : "Solver 'solver1' successfully created in container 'optacloud-kiecontainer-1'",
  "result" : {
    "solver-instance" : {
      "container-id" : "optacloud-kiecontainer-1",
      "solver-id" : "solver1",
      "solver-config-file" : "opta/optacloud/cloudSolverConfig.solver.xml",
      "status" : "NOT_SOLVING"
    }
  }
}</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.7.3. [GET] /containers/{containerId}/solvers/{solverId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25458"/>22.7.3. [GET] /containers/{containerId}/solvers/{solverId}</h3></div></div></div><p>Returns the current state of the solver <code class="code">{solverId}</code> in container
    <code class="code">{containerId}</code>.</p><div class="example"><a id="d0e25469"/><p class="title"><strong>Example 22.24. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solver 'solver1' state successfully retrieved from container 'optacloud-kiecontainer-1'&lt;/msg&gt;
  &lt;result class="solver-instance"&gt;
    &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
    &lt;solver-id&gt;solver1&lt;/solver-id&gt;
    &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
    &lt;status&gt;NOT_SOLVING&lt;/status&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25474"/><p class="title"><strong>Example 22.25. Example Server Response (JSON)</strong></p><div class="example-contents"><pre><code class="language-json">{
  "type" : "SUCCESS",
  "msg" : "Solver 'solver1' state successfully retrieved from container 'optacloud-kiecontainer-1'",
  "result" : {
    "solver-instance" : {
      "container-id" : "optacloud-kiecontainer-1",
      "solver-id" : "solver1",
      "solver-config-file" : "opta/optacloud/cloudSolverConfig.solver.xml",
      "status" : "NOT_SOLVING"
    }
  }
}</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.7.4. [POST] /containers/{containerId}/solvers/{solverId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25479"/>22.7.4. [POST] /containers/{containerId}/solvers/{solverId}</h3></div></div></div><p>Updates the state of the {solverId} in container {containerId}, most notably to start solving. The request's
    body is a marshalled <code class="code">SolverInstance</code> and can either request the solver to solve a planning problem or to
    stop solving one. The SolverInstance state determines which operation should be executed and can be set one of two
    possible values:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>SOLVING: starts the solver if it is not executing yet. The request's body must also contain the problem's
        data to be solved.</p></li><li class="listitem"><p>NOT_SOLVING: requests the solver to terminate early, if it is running. All other attributes are
        ignored.</p></li></ul></div><div class="section" title="22.7.4.1. Start solving"><div class="titlepage"><div><div><h4 class="title"><a id="d0e25494"/>22.7.4.1. Start solving</h4></div></div></div><p>For example, to solve an optacloud problem with 2 computers and 1 process:</p><div class="example"><a id="d0e25499"/><p class="title"><strong>Example 22.26. Example Server Request (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;solver-instance&gt;
  &lt;status&gt;SOLVING&lt;/status&gt;
  &lt;planning-problem class="opta.optacloud.CloudSolution"&gt;
    &lt;computerList&gt;
      &lt;opta.optacloud.Computer&gt;
        &lt;cpuPower&gt;10&lt;/cpuPower&gt;
        &lt;memory&gt;4&lt;/memory&gt;
        &lt;networkBandwidth&gt;100&lt;/networkBandwidth&gt;
        &lt;cost&gt;1000&lt;/cost&gt;
      &lt;/opta.optacloud.Computer&gt;
      &lt;opta.optacloud.Computer&gt;
        &lt;cpuPower&gt;20&lt;/cpuPower&gt;
        &lt;memory&gt;8&lt;/memory&gt;
        &lt;networkBandwidth&gt;100&lt;/networkBandwidth&gt;
        &lt;cost&gt;3000&lt;/cost&gt;
      &lt;/opta.optacloud.Computer&gt;
    &lt;/computerList&gt;
    &lt;processList&gt;
      &lt;opta.optacloud.Process&gt;
        &lt;requiredCpuPower&gt;1&lt;/requiredCpuPower&gt;
        &lt;requiredMemory&gt;7&lt;/requiredMemory&gt;
        &lt;requiredNetworkBandwidth&gt;1&lt;/requiredNetworkBandwidth&gt;
      &lt;/opta.optacloud.Process&gt;
    &lt;/processList&gt;
  &lt;/planning-problem&gt;
&lt;/solver-instance&gt;</code></pre></div></div><br class="example-break"/><p>Notice that the response does not contain the best solution yet, because solving can take seconds, minutes,
      hours or days and this would time out the HTTP request:</p><div class="example"><a id="d0e25506"/><p class="title"><strong>Example 22.27. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solver 'solver1' from container 'optacloud-kiecontainer-1' successfully updated.&lt;/msg&gt;
  &lt;result class="solver-instance"&gt;
    &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
    &lt;solver-id&gt;solver1&lt;/solver-id&gt;
    &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
    &lt;status&gt;SOLVING&lt;/status&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/><p>Instead, it's solving asynchronously and you need to call the bestsolution URL to get the best
      solution.</p></div><div class="section" title="22.7.4.2. Terminate solving"><div class="titlepage"><div><div><h4 class="title"><a id="d0e25513"/>22.7.4.2. Terminate solving</h4></div></div></div><p>For example, to terminate solving:</p><div class="example"><a id="d0e25518"/><p class="title"><strong>Example 22.28. Example Server Request (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;solver-instance&gt;
  &lt;status&gt;NOT_SOLVING&lt;/status&gt;
&lt;/solver-instance&gt;</code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25523"/><p class="title"><strong>Example 22.29. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solver 'solver1' from container 'optacloud-kiecontainer-1' successfully updated.&lt;/msg&gt;
  &lt;result class="solver-instance"&gt;
    &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
    &lt;solver-id&gt;solver1&lt;/solver-id&gt;
    &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
    &lt;status&gt;TERMINATING_EARLY&lt;/status&gt;
    &lt;score class="org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore"&gt;
      &lt;hardScore&gt;0&lt;/hardScore&gt;
      &lt;softScore&gt;-3000&lt;/softScore&gt;
    &lt;/score&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/><p>This doesn't delete the solver, the best solution can still be retrieved.</p></div></div><div class="section" title="22.7.5. [GET] /containers/{containerId}/solvers/{solverId}/bestsolution"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25530"/>22.7.5. [GET] /containers/{containerId}/solvers/{solverId}/bestsolution</h3></div></div></div><p>Returns the best solution found at the time the request is made. If the solver hasn't terminated yet (so the
    <code class="literal">status</code> field is still <code class="literal">SOLVING</code>), it will return the best solution found up to
    then, but later calls can return a better solution.⁠</p><p>For example, the problem submitted above would return this solution, with the process assigned to the second
    computer (because the first one doesn't have enough memory).</p><div class="example"><a id="d0e25543"/><p class="title"><strong>Example 22.30. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Best computed solution for 'solver1' successfully retrieved from container 'optacloud-kiecontainer-1'&lt;/msg&gt;
   &lt;result class="solver-instance"&gt;
    &lt;container-id&gt;optacloud-kiecontainer-1&lt;/container-id&gt;
    &lt;solver-id&gt;solver1&lt;/solver-id&gt;
    &lt;solver-config-file&gt;opta/optacloud/cloudSolverConfig.solver.xml&lt;/solver-config-file&gt;
    &lt;status&gt;SOLVING&lt;/status&gt;
    &lt;score class="org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore"&gt;
      &lt;hardScore&gt;0&lt;/hardScore&gt;
      &lt;softScore&gt;-3000&lt;/softScore&gt;
    &lt;/score&gt;
    &lt;best-solution class="opta.optacloud.CloudSolution"&gt;
      &lt;score class="org.optaplanner.core.api.score.buildin.hardsoft.HardSoftScore" reference="../../score" /&gt;
      &lt;computerList&gt;
        &lt;opta.optacloud.Computer&gt;
          &lt;cpuPower&gt;10&lt;/cpuPower&gt;
          &lt;memory&gt;4&lt;/memory&gt;
          &lt;networkBandwidth&gt;100&lt;/networkBandwidth&gt;
          &lt;cost&gt;1000&lt;/cost&gt;
        &lt;/opta.optacloud.Computer&gt;
        &lt;opta.optacloud.Computer&gt;
          &lt;cpuPower&gt;20&lt;/cpuPower&gt;
          &lt;memory&gt;8&lt;/memory&gt;
          &lt;networkBandwidth&gt;100&lt;/networkBandwidth&gt;
          &lt;cost&gt;3000&lt;/cost&gt;
        &lt;/opta.optacloud.Computer&gt;
      &lt;/computerList&gt;
      &lt;processList&gt;
        &lt;opta.optacloud.Process&gt;
          &lt;requiredCpuPower&gt;1&lt;/requiredCpuPower&gt;
          &lt;requiredMemory&gt;7&lt;/requiredMemory&gt;
          &lt;requiredNetworkBandwidth&gt;1&lt;/requiredNetworkBandwidth&gt;
          &lt;computer reference="../../../computerList/opta.optacloud.Computer[2]" /&gt;
        &lt;/opta.optacloud.Process&gt;
      &lt;/processList&gt;
    &lt;/best-solution&gt;
  &lt;/result&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.7.6. [DELETE] /containers/{containerId}/solvers/{solverId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25548"/>22.7.6. [DELETE] /containers/{containerId}/solvers/{solverId}</h3></div></div></div><p>⁠Disposes the solver <code class="code">{solverId}</code> in container <code class="code">{containerId}</code>. If it hasn't terminated
    yet, it terminates it first.</p><div class="example"><a id="d0e25559"/><p class="title"><strong>Example 22.31. Example Server Response (XStream)</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;org.kie.server.api.model.ServiceResponse&gt;
  &lt;type&gt;SUCCESS&lt;/type&gt;
  &lt;msg&gt;Solver 'solver1' successfully disposed from container 'optacloud-kiecontainer-1'&lt;/msg&gt;
&lt;/org.kie.server.api.model.ServiceResponse&gt;</code></pre></div></div><br class="example-break"/><div class="example"><a id="d0e25564"/><p class="title"><strong>Example 22.32. Example Server Response (JSON)</strong></p><div class="example-contents"><pre><code class="language-json">{
  "type" : "SUCCESS",
  "msg" : "Solver 'solver1' successfully disposed from container 'optacloud-kiecontainer-1'"
}</code></pre></div></div><br class="example-break"/></div></div><div class="section" title="22.8. Controller REST API"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25569"/>22.8. Controller REST API</h2></div></div></div><p>When you have Managed Kie Server setup, you need to manage Kie Servers and Containers via a Controller.
        Generally, it's done by workbench UI but you may also use Controller REST API. </p><p>
              </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>The controller base URL is provided by kie-wb war deployment, which
                                  would be the same as org.kie.server.controller property.
                                   (for example:
                                          <code class="code">http://localhost:8080/kie-wb/rest/controller</code>
                                   )</p></li><li class="listitem"><p>All requests require basic HTTP Authentication for the role
                                   kie-server as indicated earlier.</p></li></ul></div><p>
       </p><div class="section" title="22.8.1. [GET] /management/servers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25587"/>22.8.1. [GET] /management/servers</h3></div></div></div><p>Returns a list of Kie Server templates</p><div class="example"><a id="d0e25592"/><p class="title"><strong>Example 22.33. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;server-template-list&gt;
    &lt;server-template&gt;
        &lt;server-id&gt;demo&lt;/server-id&gt;
        &lt;server-name&gt;demo&lt;/server-name&gt;
        &lt;container-specs&gt;
            &lt;container-id&gt;hr&lt;/container-id&gt;
            &lt;container-name&gt;hr&lt;/container-name&gt;
            &lt;server-template-key&gt;
                &lt;server-id&gt;demo&lt;/server-id&gt;
            &lt;/server-template-key&gt;
            &lt;release-id&gt;
                &lt;artifact-id&gt;HR&lt;/artifact-id&gt;
                &lt;group-id&gt;org.jbpm&lt;/group-id&gt;
                &lt;version&gt;1.0&lt;/version&gt;
            &lt;/release-id&gt;
            &lt;configs&gt;
                &lt;entry&gt;
                    &lt;key&gt;RULE&lt;/key&gt;
                    &lt;value xsi:type="ruleConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                        &lt;scanner-status&gt;STOPPED&lt;/scanner-status&gt;
                    &lt;/value&gt;
                &lt;/entry&gt;
                &lt;entry&gt;
                    &lt;key&gt;PROCESS&lt;/key&gt;
                    &lt;value xsi:type="processConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                        &lt;strategy&gt;Singleton&lt;/strategy&gt;
                        &lt;kie-base-name&gt;&lt;/kie-base-name&gt;
                        &lt;kie-session-name&gt;&lt;/kie-session-name&gt;
                        &lt;merge-mode&gt;Merge Collections&lt;/merge-mode&gt;
                    &lt;/value&gt;
                &lt;/entry&gt;
            &lt;/configs&gt;
            &lt;status&gt;STARTED&lt;/status&gt;
        &lt;/container-specs&gt;
        &lt;configs/&gt;
        &lt;server-instances&gt;
            &lt;server-instance-id&gt;demo@localhost:8230&lt;/server-instance-id&gt;
            &lt;server-name&gt;demo@localhost:8230&lt;/server-name&gt;
            &lt;server-template-id&gt;demo&lt;/server-template-id&gt;
            &lt;server-url&gt;http://localhost:8230/kie-server/services/rest/server&lt;/server-url&gt;
        &lt;/server-instances&gt;
        &lt;capabilities&gt;RULE&lt;/capabilities&gt;
        &lt;capabilities&gt;PROCESS&lt;/capabilities&gt;
        &lt;capabilities&gt;PLANNING&lt;/capabilities&gt;
    &lt;/server-template&gt;
&lt;/server-template-list&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.2. [GET] /management/server/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25597"/>22.8.2. [GET] /management/server/{id}</h3></div></div></div><p>Returns a Kie Server template</p><div class="example"><a id="d0e25602"/><p class="title"><strong>Example 22.34. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;server-template-details&gt;
    &lt;server-id&gt;product-demo&lt;/server-id&gt;
    &lt;server-name&gt;product-demo&lt;/server-name&gt;
    &lt;container-specs&gt;
        &lt;container-id&gt;hr&lt;/container-id&gt;
        &lt;container-name&gt;hr&lt;/container-name&gt;
        &lt;server-template-key&gt;
            &lt;server-id&gt;demo&lt;/server-id&gt;
        &lt;/server-template-key&gt;
        &lt;release-id&gt;
            &lt;artifact-id&gt;HR&lt;/artifact-id&gt;
            &lt;group-id&gt;org.jbpm&lt;/group-id&gt;
            &lt;version&gt;1.0&lt;/version&gt;
        &lt;/release-id&gt;
        &lt;configs&gt;
            &lt;entry&gt;
                &lt;key&gt;RULE&lt;/key&gt;
                &lt;value xsi:type="ruleConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                    &lt;scanner-status&gt;STOPPED&lt;/scanner-status&gt;
                &lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
                &lt;key&gt;PROCESS&lt;/key&gt;
                &lt;value xsi:type="processConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                    &lt;strategy&gt;Singleton&lt;/strategy&gt;
                    &lt;kie-base-name&gt;&lt;/kie-base-name&gt;
                    &lt;kie-session-name&gt;&lt;/kie-session-name&gt;
                    &lt;merge-mode&gt;Merge Collections&lt;/merge-mode&gt;
                &lt;/value&gt;
            &lt;/entry&gt;
        &lt;/configs&gt;
        &lt;status&gt;STARTED&lt;/status&gt;
    &lt;/container-specs&gt;
    &lt;configs/&gt;
    &lt;server-instances&gt;
        &lt;server-instance-id&gt;demo@localhost:8230&lt;/server-instance-id&gt;
        &lt;server-name&gt;demo@localhost:8230&lt;/server-name&gt;
        &lt;server-template-id&gt;demo&lt;/server-template-id&gt;
        &lt;server-url&gt;http://localhost:8230/kie-server/services/rest/server&lt;/server-url&gt;
    &lt;/server-instances&gt;
    &lt;capabilities&gt;RULE&lt;/capabilities&gt;
    &lt;capabilities&gt;PROCESS&lt;/capabilities&gt;
    &lt;capabilities&gt;PLANNING&lt;/capabilities&gt;
&lt;/server-template-details&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.3. [PUT] /management/server/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25607"/>22.8.3. [PUT] /management/server/{id}</h3></div></div></div><p>Creates a new Kie Server template with the specified id</p><div class="example"><a id="d0e25612"/><p class="title"><strong>Example 22.35. Example Request to create a new Kie Server template</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;server-template-details&gt;
    &lt;server-id&gt;test-demo&lt;/server-id&gt;
    &lt;server-name&gt;test-demo&lt;/server-name&gt;    
    &lt;configs/&gt;
    &lt;capabilities&gt;RULE&lt;/capabilities&gt;
    &lt;capabilities&gt;PROCESS&lt;/capabilities&gt;
    &lt;capabilities&gt;PLANNING&lt;/capabilities&gt;
&lt;/server-template-details&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.4. [DELETE] /management/server/{id}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25617"/>22.8.4. [DELETE] /management/server/{id}</h3></div></div></div><p>Deletes a Kie Server template with the specified id</p></div><div class="section" title="22.8.5. [GET] /management/server/{id}/containers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25622"/>22.8.5. [GET] /management/server/{id}/containers</h3></div></div></div><p>Returns all containers on given server</p><div class="example"><a id="d0e25627"/><p class="title"><strong>Example 22.36. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;container-spec-list&gt;
    &lt;container-spec&gt;
        &lt;container-id&gt;hr&lt;/container-id&gt;
        &lt;container-name&gt;hr&lt;/container-name&gt;
        &lt;server-template-key&gt;
            &lt;server-id&gt;demo&lt;/server-id&gt;
        &lt;/server-template-key&gt;
        &lt;release-id&gt;
            &lt;artifact-id&gt;HR&lt;/artifact-id&gt;
            &lt;group-id&gt;org.jbpm&lt;/group-id&gt;
            &lt;version&gt;1.0&lt;/version&gt;
        &lt;/release-id&gt;
        &lt;configs&gt;
            &lt;entry&gt;
                &lt;key&gt;RULE&lt;/key&gt;
                &lt;value xsi:type="ruleConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                    &lt;scanner-status&gt;STOPPED&lt;/scanner-status&gt;
                &lt;/value&gt;
            &lt;/entry&gt;
            &lt;entry&gt;
                &lt;key&gt;PROCESS&lt;/key&gt;
                &lt;value xsi:type="processConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                    &lt;strategy&gt;Singleton&lt;/strategy&gt;
                    &lt;kie-base-name&gt;&lt;/kie-base-name&gt;
                    &lt;kie-session-name&gt;&lt;/kie-session-name&gt;
                    &lt;merge-mode&gt;Merge Collections&lt;/merge-mode&gt;
                &lt;/value&gt;
            &lt;/entry&gt;
        &lt;/configs&gt;
        &lt;status&gt;STARTED&lt;/status&gt;
    &lt;/container-spec&gt;
&lt;/container-spec-list&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.6. [GET] /management/server/{id}/containers/{containerId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25632"/>22.8.6. [GET] /management/server/{id}/containers/{containerId}</h3></div></div></div><p>Returns the Container information including its release id and
      configuration</p><div class="example"><a id="d0e25637"/><p class="title"><strong>Example 22.37. Example Server Response</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;container-spec-details&gt;
    &lt;container-id&gt;hr&lt;/container-id&gt;
    &lt;container-name&gt;hr&lt;/container-name&gt;
    &lt;server-template-key&gt;
        &lt;server-id&gt;demo&lt;/server-id&gt;
    &lt;/server-template-key&gt;
    &lt;release-id&gt;
        &lt;artifact-id&gt;HR&lt;/artifact-id&gt;
        &lt;group-id&gt;org.jbpm&lt;/group-id&gt;
        &lt;version&gt;1.0&lt;/version&gt;
    &lt;/release-id&gt;
    &lt;configs&gt;
        &lt;entry&gt;
            &lt;key&gt;PROCESS&lt;/key&gt;
            &lt;value xsi:type="processConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                &lt;strategy&gt;Singleton&lt;/strategy&gt;
                &lt;kie-base-name&gt;&lt;/kie-base-name&gt;
                &lt;kie-session-name&gt;&lt;/kie-session-name&gt;
                &lt;merge-mode&gt;Merge Collections&lt;/merge-mode&gt;
            &lt;/value&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
            &lt;key&gt;RULE&lt;/key&gt;
            &lt;value xsi:type="ruleConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                &lt;scanner-status&gt;STOPPED&lt;/scanner-status&gt;
            &lt;/value&gt;
        &lt;/entry&gt;
    &lt;/configs&gt;
    &lt;status&gt;STARTED&lt;/status&gt;
&lt;/container-spec-details&gt;</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.7. [PUT] /management/server/{id}/containers/{containerId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25642"/>22.8.7. [PUT] /management/server/{id}/containers/{containerId}</h3></div></div></div><p>Creates a new Container with the specified containerId and the given release id
      and optionally configuration</p><div class="example"><a id="d0e25647"/><p class="title"><strong>Example 22.38. Example Server Request</strong></p><div class="example-contents"><pre><code class="language-xml">&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;container-spec-details&gt;
    &lt;container-id&gt;hr&lt;/container-id&gt;
    &lt;container-name&gt;hr&lt;/container-name&gt;
    &lt;server-template-key&gt;
        &lt;server-id&gt;demo&lt;/server-id&gt;
    &lt;/server-template-key&gt;
    &lt;release-id&gt;
        &lt;artifact-id&gt;HR&lt;/artifact-id&gt;
        &lt;group-id&gt;org.jbpm&lt;/group-id&gt;
        &lt;version&gt;1.0&lt;/version&gt;
    &lt;/release-id&gt;
    &lt;configs&gt;
        &lt;entry&gt;
            &lt;key&gt;PROCESS&lt;/key&gt;
            &lt;value xsi:type="processConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                &lt;strategy&gt;Singleton&lt;/strategy&gt;
                &lt;kie-base-name&gt;&lt;/kie-base-name&gt;
                &lt;kie-session-name&gt;&lt;/kie-session-name&gt;
                &lt;merge-mode&gt;Merge Collections&lt;/merge-mode&gt;
            &lt;/value&gt;
        &lt;/entry&gt;
        &lt;entry&gt;
            &lt;key&gt;RULE&lt;/key&gt;
            &lt;value xsi:type="ruleConfig" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"&gt;
                &lt;scanner-status&gt;STOPPED&lt;/scanner-status&gt;
            &lt;/value&gt;
        &lt;/entry&gt;
    &lt;/configs&gt;
    &lt;status&gt;STARTED&lt;/status&gt;
&lt;/container-spec-details</code></pre></div></div><br class="example-break"/></div><div class="section" title="22.8.8. [DELETE] /management/server/{id}/containers/{containerId}"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25652"/>22.8.8. [DELETE] /management/server/{id}/containers/{containerId}</h3></div></div></div><p>Disposes a Container with the specified containerId</p></div><div class="section" title="22.8.9. [POST] /management/server/{id}/containers/{containerId}/status/started"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25657"/>22.8.9. [POST] /management/server/{id}/containers/{containerId}/status/started</h3></div></div></div><p>Starts the Container. No request body required</p></div><div class="section" title="22.8.10. [POST] /management/server/{id}/containers/{containerId}/status/stopped"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25662"/>22.8.10. [POST] /management/server/{id}/containers/{containerId}/status/stopped</h3></div></div></div><p>Stops the Container. No request body required</p></div></div><div class="section" title="22.9. Kie Server Java Client API"><div class="titlepage"><div><div><h2 class="title"><a id="d0e25667"/>22.9. Kie Server Java Client API</h2></div></div></div><p>The Kie Server has a great Java API to wrap REST or JMS requests to be sent to the server. In this section we
  will explore some of the possibilities of this API.</p><div class="section" title="22.9.1. Maven Configuration"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25672"/>22.9.1. Maven Configuration</h3></div></div></div><p>if you are a Maven user, make sure you have at least the following dependencies in the project's
    <span class="emphasis"><em>pom.xml</em></span></p><div class="example"><a id="d0e25679"/><p class="title"><strong>Example 22.39. Maven Dependencies</strong></p><div class="example-contents"><pre><code class="no-highlight">&lt;dependency&gt;
  &lt;groupId&gt;org.kie.server&lt;/groupId&gt;
  &lt;artifactId&gt;kie-server-client&lt;/artifactId&gt;
  &lt;version&gt;${kie.api.version}&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Logging --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
  &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
  &lt;version&gt;1.1.2&lt;/version&gt;
&lt;/dependency&gt;
&lt;!-- Drools Commands --&gt;
&lt;dependency&gt;
  &lt;groupId&gt;org.drools&lt;/groupId&gt;
  &lt;artifactId&gt;drools-compiler&lt;/artifactId&gt;
  &lt;scope&gt;runtime&lt;/scope&gt;
  &lt;version&gt;${kie.api.version}&lt;/version&gt;
&lt;/dependency&gt;</code></pre></div></div><br class="example-break"/><p>The version <span class="emphasis"><em>kie.api.version </em></span>depends on the Kie Server version you are using. For jBPM
    6.3, for example, you can use 6.3.1-SNAPSHOT.</p></div><div class="section" title="22.9.2. Client Configuration"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25690"/>22.9.2. Client Configuration</h3></div></div></div><p>The client requires a configuration object where you set most of the server communication aspects, such as the
    protocol (REST and JMS) credentials and the payload format (XStream, JAXB and JSON are the supported formats at the
    moment). The first thing to do is create your configuration then create the <span class="bold"><strong><code class="code">KieServicesClient</code></strong></span> object, the entry point for starting the server communication.
    See the source below where we use a REST client configuration:</p><div class="example"><a id="d0e25700"/><p class="title"><strong>Example 22.40. Client Configuration Example</strong></p><div class="example-contents"><pre><code class="language-java">import org.kie.server.api.marshalling.MarshallingFormat;  
import org.kie.server.client.KieServicesClient;  
import org.kie.server.client.KieServicesConfiguration;  
import org.kie.server.client.KieServicesFactory;  
  
public class DecisionServerTest {  
  
    private static final String URL = "http://localhost:8080/kie-server/services/rest/server";  
    private static final String USER = "kieserver";  
    private static final String PASSWORD = "kieserver1!";  
  
    private static final MarshallingFormat FORMAT = MarshallingFormat.JSON;  
  
    private KieServicesConfiguration conf;  
    private KieServicesClient kieServicesClient;  
  
    public void initialize() {  
        conf = KieServicesFactory.newRestConfiguration(URL, USER, PASSWORD);  
        conf.setMarshallingFormat(FORMAT);  
        kieServicesClient = KieServicesFactory.newKieServicesClient(conf);  
    }  </code></pre></div></div><p><br class="example-break"/></p><div class="section" title="22.9.2.1. JMS interaction patterns"><div class="titlepage"><div><div><h4 class="title"><a id="d0e25706"/>22.9.2.1. JMS interaction patterns</h4></div></div></div><p>In version 6.5 KIE Server Client JMS integration has been enhanced with
                possibility to use various interaction patterns. Currently available are:</p><p>
                </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>request reply (which is the default) - that makes the JMS integration
                            synchronous - it blocks client until it gets the response back - not
                            suited for JMS transactional use case</p></li><li class="listitem"><p>fire and forget - makes the integration one way only, suitable for
                            notification like integration with kie server - makes perfect fit for
                            transactional JMS delivery - deliver message to kie server only if
                            transaction that ckie server client was invoked in was committed
                            successfully</p></li><li class="listitem"><p>async with callback - allows to not block a client after sending
                            message to kie server and receive response asynchronously - can be
                            integrated with transactional JMS delivery</p></li></ul></div><p>
            </p><p>Response handlers can be either set globally - when KieServicesConfiguration is
                created or it can be changed on runtime on individual client instances (like
                RuleServiceClient, ProcessServicesClient, etc)</p><p>While 'fire and forget' and 'request reply' patterns do not require any additional
                configuration 'async with callback' does. And the main thing is actually the
                callback. KIE Server CLient comes with one out of the box -
                `BlockingResponseCallback` that provides basic support backed by blocking queue
                internally. Size of the queue is confgurable and thus allow receiving multiple
                messages, though intention of this callback is that it will only receive one message
                at a time - so it's like one message (request) and then one response per client
                interaction.</p><p>
                </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h2>Note</h2><p>Kie Server Client when switching response handler is not thread safe,
                        meaning change of the handler will affect all threads using same client
                        instance. So in case of dynamic changes of the handler it's recommended to
                        use separate client instances. A good approach is to maintain set of clients
                        that use dedicated response handler and then use these clients dependeing on
                        which handler is required.</p></div><p>
            </p><p><span class="bold"><strong>Example</strong></span></p><p>client 1 will use fire and forget while client 2 will use request reply. So client
                1 can be used to start processes and client 2 can be used to query for user
                tasks.</p><p>Users can provide their own callbacks by implementing <span class="italic">org.kie.server.client.jms.ResponseCallback</span>
                interface.</p><pre><code class="no-highlight">InitialContext context = ...;
Queue requestQueue = (Queue) context.lookup("jms/queue/KIE.SERVER.REQUEST"));
Queue responseQueue = (Queue) context.lookup("jms/queue/KIE.SERVER.RESPONSE");
ConnectionFactory connectionFactory = (ConnectionFactory) context.lookup("jms/RemoteConnectionFactory");
KieServicesConfiguration jmsConfiguration = KieServicesFactory.newJMSConfiguration( connectionFactory, requestQueue, responseQueue, "user", "password");
// here you set response handler globally
jmsConfiguration.setResponseHandler(new FireAndForgetResponseHandler());</code></pre><p>Alternatively, might be actually more common, is to set the handler on individual
                clients before they are used</p><p>
                </p><pre><code class="no-highlight">ProcessServiceClient processClient = client.getServicesClient(ProcessServicesClient.class);
// change response handler for processClient others are not affected
processClient.setResponseHandler(new FireAndForgetResponseHandler());</code></pre><p>
            </p></div></div><div class="section" title="22.9.3. Server Response"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25753"/>22.9.3. Server Response</h3></div></div></div><p>All the service responses are represented by the object
    <code class="code">org.kie.server.api.model.ServiceResponse&lt;T&gt;</code> where T is the type of the payload. It has the
    following attributes:</p><p><span class="bold"><strong>String msg: </strong></span>The response message;</p><p><code class="code">org.kie.server.api.model.ServiceResponse.ResponseType</code><span class="bold"><strong> type:</strong></span> the
    response type enum, which can be SUCCESS or FAILURE;</p><p><span class="bold"><strong>T result: </strong></span>The actual payload of the response, the requested object.</p><p>Notice that this is the same object returned if you are using REST or JMS, in another words it is agnostic to
    protocol.</p></div><div class="section" title="22.9.4. Server Capabilities"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25777"/>22.9.4. Server Capabilities</h3></div></div></div><p>Decision Server initially only supported rules execution, starting in version 6.3 it started supporting
    business process execution. To know what exactly your server support, you can list the server capabilities by
    accessing the object <code class="code">org.kie.server.api.model.KieServerInfo</code><span class="bold"><strong> </strong></span>using the
    client:</p><div class="example"><a id="d0e25788"/><p class="title"><strong>Example 22.41. Listing Server capabilities</strong></p><div class="example-contents"><pre><code class="language-java">public void listCapabilities() {  
    KieServerInfo serverInfo = kieServicesClient.getServerInfo().getResult();  
    System.out.print("Server capabilities:");  
    for(String capability: serverInfo.getCapabilities()) {  
        System.out.print(" " + capability);  
    }  
    System.out.println();  
}</code></pre></div></div><p><br class="example-break"/>If the server supports rules and process, the following should be printed when you run the code
    above:</p><p><span class="emphasis"><em>Server capabilities: BRM KieServer BPM</em></span></p></div><div class="section" title="22.9.5. Kie Containers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25798"/>22.9.5. Kie Containers</h3></div></div></div><p>If you want to publish a kjar to receive requests, you must publish it in a container. The container is
    represented in the client by the object <code class="code">org.kie.server.api.model.KieContainerResource</code>, and a list of
    resources is <code class="code">org.kie.server.api.model.KieContainerResourceList</code>. Here's an example of how to print a
    list of containers:</p><div class="example"><a id="d0e25809"/><p class="title"><strong>Example 22.42. Listing Kie Containers</strong></p><div class="example-contents"><pre><code class="language-java">public void listContainers() {  
    KieContainerResourceList containersList = kieServicesClient.listContainers().getResult();  
    List&lt;KieContainerResource&gt; kieContainers = containersList.getContainers();  
    System.out.println("Available containers: ");  
    for (KieContainerResource container : kieContainers) {  
        System.out.println("\t" + container.getContainerId() + " (" + container.getReleaseId() + ")");  
    }  
}</code></pre></div></div><p><br class="example-break"/>
      It is also possible to list the containers based on specific <code class="code">ReleaseId</code> (and its individual parts) or container status:
      </p><div class="example"><a id="d0e25819"/><p class="title"><strong>Example 22.43. Listing Kie Containers with custom filter</strong></p><div class="example-contents"><pre><code class="language-java">public void listContainersWithFilter() {
    // the following filter will match only containers with ReleaseId "org.example:contatner:1.0.0.Final" and status FAILED
    KieContainerResourceFilter filter = new KieContainerResourceFilter.Builder()
            .releaseId("org.example", "container", "1.0.0.Final")
            .status(KieContainerStatus.FAILED)
            .build();
    KieContainerResourceList containersList = kieServicesClient.listContainers(filter).getResult();
    List&lt;KieContainerResource&gt; kieContainers = containersList.getContainers();
    System.out.println("Available containers: ");
    for (KieContainerResource container : kieContainers) {
        System.out.println("\t" + container.getContainerId() + " (" + container.getReleaseId() + ")");
    }
}</code></pre></div></div><p><br class="example-break"/>
    </p></div><div class="section" title="22.9.6. Managing Containers"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25826"/>22.9.6. Managing Containers</h3></div></div></div><p>You can use the client to dispose and create containers. If you dispose a containers, a ServiceResponse will
    be returned with Void payload(no payload) and if you create it, the KieContainerResource object itself will be
    returned in the response. Sample code:</p><div class="example"><a id="d0e25831"/><p class="title"><strong>Example 22.44. Disposing and creating containers</strong></p><div class="example-contents"><pre><code class="language-java">public void disposeAndCreateContainer() {  
    System.out.println("== Disposing and creating containers ==");  
    List&lt;KieContainerResource&gt; kieContainers = kieServicesClient.listContainers().getResult().getContainers();  
    if (kieContainers.size() == 0) {  
        System.out.println("No containers available...");  
        return;  
    }  
    KieContainerResource container = kieContainers.get(0);  
    String containerId = container.getContainerId();  
    ServiceResponse&lt;Void&gt; responseDispose = kieServicesClient.disposeContainer(containerId);  
    if (responseDispose.getType() == ResponseType.FAILURE) {  
        System.out.println("Error disposing " + containerId + ". Message: ");  
        System.out.println(responseDispose.getMsg());  
        return;  
    }  
    System.out.println("Success Disposing container " + containerId);  
    System.out.println("Trying to recreate the container...");  
    ServiceResponse&lt;KieContainerResource&gt; createResponse = kieServicesClient.createContainer(containerId, container);  
    if(createResponse.getType() == ResponseType.FAILURE) {  
        System.out.println("Error creating " + containerId + ". Message: ");  
        System.out.println(responseDispose.getMsg());  
        return;  
    }  
     System.out.println("Container recreated with success!");  
}</code></pre></div></div><p><br class="example-break"/></p></div><div class="section" title="22.9.7. Available Clients for the Decision Server"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25837"/>22.9.7. Available Clients for the Decision Server</h3></div></div></div><p>The KieServicesClient is also the entry point for others clients to perform specific operations, such as send
    BRMS commands and manage processes. Currently from the KieServicesClient you can have access to the following
    services available in <code class="code">org.kie.server.client</code> package:</p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>JobServicesClient: This client allows you to schedule, cancel, requeue and get job requests;</p></li><li class="listitem"><p>ProcessServicesClient: Allows you to start, signal abort process; complete and abort work items among
        other capabilities;</p></li><li class="listitem"><p>QueryServicesClient: The powerful query client allows you to query process, process nodes and process
        variables;</p></li><li class="listitem"><p>RuleServicesClient: The simple, but powerful rules client can be used to send commands to the server to
        perform rules related operations(insert objects in the working memory, fire rules, get globals...);</p></li><li class="listitem"><p>UserTaskServicesClient: Finally, the user tasks clients allows you to perform all operations with an user
        tasks(start, claim, cancel, etc) and query tasks by certain fields(process instances id, user, etc).</p></li></ul></div><p>For further information about these interfaces check github:
    https://github.com/droolsjbpm/droolsjbpm-integration/tree/master/kie-server-parent/kie-server-remote/kie-server-client/src/main/java/org/kie/server/client</p><p>You can have access to any of these clients using the method <code class="code">getServicesClient</code> in the
    KieServicesClient class. For example: <code class="code">RuleServicesClient rulesClient =
    kieServicesClient.getServicesClient(RuleServicesClient.class); </code></p></div><div class="section" title="22.9.8. Sending commands to the server"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25870"/>22.9.8. Sending commands to the server</h3></div></div></div><p>To build commands to the server you must use the class org.kie.api.command.KieCommands, that can be created
    using <code class="code">org.kie.api.KieServices.get().getCommands()</code>. The command to be send must be a <span class="bold"><strong>BatchExecutionCommand</strong></span> or a single command(if a single command is sent, the server wraps it
    into a BatchExecutionCommand):</p><div class="example"><a id="d0e25882"/><p class="title"><strong>Example 22.45. Sending commands to a container</strong></p><div class="example-contents"><pre><code class="language-java">public void executeCommands() {  
    System.out.println("== Sending commands to the server ==");  
    RuleServicesClient rulesClient = kieServicesClient.getServicesClient(RuleServicesClient.class);  
    KieCommands commandsFactory = KieServices.Factory.get().getCommands();  
    Command&lt;?&gt; insert = commandsFactory.newInsert("Some String OBJ");  
    Command&lt;?&gt; fireAllRules = commandsFactory.newFireAllRules();  
    Command&lt;?&gt; batchCommand = commandsFactory.newBatchExecution(Arrays.asList(insert, fireAllRules));  
    ServiceResponse&lt;String&gt; executeResponse = rulesClient.executeCommands("hello", batchCommand);  
    if(executeResponse.getType() == ResponseType.SUCCESS) {  
        System.out.println("Commands executed with success! Response: ");  
        System.out.println(executeResponse.getResult());  
    }  
    else {  
        System.out.println("Error executing rules. Message: ");  
        System.out.println(executeResponse.getMsg());  
    }  
}  </code></pre><p>The result in this case is a String with the command execution result. In our case it will print the
        following:</p><pre><code class="no-highlight">    == Sending commands to the server ==  
    Commands executed with success! Response:   
    {  
      "results" : [ ],  
      "facts" : [ ]  
    }  </code></pre><p><span class="emphasis"><em>* You must add <span class="bold"><strong>org.drools:drools-compiler</strong></span> dependency
        to have this part working</em></span></p></div></div><p><br class="example-break"/></p></div><div class="section" title="22.9.9. Listing available business processes"><div class="titlepage"><div><div><h3 class="title"><a id="d0e25897"/>22.9.9. Listing available business processes</h3></div></div></div><p>To list process definitions we use the QueryClient. The methods of the QueryClient usually uses pagination,
    which means that besides the query you are making, you must also provide the current page and the number of results
    per page. In the code below the query for process definitions from the given container starts on page 0 and list
    1000 results, in another words, the 1000 first results.</p><div class="example"><a id="d0e25903"/><p class="title"><strong>Example 22.46. Listing Business Processes Definitions Example</strong></p><div class="example-contents"><pre><code class="language-java">public void listProcesses() {  
    System.out.println("== Listing Business Processes ==");  
    QueryServicesClient queryClient = kieServicesClient.getServicesClient(QueryServicesClient.class);  
    List&lt;ProcessDefinition&gt; findProcessesByContainerId = queryClient.findProcessesByContainerId("rewards", 0, 1000);  
    for (ProcessDefinition def : findProcessesByContainerId) {  
        System.out.println(def.getName() + " - " + def.getId() + " v" + def.getVersion());  
    }  
} </code></pre></div></div><p><br class="example-break"/></p></div></div></div><script type="text/javascript" src="highlight.js/highlight.pack.js"> </script><script type="text/javascript">hljs.initHighlightingOnLoad();</script><ul class="docnav"><li class="previous"><a accesskey="p" href="pt06.html"><strong>Prev</strong>Part VI. KIE Server</a></li><li class="up"><a accesskey="u" href="#"><strong>Up</strong></a></li><li class="home"><a accesskey="h" href="index.html"><strong>Home</strong></a></li><li class="next"><a accesskey="n" href="pt07.html"><strong>Next</strong>Part VII. Drools Examples</a></li></ul></body></html>