<html lang="en-US"  xmlns="http://www.w3.org/1999/xhtml"><head>
        <title>访问Cookies（Java™教程>部署>使用Java Rich Internet应用程序做更多事情）</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="description" content="This deployment Java tutorial describes development and deployment of applets, Java Web Start applications, rich Internet applications, and JAR related tools">
     <meta name="keywords" content="java programming, learn java, java sample code, java applet, java web start, rich internet application, RIA, jar, plugin, plug-in">
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
<body  onload="load()">
    <noscript>要使此页面正常运行，需要启用JavaScript的浏览器。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName">文献资料</div>
            </div> 
            <br class="clearfloat">
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™教程</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> <a href="javascript:void(0);" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">使用Java Rich Internet应用程序做更多的事情</a></div>
<div class="linkAHEAD"><a href="settingArgsProperties.html">设置可信参数和安全属性</a></div>
<div class="linkBHEAD"><a href="properties.html">系统属性</a></div>
<div class="linkAHEAD"><a href="jnlpAPI.html">JNLP API</a></div>
<div class="linkBHEAD"><a href="usingJNLPAPI.html">使用JNLP API访问客户端</a></div>
<div class="linkAHEAD"><a href="cookies.html">饼干</a></div>
<div class="nolinkBHEAD">访问Cookies</div>
<div class="linkAHEAD"><a href="customizeRIALoadingExperience.html">自定义加载体验</a></div>
<div class="linkAHEAD"><a href="security.html">富Internet应用程序中的安全性</a></div>
<div class="linkAHEAD"><a href="devGuidelines.html">保护富Internet应用程序的准则</a></div>
<div class="linkQUESTIONS"><a href="QandE/questions.html">问题与练习</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>追踪：</b>部署<br><b>课程：</b>使用Java Rich Internet Application做更多的事情<br><b>部分：</b> Cookies</div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">主页</a> > <a href="../index.html" target="_top">部署</a> > <a href="index.html" target="_top">使用Java Rich Internet应用程序做更多事情</a>
            </div>
            <div class="NavBit">
                <a href="cookies.html" target="_top">«上一个</a> • <a href="../TOC.html" target="_top">追踪</a> • <a href="customizeRIALoadingExperience.html" target="_top">下一个»</a>
            </div>
            <div class="Banner"><p style="background-color:rgb(247,248,249);border-width:1px;padding:10px;font-style:italic;border-style:solid;border-color:rgb(64,74,91)">Java教程是为JDK 8编写的。此页面中描述的示例和实践没有利用更高版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>访问Cookies</h1></div>
            <div id="PageContent">

<p>您可以在Rich Internet Application（RIA）中设置和检索Cookie。Cookies可以增强RIA的功能。例如，考虑在各种网页上都有小程序的情况。网页上的小程序不能直接访问另一网页上的小程序或与之共享信息。在这种情况下，Cookie提供了小程序之间的重要连接，并帮助一个小程序将信息传递给另一个网页上的另一个小程序。Java Web Start应用程序还可以使用cookie在客户端上存储信息。</p>
<p>Cookie Applet示例包含一个<a class="SourceLink" href="examples/applet_AccessingCookies/src/CookieAccessor.java" target="_blank" onclick="showCode('../../displayCode.html', 'examples/applet_AccessingCookies/src/CookieAccessor.java '); return false;"><code>CookieAccessor</code></a>检索和设置cookie的类。</p>
<h2><a id="retrieving" name="retrieving"></a>检索Cookie</h2>
<p>以下代码段显示了<code>getCookieUsingCookieHandler</code>的方法<code>CookieAccessor</code>类：</p>
<div class="codeblock"><pre>
public void getCookieUsingCookieHandler() { 
    try {       
        // Instantiate CookieManager;
        // make sure to set CookiePolicy
        CookieManager manager = new CookieManager();
        manager.setCookiePolicy(CookiePolicy.ACCEPT_ALL);
        CookieHandler.setDefault(manager);

        // get content from URLConnection;
        // cookies are set by web site
        URL url = new URL("http://host.example.com");
        URLConnection connection = url.openConnection();
        connection.getContent();

        // get cookies from underlying
        // CookieStore
        CookieStore cookieJar =  manager.getCookieStore();
        List &lt;HttpCookie&gt; cookies =
            cookieJar.getCookies();
        for (HttpCookie cookie: cookies) {
          System.out.println("CookieHandler retrieved cookie: " + cookie);
        }
    } catch(Exception e) {
        System.out.println("Unable to get cookie using CookieHandler");
        e.printStackTrace();
    }
}  
</pre></div>
<p>的<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html" target="_blank"><code>CookieManager</code></a>类是cookie管理的主要入口点。创建一个实例<code>CookieManager</code>类并设置其<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookiePolicy.html" target="_blank"><code>CookiePolicy</code></a> 。设置此实例<code>CookieManager</code>作为默认<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html" target="_blank"><code>CookieHandler</code></a> 。</p>
<p>打开一个<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/URLConnection.html" target="_blank"><code>URLConnection</code></a>到您选择的网站。</p>
<p>接下来，从底层检索cookie <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookieStore.html" target="_blank"><code>CookieStore</code></a>通过使用<code>getCookies</code>方法。</p>
<h2>设置饼干</h2>
<p>以下代码段显示了<code>setCookieUsingCookieHandler</code>的方法<code>CookieAccessor</code>类：</p>
<div class="codeblock"><pre>
public void setCookieUsingCookieHandler() {
    try {
        // instantiate CookieManager
        CookieManager manager = new CookieManager();
        CookieHandler.setDefault(manager);
        CookieStore cookieJar =  manager.getCookieStore();

        // create cookie
        HttpCookie cookie = new HttpCookie("UserName", "John Doe");

        // add cookie to CookieStore for a
        // particular URL
        URL url = new URL("http://host.example.com");
        cookieJar.add(url.toURI(), cookie);
        System.out.println("Added cookie using cookie handler");
    } catch(Exception e) {
        System.out.println("Unable to set cookie using CookieHandler");
        e.printStackTrace();
    }
}
</pre></div>
<p>如<a href="#retrieving">检索Cookie中</a>所示， <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookieManager.html" target="_blank"><code>CookieManager</code></a>类是cookie管理的主要入口点。创建一个实例<code>CookieManager</code>类并将实例设置为默认实例<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/CookieHandler.html" target="_blank"><code>CookieHandler</code></a> 。</p>
<p>创建所需的<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/java/net/HttpCookie.html" target="_blank"><code>HttpCookie</code></a>与必要的信息。在我们的示例中，我们创建了一个新的<code>HttpCookie</code>设置<code>UserName</code>如<code>John Doe</code> 。</p>
<p>接下来，将cookie添加到基础cookie存储中。</p>

<h2>运行Cookie小程序示例</h2>
<p>要访问cookie，必须签名RIA JAR文件并请求在安全沙箱外部运行的权限。请参阅说明文件<a class="OutsideLink" href="https://docs.oracle.com/javase/8/docs/technotes/tools/index.html#security" target="_blank"><code>jarsigner</code></a>学习如何签名JAR文件的工具。有关请求权限的信息，请参阅<a class="TutorialLink" href="../doingMoreWithRIA/security.html" target="_top">Rich Internet Applications中的安全性</a> 。</p>

<p>
<a class="TutorialLink" href="examplesIndex.html#AccessingCookies" target="_top">下载</a> <em>Cookie Applet</em>示例的<a class="TutorialLink" href="examplesIndex.html#AccessingCookies" target="_top">源代码</a>以进行进一步试验。</p>
<!--
<div class="note"><hr /><strong>Note:</strong> You must sign your RIA JAR file in order to access cookies. See the documentation for the 
<a class="OutsideLink" target="_blank" href="https://docs.oracle.com/javase/8/docs/technotes/tools/index.html#security"><code>jarsigner</code></a> tool to learn how to sign JAR files.
<hr /></div>

<h2>Running the Cookie Applet Example</h2>
<p>Open 
<a class="SourceLink" target="_blank" href="examples/dist/applet_AccessingCookies/AppletPage.html" onclick="showCode('../../displayCode.html', 'examples/dist/applet_AccessingCookies/AppletPage.html'); return false;"><code>AppletPage.html</code></a> in a browser to run the Cookie Applet example. Check the Java Console log for details of cookies that have been set and retrieved. You should see the following output in the Java Console log (session details vary).</p>
<div class="codeblock"><pre>
=== Access cookies using CookieHandler ===
CookieHandler retrieved cookie: JSESSIONID=3bc935c18b8d36319be9497fb892
CookieHandler retrieved cookie: JROUTE=eKVJ4oW0NOer888s
Added cookie using cookie handler
...
</pre></div>
<div class="note"><hr /><strong>Note:</strong>  If you don't see the applet running, you need to install at least the <a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html">Java SE Development Kit (JDK) 6 update 10</a> release.<hr /></div><div class="note"><hr /><strong>Note:</strong>  If you don't see the example running, you might need to enable the JavaScript interpreter in your browser so that the Deployment Toolkit script can function properly.<hr /></div>
<p>
<a class="TutorialLink" target="_top" href="examplesIndex.html#AccessingCookies">Download source code</a> for the <em>Cookie Applet</em> example to experiment further.</p>
-->
        </div>
        <div class="NavBit">
            <a href="cookies.html" target="_top">«上一个</a> • <a href="../TOC.html" target="_top">追踪</a> • <a href="customizeRIALoadingExperience.html" target="_top">下一个»</a>
        </div>
    </div>
    
<hr class="clearfloat">

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">关于Oracle</a> | <a href="http://www.oracle.com/us/corporate/contact/index.html">联系我们</a> | <a href="http://www.oracle.com/us/legal/index.html">法律声明</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">使用条款</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">您的隐私权</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">版权所有©1995、2017 Oracle和/或其分支机构。版权所有。</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>上一页：</b> Cookies<br><b>下一页：</b>自定义加载体验</div>
<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code --> 

 
</body></html>