<html lang="en-US"  xmlns="http://www.w3.org/1999/xhtml"><head></head><body  onload="load()">﻿
        <title>使用WebRowSet对象（Java™教程> JDBC（TM）数据库访问> JDBC基础）</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="description" content="This JDBC Java tutorial describes how to use JDBC API to create, insert into, update, and query tables. You will also learn how to use simple and prepared statements, stored procedures and perform transactions">
     <meta name="keywords" content="java programming, learn java, java sample code, jdbc, prepared statement, result set">
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>

    <noscript>要使此页面正常运行，需要启用JavaScript的浏览器。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName">文献资料</div>
            </div> 
            <br class="clearfloat">
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™教程</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> <a href="javascript:void(0);" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkLESSON"><a href="index.html">JDBC基础</a></div>
<div class="linkAHEAD"><a href="gettingstarted.html">入门</a></div>
<div class="linkAHEAD"><a href="processingsqlstatements.html">使用JDBC处理SQL语句</a></div>
<div class="linkAHEAD"><a href="connecting.html">建立连接</a></div>
<div class="linkAHEAD"><a href="sqldatasources.html">连接数据源对象</a></div>
<div class="linkAHEAD"><a href="sqlexception.html">处理SQLException</a></div>
<div class="linkAHEAD"><a href="tables.html">设置表格</a></div>
<div class="linkAHEAD"><a href="retrieving.html">从结果集中检索和修改值</a></div>
<div class="linkAHEAD"><a href="prepared.html">使用准备好的语句</a></div>
<div class="linkAHEAD"><a href="transactions.html">使用交易</a></div>
<div class="linkAHEAD"><a href="rowset.html">使用行集对象</a></div>
<div class="linkAHEAD"><a href="jdbcrowset.html">使用JdbcRowSet对象</a></div>
<div class="linkAHEAD"><a href="cachedrowset.html">使用CachedRowSetObjects</a></div>
<div class="linkAHEAD"><a href="joinrowset.html">使用JoinRowSet对象</a></div>
<div class="linkAHEAD"><a href="filteredrowset.html">使用FilteredRowSet对象</a></div>
<div class="nolinkAHEAD">使用WebRowSet对象</div>
<div class="linkAHEAD"><a href="sqltypes.html">使用高级数据类型</a></div>
<div class="linkAHEAD"><a href="blob.html">使用大对象</a></div>
<div class="linkAHEAD"><a href="sqlxml.html">使用SQLXML对象</a></div>
<div class="linkAHEAD"><a href="array.html">使用数组对象</a></div>
<div class="linkAHEAD"><a href="distinct.html">使用DISTINCT数据类型</a></div>
<div class="linkAHEAD"><a href="sqlstructured.html">使用结构化对象</a></div>
<div class="linkAHEAD"><a href="sqlcustommapping.html">使用自定义类型映射</a></div>
<div class="linkAHEAD"><a href="sqldatalink.html">使用数据链接对象</a></div>
<div class="linkAHEAD"><a href="sqlrowid.html">使用RowId对象</a></div>
<div class="linkAHEAD"><a href="storedprocedures.html">使用存储过程</a></div>
<div class="linkAHEAD"><a href="jdbcswing.html">结合使用JDBC和GUI API</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>Trail：</b> JDBC（TM）数据库访问<br><b>课程：</b> JDBC基础</div>
            <div id="BreadCrumbs">
                <a href="../../index.html" target="_top">主页</a> > <a href="../index.html" target="_top">JDBC（TM）数据库访问</a> > <a href="index.html" target="_top">JDBC基础</a>
            </div>
            <div class="NavBit">
                <a href="filteredrowset.html" target="_top">«上一个</a> • <a href="../TOC.html" target="_top">追踪</a> • <a href="sqltypes.html" target="_top">下一个»</a>
            </div>
            <div class="Banner"><p style="background-color:rgb(247,248,249);border-width:1px;padding:10px;font-style:italic;border-style:solid;border-color:rgb(64,74,91)">Java教程是为JDK 8编写的。此页面中描述的示例和实践没有利用更高版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>使用WebRowSet对象</h1></div>
            <div id="PageContent">

<p>一种<code>WebRowSet</code>对象非常特殊，因为除了提供<code>CachedRowSet</code>对象，它可以将自己编写为XML文档，还可以读取该XML文档以将其自身转换回<code>WebRowSet</code>宾语。因为XML是不同企业之间可以通过其进行通信的语言，所以它已成为Web服务通信的标准。结果， <code>WebRowSet</code>通过使Web服务能够以XML文档的形式从数据库发送和接收数据来满足对象的实际需求。</p>
<p>涵盖以下主题：</p>
<ul>
<li><a href="#creating-and-populating-webrowset-object">创建和填充WebRowSet对象</a></li>
<li><a href="#writing-and-reading-webrowset-object-to-xml">将WebRowSet对象写入和读取为XML</a></li>
<li><a href="#what-is-in-xml-document">XML文档中的内容</a></li>
<li><a href="#making-changes-to-webrowset-object">更改WebRowSet对象</a></li>
</ul>
<p>Coffee Break公司已扩展为在线销售咖啡。用户从Coffee Break网站按磅订购咖啡。通过从公司数据库中获取最新信息，可以定期更新价格表。本节演示了如何使用XML文档将价格数据作为XML文档发送。 <code>WebRowSet</code>对象和单个方法调用。</p>
<!-- ************************************************************* -->
<h2><a name="creating-and-populating-webrowset-object" id="creating-and-populating-webrowset-object">创建和填充WebRowSet对象</a></h2>
<p>您创建一个新<code>WebRowSet</code>具有参考实现中定义的默认构造函数的对象， <code>WebRowSetImpl</code> ，如以下代码行所示：</p>
<div class="codeblock"><pre>
<code>WebRowSet</code> priceList = new WebRowSetImpl();
</pre></div>
<p>虽然<code>priceList</code>对象尚无数据，它的默认属性为<code>BaseRowSet</code>宾语。它的<code>SyncProvider</code>首先将对象设置为<code>RIOptimisticProvider</code>实现，这是所有断开连接的默认设置<code>RowSet</code>对象。然而<code>WebRowSet</code>实现重置<code>SyncProvider</code>成为对象<code>RIXMLProvider</code>实施。</p>
<p>您可以使用<code>RowSetFactory</code> ，由<code>RowSetProvider</code>类，创建一个<code>WebRowSet</code>宾语。有关更多信息，请参见<a href="jdbcrowset.html#rowsetfactory">使用</a> <a href="jdbcrowset.html">JdbcRowSet对象</a>中的<a href="jdbcrowset.html">使用</a> <a href="jdbcrowset.html#rowsetfactory">RowSetFactory接口</a> 。</p>
<p>Coffee Break总部定期将价格表更新发送到其网站。此信息在<code>WebRowSet</code>对象将显示一种可以在XML文档中发送最新价格表的方式。</p>
<p>价格表包含列中的数据<code>COF_NAME</code>和<code>PRICE</code>从桌子上<code>COFFEES</code> 。以下代码片段设置了所需的属性，并填充了<code>priceList</code>具有价目表数据的对象：</p>
<div class="codeblock"><pre>
public void getPriceList(String username, String password) {
    priceList.setCommand("SELECT COF_NAME, PRICE FROM COFFEES");
    priceList.setURL("jdbc:mySubprotocol:myDatabase");
    priceList.setUsername(username);
    priceList.setPassword(password);
    priceList.execute();
    // ...
}
</pre></div>
<p>此时，除了默认属性外， <code>priceList</code>对象包含数据<code>COF_NAME</code>和<code>PRICE</code>来自的列<code>COFFEES</code>表以及有关这两列的元数据。</p>
<h2><a name="writing-and-reading-webrowset-object-to-xml" id="writing-and-reading-webrowset-object-to-xml">将WebRowSet对象写入和读取为XML</a></h2>
<p>写一个<code>WebRowSet</code>对象作为XML文档，调用方法<code>writeXml</code> 。将该XML文档的内容读入<code>WebRowSet</code>对象，调用方法<code>readXml</code> 。这两种方法都是在后台运行的，这意味着除了结果之外，其他所有内容对于您都是不可见的。</p>
<h3>使用writeXml方法</h3>
<p>方法<code>writeXml</code>写<code>WebRowSet</code>调用它作为表示其当前状态的XML文档的对象。它将此XML文档写入传递给它的流中。流可以是<code>OutputStream</code>对象，例如<code>FileOutputStream</code>对象或<code>Writer</code>对象，例如<code>FileWriter</code>宾语。如果通过方法<code>writeXml</code>一个<code>OutputStream</code>对象，您将以字节为单位写，可以处理所有类型的数据；如果你通过了<code>Writer</code>对象，您将用字符书写。以下代码演示了如何编写<code>WebRowSet</code>宾语<code>priceList</code>作为XML文档<code>FileOutputStream</code>宾语<code>oStream</code> ：</p>
<div class="codeblock"><pre>
java.io.FileOutputStream oStream =
    new java.io.FileOutputStream("priceList.xml");
priceList.writeXml(oStream);
</pre></div>
<p>以下代码编写了XML文档，代表<code>priceList</code>到<code>FileWriter</code>宾语<code>writer</code>而不是<code>OutputStream</code>宾语。的<code>FileWriter</code> class是用于将字符写入文件的便捷类。</p>
<div class="codeblock"><pre>
java.io.FileWriter writer =
    new java.io.FileWriter("priceList.xml");
priceList.writeXml(writer);
</pre></div>
<p>方法的其他两个版本<code>writeXml</code>让您填充一个<code>WebRowSet</code>具有以下内容的对象<code>ResultSet</code>对象，然后再将其写入流。在下面的代码行中，方法<code>writeXml</code>读取内容<code>ResultSet</code>宾语<code>rs</code>进入<code>priceList</code>对象然后写<code>priceList</code>到<code>FileOutputStream</code>宾语<code>oStream</code>作为XML文档。</p>
<div class="codeblock"><pre>
priceList.writeXml(rs, oStream);
</pre></div>
<p>在下一行代码中， <code>writeXml</code>方法填充<code>priceList</code>与内容<code>rs</code> ，但是它将XML文档写入到<code>FileWriter</code>对象而不是对象<code>OutputStream</code>宾语：</p>
<div class="codeblock"><pre>
priceList.writeXml(rs, writer);
</pre></div>
<h3>使用readXml方法</h3>
<p>方法<code>readXml</code>解析XML文档以构造<code>WebRowSet</code> XML文档描述的对象。类似于方法<code>writeXml</code> ，您可以通过<code>readXml</code>一个<code>InputStream</code>对象或<code>Reader</code>从中读取XML文档的对象。</p>
<div class="codeblock"><pre>
java.io.FileInputStream iStream =
    new java.io.FileInputStream("priceList.xml");
priceList.readXml(iStream);

java.io.FileReader reader = new
    java.io.FileReader("priceList.xml");
priceList.readXml(reader);
</pre></div>
<p>请注意，您可以将XML描述读入新的<code>WebRowSet</code>对象或同一个<code>WebRowSet</code>称为的对象<code>writeXml</code>方法。在方案价格清单信息从总部发送到网站的情况下，您将使用新的<code>WebRowSet</code>对象，如以下代码行所示：</p>
<div class="codeblock"><pre>
WebRowSet recipient = new WebRowSetImpl();
java.io.FileReader reader =
    new java.io.FileReader("priceList.xml");
recipient.readXml(reader);
</pre></div>
<!-- *********************************************** -->
<h2><a name="what-is-in-xml-document" id="what-is-in-xml-document">XML文档中的内容</a></h2>
<p><code>RowSet</code>对象不仅仅是它们包含的数据。它们还具有有关其列的属性和元数据。因此，代表<code>WebRowSet</code>对象除了其数据外还包括其他信息。此外，XML文档中的数据包括当前值和原始值。（回想一下，原始值是在进行最新数据更改之前立即存在的值。这些值对于检查数据库中的相应值是否已更改是必需的，从而在应持久化该值上造成冲突：您在数据库中输入的新值<code>RowSet</code>对象或其他人在数据库中输入的新值。）</p>
<p>WebRowSet XML模式本身就是一个XML文档，它定义了什么XML文档代表了<code>WebRowSet</code>对象将包含以及必须显示的格式。发送者和接收者都使用此架构，因为它告诉发送者如何编写XML文档（代表XML文档<code>WebRowSet</code>对象）以及收件人如何解析XML文档。因为实际的读写是由方法的实现在内部完成的<code>writeXml</code>和<code>readXml</code> ，您作为用户不需要了解WebRowSet XML Schema文档中的内容。</p>
<p>XML文档在层次结构中包含元素和子元素。以下是XML文档中描述以下内容的三个主要元素： <code>WebRowSet</code>宾语：</p>
<ul>
<li><a href="#properties-webrowset">物产</a></li>
<li><a href="#metadata-webrowset">元数据</a></li>
<li><a href="#data-webrowset">数据</a></li>
</ul>
<p>元素标签表示元素的开始和结束。例如， <code><properties></code>标签表示properties元素的开始， <code></properties></code>标签表示其结束。的<code><map/></code>标签是表示地图子元素（属性元素中的子元素之一）尚未分配值的简写方式。以下示例XML文档使用空格和缩进使其更易于阅读，但是在实际的XML文档中不使用空格和缩进，空格并不意味着任何意义。</p>
<p>接下来的三个部分向您展示了<code>WebRowSet</code><code>priceList</code>在样本中创建的对象<a href="gettingstarted.html"><code>WebRowSetSample.java</code></a> 。</p>
<h3><a name="properties-webrowset" id="properties-webrowset">物产</a></h3>
<p>调用方法<code>writeXml</code>在<code>priceList</code>对象将产生一个描述的XML文档<code>priceList</code> 。该XML文档的properties部分如下所示：</p>
<div class="codeblock"><pre>
&lt;properties&gt;
  &lt;command&gt;
    select COF_NAME, PRICE from COFFEES
  &lt;/command&gt;
  &lt;concurrency&gt;1008&lt;/concurrency&gt;
  &lt;datasource&gt;&lt;null/&gt;&lt;/datasource&gt;
  &lt;escape-processing&gt;true&lt;/escape-processing&gt;
  &lt;fetch-direction&gt;1000&lt;/fetch-direction&gt;
  &lt;fetch-size&gt;0&lt;/fetch-size&gt;
  &lt;isolation-level&gt;2&lt;/isolation-level&gt;
  &lt;key-columns&gt;
    &lt;column&gt;1&lt;/column&gt;
  &lt;/key-columns&gt;
  &lt;map&gt;
  &lt;/map&gt;
  &lt;max-field-size&gt;0&lt;/max-field-size&gt;
  &lt;max-rows&gt;0&lt;/max-rows&gt;
  &lt;query-timeout&gt;0&lt;/query-timeout&gt;
  &lt;read-only&gt;true&lt;/read-only&gt;
  &lt;rowset-type&gt;
    ResultSet.TYPE_SCROLL_INSENSITIVE
  &lt;/rowset-type&gt;
  &lt;show-deleted&gt;false&lt;/show-deleted&gt;
  &lt;table-name&gt;COFFEES&lt;/table-name&gt;
  &lt;url&gt;jdbc:mysql://localhost:3306/testdb&lt;/url&gt;
  &lt;sync-provider&gt;
    &lt;sync-provider-name&gt;
      com.sun.rowset.providers.RIOptimisticProvider
    &lt;/sync-provider-name&gt;
    &lt;sync-provider-vendor&gt;
      Sun Microsystems Inc.
    &lt;/sync-provider-vendor&gt;
    &lt;sync-provider-version&gt;
      1.0
    &lt;/sync-provider-version&gt;
    &lt;sync-provider-grade&gt;
      2
    &lt;/sync-provider-grade&gt;
    &lt;data-source-lock&gt;1&lt;/data-source-lock&gt;
  &lt;/sync-provider&gt;
&lt;/properties&gt;
</pre></div>
<p>请注意，某些属性没有价值。例如， <code>datasource</code>属性用<code><datasource/></code>标签，这是一种简写的表达方式<code><datasource></datasource></code> 。没有给出值，因为<code>url</code>属性已设置。建立的所有连接都将使用此JDBC URL完成，因此<code>DataSource</code>需要设置对象。另外， <code>username</code>和<code>password</code>这些属性未列出，因为它们必须保密。</p>
<h3><a name="metadata-webrowset" id="metadata-webrowset">元数据</a></h3>
<p>XML文档的元数据部分描述了<code>WebRowSet</code>对象包含有关该列中的信息<code>WebRowSet</code>宾语。以下显示了本节的内容<code>WebRowSet</code>宾语<code>priceList</code> 。因为<code>priceList</code>对象有两列，描述它的XML文档有两列<code><column-definition></code>元素。每<code><column-definition></code>元素具有提供有关所描述列的信息的子元素。</p>
<div class="codeblock"><pre>
&lt;metadata&gt;
  &lt;column-count&gt;2&lt;/column-count&gt;
  &lt;column-definition&gt;
    &lt;column-index&gt;1&lt;/column-index&gt;
    &lt;auto-increment&gt;false&lt;/auto-increment&gt;
    &lt;case-sensitive&gt;false&lt;/case-sensitive&gt;
    &lt;currency&gt;false&lt;/currency&gt;
    &lt;nullable&gt;0&lt;/nullable&gt;
    &lt;signed&gt;false&lt;/signed&gt;
    &lt;searchable&gt;true&lt;/searchable&gt;
    &lt;column-display-size&gt;
      32
    &lt;/column-display-size&gt;
    &lt;column-label&gt;COF_NAME&lt;/column-label&gt;
    &lt;column-name&gt;COF_NAME&lt;/column-name&gt;
    &lt;schema-name&gt;&lt;/schema-name&gt;
    &lt;column-precision&gt;32&lt;/column-precision&gt;
    &lt;column-scale&gt;0&lt;/column-scale&gt;
    &lt;table-name&gt;coffees&lt;/table-name&gt;
    &lt;catalog-name&gt;testdb&lt;/catalog-name&gt;
    &lt;column-type&gt;12&lt;/column-type&gt;
    &lt;column-type-name&gt;
      VARCHAR
    &lt;/column-type-name&gt;
  &lt;/column-definition&gt;
  &lt;column-definition&gt;
    &lt;column-index&gt;2&lt;/column-index&gt;
    &lt;auto-increment&gt;false&lt;/auto-increment&gt;
    &lt;case-sensitive&gt;true&lt;/case-sensitive&gt;
    &lt;currency&gt;false&lt;/currency&gt;
    &lt;nullable&gt;0&lt;/nullable&gt;
    &lt;signed&gt;true&lt;/signed&gt;
    &lt;searchable&gt;true&lt;/searchable&gt;
    &lt;column-display-size&gt;
      12
    &lt;/column-display-size&gt;
    &lt;column-label&gt;PRICE&lt;/column-label&gt;
    &lt;column-name&gt;PRICE&lt;/column-name&gt;
    &lt;schema-name&gt;&lt;/schema-name&gt;
    &lt;column-precision&gt;10&lt;/column-precision&gt;
    &lt;column-scale&gt;2&lt;/column-scale&gt;
    &lt;table-name&gt;coffees&lt;/table-name&gt;
    &lt;catalog-name&gt;testdb&lt;/catalog-name&gt;
    &lt;column-type&gt;3&lt;/column-type&gt;
    &lt;column-type-name&gt;
      DECIMAL
    &lt;/column-type-name&gt;
  &lt;/column-definition&gt;
&lt;/metadata&gt;
</pre></div>
<p>从此元数据部分，您可以看到每行有两列。第一列是<code>COF_NAME</code> ，其中包含类型的值<code>VARCHAR</code> 。第二列是<code>PRICE</code> ，其中包含类型的值<code>REAL</code> ， 等等。请注意，列类型是数据源中使用的数据类型，而不是Java编程语言中的类型。获取或更新值<code>COF_NAME</code>列，您使用方法<code>getString</code>要么<code>updateString</code> ，驱动程序将转换为<code>VARCHAR</code>像平常一样键入。</p>
<h3><a name="data-webrowset" id="data-webrowset">数据</a></h3>
<p>数据部分提供了每一行中每一列的值<code>WebRowSet</code>宾语。如果您已填充<code>priceList</code>对象并且未对其进行任何更改，XML文档的数据元素将如下所示。在下一节中，您将看到修改文档中的数据时XML文档的更改方式。 <code>priceList</code>宾语。</p>
<p>每行都有一个<code><currentRow></code>元素，并且因为<code>priceList</code>有两列，每列<code><currentRow></code>元素包含两个<code><columnValue></code>元素。</p>
<div class="codeblock"><pre>
&lt;data&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;Colombian&lt;/columnValue&gt;
    &lt;columnValue&gt;7.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;
      Colombian_Decaf
    &lt;/columnValue&gt;
    &lt;columnValue&gt;8.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;Espresso&lt;/columnValue&gt;
    &lt;columnValue&gt;9.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;French_Roast&lt;/columnValue&gt;
    &lt;columnValue&gt;8.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;French_Roast_Decaf&lt;/columnValue&gt;
    &lt;columnValue&gt;9.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
&lt;/data&gt;
</pre></div>
<!-- ****************************************** -->
<h2><a name="making-changes-to-webrowset-object" id="making-changes-to-webrowset-object">更改WebRowSet对象</a></h2>
<p>您对<code>WebRowSet</code>对象与您对对象的处理方式相同<code>CachedRowSet</code>宾语。不像一个<code>CachedRowSet</code>对象，但是，一个<code>WebRowSet</code>对象跟踪更新，插入和删除，以便<code>writeXml</code>方法可以写入当前值和原始值。接下来的三个部分演示了如何对数据进行更改，并展示了描述<code>WebRowSet</code>每次更改后，对象看起来像。您根本不需要对XML文档做任何事情。对它的任何更改都是自动进行的，就像编写和阅读XML文档一样。</p>
<h3>插入行</h3>
<p>如果Coffee Break链的所有者希望将新咖啡添加到价目表中，则代码可能如下所示：</p>
<div class="codeblock"><pre>
priceList.absolute(3);
priceList.moveToInsertRow();
priceList.updateString(COF_NAME, "Kona");
priceList.updateFloat(PRICE, 8.99f);
priceList.insertRow();
priceList.moveToCurrentRow();
</pre></div>
<p>在参考实现中，在当前行之后立即进行插入。在前面的代码片段中，当前行是第三行，因此将在第三行之后添加新行，并成为新的第四行。为了反映这种插入，XML文档将具有以下内容<code><insertRow></code>元素在第三次之后添加到它<code><currentRow></code>中的元素<code><data></code>元件。</p>
<p>的<code><insertRow></code>元素将类似于以下内容。</p>
<div class="codeblock"><pre>
&lt;insertRow&gt;
  &lt;columnValue&gt;Kona&lt;/columnValue&gt;
  &lt;columnValue&gt;8.99&lt;/columnValue&gt;
&lt;/insertRow&gt;
</pre></div>
<h2>删除行</h2>
<p>所有者认为Espresso的销量不足，应将其从The Coffee Break商店出售的咖啡中删除。因此，所有者希望从价格表中删除Espresso。意式浓缩咖啡在<code>priceList</code>对象，因此以下代码行将其删除：</p>
<div class="codeblock"><pre>
priceList.absolute(3); priceList.deleteRow();
</pre></div>
<p>下列<code><deleteRow></code>元素将出现在XML文档数据部分的第二行之后，指示第三行已被删除。</p>
<div class="codeblock"><pre>
&lt;deleteRow&gt;
  &lt;columnValue&gt;Espresso&lt;/columnValue&gt;
  &lt;columnValue&gt;9.99&lt;/columnValue&gt;
&lt;/deleteRow&gt;

</pre></div>
<h2>修改行</h2>
<p>店主进一步认为哥伦比亚咖啡的价格太贵了，希望将其降至每磅6.99美元。以下代码将第一行中的哥伦比亚咖啡的新价格设置为每磅6.99美元：</p>
<div class="codeblock"><pre>
priceList.first();
priceList.updateFloat(PRICE, 6.99);
</pre></div>
<p>XML文档将在<code><updateRow></code>赋予新值的元素。第一列的值未更改，因此有一个<code><updateValue></code>元素仅用于第二列：</p>
<div class="codeblock"><pre>
&lt;currentRow&gt;
  &lt;columnValue&gt;Colombian&lt;/columnValue&gt;
  &lt;columnValue&gt;7.99&lt;/columnValue&gt;
  &lt;updateRow&gt;6.99&lt;/updateRow&gt;
&lt;/currentRow&gt;

</pre></div>
<p>此时，随着一行的插入，一行的删除和一行的修改，用于<code>priceList</code>对象将如下所示：</p>
<div class="codeblock"><pre>
&lt;data&gt;
  &lt;insertRow&gt;
    &lt;columnValue&gt;Kona&lt;/columnValue&gt;
    &lt;columnValue&gt;8.99&lt;/columnValue&gt;
  &lt;/insertRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;Colombian&lt;/columnValue&gt;
    &lt;columnValue&gt;7.99&lt;/columnValue&gt;
    &lt;updateRow&gt;6.99&lt;/updateRow&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;
      Colombian_Decaf
    &lt;/columnValue&gt;
    &lt;columnValue&gt;8.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;deleteRow&gt;
    &lt;columnValue&gt;Espresso&lt;/columnValue&gt;
    &lt;columnValue&gt;9.99&lt;/columnValue&gt;
  &lt;/deleteRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;French_Roast&lt;/columnValue&gt;
    &lt;columnValue&gt;8.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
  &lt;currentRow&gt;
    &lt;columnValue&gt;
      French_Roast_Decaf
    &lt;/columnValue&gt;
    &lt;columnValue&gt;9.99&lt;/columnValue&gt;
  &lt;/currentRow&gt;
&lt;/data&gt;
</pre></div>
<h2>WebRowSet代码示例</h2>
<p>这个样本<code><a href="gettingstarted.html">WebRowSetSample.java</a></code>演示此页面上描述的所有功能。</p>


        </div>
        <div class="NavBit">
            <a href="filteredrowset.html" target="_top">«上一个</a> • <a href="../TOC.html" target="_top">追踪</a> • <a href="sqltypes.html" target="_top">下一个»</a>
        </div>
    </div>
    
<hr class="clearfloat">

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">关于Oracle</a> | <a href="http://www.oracle.com/us/corporate/contact/index.html">联系我们</a> | <a href="http://www.oracle.com/us/legal/index.html">法律声明</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">使用条款</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">您的隐私权</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">版权所有©1995、2017 Oracle和/或其分支机构。版权所有。</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>上一页：</b>使用FilteredRowSet对象<br><b>下一页：</b>使用高级数据类型</div>
<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code --> 

 
</body></html>