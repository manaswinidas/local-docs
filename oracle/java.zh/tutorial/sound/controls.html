<html lang="en-US"  xmlns="http://www.w3.org/1999/xhtml"><head></head><body  onload="load()">﻿
        <title>使用控件处理音频（Java™教程>声音）</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
     <meta name="description" content="">
     <meta name="keywords" content="java programming, learn java, java sample code, ">
        
<style type="text/css">
    body {
        margin-left:10px;
        margin-right:10px;
        line-height: 1.5;
        FONT-FAMILY: Arial, Helvetica, sans-serif; 
        font-size: 0.8em;
    }
    
    a:link{text-decoration:none; color:#09569d;}
    a:visited{text-decoration:none; color: #3a87cf;}
    a:hover{text-decoration:underline; }
        
    code{
        font-family:Monaco,Courier,"Courier New";
    }
    
    .header-container {
        background-color: #fff;
        border-bottom: 1px solid #C1CFDA;
        -webkit-box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
        box-shadow: 0 2px 2px rgba(117, 163, 231, 0.1);
    }
    
    .bookwrapper {
        width: auto;
        margin: auto;
    }
    
    .clearfix {
    }
    
    .clearfloat {
        clear: both;
        overflow: auto;
        height: 0px;
        font-size: 1px;
        line-height: 0px;
    }
    
    #brandProdName {
        width: auto;
        height: auto;
    }
    
    #logocover {
        display: block;
        background: transparent url(../images/oracle-java-logo.png) 0px 0px no-repeat;
        height: 50px;
        width: 229px;
        float: left;
    }
    
    #productName {
        font-size: 16px;
        position: relative;
        top: 19px;
        padding-left: 3px;
        color: #457798;
        white-space: nowrap;
        width: 340px;
    }


    .FigureCaption   { 
        font-family: sans-serif; 
        text-align: center;
    }
    
    #TopBar_bl {        
        width: 100%;
        height: 60px;
    }
    #TopBar_br {
        width: 100%;
        height: 60px;
    }
    #TopBar_tl {
        margin-left: -110px;
        margin-right: -100px;       
		align: left;
        height: 60px;
    }
    #TopBar_tr {
        width: 100%;
        height: 60px;
    }
    
    #TopBar {
        min-width:700px;
        padding:25px 100px 10px;
        margin-bottom:25px;
        clear:both;
        
        border-bottom:1px solid #d2dde5;
        border-radius: 3px;
    
        background:#efefef; /* Old browsers */
        /* IE9 SVG, needs conditional override of 'filter' to 'none' */
        background: url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwMCUiIHN0b3AtY29sb3I9IiNlMmVmZjkiIHN0b3Atb3BhY2l0eT0iMSIvPgogIDwvbGluZWFyR3JhZGllbnQ+CiAgPHJlY3QgeD0iMCIgeT0iMCIgd2lkdGg9IjEiIGhlaWdodD0iMSIgZmlsbD0idXJsKCNncmFkLXVjZ2ctZ2VuZXJhdGVkKSIgLz4KPC9zdmc+);
        background: -moz-linear-gradient(top,  #ffffff 0%, #e2eff9 100%); /* FF3.6+ */
        background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff), color-stop(100%,#e2eff9)); /* Chrome,Safari4+ */
        background: -webkit-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Chrome10+,Safari5.1+ */
        background: -o-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* Opera 11.10+ */
        background: -ms-linear-gradient(top,  #ffffff 0%,#e2eff9 100%); /* IE10+ */
        background: linear-gradient(to bottom,  #ffffff 0%,#e2eff9 100%); /* W3C */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#e2eff9',GradientType=0 ); /* IE6-8 */
        
    }
    
    #TopBar_left {
        line-height: 14px;
        position: absolute;
        padding-top: 30px;
        padding-right: 30px;
        padding-left: 30px;
        text-align: left;
        font: 13px/20px Arial, Helvetica, sans-serif;
        font-weight: bold;
        font-size: 20px;
        color: #333;
    }
    
    #TopBar_right {
        line-height: 12px;
        float: right;
        padding-top: 10px;
        padding-right: 30px;
        text-align: left;
    }
    

    @media print {
        #BreadCrumbs, #Download {
            display: none;
        }
    }
    
     
    @media print {
        #TopBar_right {
            display: none;
        }
    }
    #TopBar_right a {
        font-size: 10px;
        margin: 3px;
        padding: 0;
    }
 
    #BreadCrumbs {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
        float: right;
    }
    
    #BreadCrumbs a {
        color:#09569d;
    }
    
    #BreadCrumbs a:visited, #BreadCrumbs a:link {
        text-decoration: none;
    }
    
    #BreadCrumbs a:hover, #BreadCrumbs a:active {
        text-decoration: underline;
    }
    
    #PageTitle {
        margin: 0 5px 0.5em 0;
        color: #F90000;
    }
    
    #PageContent{
        margin: 0 5px 0 20px;
    }
    
    .LeftBar_shown {
        width: 13em;
        float: left;
    }
    
    @media print {
        .LeftBar_shown {
            display: none;
        }
    }
    
    .LeftBar_hidden {
        display: none;
    }
    
    #Footer {
        padding-top: 10px;
        padding-left: 10px;
        margin-right: 10px;       
    }
    
    .footertext {
        font-size: 10px;
        font-family: sans-serif; 
        margin-top: 1px;
    }

    .NavBit  {
        padding: 15px 5px 0.5em 0;
        font-family: sans-serif; 
    }
    
    @media print {
        .NavBit {
            display: none;
        }
    }
    
    #TagNotes {
        text-align: right;        
    }
    
    @media print {
        #TagNotes a:visited, #TagNotes a:link {
            color: #35556B;
            text-decoration: none;
        }
    }
    
    #Contents a, .NavBit a, #TagNotes a {
        color:#09569d;
    }
    
    #TagNotes a:visited, #TagNotes a:link,
    #Contents a:visited, #Contents a:link,
    .NavBit a:visited, .NavBit a:link {
        text-decoration: none;
    }
    
    #TagNotes a:hover, #TagNotes a:active,   
    #Contents a:hover, #Contents a:active,   
    .NavBit a:hover, .NavBit a:active {  
        text-decoration: underline;
    }
    
    #Contents {
        float: left;
        font-family: sans-serif; 
    }
    @media print {
        #Contents {
            display: none;
        }
    }
    @media screen {
        div.PrintHeaders {
            display: none;
        }
    }
    .linkLESSON, .nolinkLESSON {
        margin-left: 0.5em;
        text-indent: -0.5em;
    }
    .linkAHEAD, .nolinkAHEAD, .linkQUESTIONS, .nolinkQUESTIONS   {
        margin-left: 1.5em; 
        text-indent: -0.5em
    }
    .linkBHEAD, .nolinkBHEAD   {
        margin-left: 2.5em;
        text-indent: -0.5em
    }
    .linkCHEAD, .nolinkCHEAD   {
        margin-left: 3.5em;
        text-indent: -0.5em
    }
    .nolinkLESSON, .nolinkAHEAD, .nolinkBHEAD, .nolinkCHEAD,
    .nolinkQUESTIONS {
        font-weight: bold;
        color: #333;
		
		
    }
    .MainFlow_indented {
        margin-right: 10px;
        margin-left: 15em;
        margin-bottom: 2em;

    }
    .MainFlow_wide {
	
        margin-right: 10px;
        margin-left: 10px;
        margin-bottom: 2em;

    }
    @media print {
        .MainFlow_indented, .MainFlow_wide {
            padding-top: 0;
            margin-top: 10px;
            margin-right: 10px;
            margin-left: 0;
        }
    }
    h1, h2, h3, h4, h5 {
        color: #333;
        
    }

    h1 {
        font-weight: bold;
        font-size: 20px;
    }

    h2 {
        font-weight: bold;
        font-size: 17px;
    }

    h3 {
        font-weight: bold;
        font-size: 14px;
    }

    h4 {
        font-size: 15px;
    }

    h5 {
        font-size: 12px;
    }


    #ToggleLeft {
        display: none;
    }
    
    .note {
        margin: 0 30px 0px 30px;
    }
    
    .codeblock {
        margin: 0 30px 0px 30px;
		font-size:12px;
		font-family:Monaco,Courier,"Courier New";
    }
    
    .tocli {
        list-style-type:none;
    }

    .betadraft {
        color: red;
    }

</style>
<script type="text/javascript">
/* <![CDATA[ */
    function leftBar() {
        var nameq = 'tutorial_showLeftBar='
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookieString = cookies[i];
            while (cookieString.charAt(0) == ' ') {
                cookieString = cookieString.substring(1, cookieString.length);
            }
            if (cookieString.indexOf(nameq) == 0) {
                cookieValue =  cookieString.substring(nameq.length,
                        cookieString.length);
                return cookieValue == 'yes';
            }
        }
        return true;
    }

    function showLeft(b) {
        var contents = document.getElementById("LeftBar");
        var main = document.getElementById("MainFlow");
        var toggle = document.getElementById("ToggleLeft");
        if (b) {
            contents.className = "LeftBar_shown";
            main.className = "MainFlow_indented";
            toggle.innerHTML = "Hide TOC";
            document.cookie = 'tutorial_showLeftBar=yes; path=/';
        } else {
            contents.className = "LeftBar_hidden";
            main.className = "MainFlow_wide";
            toggle.innerHTML = "Show the TOC";
            document.cookie = 'tutorial_showLeftBar=no; path=/';
        }
    }

    function toggleLeft() {
        showLeft(document.getElementById("LeftBar").className ==
                "LeftBar_hidden");
        document.getElementById("ToggleLeft").blur();
    }

    function load() {
        showLeft(leftBar());
        document.getElementById("ToggleLeft").style.display="inline";
    }

    function showCode(displayCodePage, codePath) {
        var codePathEls = codePath.split("/");
        var currDocPathEls = location.href.split("/");
        //alert ("codePathEls = " + codePathEls + "\n" + "currDocPathEls = " + currDocPathEls);
        currDocPathEls.pop(); // remove file name at the end
        while (codePathEls.length > 0) {
            if (codePathEls[0] == "..") {
                codePathEls.shift();
                currDocPathEls.pop();
            } else {
                break;
            }
        }
        var fullCodePath = currDocPathEls.join("/") + "/" + codePathEls.join("/");
        //alert ("fullCodePath = " + fullCodePath );
        if (codePath.indexOf(".java") != -1 || codePath.indexOf(".jnlp") != -1) {
            window.location.href = displayCodePage + "?code=" + encodeURI(fullCodePath);
        } else {
            window.location.href = fullCodePath;
        }
    }
/* ]]> */    
</script>


    <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>

    <noscript>要使此页面正常运行，需要启用JavaScript的浏览器。
    </noscript>
        <!-- header -->
    <div class="header-container">
        <div class="bookwrapper  clearfix">       
            <div id="brandProdName">
                <div id="logocover"></div>
                <div id="productName">文献资料</div>
            </div> 
            <br class="clearfloat">
        </div>
    </div>
    
    <div id="TopBar">
        <div id="TopBar_tr">
            <div id="TopBar_tl">
                <div id="TopBar_br"> <div id="TopBar_bl"> 
                    <div id="TopBar_left">Java™教程</div>
                        <div id="TopBar_right"> 
                            <!--
                            <a href="URL" target="_blank">External Link</a><br/>
                            --> <a href="javascript:void(0);" id="ToggleLeft">隐藏目录</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div id="LeftBar" class="LeftBar_shown">
        <div id="Contents">
            <div class="linkAHEAD"><a href="sampled-overview.html">采样包概述</a></div>
<div class="linkAHEAD"><a href="accessing.html">访问音频系统资源</a></div>
<div class="linkAHEAD"><a href="playing.html">播放音频</a></div>
<div class="linkAHEAD"><a href="capturing.html">捕捉音频</a></div>
<div class="nolinkAHEAD">使用控件处理音频</div>
<div class="linkAHEAD"><a href="converters.html">使用文件和格式转换器</a></div>
<div class="linkAHEAD"><a href="overview-MIDI.html">MIDI包概述</a></div>
<div class="linkAHEAD"><a href="accessing-MIDI.html">访问MIDI系统资源</a></div>
<div class="linkAHEAD"><a href="MIDI-messages.html">传输和接收MIDI信息</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-intro.html">音序器简介</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-methods.html">使用定序器方法</a></div>
<div class="linkAHEAD"><a href="MIDI-seq-adv.html">使用高级音序器功能</a></div>
<div class="linkAHEAD"><a href="MIDI-synth.html">合成声音</a></div>
<div class="linkAHEAD"><a href="SPI-intro.html">服务提供商接口简介</a></div>
<div class="linkAHEAD"><a href="SPI-providing-sampled.html">提供音频采样服务</a></div>
<div class="linkAHEAD"><a href="SPI-providing-MIDI.html">提供MIDI服务</a></div>
</div>
    </div>
    <div id="MainFlow" class="MainFlow_indented">
    <div class="PrintHeaders">
        <b>踪迹：</b>声音</div>
            <div id="BreadCrumbs">
                <a href="../index.html" target="_top">主页</a> > <a href="./index.html" target="_top">声音</a>
            </div>
            <div class="NavBit">
                <a href="capturing.html" target="_top">«上一个</a> • <a href="./TOC.html" target="_top">追踪</a> • <a href="converters.html" target="_top">下一个»</a>
            </div>
            <div class="Banner"><p style="background-color:rgb(247,248,249);border-width:1px;padding:10px;font-style:italic;border-style:solid;border-color:rgb(64,74,91)">Java教程是为JDK 8编写的。此页面中描述的示例和实践没有利用更高版本中引入的改进。</p></div>
            <div id="PageTitle"><h1>使用控件处理音频</h1></div>
            <div id="PageContent">

<p>前面的部分讨论了如何播放或捕获音频样本。隐含的目标是尽可能忠实地交付样本，而不进行修改（除了可能将样本与其他音频线路的样本混合在一起）。但是，有时您希望能够修改信号。用户可能希望它听起来更大声，更安静，更饱满，更有回响感，音高更高或更低，等等。该页面讨论了提供这些信号处理的Java Sound API功能。</p>
<p><a name="114172"></a>有两种方法可以应用信号处理：</p>
<ul>
<li><a name="114174"></a>您可以通过查询以下内容使用混频器或其组成部分行支持的任何处理： <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/Control.html" target="_blank"><code>Control</code></a>对象，然后根据用户需要设置控件。混音器和线路支持的典型控件包括增益，声相和混响控件。</li>
<li><a name="114175"></a>如果混音器或其线路未提供所需的处理类型，则程序可以直接对音频字节进行操作，并根据需要进行操作。</li>
</ul>
<p><a name="114177"></a>此页面将更详细地讨论第一种技术，因为第二种技术没有特殊的API。</p>
<p><a name="114180"></a></p>
<h2>控件介绍</h2>
<p><a name="114182"></a>混频器在其某些或全部线路上可以具有各种信号处理控件。例如，用于音频捕获的混频器可能具有带增益控制的输入端口，以及带增益和平移控制的目标数据线。用于音频播放的混音器可能在其源数据线上具有采样率控件。在每种情况下，控件都可以通过<code>Line</code>接口。</p>
<p><a name="114185"></a>因为<code>Mixer</code>接口扩展<code>Line</code> ，调音台本身可以拥有自己的一组控件。这些可能用作影响所有混音器源线或目标线的主控件。例如，混频器可能具有一个主增益控制，该主增益控制的分贝值被添加到其目标线上的各个增益控制的值。</p>
<p><a name="115789"></a>混音器自己的其他控件可能会影响混音器内部用于处理的特殊行，无论是源还是目标。例如，全局混响控件可能会选择混响的种类，以应用于输入信号的混合，并且此“湿”（混响）信号在传送到混音器的目标线路之前会混回到“干”信号中。</p>
<p><a name="114187"></a>如果混音器或其任何行具有控件，则您可能希望通过程序用户界面中的图形对象来显示控件，以便用户可以根据需要调整音频特性。这些控件本身不是图形的；它们只是允许您检索和更改其设置。您可以决定在程序中使用哪种图形表示形式（滑块，按钮等）。</p>
<p><a name="114189"></a>所有控件都实现为抽象类的具体子类<code>Control</code> 。许多典型的音频处理控件可以通过以下的抽象子类来描述： <code>Control</code>基于数据类型（例如布尔，枚举或浮点数）。例如，布尔控制代表二进制状态控制，例如静音或混响的开/关控制。另一方面，浮动控件非常适合表示连续可变的控件，例如声像，平衡或音量。</p>
<p><a name="114191"></a> Java Sound API指定了以下的抽象子类： <code>Control</code> ：</p>
<ul>
<li><a name="114193"></a> <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/BooleanControl.html" target="_blank"><code>BooleanControl</code></a> —表示二进制状态（对或错）控件。例如，静音，独奏和开/关开关将很适合<code>BooleanControls</code> 。<a name="114194"></a></li>
<li>
<a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/FloatControl.html" target="_blank"><code>FloatControl</code></a> —数据模型，提供对一系列浮点值的控制。例如，音量和声像是<code>FloatControls</code>可以通过刻度盘或滑杆进行操作。</li>
<li><a name="114195"></a> <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/EnumControl.html" target="_blank"><code>EnumControl</code></a> -提供了一组对象的选择。例如，您可以将用户界面中的一组按钮与一个<code>EnumControl</code>选择几种预设混响设置之一。</li>
<li><a name="114196"></a> <a class="APILink" href="https://docs.oracle.com/javase/8/docs/api/javax/sound/sampled/CompoundControl.html" target="_blank"><code>CompoundControl</code></a> -提供对相关项目集合的访问权限，每个相关项目本身都是<code>Control</code>子类。 <code>CompoundControls</code>代表多控制模块，例如图形均衡器。（图形均衡器通常由一组滑块描绘，每个滑块都会影响<code>FloatControl</code> ）</li>
</ul>
<p><a name="114198"></a>的每个子类<code>Control</code>上面有适合其基础数据类型的方法。大多数类都包含设置和获取控件当前值，获取控件标签等的方法。</p>
<p><a name="115790"></a>当然，每个类都有特定于其的方法以及该类表示的数据模型。例如， <code>EnumControl</code>有一个方法可以让您获取其可能值的集合，以及<code>FloatControl</code>允许您获取其最小值和最大值以及控件的精度（增量或步长）。</p>
<p><a name="114976"></a>的每个子类<code>Control</code>有一个对应的<code>Control.Type</code>子类，包括标识特定控件的静态实例。</p>
<p><a name="115785"></a>下表显示了每个<code>Control</code>子类，其对应<code>Control.Type</code>子类，以及指示特定种类控件的静态实例：</p>
<p><a name="115028"></a></p>
<table border="2" align="center" width="90%" summary="Control, Control.Type and static instances">
<tbody><tr>
<th><a name="114979"></a> <code>Control</code></th>
<th><a name="114981"></a> <code>Control.Type</code></th>
<th><a name="114983"></a><code>Control.Type</code> <b>实例</b></th>
</tr>
<tr valign="top">
<td><a name="114985"></a> <code>BooleanControl</code></td>
<td><a name="114987"></a> <code>BooleanControl.Type</code></td>
<td><code>MUTE</code> –线路静音状态<br>
<code>APPLY_REVERB</code> – <a name="114990"></a>混响开/关</td>
</tr>
<tr>
<td><a name="114992"></a> <code>CompoundControl</code></td>
<td><a name="114994"></a> <code>CompoundControl.Type</code></td>
<td><a name="114996"></a> （没有）</td>
</tr>
<tr valign="top">
<td><a name="114998"></a> <code>EnumControl</code></td>
<td><a name="115000"></a> <code>EnumControl.Type</code></td>
<td><a name="115002"></a><code>REVERB</code> – <a name="115003"></a>访问混响设置（每个都是ReverbType的实例）</td>
</tr>
<tr valign="top">
<td><a name="115006"></a> <code>FloatControl</code></td>
<td><a name="115008"></a> <code>FloatControl.Type</code></td>
<td><a name="115010"></a><code>AUX_RETURN</code> – <a name="115011"></a>一条线上的辅助返回增益<br>
<a name="115012"></a><code>AUX_SEND</code> – <a name="115134"></a>辅助发送增益<br>
<a name="115174"></a><code>BALANCE</code> – <a name="115175"></a>左右音量平衡<br>
<a name="115176"></a><code>MASTER_GAIN</code> – <a name="115016"></a>一条线上的总体收益<br>
<a name="115202"></a><code>PAN</code> – <a name="115018"></a>左右位置<br>
<a name="115019"></a><code>REVERB_RETURN</code> – <a name="115020"></a>线上的混响后增益<br>
<a name="115021"></a><code>REVERB_SEND</code> – <a name="115022"></a>线上的混响前增益<br>
<a name="115023"></a><code>SAMPLE_RATE</code> – <a name="115024"></a>播放采样率<br>
<a name="115025"></a><code>VOLUME</code> – <a name="115256"></a>线上音量</td>
</tr>
</tbody></table>
<p><a name="115029"></a></p>
<p><a name="117861"></a> Java Sound API的实现可以在其混音器和线路上提供任何或所有这些控件类型。它还可以提供Java Sound API中未定义的其他控件类型。可以通过这四个抽象子类中的任何一个的具体子类或通过附加的子类来实现这种控制类型。 <code>Control</code>子类不从这四个抽象子类中的任何一个继承。应用程序可以查询每一行以找到其支持的控件。</p>
<p><a name="117862"></a></p>
<h3>获得具有所需控件的线路</h3>
<p><a name="114235"></a>在许多情况下，应用程序将仅显示该行所支持的任何控件。如果该行没有任何控件，那就去吧。但是，如果找到具有某些控件的行很重要，该怎么办？在这种情况下，您可以使用<code>Line.Info</code>以获得具有正确特性的线，如前面在<a class="TutorialLink" href="accessing.html#113154" target="_top">获取所需类型的线下所述</a> 。</p>
<p><a name="114237"></a>例如，假设您希望使用一个输入端口，以便用户设置声音输入的音量。以下代码摘录显示了如何查询默认混音器以确定其是否具有所需的端口和控件：</p>
<div class="codeblock"><pre>
Port lineIn;
FloatControl volCtrl;
try {
  mixer = AudioSystem.getMixer(null);
  lineIn = (Port)mixer.getLine(Port.Info.LINE_IN);
  lineIn.open();
  volCtrl = (FloatControl) lineIn.getControl(<br />
      FloatControl.Type.VOLUME);

  // Assuming getControl call succeeds, 
  // we now have our LINE_IN VOLUME control.
} catch (Exception e) {
  System.out.println("Failed trying to find LINE_IN"
    + " VOLUME control: exception = " + e);
}
if (volCtrl != null)
  // ...
</pre></div>
<h3>从生产线上获取控件</h3>
<p><a name="114257"></a>需要在其用户界面中公开控件的应用程序可能会简单地查询可用的行和控件，然后为每个感兴趣的行上的每个控件显示适当的用户界面元素。在这种情况下，该程序的唯一任务是为用户提供控件上的“句柄”。不知道这些控件对音频信号有什么作用。只要程序知道如何将行的控件映射到用户界面元素，Java Sound API架构就可以<code>Mixer</code> ， <code>Line</code>和<code>Control</code>通常会照顾其余的人。</p>
<p><a name="117125"></a>例如，假设您的程序播放声音。您正在使用<code>SourceDataLine</code> ，如前面在<a class="TutorialLink" href="accessing.html#113154" target="_top">获取所需类型的行中</a>所述， <a class="TutorialLink" href="accessing.html#113154" target="_top">获得了该代码</a> 。您可以通过调用以下命令来访问该行的控件<code>Line</code>方法：</p>
<div class="codeblock"><pre>
Control[] getControls()
</pre></div>
<p>然后，对于此返回数组中的每个控件，您可以使用以下命令<code>Control</code>获取控件类型的方法：</p>
<div class="codeblock"><pre>
Control.Type getType()
</pre></div>
<p>了解具体<code>Control.Type</code>例如，您的程序可以显示相应的用户界面元素。当然，为特定的对象选择“相应的用户界面元素” <code>Control.Type</code>取决于程序采用的方法。一方面，您可能使用相同类型的元素来表示所有<code>Control.Type</code>同一类的实例。这就要求你要查询的<em>类</em> <code>Control.Type</code>实例使用，例如<code>Object.getClass</code>方法。假设结果匹配<code>BooleanControl.Type</code> 。在这种情况下，您的程序可能会显示一个通用复选框或切换按钮，但是如果其类匹配<code>FloatControl.Type</code> ，那么您可能会显示一个图形滑块。</p>
<p><a name="116400"></a>另一方面，您的程序可能会区分不同类型的控件（甚至是同一类的控件），并为每个控件使用不同的用户界面元素。这将需要您测试由返回的<em>实例</em> <code>Control's getType</code>方法。然后，例如，如果类型匹配<code>BooleanControl.Type.APPLY_REVERB</code> ，您的程序可能会显示一个复选框；而如果类型匹配<code>BooleanControl.Type.MUTE</code> ，您可以改为显示切换按钮。</p>
<p><a name="116401"></a></p>
<h3>使用控件更改音频信号</h3>
<p><a name="116402"></a>既然您知道如何访问控件并确定其类型，本节将介绍如何使用<code>Controls</code>更改音频信号的各个方面。本节并不涵盖所有可用的控件；相反，它提供了该区域的一些示例来向您展示如何入门。这些示例包括：</p>
<ul>
<li><a name="114276"></a>控制线路的静音状态</li>
<li><a name="114277"></a>更改线路的音量</li>
<li><a name="114278"></a>在各种混响预设中选择</li>
</ul>
<p><a name="114280"></a>假设您的程序已经访问了所有混合器，它们的行以及这些行上的控件，并且它具有一个数据结构来管理控件及其相应的用户界面元素之间的逻辑关联。然后，将用户对这些控件的操作转换为相应的<code>Control</code>方法变得相当简单。</p>
<p><a name="114282"></a>以下小节描述了一些必须调用才能影响对特定控件所做的更改的方法。</p>
<p><a name="114284"></a></p>
<h3>控制线路的静音状态</h3>
<p><a name="114286"></a>控制任何线路的静音状态仅需调用以下命令<code>BooleanControl</code>方法：</p>
<div class="codeblock"><pre>
void setValue(boolean value)
</pre></div>
<p>（大概是，该程序通过引用其控制管理数据结构来知道该静音是a的实例。 <code>BooleanControl</code> ）要使通过线路的信号静音，程序将调用上面的方法，指定<code>true</code>作为价值。要关闭静音，使信号流过线路，程序将调用参数设置为的方法。 <code>false</code> 。<a name="114292"></a></p>
<h3>更改线路的音量</h3>
<p><a name="114294"></a>假设您的程序将特定的图形滑块与特定行的音量控件相关联。音量控制的值（即， <code>FloatControl.Type.VOLUME</code> ）使用以下设置<code>FloatControl</code>方法：</p>
<div class="codeblock"><pre>
void setValue(float newValue)
</pre></div>
<p>检测到用户移动了滑块，程序将获取滑块的当前值并将其作为参数传递<code>newValue</code> ，以上述方法。这将改变流经“拥有”控件的线路的信号的音量。<a name="114300"></a></p>
<h3>在各种混响预设中选择</h3>
<p><a name="114302"></a>假设我们的程序有一个混音器，其中的一行具有类型控件<code>EnumControl.Type.REVERB</code> 。呼叫<code>EnumControl</code>方法：</p>
<div class="codeblock"><pre>
java.lang.Objects[] getValues()
</pre></div>
<p>在那个控件上产生一个数组<code>ReverbType</code>对象。如果需要，可以使用以下命令访问每个对象的特定参数设置<code>ReverbType</code>方法：</p>
<div class="codeblock"><pre>
int getDecayTime() 
int getEarlyReflectionDelay() 
float getEarlyReflectionIntensity() 
int getLateReflectionDelay() 
float getLateReflectionIntensity() 
</pre></div>
<p>例如，如果程序只想要一个听起来像洞穴的混响设置，则它可以在<code>ReverbType</code>对象，直到找到一个<code>getDecayTime</code>返回大于2000的值。有关这些方法的完整说明（包括代表返回值的表格），请参阅API参考文档以获取相关信息。 <code>javax.sound.sampled.ReverbType</code> 。</p>
<p><a name="114316"></a>不过，通常情况下，程序会为每个广告素材创建一个用户界面元素，例如单选按钮。 <code>ReverbType</code>由数组返回的对象<code>getValues</code>方法。当用户单击这些单选按钮之一时，程序将调用<code>EnumControl</code>方法</p>
<div class="codeblock"><pre>
void setValue(java.lang.Object value) 
</pre></div>
<p>哪里<code>value</code>设置为<code>ReverbType</code>对应于新启用的按钮。通过“拥有”该线路的线路发送的音频信号<code>EnumControl</code>然后将根据构成控件当前的参数设置来回响<code>ReverbType</code> （即<code>ReverbType</code>在指定<code>value</code>的论点<code>setValue</code>方法）。</p>
<p><a name="114323"></a>因此，从我们的应用程序的角度来看，使用户能够从一个混响预设（即ReverbType）移动到另一个混响预设，仅仅是连接由<code>getValues</code>到一个单独的单选按钮。</p>
<p><a name="114326"></a></p>
<h3>直接处理音频数据</h3>
<p><a name="114328"></a>的<code>Control</code> API允许Java Sound API的实现或调音台的第三方提供程序通过控件提供任意种类的信号处理。但是，如果没有混频器提供您所需的那种信号处理呢？这将需要更多的工作，但是您可能可以在程序中实现信号处理。因为Java Sound API允许您以字节数组的形式访问音频数据，所以可以选择任何方式更改这些字节。</p>
<p><a name="114330"></a>如果您正在处理传入的声音，则可以从<code>TargetDataLine</code>然后操纵它们。可以产生令人神往的结果的算法上不重要的示例是，通过以相反的顺序排列其帧来向后播放声音。这个琐碎的示例可能在您的程序中用处不大，但是有许多复杂的数字信号处理（DSP）技术可能更合适。一些示例包括均衡，动态范围压缩，峰值限制和时间拉伸或压缩，以及特殊效果，例如延迟，合唱，镶边，失真等。</p>
<p><a name="114332"></a>要播放处理后的声音，可以将经过处理的字节数组放入一个<code>SourceDataLine</code>要么<code>Clip</code> 。当然，字节数组不必从现有的声音派生。您可以从头开始合成声音，尽管这需要一些声学知识，或者需要使用声音合成功能。对于处理或综合，您可能需要查阅音频DSP教科书中感兴趣的算法，或者将第三方的信号处理功能库导入程序中。要播放合成声音，请考虑是否<code>Synthesizer</code>中的API <code>javax.sound.midi</code>包装可以满足您的需求。您将了解更多有关<code>javax.sound.midi</code>后来<a class="TutorialLink" href="MIDI-synth.html" target="_top">合成声音</a> 。</p>


        </div>
        <div class="NavBit">
            <a href="capturing.html" target="_top">«上一个</a> • <a href="./TOC.html" target="_top">追踪</a> • <a href="converters.html" target="_top">下一个»</a>
        </div>
    </div>
    
<hr class="clearfloat">

<div id="Footer">

<p class="footertext">
<a href="http://www.oracle.com/corporate/index.html">关于Oracle</a> | <a href="http://www.oracle.com/us/corporate/contact/index.html">联系我们</a> | <a href="http://www.oracle.com/us/legal/index.html">法律声明</a> | <a href="http://www.oracle.com/us/legal/terms/index.html">使用条款</a> | <a href="http://www.oracle.com/us/legal/privacy/index.html">您的隐私权</a></p>

<p class="footertext"><a href="http://www.oracle.com/pls/topic/lookup?ctx=cpyr&id=en-US">版权所有©1995、2017 Oracle和/或其分支机构。版权所有。</a></p>
       
</div>    
    <div class="PrintHeaders">
        <b>上一页：</b>捕获音频<br><b>下一页：</b>使用文件和格式转换器</div>
<!-- Start SiteCatalyst code -->
<script type="application/javascript" src="https://www.oracleimg.com/us/assets/metrics/ora_docs.js"></script>
<!-- End SiteCatalyst code --> 

 
</body></html>