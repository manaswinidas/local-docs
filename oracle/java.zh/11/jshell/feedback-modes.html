<html lang="en-us"  xml:lang="en-us"><head></head><body >﻿
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="The feedback mode determines the prompts, feedback, and other interactions within JShell. Predefined modes with different levels of feedback are provided. Custom modes can be created as needed.">
      <meta name="description" content="The feedback mode determines the prompts, feedback, and other interactions within JShell. Predefined modes with different levels of feedback are provided. Custom modes can be created as needed.">
      <title>反馈模式</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Java Shell User’s Guide">
      <meta property="og:description" content="The feedback mode determines the prompts, feedback, and other interactions within JShell. Predefined modes with different levels of feedback are provided. Custom modes can be created as needed.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Java Shell User’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="java-shell-user-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T08:11:45-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="2017, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94826-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="external-code.html" title="Previous" type="text/html">
      <link rel="next" href="scripts.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Java Shell User Guide">
    <meta name="dcterms.isVersionOf" content="JSHELL">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>
   
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="external-code.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="scripts.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">Java Shell用户指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">反馈模式</li>
            </ol>
            <a id="GUID-906D1D0B-76AD-4AFD-9229-96C6FD823B4A" name="GUID-906D1D0B-76AD-4AFD-9229-96C6FD823B4A"></a>
            
            <h2 id="JSHEL-GUID-906D1D0B-76AD-4AFD-9229-96C6FD823B4A" class="sect2"><span class="enumeration_chapter">6种</span>反馈模式</h2>
         </header>
         <div class="ind">
            <div>
               <p>反馈模式确定JShell中的提示，反馈和其他交互。提供了具有不同反馈级别的预定义模式。可以根据需要创建自定义模式。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-906D1D0B-76AD-4AFD-9229-96C6FD823B4A__GUID-599EBB18-C480-45AE-A863-5DA4F045A7E3">话题</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="feedback-modes.html#GUID-AC32A8DA-8D4C-46F5-B415-B61E71411EF3" title="反馈模式定义与JShell交互时使用的提示和反馈。提供预定义模式是为了您的方便。您可以根据需要创建自定义模式。">设置反馈模式</a></p>
                     </li>
                     <li>
                        <p><a href="feedback-modes.html#GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84" title="自定义反馈模式使您可以定义要查看的提示以及要输入到JShell中的不同元素的反馈。">定义反馈模式</a></p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-AC32A8DA-8D4C-46F5-B415-B61E71411EF3" name="GUID-AC32A8DA-8D4C-46F5-B415-B61E71411EF3"></a><h3 id="JSHEL-GUID-AC32A8DA-8D4C-46F5-B415-B61E71411EF3" class="sect3">设置反馈模式</h3>
               <div>
                  <p>反馈模式定义与JShell交互时使用的提示和反馈。提供预定义模式是为了您的方便。您可以根据需要创建自定义模式。</p>
                  <p>预定义模式无法修改，但可以用作自定义模式的基础。按照详细程度从高到低的顺序是<code class="codeph">verbose</code> ， <code class="codeph">normal</code> ， <code class="codeph">concise</code>和<code class="codeph">silent</code> 。
                  </p>
                  <p>下表显示了预定义模式的差异。</p>
                  <div class="tblformal" id="GUID-AC32A8DA-8D4C-46F5-B415-B61E71411EF3__GUID-BAB09147-F801-48EC-9EE9-AA9898012323">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Shows the settings for each of the predefined feedback modes." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" id="d3411e62">模式</th>
                              <th align="left" valign="bottom" id="d3411e65">价值片段</th>
                              <th align="left" valign="bottom" id="d3411e68">宣言</th>
                              <th align="left" valign="bottom" id="d3411e71">更新</th>
                              <th align="left" valign="bottom" id="d3411e74">指令</th>
                              <th align="left" valign="bottom" id="d3411e77">提示</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d3411e82" headers="d3411e62 ">
                                 <p>冗长的</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e82 d3411e65 ">
                                 <p>名称==>值（和描述）</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e82 d3411e68 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e82 d3411e71 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e82 d3411e74 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e82 d3411e77 ">
                                 <p>\ njshell></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d3411e101" headers="d3411e62 ">
                                 <p>正常</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e101 d3411e65 ">
                                 <p>名称==>值</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e101 d3411e68 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e101 d3411e71 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e101 d3411e74 ">
                                 <p>是</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e101 d3411e77 ">
                                 <p>\ njshell></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d3411e120" headers="d3411e62 ">
                                 <p>简洁</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e120 d3411e65 ">
                                 <p>名称==>值（仅表达式）</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e120 d3411e68 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e120 d3411e71 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e120 d3411e74 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e120 d3411e77 ">
                                 <p>jshell></p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" id="d3411e139" headers="d3411e62 ">
                                 <p>无声</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e139 d3411e65 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e139 d3411e68 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e139 d3411e71 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e139 d3411e74 ">
                                 <p>没有</p>
                              </td>
                              <td align="left" valign="top" headers="d3411e139 d3411e77 ">
                                 <p>-></p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <ul style="list-style-type:disc">
                     <li>
                        <p>模式列指示正在描述的模式。</p>
                     </li>
                     <li>
                        <p>“值代码段”列指示具有值的代码段显示的内容，例如表达式，赋值和变量声明。</p>
                     </li>
                     <li>
                        <p>“声明”列指示是否为声明或方法，类，枚举，接口和注释接口提供反馈。</p>
                     </li>
                     <li>
                        <p>“更新”列指示是否显示对当前片段以外的更改。</p>
                     </li>
                     <li>
                        <p>命令列指示命令是否给出指示成功的反馈。</p>
                     </li>
                     <li>
                        <p>提示列指示使用的提示。</p>
                     </li>
                  </ul>
                  <p>默认的反馈模式是<code class="codeph">normal</code> 。通过设置命令行选项或使用<code class="codeph">/set feedback</code>命令如下例所示：</p><pre class="pre codeblock"><code>jshell&gt; <span class="bold">/set feedback verbose </span>
|  Feedback mode: verbose

jshell&gt; <span class="bold">2 + 2</span>
$1 ==&gt; 4
|  created scratch variable $1 : int

jshell&gt; <span class="bold">/set feedback silent </span>
-&gt; <span class="bold">2 + 2</span>
-&gt; <span class="bold">/set feedback normal </span>
|  Feedback mode: normal

jshell&gt; <span class="bold">2 + 2</span>
$3 ==&gt; 4

jshell&gt; <span class="bold">/set feedback concise </span>
jshell&gt; <span class="bold">2 + 2</span>
$4 ==&gt; 4
jshell&gt; </code></pre><p>请注意，当设置为<code class="codeph">normal</code>要么<code class="codeph">verbose</code> ，命令反馈会显示您的设置，但是<code class="codeph">concise</code>和<code class="codeph">silent</code>模式没有。另请注意，表达式的三种不同形式的反馈<code class="codeph">2+2</code>模式设置为时不包含反馈<code class="codeph">silent</code> 。
                  </p>
                  <p>要查看当前和可用的反馈模式，请使用<code class="codeph">/set feedback</code>没有选项的命令。请注意，当前模式显示为设置它的命令：</p><pre class="pre codeblock"><code>jshell&gt; <span class="bold">/set feedback </span>
|  /set feedback verbose
|  
|  Available feedback modes:
|     concise
|     normal
|     silent
|     verbose</code></pre></div>
            </div>
            <div class="sect2"><a id="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84" name="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84"></a><h3 id="JSHEL-GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84" class="sect3">定义反馈模式</h3>
               <div>
                  <p>自定义反馈模式使您可以定义要查看的提示以及要输入到JShell中的不同元素的反馈。</p>
                  <p>反馈模式具有以下设置：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>提示：定期和持续</p>
                     </li>
                     <li>
                        <p>截断：显示的值的最大长度</p>
                     </li>
                     <li>
                        <p>格式：所提供反馈的格式</p>
                     </li>
                  </ul>
                  <p>预定义模式无法更改，但是您可以轻松创建现有模式的副本，如以下示例所示：</p><pre class="pre codeblock"><code>jshell&gt; <span class="bold">/set mode mine normal -command</span>
|  Created new feedback mode: mine</code></pre><p>新模式<code class="codeph">mine</code>是的副本<code class="codeph">normal</code>模式。的<code class="codeph">-command</code>选项表示您需要命令反馈。如果您不希望命令描述发生的操作，请使用<code class="codeph">-quiet</code>代替<code class="codeph">-command</code> 。
                  </p>
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84__GUID-8E944117-D3E0-4FB4-BDD5-0633068A904B">设置提示</p>
                     <p>和所有一样<code class="codeph">/set</code>命令，使用<code class="codeph">/set prompt</code>没有设置的命令显示当前设置：</p><pre class="pre codeblock"><code>jshell&gt; <span class="bold">/set prompt normal</span>
|  /set prompt normal "\njshell&gt; " "   ...&gt; "</code></pre><p>在为前面的示例提供的反馈中，第一个字符串是常规提示，第二个字符串是在代码段扩展到多行时使用的继续提示。以下示例显示了如何切换到新模式进行尝试：</p><pre class="pre codeblock"><code>jshell&gt; <span class="bold">/set prompt mine "\nmy mode: "  ".......: "</span>

jshell&gt; <span class="bold">/set feedback mine</span>
|  Feedback mode: mine

my mode: <span class="bold">class C {</span>
.......: <span class="bold">   int x;</span>
.......: <span class="bold">}</span>
|  created class C

my mode:</code></pre><p>提示字符串可以包含<code class="codeph">%s</code> ，用下一个代码段ID替换。但是，如果输入命令或代码片段导致错误，则可能不会为用户在提示符下输入的值分配该ID。</p>
                     <p>所有设置都有当前会话的持续时间；他们没有被重置<code class="codeph">/reset</code>命令。如果您希望这些设置成为以后会话的默认设置，请使用<code class="codeph">-retain</code>选择保留它们。以下示例说明如何在会话之间保持自定义模式：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set mode mine -retain</span>

my mode: <span class="bold">/set feedback mine -retain</span>
|  Feedback mode: mine

my mode: <span class="bold">/exit </span>
|  Goodbye
% <span class="bold">jshell</span>
|  Welcome to JShell -- Version 9
|  For an introduction type: /help intro

my mode: </code></pre></div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84__GUID-4EFECC59-3060-493F-B738-E0DEC665F8DB">设置截断</p>
                     <p>如果值太长，则在显示时会被截断。使用<code class="codeph">/set truncation</code>命令设置显示的最大长度值。如果该命令未输入任何设置，则显示当前设置。以下示例显示了从<code class="codeph">normal</code>模式：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set truncation mine </span>
|  /set truncation mine 80 
|  /set truncation mine 1000 expression,varvalue

my mode: <span class="bold">String big = IntStream.range(0,1200).mapToObj(n -&gt; "" + (char) ('a' + n % 26)).collect(Collectors.joining())</span>
big ==&gt; "abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuv ... fghijklmnopqrstuvwxyzabcd"</code></pre><p>截断设置有效的条件由截断长度后输入的可选选择器确定。定义了两种类型的选择器（在线帮助中称为选择器类型）：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>案例选择器指示显示其值的代码段类型。</p>
                        </li>
                        <li>
                           <p>动作选择器描述代码段发生了什么。</p>
                        </li>
                     </ul>
                     <p>输入<code class="codeph">/help /set truncation</code>有关选择器的详细信息。
                     </p>
                     <p>上一个示例中显示的设置意味着，除非值是表达式的值（ <code class="codeph">expression</code>大小写选择器）或变量的值，只需输入变量名（ <code class="codeph">varvalue</code>案例选择器）。顺序很重要；使用最后输入的一个。如果顺序相反，则所有值都将被截断为80个字符。
                     </p>
                     <p>以下示例将默认截断设置为<code class="codeph">100</code> ，并且仅在明确要求时显示长值：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set truncation mine 100</span>

my mode: <span class="bold">/set truncation mine 300 varvalue</span>

my mode: <span class="bold">big + big</span>
$2 ==&gt; "abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghi ... yzabcdefghijklmnopqrstuvwxyzabcd"

my mode: <span class="bold">big</span>
big ==&gt; "abcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstu
vwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijkl ... jklmnopq
rstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcdefghijklmnopqrstuvwxyzabcd"

my mode: <span class="bold">/set mode mine -retain</span></code></pre><p>要保留新设置，请保留示例末尾所示的更改。</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <p class="subhead2" id="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84__GUID-F2948F8D-94BF-420D-8C57-2BD2A08F74D5">设置格式</p>
                     <p>代码段输出是您可以自定义的另一个设置。格式继承自<code class="codeph">normal</code>模式下，导入不会提供任何反馈，并且不会显示值的类型：</p><pre class="pre codeblock"><code>my mode: <span class="bold">import java.beans.*</span>

my mode: <span class="bold">Locale.CANADA.getUnicodeLocaleAttributes()</span>
$5 ==&gt; []</code></pre><p>片段输出的格式是通过<code class="codeph">/set format</code>命令。输入模式名称和无设置，以查看当前格式设置：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set format mine</span></code></pre><p>关于此命令的广泛帮助可通过<code class="codeph">/help /set format</code>命令。您可能希望将其用作本节其余部分的参考，其中提及定义格式时使用的字段。
                     </p>
                     <p>显示的主要反馈取决于<code class="codeph">display</code>领域。可以定义其他字段以帮助定义<code class="codeph">display</code>领域。预定义模式，除<code class="codeph">silent</code>定义其中的几个字段，如从<code class="codeph">/help /set format</code>命令。这些字段在示例模式下继承。以下示例显示了导入的显示定义：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set format mine display "{pre}added import {name}{post}" import-added</span>

my mode: <span class="bold">/set format mine display "{pre}re-added import {name}{post}" import-modified,replaced</span></code></pre><p>的<code class="codeph">name</code>字段预定义为代码段名称。以下示例显示了现在已为导入提供了反馈：</p><pre class="pre codeblock"><code>my mode: <span class="bold">import java.beans.*</span>
|  re-added import java.beans.*</code></pre><p>的<code class="codeph">pre</code>和<code class="codeph">post</code>显示定义中使用的字段是反馈输出的每一行的前缀和后缀字符。下面的示例将竖线前缀更改为空字符串：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set format mine pre ""</span>

my mode: <span class="bold">void m() {}</span>
created method m()

my mode: <span class="bold">import java.beans.*</span>
re-added import java.beans.*

my mode: <span class="bold">/set truncation mine </span>
/set truncation mine 100
/set truncation mine 300 varvalue</code></pre><div class="infoboxnote" id="GUID-ED8F7F3B-3667-4724-910A-C93B8521FC84__GUID-7D3546BB-9900-4AFF-A523-FC0B1D6E1281">
                        <p class="notep1">注意：</p>前缀字符的更改会影响所有反馈，包括命令反馈。
                     </div>
                     <p>要在显示值时显示类型，请更改<code class="codeph">result</code>预定义模式定义的字段：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set format mine result "{type} {name} = {value}{post}" added,modified,replaced-primary-ok</span>

my mode: <span class="bold">Locale.CANADA.getUnicodeLocaleAttributes()</span>
Set&lt;String&gt; $11 = []

my mode: <span class="bold">2 + 2</span>
int $12 = 4</code></pre><p>这一变化使得<code class="codeph">result</code>仅当它是新的或更新时才为非空（ <code class="codeph">added,modified,replaced</code> ），位于输入的代码段（ <code class="codeph">primary</code> ），并且没有错误（ <code class="codeph">ok</code> ）。
                     </p>
                     <p>要永久删除保留模式，请使用<code class="codeph">-retain</code>与选项<code class="codeph">-delete</code>选项：</p><pre class="pre codeblock"><code>my mode: <span class="bold">/set feedback verbose -retain</span>
|  Feedback mode: verbose

jshell&gt; <span class="bold">/set mode mine -delete -retain</span></code></pre></div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   

</body></html>