<html lang="en-us" dir="ltr" xml:lang="en-us"><head></head><body dir="ltr">﻿
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <meta name="description" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <title>JRE中的时区设置</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Troubleshooting Guide">
      <meta property="og:description" content="This chapter describes some issues that can arise with time zone settings with the Java Runtime Environment (JRE) on the Windows operating system. It further describes troubleshooting techniques and workarounds to solve these issues.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Troubleshooting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="troubleshooting-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:41:43-07:00">
      <meta name="dcterms.title" content="Troubleshooting Guide">
      <meta name="dcterms.dateCopyrighted" content="1995, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94880-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="debug-core-library-issues.html" title="Previous" type="text/html">
      <link rel="next" href="debug-client-issues.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TROUBLESHOOT">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>
   
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="debug-core-library-issues.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="debug-client-issues.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">故障排除指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="debug-core-library-issues.html" property="item" typeof="WebPage"><span property="name">调试核心库问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">JRE中的时区设置</li>
            </ol>
            <a id="GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F" name="GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F"></a><a id="JSTGD360"></a><a id="JSTGD359"></a>
            
            <h2 id="JSTGD-GUID-A92BF4C5-928F-4F64-B3DE-588B630B4A5F" class="sect2">JRE中的<span class="enumeration_chapter">8</span>时区设置</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章介绍Windows操作系统上的Java Runtime Environment（JRE）的时区设置可能引起的一些问题。它还进一步介绍了解决这些问题的故障排除技术和解决方法。</span></div>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="time-zone-settings-jre.html#GUID-4C66F701-322F-497B-A02C-F58E3E113394" title="JRE读取本地时区信息，以确定您的默认时区。">本机时区信息和JRE</a></p>
                  </li>
                  <li>
                     <p><a href="time-zone-settings-jre.html#GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF">确定Windows上的默认时区</a></p>
                  </li>
               </ul>
            </div><a id="JSTGD361"></a><div class="props_rev_3"><a id="GUID-4C66F701-322F-497B-A02C-F58E3E113394" name="GUID-4C66F701-322F-497B-A02C-F58E3E113394"></a><h3 id="JSTGD-GUID-4C66F701-322F-497B-A02C-F58E3E113394" class="sect3">本机时区信息和JRE</h3>
               <div>
                  <p>JRE读取本地时区信息，以确定您的默认时区。</p>
                  <p>例如，在Windows上，JRE查询注册表以确定默认时区。</p>
                  <p>但是，JRE也维护自己的时区数据库。这提供了跨平台支持，因为不同的操作系统API不足以支持Java API。 Java时区数据库支持时区ID，并为JRE支持的所有时区确定夏令时规则。的<code class="codeph">tzupdater</code>可从<a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank">Java SE下载页面</a>下载该工具。
                  </p>
                  <p>必须为每个特定的操作系统修改JRE，以便操作系统可以将系统时间传递给JRE。然后，如果Java应用程序通过调用与日期和时间相关的构造函数来请求系统日期，则返回系统时间。</p>
                  <p>此类构造函数的示例是：</p>
                  <ul class="simple" style="list-style-type:none;padding-left:0">
                     <li><span class="apiname">java.util。日期（）</span></li>
                     <li><span class="apiname">java.util。阳历日历（）</span></li>
                     <li></li>
                  </ul>
                  <p>与日期和时间有关的构造函数包括：</p>
                  <ul class="simple" style="list-style-type:none;padding-left:0">
                     <li><span class="apiname">System.currentTimeMillis（）</span></li>
                     <li><span class="apiname">System.nanoTime（）</span></li>
                     <li></li>
                  </ul>
                  <p>可能需要特定于操作系统的补丁程序，以确保将正确的系统时间交付给JRE。</p>
                  <p>以下各节介绍了时区设置的故障排除技术。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="time-zone-settings-jre.html#GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367">确定使用中的时区数据版本</a></p>
                     </li>
                     <li>
                        <p><a href="time-zone-settings-jre.html#GUID-B567CDFC-2801-4258-86A7-D96C57EB2811">排除TZupdater的问题</a></p>
                     </li>
                  </ul>
               </div><a id="JSTGD362"></a><div class="props_rev_3"><a id="GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367" name="GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367"></a><h4 id="JSTGD-GUID-47659596-407B-4A18-ADB8-FE5A8A0DC367" class="sect4">确定使用中的时区数据版本</h4>
                  <div>
                     <div class="section">
                        <p>发行说明中记录了Oracle的任何JRE中附带的时区数据库版本。但是，如果使用以下工具修补了JRE，则实际版本可能与此处提到的版本不同。 <code class="codeph">tzupdater</code>工具。
                        </p>
                        <p>要确定您的JRE的当前时区数据版本，请运行<code class="codeph">tzupdater</code>工具使用“版本”选项，或检查<code class="codeph">ZoneInfoMappings</code>文件。
                        </p>
                        <p>请按照以下两个步骤确定时区数据：</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">使用TZupdater确定时区：</span>调用Java时区更新器工具<code class="codeph">tzupdater</code> 。要确定您的JRE的时区数据库版本，请按以下方式运行此工具：</p><pre class="oac_no_warn" dir="ltr">java -jar tzupdater.jar -V
</pre><p>这是运行<code class="codeph">tzupdater</code>工具。
                              </p><pre class="oac_no_warn" dir="ltr">tzupdater version 2.1.0-b04
JRE tzdata version: tzdata2016f
</pre><p>您可以下载<code class="codeph">tzupdater</code>此网页上的<a href="http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html" target="_blank">工具</a> ： <a href="http://www.oracle.com/technetwork/java/javase/tzupdater-readme-136440.html" target="_blank">时区更新工具</a> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">检查ZoneInfoMappings文件：</span>即使没有<code class="codeph">tzupdater</code>工具，您可以通过检查文件的标题快速检查版本<code class="codeph"><span class="variable" translate="no"><java-home></span>/lib/zi/ZoneInfoMappings</code> 。此数据以特定于Java的二进制格式存储。在Oracle Solaris，Linux和Mac macOS操作系统上，可以使用octal dump命令查看此文件的标题。
                              </p>
                              <p>以下示例显示了八进制转储命令格式。</p><pre class="oac_no_warn" dir="ltr">/usr/bin/od -c -j 11 -N 11 &lt;java-home&gt;/lib/zi/ZoneInfoMappings
</pre><p>以下示例显示了dump命令的典型结果。</p><pre class="oac_no_warn" dir="ltr">/usr/bin/od -c -j 11 -N 11 /farfaraway/jdks/jdk1.6.0_21/jre/lib/zi/ZoneInfoMappings0000000   t   z   d   a   t   a   2   0   1   0   i0000013
</pre><p>以下示例显示了JRE中嵌入的时区数据版本为<code class="codeph">tzdata2010i</code> 。
                              </p>
                              <p>在Microsoft Windows上，您可以使用<code class="codeph">findstr</code>命令检查<code class="codeph">ZoneInfoMappings</code>文件。这是一个例子。
                              </p><pre class="oac_no_warn" dir="ltr">findstr tzdata &lt;java-home&gt;\lib\zi\ZoneInfoMappings
</pre></li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD366"></a><div class="props_rev_3"><a id="GUID-B567CDFC-2801-4258-86A7-D96C57EB2811" name="GUID-B567CDFC-2801-4258-86A7-D96C57EB2811"></a><h4 id="JSTGD-GUID-B567CDFC-2801-4258-86A7-D96C57EB2811" class="sect4">排除TZupdater的问题</h4>
                  <div>
                     <div class="section">
                        <p>有时候，当你跑步<code class="codeph">tzupdater</code> ，它退出并显示以下消息：“此Java运行时没有可用的tzdata。”以下是两个示例。
                        </p><pre class="pre codeblock"><code>$ java -jar tzupdater.jar -V 
tzupdater version 2.1.1-b01 
JRE tzdata version: tzdata2017b
There's no tzdata available for this Java runtime.</code></pre><p>可能的原因是您使用的不是来自Oracle的JRE。Oracle为Oracle Solaris（x86，x64，SPARC），Linux（x86，x64，ARM），Microsoft Windows（x86，x64）和macOS（x64）提供了JRE。的<code class="codeph">java.vendor</code>这些属性的属性值为Sun Microsystems Inc.，Oracle Corporation或BEA Systems，Inc。Oracle不为其他平台提供JRE。
                        </p>
                        <p>运行的输出<code class="codeph">java -version</code>命令没有提供足够的信息来确定JRE的实际供应商。但是，跑步<code class="codeph">tzupdater</code>在更新模式下<code class="codeph">-v</code>选项不会打印出<code class="codeph">java.vendor</code>属性。以下示例显示了当环境是Hewlett Packard中的HP_UX时运行tzupdater的结果。
                        </p><pre class="pre codeblock"><code>root@my_server:/opt/java6/bin&gt; uname -a
HP-UX my_server B.11.23 U ia64 1114591084 unlimited-user license
root@my_server:/opt/java6/bin&gt; ./java -version
java version "1.6.0.05"
Java(TM) SE Runtime Environment (build 1.6.0.05-jinteg_14_oct_2009_01_44-b00)
Java HotSpot(TM) Server VM (build 14.2-b01-jre1.6.0.05-rc5, mixed mode)
root@my_server:/opt/java6/bin&gt; ./java -jar tzupdater.jar -v -l
java.home: /opt/java6/jre
java.vendor: Hewlett-Packard Co.
java.version: 1.6.0.05
JRE tzdata version: tzdata2009i
There's no tzdata available for this Java runtime.
</code></pre><p>在上一个示例中， <code class="codeph">java.vendor</code>设置为“ Hewlett-Packard Co.”。您尝试使用进行更新的JRE <code class="codeph">tzupdater</code> Oracle不支持。
                        </p>
                        <p>一种可能的解决方案是访问您的JRE供应商的网站，并确定是否提供时区更新程序工具。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSTGD369"></a><div class="props_rev_3"><a id="GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF" name="GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF"></a><h3 id="JSTGD-GUID-8A9E83F2-C6E8-4A64-8A6D-30E8D6733BCF" class="sect3">确定Windows上的默认时区</h3>
               <div>
                  <div class="section">
                     <p>本节阐明了JRE如何确定Windows Vista和Windows 7操作系统上的默认时区。如果Java没有报告预期的时区，请使用以下各节提供的故障排除技术：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08">检查默认时区JRE报告</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-3295371E-C1EF-4098-81A2-5ADC31956295">在控制面板中确定设置</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF">检查自动夏令时调整</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6">在控制面板中设置默认时区</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5">检查-Duser.timezone系统属性</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542">Windows 7中的特殊工具</a></p>
                        </li>
                        <li>
                           <p><a href="time-zone-settings-jre.html#GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9">JRE时区映射的内部表示</a></p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div><a id="JSTGD370"></a><div class="props_rev_3"><a id="GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08" name="GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08"></a><h4 id="JSTGD-GUID-28CA45DC-FA08-49A2-A1C1-6EAEEB2CAF08" class="sect4">检查默认时区JRE报告</h4>
                  <div>
                     <div class="section">
                        <p>您可以编写一个简单的程序，以基于对本机操作系统的检查，确定JRE将哪个时区报告为默认时区。</p>
                        <p>以下示例中的Java程序返回默认时区：</p><pre class="oac_no_warn" dir="ltr">
public class DefaultTimeZone {
    public static void main(String[] args) {
        System.out.println(java.util.TimeZone.getDefault().getID());
    }
}
</pre><p>您可以将上一个示例中的代码片段保存到一个名为<code class="codeph">DefaultTimeZone.java</code>并使用<code class="codeph">javac</code>命令。然后，您可以运行已编译的<code class="codeph">DefaultTimeZone</code>类，如以下示例所示。
                        </p><pre class="oac_no_warn" dir="ltr">
c:\tztest&gt; javac DefaultTimeZone.java
c:\tztest&gt; java DefaultTimeZone
Europe/Berlin
</pre><p>在前面的示例中，默认时区为欧洲/柏林。运行该程序应显示您的本地时区。如果输出的时间不是预期的时区，请继续执行以下故障排除步骤。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD373"></a><div class="props_rev_3"><a id="GUID-3295371E-C1EF-4098-81A2-5ADC31956295" name="GUID-3295371E-C1EF-4098-81A2-5ADC31956295"></a><h4 id="JSTGD-GUID-3295371E-C1EF-4098-81A2-5ADC31956295" class="sect4">在控制面板中确定设置</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用Windows控制面板更改或检查系统的默认时区。例如，您可以在Windows 7中选择此时区设置：</p>
                        <p>（UTC + 01：00）阿姆斯特丹，柏林，伯尔尼，罗马，斯德哥尔摩，维也纳</p>
                        <p>注册表项的相应值<code class="codeph">TimeZoneKeyName</code>是“W。欧洲标准时间。”</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD374"></a><div class="props_rev_3"><a id="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF" name="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF"></a><h4 id="JSTGD-GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF" class="sect4">检查自动夏令时调整</h4>
                  <div>
                     <div class="section">
                        <p>您可以检查是否通过图形用户界面（GUI）或Windows注册表启用了夏令时自动调整功能。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">GUI方法：</span>要使用控制面板检查是否启用了夏令时自动调整功能：。
                              </p>
                              <ol>
                                 <li>
                                    <p>单击Windows“ <span class="bold">开始”</span>按钮，然后单击“ <span class="bold">控制面板”</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">日期和时间</span> 。
                                    </p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">更改时区</span>按钮。
                                    </p>
                                 </li>
                                 <li>
                                    <p>有一个标记为“自动调整夏令时的时间”的复选框。“查看是否已选中此复选框，并根据需要更改设置。</p>
                                 </li>
                                 <li>
                                    <p>单击<span class="bold">确定</span> 。这将返回到“日期和时间”对话框。
                                    </p>
                                 </li>
                              </ol>
                           </li>
                           <li>
                              <p><span class="bold">Windows注册表方法：</span>您可以运行Windows注册表编辑器来检查是否启用了自动调整夏令时。
                              </p>
                              <div class="infoboxnote" id="GUID-FC476CFE-848B-4A3B-90D2-2D97F47AC4FF__GUID-952881E8-09BA-4D2F-A683-785990806D97">
                                 <p class="notep1">注意：</p>
                                 <p>在检查或编辑Windows注册表之前，最好备份它。如果输入有误，可能会损坏Windows注册表。</p>
                              </div>
                              <p>要从Windows注册表启用自动调整夏令时：</p>
                              <ol>
                                 <li>
                                    <p>单击Windows <span class="bold">开始</span>按钮。
                                    </p>
                                 </li>
                                 <li>
                                    <p>在“搜索程序和文件”字段中，输入regedit，然后按Enter打开注册表编辑器。</p>
                                 </li>
                                 <li>
                                    <p>在注册表编辑器中，搜索键DynamicDaylightTimeDisabled并查看设置。</p>
                                    <p>如果注册表设置为1，则禁用动态夏令时。</p>
                                    <p>如果注册表设置为0，则启用动态夏令时。</p>
                                 </li>
                              </ol>
                              <p>如果愿意，可以从Windows命令窗口访问Windows注册表。</p>
                           </li>
                        </ul>
                        <p>在下面的示例中，注册表设置为1。使用此设置，时钟不会自动调整为夏令时。</p><pre class="oac_no_warn" dir="ltr">
[HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\TimeZoneInformation]
"DynamicDaylightTimeDisabled"=dword:00000001
</pre><p>如果禁用<code class="codeph">DynamicDaylightTimeDisabled</code>选项，则Java返回GMT（格林威治标准时间）偏移量，而不是与统一命名约定（例如“欧洲/柏林”）兼容的时区ID。例如，偏移量将表示为GMT + 01，而不是“欧洲/柏林”。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD376"></a><div class="props_rev_3"><a id="GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6" name="GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6"></a><h4 id="JSTGD-GUID-CBD9FFC2-18C5-4308-8102-7D56EB7874A6" class="sect4">在控制面板中设置默认时区</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用Windows控制面板更改或查看系统的默认时区。</p>
                        <p>要从控制面板设置系统的默认时区：</p>
                     </div>
                     <!-- class="section" -->
                     <ol>
                        <li><span>单击Windows“ <span class="bold">开始”</span>按钮，然后单击“ <span class="bold">控制面板”</span> 。</span></li>
                        <li><span>单击<span class="bold">日期和时间</span> 。</span></li>
                        <li><span>单击<span class="bold">更改时区</span>按钮。</span></li>
                        <li><span>从“ <span class="bold">时区”</span>菜单中，选择您的首选时区。</span></li>
                        <li><span>单击<span class="bold">确定</span> 。这将返回到“日期和时间”对话框。</span></li>
                        <li><span>单击“ <span class="bold">确定”</span>关闭“日期和时间”对话框。</span></li>
                     </ol>
                     <div class="section">
                        <p>例如，您可以在Windows 7中选择此时区：</p><pre class="oac_no_warn" dir="ltr">(UTC)+1:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna.
</pre><p>注册表项的相应值<code class="codeph">TimeZoneKeyName</code>是“W。欧洲标准时间。”</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD377"></a><div class="props_rev_3"><a id="GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5" name="GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5"></a><h4 id="JSTGD-GUID-6FE66D13-4C13-452E-BABE-8805876FE6C5" class="sect4">检查-Duser.timezone系统属性</h4>
                  <div>
                     <div class="section">
                        <p>您可以使用称为Java的Java系统属性在命令行上显式设置默认时区。 <code class="codeph">user.timezone</code> 。这会绕过Windows操作系统中的设置，这可能是一种解决方法。例如，如果只希望对系统上运行的单个Java程序使用夏令时（DST），则此设置很有用。
                        </p>
                        <p>以下示例显示了系统属性<code class="codeph">-Duser.timezone</code>通过从Windows命令提示符窗口运行一个名为DefaultTimeTestZone的Java程序。
                        </p>
                        <p><code class="codeph">c:\tztest> java -Duser.timezone=America/New_York DefaultTimeZone America/New_York</code></p>
                        <p>如果通过指定显式设置默认时区<code class="codeph">-Duser.timezone</code>适用于<code class="codeph">DefaultTimeTestZone</code>程序，但不适用于您的程序，则应检查代码是否在运行时使用如下方法调用覆盖默认的Java时区：</p><pre class="oac_no_warn" dir="ltr">TimeZone.setDefault(TimeZone zone)</pre></div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD378"></a><div class="props_rev_3"><a id="GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542" name="GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542"></a><h4 id="JSTGD-GUID-282EA7D8-FF76-40A2-9B1A-53D6230BD542" class="sect4">Windows 7中的特殊工具</h4>
                  <div>
                     <p>在Windows 7中，称为<code class="codeph">tzutil.exe</code>可用。使用此工具，您可以请求当前时区ID的缩写，而无需手动读取注册表。
                     </p>
                     <p>这是一个跑步的例子<code class="codeph">tzutil.exe</code> 。第一行是您在Windows命令提示符窗口中输入的命令。第二行是系统响应。
                     </p><pre class="oac_no_warn" dir="ltr">tzutil /g

W. Europe Standard Time</pre></div>
               </div><a id="JSTGD379"></a><div class="props_rev_3"><a id="GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9" name="GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9"></a><h4 id="JSTGD-GUID-0E200172-B7F0-466D-A83F-B51ECA4824D9" class="sect4">JRE时区映射的内部表示</h4>
                  <div>
                     <p>在Windows上，JRE使用一个文件<code class="codeph"><span class="variable" translate="no"><java-home></span>\lib\tzmappings</code>表示Windows和Java时区之间的映射。文件中的每一行都有四个标记。第一个令牌是Windows时区注册表项，称为<code class="codeph">TimeZoneKeyName</code> 。请参阅<a href="time-zone-settings-jre.html#GUID-3295371E-C1EF-4098-81A2-5ADC31956295">在控制面板中确定设置</a> 。
                     </p>
                     <p>第二个令牌是时区映射ID。 （Windows Vista和Windows 7中不使用此功能。）第三个标记是语言环境。第四个标记表示Java时区ID。重要的令牌是第一令牌，第三令牌（可以为空）和第四令牌。（ <span class="italic">注意：</span>此文件不是公共接口。）
                     </p>
                     <p>如果您在Windows控制面板中选择了称为“（UTC + 01：00）阿姆斯特丹，柏林，伯尔尼，罗马，斯德哥尔摩，维也纳的时区”，则文件中的相关行<code class="codeph">tzmappings</code>是：</p>
                     <p><code class="codeph">W. Europe Standard Time:2,3::Europe/Berlin:</code></p>
                     <p>在此示例中，JRE将您的默认时区（令牌编号4）识别为“欧洲/柏林”。</p>
                     <p>如果tzmappings文件中没有适当的映射条目，则Microsoft可能在Windows更新中引入了新时区，并且JRE无法使用该新时区。在这种情况下，您可以提交JRE的错误报告，并从<a href="http://bugs.java.com" target="_blank">Oracle Java错误网站</a>在tzmappings文件中请求一个新条目<a href="http://bugs.java.com" target="_blank">。</a></p>
                     <p>如果您运行该工具，则可能在操作系统和JRE之间建立类似的断开连接<code class="codeph">tzedit.exe</code> 。此工具由Microsoft发布在Internet上，并允许用户添加新的时区。JRE不太可能通过此工具将时区引入系统。同样，解决方案是提交错误以请求将新条目添加到<code class="codeph">tzmappings</code>文件。
                     </p>
                  </div>
               </div>
            </div>
         </div>
      </article>
   

</body></html>