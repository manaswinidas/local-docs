<html lang="en-us"  xml:lang="en-us"><head></head><body >﻿
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter provides information about how signals and exceptions are handled by the Java HotSpot Virtual Machine. It also describes the signal chaining facility, available on the Oracle Solaris, Linux, and macOS operating systems, which facilitates writing applications that must install their own signal handlers.">
      <meta name="description" content="This chapter provides information about how signals and exceptions are handled by the Java HotSpot Virtual Machine. It also describes the signal chaining facility, available on the Oracle Solaris, Linux, and macOS operating systems, which facilitates writing applications that must install their own signal handlers.">
      <title>处理信号和异常</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Troubleshooting Guide">
      <meta property="og:description" content="This chapter provides information about how signals and exceptions are handled by the Java HotSpot Virtual Machine. It also describes the signal chaining facility, available on the Oracle Solaris, Linux, and macOS operating systems, which facilitates writing applications that must install their own signal handlers.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Troubleshooting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="troubleshooting-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:41:43-07:00">
      <meta name="dcterms.title" content="Troubleshooting Guide">
      <meta name="dcterms.dateCopyrighted" content="1995, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94880-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="troubleshoot-process-hangs-and-loops.html" title="Previous" type="text/html">
      <link rel="next" href="debug-core-library-issues.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TROUBLESHOOT">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>
   
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="troubleshoot-process-hangs-and-loops.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="debug-core-library-issues.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">故障排除指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="debug-jvm-issues.html" property="item" typeof="WebPage"><span property="name">调试JVM问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">处理信号和异常</li>
            </ol>
            <a id="GUID-CBA7BA16-F89F-4BE2-B653-139BABA997D4" name="GUID-CBA7BA16-F89F-4BE2-B653-139BABA997D4"></a><a id="JSTGD346"></a><a id="JSTGD345"></a>
            
            <h2 id="JSTGD-GUID-CBA7BA16-F89F-4BE2-B653-139BABA997D4" class="sect2"><span class="enumeration_chapter">7</span>处理信号和异常</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章提供有关Java HotSpot虚拟机如何处理信号和异常的信息。它还描述了在Oracle Solaris，Linux和macOS操作系统上可用的信号链接工具，该工具有助于编写必须安装自己的信号处理程序的应用程序。</span></div>
               <p>本章包含以下部分：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-F012840D-8E5A-4B6D-8E49-0129A9EE46DB" title="Java HotSpot VM安装信号处理程序以实现各种功能并处理致命的错误情况。">在Oracle Solaris，Linux和macOS上处理信号</a></p>
                  </li>
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-43732853-4FDD-4FED-99A0-56B79B44B3AD" title="在Windows上，异常是在程序执行期间发生的事件。">Windows上的异常处理</a></p>
                  </li>
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D" title="信号链使您能够编写需要安装自己的信号处理程序的应用程序。此功能在Solaris，Linux和macOS上可用。">信号链</a></p>
                  </li>
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-D8754420-3A1F-4D93-A877-1FE041E50081" title="HotSpot VM使用64位系统的AddVectoredExceptionHandlerAPI在初始化期间安装顶级异常处理程序。">使用Java HotSpot VM处理异常</a></p>
                  </li>
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21" title="本主题描述了向Java HotSpot VM注册的控制台事件的列表。">控制台处理程序</a></p>
                  </li>
                  <li>
                     <p><a href="handle-signals-and-exceptions.html#GUID-57C048F6-0D4B-43BD-B27C-06A613435360" title="本主题描述了Solaris OS，Linux和macOS上使用的信号列表">Oracle Solaris，Linux和macOS中使用的信号</a></p>
                  </li>
               </ul>
            </div><a id="JSTGD347"></a><div class="props_rev_3"><a id="GUID-F012840D-8E5A-4B6D-8E49-0129A9EE46DB" name="GUID-F012840D-8E5A-4B6D-8E49-0129A9EE46DB"></a><h3 id="JSTGD-GUID-F012840D-8E5A-4B6D-8E49-0129A9EE46DB" class="sect3">在Oracle Solaris，Linux和macOS上处理信号</h3>
               <div>
                  <p>Java HotSpot VM安装信号处理程序以实现各种功能并处理致命的错误情况。</p>
                  <div class="section">
                     <p>例如，为了避免出现以下情况而进行的优化： <code class="codeph">java.lang.NullPointerException</code>很少会被扔<code class="codeph">SIGSEGV</code>信号被捕获并处理，并且<code class="codeph">NullPointerException</code>被抛出。
                     </p>
                     <p>通常，信号/陷阱发生在两个类别中：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>预期和处理信号时，例如隐式空处理。另一个示例是安全点轮询机制，该机制可在需要安全点时保护内存中的页面。任何访问该页面的线程都会导致<code class="codeph">SIGSEGV</code> ，这将导致存根的执行，从而使线程达到安全点。
                           </p>
                        </li>
                        <li>
                           <p>意外信号。这包括<code class="codeph">SIGSEGV</code>在VM代码，Java本机接口（JNI）代码或本机代码中执行时。在这些情况下，信号是意外的，因此将调用致命错误处理来创建错误日志并终止该过程。
                           </p>
                        </li>
                     </ul>
                     <p><a href="handle-signals-and-exceptions.html#GUID-57C048F6-0D4B-43BD-B27C-06A613435360__CIHBHCFE" title="下表列出了在Solaris，Linux和macOS上使用的信号">表7-2</a>列出了Oracle Solaris，Linux和macOS操作系统上当前使用的信号。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JSTGD348"></a><div class="props_rev_3"><a id="GUID-43732853-4FDD-4FED-99A0-56B79B44B3AD" name="GUID-43732853-4FDD-4FED-99A0-56B79B44B3AD"></a><h3 id="JSTGD-GUID-43732853-4FDD-4FED-99A0-56B79B44B3AD" class="sect3">Windows上的异常处理</h3>
               <div>
                  <p>在Windows上，异常是在程序执行期间发生的事件。</p>
                  <div class="section">
                     <p>异常有两种：硬件异常和软件异常。硬件异常可与诸如<code class="codeph">SIGSEGV</code>和<code class="codeph">SIGKILL</code>在Oracle Solaris和Linux操作系统上。应用程序或操作系统使用<span class="apiname">RaiseException（）</span> API明确启动软件异常。</p>
                     <p>在Windows上，用于处理硬件和软件异常的机制称为<span class="keyword">结构化异常处理</span> （SEH）。这是基于堆栈框架的异常处理，类似于C ++和Java异常处理机制。在C ++中， <code class="codeph">__try</code>和<code class="codeph">__except</code>关键字用于保护可能导致异常的一段代码，如以下示例所示。
                     </p><pre class="pre codeblock"><code>__try {
     // guarded body of code
 } __except (<span class="variable" translate="no">filter-expression</span>) {
     // exception-handler block
 }
</code></pre><p>的<code class="codeph">__except</code>块由过滤器表达式滤除的用途由<span class="apiname">GetExceptionInformation（）API，</span>或两者返回的<span class="apiname">GetExceptionCode（）API，</span>异常信息返回的整数异常代码。
                     </p>
                     <p>过滤器表达式的计算结果应为以下值之一：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">EXCEPTION_CONTINUE_EXECUTION = -1</code></p>
                           <p>过滤器表达式修复了这种情况，并在发生异常的地方继续执行。与某些例外方案不同，SEH也支持<span class="bold">恢复模型</span> 。从信号处理程序完成之后，就在程序被中断的地方继续执行，这很像UNIX信号处理。区别在于，在这种情况下，处理程序只是过滤器表达式本身，而不是<code class="codeph">__except</code>块。但是，过滤器表达式也可能涉及函数调用。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">EXCEPTION_CONTINUE_SEARCH = 0</code></p>
                           <p>当前处理程序无法处理此异常。继续处理程序搜索下一个处理程序。这类似于<code class="codeph">catch</code>块与C ++和Java中的异常类型不匹配。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">EXCEPTION_EXECUTE_HANDLER = 1</code></p>
                           <p>当前处理程序匹配并可以处理异常。的<code class="codeph">__except</code>块被执行。
                           </p>
                        </li>
                     </ul>
                     <p>的<code class="codeph">__try</code>和<code class="codeph">__finally</code>关键字用于构造终止处理程序，如以下示例所示。
                     </p><pre class="pre codeblock"><code>__try { 
    // guarded body of code  
} __finally { 
    // __finally block  
}
</code></pre><p>当控制权离开<code class="codeph">__try</code>阻止（发生异常或无异常之后）， <code class="codeph">__finally</code>块被执行。在 - 的里面<code class="codeph">__finally</code>块，可以调用<span class="apiname">AbnormalTermination（）</span> API来测试异常之后是否继续控制。
                     </p>
                     <p>Windows程序还可以安装顶级<span class="bold">未处理的异常过滤器</span>功能，以捕获<span class="bold">未处理的异常</span> 。 <code class="codeph">__try</code> / <code class="codeph">__except</code>块。使用<span class="apiname">SetUnhandledExceptionFilter（）</span> API在整个过程中安装此函数。如果没有用于异常的处理程序，则将调用<span class="apiname">UnhandledExceptionFilter（）</span> ，这将调用顶级未处理异常过滤器函数（如果有）来捕获该异常。此功能还显示一个消息框，通知用户未处理的异常。
                     </p>
                     <p>Windows异常与可归因于当前执行流的Unix同步信号相当。在Windows中，异步事件（例如控制台事件）（例如，用户在控制台上按下Control + C）由使用<span class="apiname">SetConsoleCtlHandler（）</span> API注册的控制台控件处理程序处理。</p>
                     <p>如果应用程序在Windows上使用<span class="apiname">signal（）</span> API，则C运行时库（CRT）会将Windows异常和控制台事件都映射到适当的信号或C运行时错误。例如，CRT将Control + C映射到<code class="codeph">SIGINT</code>以及所有其他控制台事件<code class="codeph">SIGBREAK</code> 。同样，如果您注册<code class="codeph">SIGSEGV</code>处理程序，CRT将相应的异常转换为信号。CRT启动代码实现了<code class="codeph">__try</code> / <code class="codeph">__except</code>围绕<span class="apiname">main（）</span>函数。CRT的异常过滤器功能（命名为<code class="codeph">_XcptFilter</code> ）将Win32异常映射到信号，并将信号调度到其相应的处理程序。如果信号的处理程序设置为<code class="codeph">SIG_DFL</code> （默认处理），然后<code class="codeph">_XcptFilter</code>来电<code class="codeph">UnhandledExceptionFilter</code> 。
                     </p>
                     <p><span class="bold">向量异常处理</span>机制也可以使用。向量处理程序不是基于帧的处理程序。程序可以使用<span class="apiname">AddVectoredExceptionHandler</span> API注册零个或多个矢量异常处理程序。无论在何处发生异常，都将在调用结构化异常处理程序（如果有）之前调用矢量处理程序。
                     </p>
                     <p>向量异常处理程序返回以下值之一：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">EXCEPTION_CONTINUE_EXECUTION</code> ：跳过下一个矢量和SEH处理程序。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">EXCEPTION_CONTINUE_SEARCH</code> ：继续到下一个矢量或SEH处理程序。
                           </p>
                        </li>
                     </ul>
                     <p>请访问<a href="http://www.microsoft.com" target="_blank">Microsoft网站</a>以了解有关Windows异常处理的更多信息。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JSTGD351"></a><div class="props_rev_3"><a id="GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D" name="GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D"></a><h3 id="JSTGD-GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D" class="sect3">信号链</h3>
               <div>
                  <p>信号链使您能够编写需要安装自己的信号处理程序的应用程序。此功能在Solaris，Linux和macOS上可用。</p>
                  <p>信号链接工具具有以下功能：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>创建Oracle的HotSpot虚拟机时，支持预安装的信号处理程序。</p>
                        <p>创建HotSpot VM时，将保存HotSpot VM使用的信号的信号处理程序。在执行期间，当这些信号中的任何一个出现并且不以HotSpot VM为目标时，将调用预安装的处理程序。换句话说，针对这些信号，预安装的信号处理程序<span class="italic">链接</span>在HotSpot VM处理程序的后面。
                        </p> 
                     </li>
                     <li>
                        <p>在Java Native Interface代码内部或从另一个本机线程创建HotSpot VM之后，支持安装的信号处理程序。</p>
                        <p>您的应用程序可以链接并加载<code class="codeph">libjsig.so</code>共享库之前<code class="codeph">libc/libthread/libpthread</code>图书馆。该库可确保诸如<code class="codeph">signal()</code> ， <code class="codeph">sigset()</code>和<code class="codeph">sigaction()</code>如果处理程序与HotSpot VM已安装的信号处理程序发生冲突，它们将被拦截，并且不要替换HotSpot VM使用的信号处理程序。而是，这些调用保存新的信号处理程序。新的信号处理程序链接在HotSpot VM信号处理程序的后面，用于信号。在执行期间，当这些信号中的任何一个被发出并且未针对HotSpot VM时，将调用预安装的处理程序。
                        </p>
                        <p>如果在创建VM之后不需要支持信号处理程序安装，则<code class="codeph">libjsig.so</code>不需要共享库。
                        </p>
                        <p>要启用信号链接，请执行以下过程之一以使用<code class="codeph">libjsig.so</code>共享库：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>链接<code class="codeph">libjsig.so</code>与创建或嵌入HotSpot VM的应用程序共享的库：</p><pre class="pre codeblock"><code>cc -L <span class="variable" translate="no">libjvm.so-directory</span> -ljsig -ljvm java_application.c
</code></pre></li>
                           <li>
                              <p>使用<code class="codeph">LD_PRELOAD</code>环境变量：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p>Korn Shell（ksh）：</p><pre class="pre codeblock"><code>export LD_PRELOAD=<span class="variable" translate="no">libjvm.so-directory</span>/libjsig.so; java_application</code></pre></li>
                                 <li>
                                    <p>C shell（csh）：</p><pre class="pre codeblock"><code>setenv LD_PRELOAD <span class="variable" translate="no">libjvm.so-directory</span>/libjsig.so; java_application</code></pre></li>
                              </ul>
                           </li>
                        </ul>
                        <p>插入<code class="codeph">signal()</code> ， <code class="codeph">sigset()</code>和<code class="codeph">sigaction()</code>调用将返回保存的信号处理程序，而不是由HotSpot VM安装的信号处理程序，并且会被操作系统看到。
                        </p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D__GUID-E9F951FD-056A-43F1-9A4E-297C83CEB42A">
                     <p class="notep1">注意：</p>
                     <p>的<code class="codeph">SIGQUIT</code> ， <code class="codeph">SIGTERM</code> ， <code class="codeph">SIGINT</code>和<code class="codeph">SIGHUP</code>信号无法链接。如果应用程序必须处理这些信号，请考虑使用<code class="codeph">—Xrs</code>选项。
                     </p>
                  </div>
                  <div class="section">
                     <p class="subhead2" id="GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D__GUID-BCAFD589-7705-44F0-8606-98632B169CC0"><span class="bold">在macOS中启用信号链接</span></p>
                     <p>要在macOS中启用信号链接，请设置以下环境变量：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">DYLD_INSERT_LIBRARIES</code> ：预加载指定的库，而不是<code class="codeph">LD_PRELOAD</code> Solaris和Linux上可用的环境变量。
                           </p>
                        </li>
                        <li>
                           <p><code class="codeph">DYLD_FORCE_FLAT_NAMESPACE</code> ：启用<code class="codeph">libjsig</code>由于macOS具有两级名称空间（符号的完全限定名称包括其库），因此该库取代了OS的实现。要启用此功能，请将此环境变量设置为任何值。
                           </p>
                        </li>
                     </ul>
                     <p>以下命令通过预加载<code class="codeph">libjsig</code>图书馆：</p>
                     <p><code class="codeph">$ DYLD_FORCE_FLAT_NAMESPACE=0 DYLD_INSERT_LIBRARIES="JAVA_HOME/lib/libjsig.dylib" java MySpiffyJavaApp</code></p>
                     <div class="infoboxnote" id="GUID-CB49A2A7-2A9F-4C18-948F-6D4A96FF688D__GUID-4C14722E-C559-497A-90A5-8FA43EA43F91">
                        <p class="notep1">注意：</p>macOS上的库文件名是<code class="codeph">libjsig.dylib</code>不<code class="codeph">libjsig.so</code>就像在Solaris或Linux上一样。
                     </div>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JSTGD353"></a><div class="props_rev_3"><a id="GUID-D8754420-3A1F-4D93-A877-1FE041E50081" name="GUID-D8754420-3A1F-4D93-A877-1FE041E50081"></a><h3 id="JSTGD-GUID-D8754420-3A1F-4D93-A877-1FE041E50081" class="sect3">使用Java HotSpot VM处理异常</h3>
               <div>
                  <p>HotSpot VM使用64位系统的<span class="apiname">AddVectoredExceptionHandler</span> API在初始化期间安装顶级异常处理程序。
                  </p>
                  <div class="section">
                     <p>它还使用以下命令安装Win32 SEH： <code class="codeph">__try</code> / <code class="codeph">__except</code>在C ++中，为创建的每个线程在线程（内部）启动函数调用周围添加块。
                     </p>
                     <p>最后，它围绕JNI函数安装了一个异常处理程序。</p>
                     <p>如果应用程序必须处理JNI代码中的结构化异常，则可以使用<code class="codeph">__try</code> / <code class="codeph">__except</code> C ++中的语句。但是，如果必须在JNI代码中使用向量化异常处理程序，则该处理程序必须返回<code class="codeph">EXCEPTION_CONTINUE_SEARCH</code>继续执行VM的异常处理程序。
                     </p>
                     <p>通常，发生异常的类别有两种：</p>
                  </div>
                  <!-- class="section" -->
                  <div class="section">
                     <ul style="list-style-type:disc">
                        <li>
                           <p>预期和处理异常时。示例包括引用的隐式null处理，以前在其中访问null会导致<code class="codeph">EXCEPTION_ACCESS_VIOLATION</code> ，已处理。
                           </p>
                        </li>
                        <li>
                           <p>意外的异常。一个例子是<code class="codeph">EXCEPTION_ACCESS_VIOLATION</code>在VM代码，JNI代码或本机代码中执行时。在这些情况下，信号是意外的，并且致命的错误处理被调用以创建错误日志并终止该过程。
                           </p>
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
            </div><a id="JSTGD355"></a><a id="JSTGD354"></a><div class="props_rev_3"><a id="GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21" name="GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21"></a><h3 id="JSTGD-GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21" class="sect3">控制台处理程序</h3>
               <div>
                  <p>本主题描述了向Java HotSpot VM注册的控制台事件的列表。</p>
                  <p>Java HotSpot VM注册控制台事件，如<a href="handle-signals-and-exceptions.html#GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21__CIHBIJDJ" title="下表列出了控制台事件，相应的信号和用法。">表7-1</a>所示。
                  </p>
                  <div class="tblformal" id="GUID-A7D91931-EA03-4BA0-B58B-53A67F9CBD21__CIHBIJDJ">
                     <p class="titleintable">表7-1控制台事件</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="控制台事件" width="100%" border="1" summary="This table lists console events, corresponding signals and usage." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d19010e579">控制台事件</th>
                              <th align="left" valign="bottom" width="16%" id="d19010e582">信号</th>
                              <th align="left" valign="bottom" width="53%" id="d19010e585">用法</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e590" headers="d19010e579 ">
                                 <p><code class="codeph">CTRL_C_EVENT</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d19010e590 d19010e582 ">
                                 <p><code class="codeph">SIGINT</code></p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d19010e590 d19010e585 ">
                                 <p>此事件和信号用于终止进程。（可选的）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e602" headers="d19010e579 ">
                                 <p><code class="codeph">CTRL_CLOSE_EVENT</code><code class="codeph">CTRL_LOGOFF_EVENT</code><code class="codeph">CTRL_SHUTDOWN_EVENT</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d19010e602 d19010e582 ">
                                 <p><code class="codeph">SIGTERM</code></p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d19010e602 d19010e585 ">
                                 <p>VM异常终止时，关闭挂钩机制会使用此事件和信号。（可选的）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e620" headers="d19010e579 ">
                                 <p><code class="codeph">CTRL_BREAK_EVENT</code></p>
                              </td>
                              <td align="left" valign="top" width="16%" headers="d19010e620 d19010e582 ">
                                 <p><code class="codeph">SIGBREAK</code></p>
                              </td>
                              <td align="left" valign="top" width="53%" headers="d19010e620 d19010e585 ">
                                 <p>此事件和信号用于以标准错误流转储Java堆栈跟踪。（可选的）</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>如果应用程序必须注册自己的控制台处理程序，则<code>-Xrs</code>可以使用该选项。使用此选项时，将不运行关闭挂钩<code class="codeph">SIGTERM</code> （具有先前显示的事件映射），并且线程转储支持在<code class="codeph">SIGBREAK</code> （具有Control + Break事件的上述映射）。
                  </p>
               </div>
            </div><a id="JSTGD357"></a><a id="JSTGD356"></a><div class="sect2"><a id="GUID-57C048F6-0D4B-43BD-B27C-06A613435360" name="GUID-57C048F6-0D4B-43BD-B27C-06A613435360"></a><h3 id="JSTGD-GUID-57C048F6-0D4B-43BD-B27C-06A613435360" class="sect3">Oracle Solaris，Linux和macOS中使用的信号</h3>
               <div>
                  <p>本主题描述了Solaris OS，Linux和macOS上使用的信号列表</p>
                  <div class="tblformal" id="GUID-57C048F6-0D4B-43BD-B27C-06A613435360__CIHBHCFE">
                     <p class="titleintable">表7-2在Oracle Solaris，Linux和macOS上使用的信号</p>
                     <table cellpadding="4" cellspacing="0" class="Formal" title="在Oracle Solaris，Linux和macOS上使用的信号" width="100%" border="1" summary="This table lists the signals that are used on Solaris, Linux, and macOS" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="31%" id="d19010e671">信号</th>
                              <th align="left" valign="bottom" width="69%" id="d19010e674">描述</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e679" headers="d19010e671 ">
                                 <p><code class="codeph">SIGSEGV</code> ， <code class="codeph">SIGBUS</code> ， <code class="codeph">SIGFPE</code> ， <code class="codeph">SIGPIPE</code> ，<code class="codeph">SIGILL</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d19010e679 d19010e674 ">
                                 <p>这些信号在实现中用于隐式空检查等。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e699" headers="d19010e671 ">
                                 <p><code class="codeph">SIGQUIT</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d19010e699 d19010e674 ">
                                 <p>此信号用于将Java堆栈跟踪转储到标准错误流。（可选的）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e707" headers="d19010e671 ">
                                 <p><code class="codeph">SIGTERM</code> ， <code class="codeph">SIGINT</code> ，<code class="codeph">SIGHUP</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d19010e707 d19010e674 ">
                                 <p>这些信号用于支持关闭挂钩机制（ <code class="codeph">java.lang.Runtime.addShutdownHook</code> ）当VM异常终止时。（可选的）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e724" headers="d19010e671 "><code class="codeph">SIGJVM1</code> ，<code class="codeph">SIGJVM2</code></td>
                              <td align="left" valign="top" width="69%" headers="d19010e724 d19010e674 ">
                                 <p>这些信号保留供Java虚拟机使用。（仅Solaris）</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e734" headers="d19010e671 ">
                                 <p><code class="codeph">SIGUSR2</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d19010e734 d19010e674 ">
                                 <p>该信号在Linux和macOS上内部使用。 Solaris上的VM不使用它。</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="31%" id="d19010e742" headers="d19010e671 ">
                                 <p><code class="codeph">SIGABRT</code></p>
                              </td>
                              <td align="left" valign="top" width="69%" headers="d19010e742 d19010e674 ">
                                 <p>HotSpot VM无法处理此信号。相反，它称为<code class="codeph">abort</code>致命错误处理后的功能。如果应用程序使用此信号，则它应终止该过程以保留预期的语义。
                                 </p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>标记为“可选”的信号在<code>-Xrs</code>指定选项以减少信号使用。使用此选项，尽管VM为诸如以下的基本信号安装了自己的信号处理程序，但使用的信号却更少了<code class="codeph">SIGSEGV</code> 。指定此选项意味着如果进程接收到一个关闭钩子机制将不执行<code class="codeph">SIGQUIT</code> ， <code class="codeph">SIGTERM</code> ， <code class="codeph">SIGINT</code> ， 要么<code class="codeph">SIGHUP</code> 。如果VM正常终止（即，当最后一个非守护进程线程完成或调用<span class="apiname">System.exit</span>方法时），关闭挂钩将按预期执行。
                  </p>
                  <p> <code class="codeph">SIGUSR2</code>用于在Linux和macOS上实现，暂停和恢复。但是，可以指定替代信号来代替<code class="codeph">SIGUSR2</code> 。通过指定<code class="codeph">_JAVA_SR_SIGNUM</code>环境变量。如果设置了此环境变量，则必须将其设置为一个大于最大值的值。 <code class="codeph">SIGSEGV</code>和<code class="codeph">SIGBUS</code> 。
                  </p>
               </div>
            </div>
         </div>
      </article>
   

</body></html>