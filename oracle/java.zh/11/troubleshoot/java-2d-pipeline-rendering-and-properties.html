<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="This chapter provides information and guidance for troubleshooting some of the most common issues that might be found in the Java 2D API when changing pipeline rendering and properties.">
      <meta name="description" content="This chapter provides information and guidance for troubleshooting some of the most common issues that might be found in the Java 2D API when changing pipeline rendering and properties.">
      <title>Java 2D Pipeline Rendering and Properties</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Troubleshooting Guide">
      <meta property="og:description" content="This chapter provides information and guidance for troubleshooting some of the most common issues that might be found in the Java 2D API when changing pipeline rendering and properties.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Troubleshooting Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="troubleshooting-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:41:43-07:00">
      <meta name="dcterms.title" content="Troubleshooting Guide">
      <meta name="dcterms.dateCopyrighted" content="1995, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94880-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="awt.html" title="Previous" type="text/html">
      <link rel="next" href="java-2d.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TROUBLESHOOT">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="awt.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="java-2d.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">故障排除指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="debug-client-issues.html" property="item" typeof="WebPage"><span property="name">调试客户端问题</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Java 2D管道渲染和属性</li>
            </ol>
            <a id="GUID-DEA4F3FC-87F5-4196-A295-30A559982B10" name="GUID-DEA4F3FC-87F5-4196-A295-30A559982B10"></a><a id="JSTGD429"></a><a id="JSTGD428"></a>
            
            <h2 id="JSTGD-GUID-DEA4F3FC-87F5-4196-A295-30A559982B10" class="sect2"><span class="enumeration_chapter">11</span> Java 2D管道渲染和属性</h2>
         </header>
         <div class="ind">
            <div>
               <div><span>本章提供了有关对一些最常见问题进行故障排除的信息和指南，这些问题在更改管道渲染和属性时可能会在Java 2D API中找到。</span></div>
               <p>有关Java 2D属性的摘要，请参见<a href="java-2d-properties.html#GUID-2DC38ED7-7F26-4489-B3B5-C3B0B31E2786" title="本附录提供了可用于对Java 2D进行故障诊断的属性。">Java 2D属性</a> 。
               </p>
               <p>通过选择其他管道或操纵管道的属性，您可能能够确定问题的原因，并经常找到解决方法。</p>
               <p>通常，可以通过确定配置中使用的默认管道来解决Java 2D管道问题。然后，将管道更改为另一管道，或修改默认管道的属性。</p>
               <p>如果问题消失，则您找到了解决方法。如果问题仍然存在，请尝试更改另一个属性或管道。</p>
               <p>Java 2D使用了一组管道，这些管道可以粗略地定义为呈现原语的不同方式。这些管道如下：</p>
               <ul style="list-style-type:disc">
                  <li>
                     <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-EAB91B4A-7486-4733-B6BB-76A52B88DEA8" title="在UNIX平台上，默认管道是X11管道。该管道使用X协议渲染到屏幕或某些类型的屏幕外图像，例如VolatileImages或" compatibl="=" ="">Oracle Solaris和Linux：X11 Pipeline</a>是Oracle Solaris和Linux操作系统的默认设置。
                     </p>
                  </li>
                  <li>
                     <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48" title="Windows平台上的默认管道是DirectDraw管道和GDI管道的混合，其中某些操作是使用DirectDraw管道执行的，而其他操作是使用GDI管道执行的。DirectDraw和GDI API用于渲染到加速的屏幕外和屏幕表面。">Windows OS-DirectDraw / GDI Pipeline</a>是Windows上的默认设置</p>
                  </li>
                  <li>
                     <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-69652947-7E96-454C-81CB-70703A539183" title="从Java SE 6发行版开始，Direct3D管道使用Direct3D API进行渲染。如果驱动程序支持所需的功能和渲染质量级别，则默认情况下以全屏模式启用此管道。">Windows操作系统-全屏模式下的Direct3D管道</a>是Windows上的替代方法。
                     </p>
                  </li>
                  <li>
                     <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8" title="The OpenGL pipeline is available on Oracle Solaris, Linux, and Windows.">Oracle Solaris，Linux和Windows</a>中的<a href="java-2d-pipeline-rendering-and-properties.html#GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8" title="The OpenGL pipeline is available on Oracle Solaris, Linux, and Windows.">OpenGL Pipeline</a>是Oracle Solaris和Linux操作系统<a href="java-2d-pipeline-rendering-and-properties.html#GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8" title="OpenGL管道在Oracle Solaris，Linux和Windows上可用。">以及Windows</a>上的替代方法。
                     </p>
                  </li>
               </ul>
            </div><a id="JSTGD430"></a><div class="props_rev_3"><a id="GUID-EAB91B4A-7486-4733-B6BB-76A52B88DEA8" name="GUID-EAB91B4A-7486-4733-B6BB-76A52B88DEA8"></a><h3 id="JSTGD-GUID-EAB91B4A-7486-4733-B6BB-76A52B88DEA8" class="sect3">Oracle Solaris和Linux：X11管道</h3>
               <div>
                  <p>在UNIX平台上，默认管道是X11管道。该管道使用X协议渲染到屏幕或某些类型的屏幕外图像，例如<code class="codeph">VolatileImages</code>或“兼容”图像（使用<span class="apiname">GraphicsConfiguration.createCompatibleImage（）</span>方法创建的<span class="apiname">图像</span> ）。
                  </p>
                  <p>可以将这些类型的图像放入X11像素图中以提高性能，尤其是在使用Remote X服务器的情况下。</p>
                  <p>此外，在某些情况下，Java 2D使用X服务器扩展，例如MIT X共享内存扩展，或Direct Graphics Access扩展，使用双缓冲时使用Double-buffer扩展进行双缓冲。 <code class="codeph">BufferStrategy</code> API。</p>
                  <p>附加的管道OpenGL管道在某些配置中可能会提供更高的性能。</p>
                  <p>以下是要解决的X11管道属性。</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-FCAC0C5C-9593-4517-8253-AFEC77339B53" title="Java 2D默认使用X11像素图来存储或缓存某些类型的屏幕外图像。">X11管道Pixmaps属性</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-BD0B8E92-20D7-444B-AA09-40FE803A3D8D" title="Java 2D X11管道使用MIT共享内存扩展（MIT SHM），它可以在客户端和X服务器之间更快地交换数据。这可以显着提高Java应用程序的性能。">X11管道MIT共享内存扩展</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-52A1657B-969D-4964-A50F-D9C5C807A8B1" title="在SPARC硬件上，如果帧缓冲区支持Sun的Direct Graphics Access（DGA）X服务器扩展，并且Java 2D具有用于访问帧缓冲区的相应模块，则DGA将用于渲染到屏幕。">SPARC上的Oracle Solaris：DGA支持</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-2285F767-9EF1-4739-AF9A-FDA6AB6BB276" title="在SPARC平台上的某些视频板上，X服务器可以提供多个视觉效果。">SPARC上的Oracle Solaris-更改Java 2D默认外观</a></p>
                     </li>
                  </ul>
               </div><a id="JSTGD431"></a><div class="props_rev_3"><a id="GUID-FCAC0C5C-9593-4517-8253-AFEC77339B53" name="GUID-FCAC0C5C-9593-4517-8253-AFEC77339B53"></a><h4 id="JSTGD-GUID-FCAC0C5C-9593-4517-8253-AFEC77339B53" class="sect4">X11管道Pixmaps属性</h4>
                  <div>
                     <p>Java 2D默认使用X11像素图来存储或缓存某些类型的屏幕外图像。</p>
                     <div class="section">
                        <p>像素图只能存储以下类型的图像：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>不透明图像，在这种情况下<span class="apiname">ColorModel.getTransparency（）</span>返回<code class="codeph">Transparency.OPAQUE</code></p>
                           </li>
                           <li>
                              <p>1位透明图像（也称为子画面， <code class="codeph">Transparency.BITMASK</code> ）</p>
                           </li>
                        </ul>
                        <p>使用像素图存储图像的好处是，驾驶员可以自行决定将其放入帧缓冲区的视频内存中，从而提高了将这些像素图复制到屏幕或其他像素图的速度。</p>
                        <p>使用像素图通常可以提高性能。但是，在某些情况下，情况恰恰相反。这些情况通常涉及使用无法使用X协议执行的操作，例如抗锯齿，alpha合成以及比简单转换转换更为复杂的转换。</p>
                        <p>对于这些操作，X11管道必须使用内置软件渲染器进行渲染。在大多数情况下，这包括将像素图的内容读取到系统内存（在远程X服务器的情况下通过网络），执行渲染，然后将像素发送回像素图。这些操作可能导致性能极差，尤其是在X服务器是远程服务器的情况下。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section">
                        <p>以下是两种禁用X11管道使用的情况：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">禁用X11管道像素图</span> ：</p>
                              <p>要禁止Java2D使用像素图，请将以下属性传递给Java VM： <code>-Dsun.java2d.pmoffscreen=false</code> 。
                              </p>
                           </li>
                           <li>
                              <p><span class="bold">禁用X11管道共享内存像素图：</span></p>
                              <div class="p">为了最大程度地减少需要从像素图读取像素的操作对整体性能的影响，X11管道使用共享内存像素图来存储经常读取的图像。
                                 <div class="infoboxnote" id="GUID-FCAC0C5C-9593-4517-8253-AFEC77339B53__GUID-60922B47-9974-400F-9828-B6687E368024">
                                    <p class="notep1">注意：</p>共享内存像素图只能在本地X服务器的情况下使用。
                                 </div>
                              </div>
                              <p>使用共享内存像素图的优点是，管道可以绕过X11协议直接访问管道中的像素，从而获得更好的性能。</p>
                              <p>默认情况下，图像存储在普通的X服务器像素图中，但是如果管道从该图像中检测到过多的读取，则可以稍后将其移动到共享内存像素图中。如果图像被复制得足够频繁，则可以将其移回服务器像素图。</p>
                              <p>管道提供了两种控制共享内存像素图使用的方式：禁用它们或强制将所有图像存储在共享内存像素图中。</p>
                              <div class="p">首先，尝试强制使用共享内存像素图，因为它通常可以提高性能。但是，对于某些视频板/驱动器配置，可能有必要禁用共享内存像素图，以避免呈现伪像或崩溃。
                                 <ul style="list-style-type:disc">
                                    <li>
                                       <p>要禁用共享内存像素图，请设置<code class="codeph">J2D_PIXMAPS</code>环境变量<code class="codeph">server</code> 。这是远程X服务器情况下的默认设置。
                                       </p>
                                    </li>
                                    <li>
                                       <p>要强制在共享内存中创建所有像素图，请设置<code class="codeph">J2D_PIXMAPS</code>至<code class="codeph">shared</code> 。
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </li>
                        </ul>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD432"></a><div class="props_rev_3"><a id="GUID-BD0B8E92-20D7-444B-AA09-40FE803A3D8D" name="GUID-BD0B8E92-20D7-444B-AA09-40FE803A3D8D"></a><h4 id="JSTGD-GUID-BD0B8E92-20D7-444B-AA09-40FE803A3D8D" class="sect4">X11管道MIT共享内存扩展</h4>
                  <div>
                     <p>Java 2D X11管道使用MIT共享内存扩展（MIT SHM），它可以在客户端和X服务器之间更快地交换数据。这可以显着提高Java应用程序的性能。</p>
                     <div class="section">
                        <p>以下是两种提高Java应用程序性能的方法。</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span><span class="bold">增加X Server和Java 2D共享内存：</span></span><div>
                              <p>在Oracle Solaris操作系统版本8和更早的版本上，有时必须增加系统（尤其是X服务器）可用的共享内存量，因为默认值太低，导致渲染性能不佳。增加共享内存和共享内存段的数量可以导致更好的性能。</p>
                              <p>要更改Oracle Solaris操作系统上的默认设置，请编辑<code class="codeph">/etc/</code>系统文件并更改<code class="codeph">shmsys:shminfo_*</code>设置，如以下示例所示。请注意，在Oracle Solaris 9和更高版本上不需要。
                              </p><pre class="pre codeblock"><code>set shmsys:shminfo_shmmax=10000000
set shmsys:shminfo_shmni=200
set shmsys:shminfo_shminfo=150
</code></pre><p>在Linux上，可以通过编辑<code>/proc/sys/kernel/shm*</code>文件。
                              </p>
                           </div>
                        </li>
                        <li class="stepexpand"><span><span class="bold">禁用X11管道共享内存扩展：</span></span><div>
                              <p>如果较旧的X服务器和共享内存扩展出现问题（例如崩溃或渲染工件），则能够禁用扩展很有用。要禁用MIT SHM，请设置<code class="codeph">J2D_USE_MITSHM</code>环境变量<code class="codeph">false</code> 。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSTGD434"></a><div class="props_rev_3"><a id="GUID-52A1657B-969D-4964-A50F-D9C5C807A8B1" name="GUID-52A1657B-969D-4964-A50F-D9C5C807A8B1"></a><h4 id="JSTGD-GUID-52A1657B-969D-4964-A50F-D9C5C807A8B1" class="sect4">SPARC上的Oracle Solaris：DGA支持</h4>
                  <div>
                     <p>在SPARC硬件上，如果帧缓冲区支持Sun的Direct Graphics Access（DGA）X服务器扩展，并且Java 2D具有用于访问帧缓冲区的相应模块，则DGA将用于渲染到屏幕。</p>
                     <div class="section">
                        <p>所有屏幕外图像都将驻留在Java堆内存中，并且使用Java 2D的纯软件渲染管道来对其进行渲染。这与典型的UNIX配置（其中X11像素图用于屏幕外图像）不同。</p>
                        <p>以下是一些用例，它们描述了如何检测DGA扩展支持以及禁用或启用DGA：</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li class="stepexpand"><span><span class="bold">DGA扩展扩展</span></span><div>
                              <p>要检测DGA扩展名是否用于渲染到屏幕，请运行执行某些渲染或显示GUI的任何Java应用程序，然后检查是否<code>/tmp/wg*</code>该文件是在应用程序启动时创建的。退出应用程序，并验证文件已删除。如果是这种情况，则在此系统上，Java 2D正在使用DGA。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span><span class="bold">DGA典型问题：</span></span><div>
                              <p>由于DGA允许直接访问帧缓冲区的视频内存，因此典型的问题包括窗口边界之外的损坏，完整的系统以及X服务器锁定。</p>
                           </div>
                        </li>
                        <li class="stepexpand"><span><span class="bold">启用或禁用DGA：</span></span><div>
                              <p>如果您确定正在使用DGA，则首先要尝试禁用它。可以通过设置<code class="codeph">NO_J2D_DGA</code>环境变量<code class="codeph">true</code> 。这将强制默认UNIX路径仅使用X11渲染到屏幕，并使用像素图加速屏幕外的图像。
                              </p>
                              <p>有时，启用pixmaps可能是有益的，同时也使用DGA渲染到屏幕上。要强制使用像素图来加速屏幕外图像，请在启动应用程序时设置以下属性： <code>-Dsun.java2d.pmoffscreen=true</code> 。
                              </p>
                           </div>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSTGD435"></a><div class="props_rev_3"><a id="GUID-2285F767-9EF1-4739-AF9A-FDA6AB6BB276" name="GUID-2285F767-9EF1-4739-AF9A-FDA6AB6BB276"></a><h4 id="JSTGD-GUID-2285F767-9EF1-4739-AF9A-FDA6AB6BB276" class="sect4">SPARC上的Oracle Solaris-更改Java 2D默认外观</h4>
                  <div>
                     <p>在SPARC平台上的某些视频板上，X服务器可以提供多个视觉效果。</p>
                     <div class="section">
                        <p>默认情况下，Java 2D尝试选择最佳视觉效果，其中“最佳”通常是更高位深度的视觉效果。例如，在某些Oracle Solaris操作系统版本上，默认的X11视觉效果是8位PseudoColor，尽管也可以使用24位视觉效果。在这些情况下，Java 2D选择24位TrueColor视觉对象作为Java窗口的默认设置。</p>
                        <p>虽然可以使用以下命令创建Java顶级窗口<code class="codeph">GraphicsConfiguration</code>对象对应于不同的视觉，在某些情况下，有必要使Java使用不同的默认视觉。可以通过设置<code class="codeph">FORCEDEFVIS</code>环境变量。可以设置为<code class="codeph">true</code>强制使用默认的X服务器视觉效果（即使它不是最好的视觉效果），也可以将其设置为与视觉ID相对应的十六进制数字，如工具之类的报告<code class="codeph">xdpyinfo</code> 。
                        </p>
                        <p>要确定您的X服务器默认外观，请执行<code class="codeph">xdpyinfo</code>命令，看看<code class="codeph">default visual id</code>领域。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div><a id="JSTGD436"></a><div class="props_rev_3"><a id="GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48" name="GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48"></a><h3 id="JSTGD-GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48" class="sect3">Windows OS-DirectDraw / GDI管道</h3>
               <div>
                  <p>Windows平台上的默认管道是DirectDraw管道和GDI管道的混合，其中某些操作是使用DirectDraw管道执行的，而其他操作是使用GDI管道执行的。DirectDraw和GDI API用于渲染到加速的屏幕外和屏幕表面。</p>
                  <div class="section">
                     <p>从Java SE 6发行版开始，当应用程序进入全屏模式时，如果驱动程序满足要求，则可以使用新的Direct3D管道。Direct3D管道可能出现的问题包括渲染工件，崩溃和与性能有关的问题。</p>
                     <p>附加的管道OpenGL管道在某些配置中可能会提供更高的性能。</p>
                     <p>以下是三种情况下的Direct3D管道问题疑难解答，例如渲染工件，崩溃和与性能有关的问题：</p>
                  </div>
                  <!-- class="section" -->
                  <ul>
                     <li class="stepexpand"><span><span class="bold">禁用DirectDraw管道：</span></span><div>
                           <p>禁用DirectDraw时，所有操作均使用GDI执行。提供以下标志以禁用DirectDraw的使用： <code>-Dsun.java2d.noddraw=true</code> 。在这种情况下，所有屏幕外图像都将在Java堆中创建，并使用默认软件管道进行渲染。所有屏幕上的渲染以及屏幕外图像的复制都将使用GDI执行。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="bold">启用DirectDraw管道</span> ：</span><div>
                           <p>如果默认情况下由于某种原因禁用了管道，则可以通过提供<code>-Dsun.java2d.noddraw=false</code>标记到VM。</p>
                           <p>但是，通常首先要禁用它是有原因的，因此最好不要强制使用它。</p>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="bold">禁用内置的插入机制</span> ：</span><div>
                           <p>通常，DirectDraw管道会尝试将屏幕外表面放置在帧缓冲区的视频内存中，以提供从这些表面到屏幕或其他加速表面的快速复制，以及某些图形操作的硬件加速渲染。</p>
                           <p>为了将不加速渲染的效果限制在基于VRAM的表面上，存在一种打孔机制，该机制可将检测到的经常被读取的表面移动到系统内存中。如果发现表面经常被复制，则可以将其提升回视频内存。</p>
                           <p>但是，如果管道无法使用DirectDraw API执行操作（例如，使用alpha合成，变换或抗锯齿的操作），则使用软件管道执行渲染。在某些情况下，他的意思是必须将驻留在VRAM中的目标表面的像素读到系统内存中，这是非常昂贵的操作。</p>
                           <p>在某些视频板/驱动器组合上，已知基于系统内存的DirectDraw曲面会导致渲染失真和其他问题。DirectDraw流水线提供了一种禁用穿刺机制的方式，从而不使用系统内存表面。</p>
                           <p>要破坏内置的表面打点机制，请向Java VM提供以下标志： <code>-Dsun.java2d.ddforcevram=true</code> 。
                           </p>
                           <div class="infoboxnote" id="GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48__GUID-95A76626-2872-41FF-9EAA-2106D7F2E59C">
                              <p class="notep1">注意：</p>
                              <p>由于软件循环可能在每次操作时都从VRAM读取像素，因此该机制可能导致性能下降。在这种情况下，请考虑禁用DirectDraw管道。</p>
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="bold">禁用DirectDraw BILT操作：</span></span><div>
                           <p>在位块传输（BILT）操作中，将两个位图模式组合在一起。此操作对应于对<span class="apiname">Graphics.drawImage（）</span> API的调用。</p>
                           <div class="p">在某些情况下，可以通过禁用DirectDraw BLIT操作来避免呈现问题。将使用GDI BLIT。
                              <div class="infoboxnote" id="GUID-AAB8CC86-652B-4A78-83EB-CDC3F5677A48__GUID-B2419E7D-2062-4D4C-8469-E04552101EFB">
                                 <p class="notep1">注意：</p>此操作可能会导致性能下降。考虑改为禁用DirectDraw管道。
                              </div> 
                           </div>
                           <p>要禁用DirectDraw BLIT操作，请传递参数<code>-Dsun.java2d.ddblit=false</code>到Java VM。</p>
                        </div>
                     </li>
                  </ul>
               </div>
            </div><a id="JSTGD437"></a><div class="props_rev_3"><a id="GUID-69652947-7E96-454C-81CB-70703A539183" name="GUID-69652947-7E96-454C-81CB-70703A539183"></a><h3 id="JSTGD-GUID-69652947-7E96-454C-81CB-70703A539183" class="sect3">Windows OS-全屏模式下的Direct3D管道</h3>
               <div>
                  <p>从Java SE 6发行版开始，Direct3D管道使用Direct3D API进行渲染。如果驱动程序支持所需的功能和渲染质量级别，则默认情况下以全屏模式启用此管道。</p>
                  <div class="section">
                     <p>如以下各节所述，可以启用Direct3D管道或强制其使用：</p>
                     <p>如果应用程序大量使用渲染操作（例如Alpha合成，抗锯齿和转换），请考虑为您的应用程序启用Direct3D管道。</p>
                     <p>但是，在决定在应用程序中启用此管道时，请谨慎使用。例如，即使某些内置视频芯片组（满足大多数Java 2D管道的质量要求），它们在Direct3D上的性能也不佳。</p>
                     <p>以下是三种情况下的Direct3D API问题疑难解答。</p>
                  </div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span><span class="bold">禁用Direct3D管道</span> ：</span><div>
                           <p>已知某些较旧的视频板/驱动程序组合会导致Direct3D管道出现问题（包括渲染和性能）。在这种情况下，要禁用管道，对于Java SE 5和更高版本，请传递参数<code>-Dsun.java2d.d3d=false</code>到Java VM，或将<code class="codeph">J2D_D3D</code>环境变量<code class="codeph">false</code> 。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="bold">启用Direct3D管道：</span></span><div>
                           <div class="p">在Java SE 5和更高版本中，要在窗口模式和全屏模式下启用Direct3D管道，请使用参数<code>-Dsun.java2d.d3d=true</code> ，或设置<code class="codeph">J2D_D3D</code>环境变量<code class="codeph">true</code> 。
                              <div class="infoboxnote" id="GUID-69652947-7E96-454C-81CB-70703A539183__GUID-6E77F04A-CF4E-4BC6-B61A-00EF6A410290">
                                 <p class="notep1">注意：</p>仅当驱动程序支持最低要求的功能时，才启用管道。
                              </div> 
                           </div>
                        </div>
                     </li>
                     <li class="stepexpand"><span><span class="bold">诊断Direct3D管道渲染问题：</span></span><div>
                           <p>在Java SE 8版本中，可以通过强制使用不同的Direct3D栅格化程序来诊断某些渲染问题（例如像素丢失，渲染混乱）。设置<code class="codeph">J2D_D3D_RASTERIZER</code>环境变量为以下之一： <code class="codeph">ref</code> ， <code class="codeph">rgb</code> ， <code class="codeph">hal</code> ， 要么<code class="codeph">tnl</code> 。
                           </p>
                           <p>有关这些光栅化器的说明，请参见Direct3D文档。默认情况下，根据其广告发布的功能选择最佳的光栅化器。特别是<code class="codeph">ref</code> rasterizer强制使用Microsoft的参考Direct3D光栅器。如果使用此光栅化器无法再现渲染问题，则很可能是视频驱动程序错误。
                           </p>
                           <p>的<code class="codeph">rgb</code>只有安装了Direct3D SDK时rasterizer才可用。可从<a href="http://msdn.microsoft.com/directx/" target="_blank">Microsoft Game Technologies Center</a>获得此SDK。
                           </p>
                           <p>对于Direct3D管道进行文本渲染的性能或质量问题，您可以对Direct3D管道的字形缓存强制使用ARGB纹理而不是默认的Alpha纹理。为此，请设置<code class="codeph">J2D_D3D_NOALPHATEXTURE</code>环境变量<code class="codeph">true</code> 。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div><a id="JSTGD438"></a><div class="props_rev_3"><a id="GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8" name="GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8"></a><h3 id="JSTGD-GUID-EDA6609A-F395-4D29-A0B7-89A5D966FDE8" class="sect3">Oracle Solaris，Linux和Windows中的OpenGL管道</h3>
               <div>
                  <p>OpenGL管道在Oracle Solaris，Linux和Windows上可用。</p>
                  <p>当渲染为以下内容时，此备用管道使用硬件加速的跨平台OpenGL API： <code class="codeph">VolatileImages</code> ，以创建使用<code class="codeph">BufferStrategy</code> API，并转到屏幕。
                  </p>
                  <p>与某些应用程序的默认（X11或GDI / DirectDraw）管道相比，此管道可以提供巨大的性能优势。如果应用程序大量使用渲染操作（例如Alpha合成，抗锯齿和转换），请考虑为您的应用程序启用管道。</p>
                  <p>以下是对OpenGL管道中的问题进行故障排除的用例</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-7637EE64-D83C-404D-8475-489ECFA8143B" title="默认情况下禁用OpenGL管道。">启用OpenGL管道</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-F86EEE41-0401-401C-8C03-A4A1328E5722" title="如果硬件或驱动程序不满足最低要求，则不会启用OpenGL管道。">最低要求</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-920D3D37-4CD1-49EE-9029-1188AE62E9B7" title="您可以使用J2D_TRACE_LEVEL环境变量来获取有关基于OpenGL的Java 2D管道的启动过程的详细信息。">诊断启动问题</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-414C9563-2904-4F4C-81F7-1ACF863FCDB2" title="诊断渲染或性能问题是否是由Java 2D或OpenGL驱动程序引起的。">诊断渲染和性能问题</a></p>
                     </li>
                     <li>
                        <p><a href="java-2d-pipeline-rendering-and-properties.html#GUID-9BC3DB14-7FCA-46D3-9296-0B03C5054DCE" title="显卡制造商列表及其相应的网站，支持的平台和一些显卡示例。">最新的OpenGL驱动程序</a></p>
                     </li>
                  </ul>
               </div><a id="JSTGD439"></a><div class="props_rev_3"><a id="GUID-7637EE64-D83C-404D-8475-489ECFA8143B" name="GUID-7637EE64-D83C-404D-8475-489ECFA8143B"></a><h4 id="JSTGD-GUID-7637EE64-D83C-404D-8475-489ECFA8143B" class="sect4">启用OpenGL管道</h4>
                  <div>
                     <p>默认情况下禁用OpenGL管道。</p>
                     <div class="section">
                        <p>要尝试启用OpenGL管道，请为JVM提供以下选项：</p>
                        <p><code class="codeph">-Dsun.java2d.opengl=true</code></p>
                        <p>要接收有关特定屏幕是否成功初始化OpenGL管道的详细控制台输出，请将选项设置为True（注意大写<span class="italic">T</span> ）。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD440"></a><div class="props_rev_3"><a id="GUID-F86EEE41-0401-401C-8C03-A4A1328E5722" name="GUID-F86EEE41-0401-401C-8C03-A4A1328E5722"></a><h4 id="JSTGD-GUID-F86EEE41-0401-401C-8C03-A4A1328E5722" class="sect4">最低要求</h4>
                  <div>
                     <p>如果硬件或驱动程序不满足最低要求，则不会启用OpenGL管道。</p>
                     <p>如果不满足以下要求之一，则Java 2D将回退并使用默认管道（在Oracle Solaris / Linux上为X11或在Windows上为GDI / DirectDraw），这意味着您的应用程序将继续正常运行，但没有OpenGL加速。</p>
                     <p>Oracle Solaris和Linux操作系统的最低要求如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>硬件加速的OpenGL / GLX库已正确安装和配置</p>
                        </li>
                        <li>
                           <p>OpenGL 1.2版或更高版本</p>
                        </li>
                        <li>
                           <p>GLX版本1.3或更高版本</p>
                        </li>
                        <li>
                           <p>至少一个具有可用深度缓冲区的TrueColor视觉对象</p>
                        </li>
                     </ul>
                     <p>Windows操作系统的最低要求如下：</p>
                     <ul style="list-style-type:disc">
                        <li>
                           <p>支持扩展的硬件加速驱动程序<code class="codeph">WGL_ARB_pbuffer</code> ， <code class="codeph">WGL_ARB_render_texture</code>和<code class="codeph">WGL_ARB_pixel_format</code></p>
                        </li>
                        <li>
                           <p>OpenGL 1.2版或更高版本</p>
                        </li>
                        <li>
                           <p>至少一种像素格式，带有可用的深度缓冲区</p>
                        </li>
                     </ul>
                  </div>
               </div><a id="JSTGD441"></a><div class="props_rev_3"><a id="GUID-920D3D37-4CD1-49EE-9029-1188AE62E9B7" name="GUID-920D3D37-4CD1-49EE-9029-1188AE62E9B7"></a><h4 id="JSTGD-GUID-920D3D37-4CD1-49EE-9029-1188AE62E9B7" class="sect4">诊断启动问题</h4>
                  <div>
                     <p>您可以使用来获取有关基于OpenGL的Java 2D管道的启动过程的详细信息。 <code class="codeph">J2D_TRACE_LEVEL</code>环境变量。
                     </p>
                     <div class="section">
                        <p>如前所述，由于各种原因，某些机器上可能未启用OpenGL管道。例如，驱动程序可能未正确安装，并且可能报告版本号不足。或者，您的计算机可能装有较旧的图形卡，不支持相应的OpenGL版本或扩展名。</p>
                        <p>在Java SE 6和更高版本中，您可以使用以下命令获取有关基于OpenGL的Java 2D管道的启动过程的详细信息： <code class="codeph">J2D_TRACE_LEVEL</code>环境变量，如以下示例所示。
                        </p>
                        <p>设置<code class="codeph">J2D_TRACE_LEVEL</code> Windows上的环境变量。
                        </p><pre class="pre codeblock"><code># set J2D_TRACE_LEVEL=4
# java -Dsun.java2d.opengl=True YourApp
</code></pre><p>设置<code class="codeph">J2D_TRACE_LEVEL</code> Solaris和Linux上的环境变量。
                        </p><pre class="pre codeblock"><code># export J2D_TRACE_LEVEL=4
# java -Dsun.java2d.opengl=True YourApp
</code></pre><p>根据平台和已安装的图形硬件，输出将有所不同，但是它可以使您了解为何未成功启用OpenGL管道进行配置的原因。</p>
                        <div class="infoboxnote" id="GUID-920D3D37-4CD1-49EE-9029-1188AE62E9B7__GUID-1D30D28D-510B-4860-BFA6-5CEE0E757808">
                           <p class="notep1">注意：</p>
                           <p>在为Sun的Java 2D团队提交错误报告时，此输出特别有用。</p>
                        </div>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div><a id="JSTGD444"></a><div class="props_rev_3"><a id="GUID-414C9563-2904-4F4C-81F7-1ACF863FCDB2" name="GUID-414C9563-2904-4F4C-81F7-1ACF863FCDB2"></a><h4 id="JSTGD-GUID-414C9563-2904-4F4C-81F7-1ACF863FCDB2" class="sect4">诊断渲染和性能问题</h4>
                  <div>
                     <p>诊断渲染或性能问题是否是由Java 2D或OpenGL驱动程序引起的。</p>
                     <div class="section">
                        <p>由于OpenGL管线非常依赖底层的图形硬件和驱动程序，因此有时可能很难确定渲染或性能问题是由Java 2D还是由OpenGL驱动程序引起的。</p>
                        <p>Java SE 6发行版中OpenGL管道的新功能之一是使用了<code class="codeph">GL_EXT_framebuffer_object</code>扩展，在使用时可提供更好的渲染性能并减少VRAM消耗<code class="codeph">VolatileImages</code> 。启用OpenGL管道时，默认情况下会启用此“ FBO”代码路径，但前提是您的图形硬件和驱动程序支持此OpenGL扩展。此扩展通常在Nvidia GeForce / Quadro FX系列及更高版本以及ATI Radeon 9500及更高版本上可用。如果您怀疑“ FBO”代码路径在您的应用程序中引起了问题，则可以通过设置以下系统属性来禁用它：</p>
                        <p><code>-Dsun.java2d.opengl.fbobject=false</code></p>
                        <p>设置此属性将导致Java 2D退回到较旧的版本<code class="codeph">pbuffer-based</code>代码路径。
                        </p>
                        <p>如果发现某个特定的Java 2D操作在启用OpenGL管线时导致的视觉效果与未启用OpenGL时不同，则可能表明图形驱动程序存在错误。同样，如果启用OpenGL管道时Java 2D渲染的性能比没有启用时明显差，那么它很可能是由驱动程序或硬件问题引起的。</p>
                        <p>无论哪种情况，都可以通过常规的错误报告渠道提交详细的错误报告。请参阅<a href="submit-bug-report.html#GUID-DB465A9C-03FA-4324-BFF9-45BF9699F349" title="有关如何提交错误报告的指南。它包括有关提交报告之前应尝试的操作以及为该报告收集哪些数据的建议。">提交错误报告</a> 。提交错误报告时，请尽可能详细，并包括以下信息：</p>
                     </div>
                     <!-- class="section" -->
                     <ul>
                        <li><span>操作系统（例如，Ubuntu Linux 6.06，Windows XP SP2）</span></li>
                        <li><span>图形硬件制造商和设备的名称（例如，Nvidia GeForce 2 MX 440）</span></li>
                        <li><span>确切的驱动程序版本（例如，ATI Catalyst 6.8，Nvidia 91.33）</span></li>
                        <li><span>输出时<code class="codeph">J2D_TRACE_LEVEL=4</code>在命令行上指定（如上一节所述）</span></li>
                        <li><span>输出<code class="codeph">glxinfo</code>如果您使用的是Oracle Solaris或Linux，则使用命令</span></li>
                     </ul>
                  </div>
               </div>
            </div><a id="JSTGD445"></a><div class="props_rev_3"><a id="GUID-9BC3DB14-7FCA-46D3-9296-0B03C5054DCE" name="GUID-9BC3DB14-7FCA-46D3-9296-0B03C5054DCE"></a><h3 id="JSTGD-GUID-9BC3DB14-7FCA-46D3-9296-0B03C5054DCE" class="sect3">最新的OpenGL驱动程序</h3>
               <div>
                  <p>显卡制造商列表及其相应的网站，支持的平台和一些显卡示例。</p>
                  <p>由于OpenGL管道严重依赖OpenGL API和底层图形硬件和驱动程序，因此确保在计算机上安装最新的图形驱动程序非常重要。可以从图形卡制造商的网站上下载驱动程序，如下表所示。</p>
                  <div class="tblformal" id="GUID-9BC3DB14-7FCA-46D3-9296-0B03C5054DCE__GUID-523D3D20-2C93-4DB9-A7C8-351DC3898B3A">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="This table contains a list of graphics card manufacturers with their corresponding websites, supported platforms and some examples of cards that are known to support OpenGL." frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="23%" id="d24943e889">制造商</th>
                              <th align="left" valign="bottom" width="39%" id="d24943e892">平台类</th>
                              <th align="left" valign="bottom" width="39%" id="d24943e895">已知有效的卡片</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d24943e900" headers="d24943e889 ">
                                 <p><a href="http://ati.com" target="_blank">ATI公司</a></p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e900 d24943e892 ">
                                 <p>Linux，Windows</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e900 d24943e895 ">
                                 <p>Radeon 8500及更高版本，FireGL系列</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d24943e912" headers="d24943e889 ">
                                 <p><a href="http://nvidia.com" target="_blank">英伟达</a></p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e912 d24943e892 ">
                                 <p>x64，Linux，Windows上的Oracle Solaris</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e912 d24943e895 ">
                                 <p>GeForce 2系列及更高版本，Quadro FX系列及更高版本</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d24943e924" headers="d24943e889 ">
                                 <p><a href="http://oracle.com/us/sun/index.htm" target="_blank">甲骨文</a></p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e924 d24943e892 ">
                                 <p>SPARC上的Oracle Solaris</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e924 d24943e895 ">
                                 <p>Expert3D系列，XVR-500，XVR-600，XVR-1200，XVR-2500</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="23%" id="d24943e936" headers="d24943e889 ">
                                 <p><a href="http://xig.com" target="_blank">Xi图形</a></p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e936 d24943e892 ">
                                 <p>x86和Linux上的Oracle Solaris</p>
                              </td>
                              <td align="left" valign="top" width="39%" headers="d24943e936 d24943e895 ">
                                 <p>多种（与Xi Graphics核对）</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
               </div>
            </div>
         </div>
      </article>
   

</body></html>