<html lang="en-us"  xml:lang="en-us"><head></head><body >﻿
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="">
      <meta name="description" content="">
      <title>Java SASL API编程和部署指南</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content="">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="java-pki-programmers-guide.html" title="Previous" type="text/html">
      <link rel="next" href="java-xml-digital-signature-api-overview-and-tutorial.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>
   
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="java-pki-programmers-guide.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="java-xml-digital-signature-api-overview-and-tutorial.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全开发人员指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Java SASL API编程和部署指南</li>
            </ol>
            <a id="GUID-6D78EE33-62E6-4D85-9695-322EED493F72" name="GUID-6D78EE33-62E6-4D85-9695-322EED493F72"></a>
            
            <h2 id="JSSEC-GUID-6D78EE33-62E6-4D85-9695-322EED493F72" class="sect2"><span class="enumeration_chapter">11</span> Java SASL API编程和部署指南</h2>
         </header>
         <div class="ind">
            <div>
               <p></p>
               <p>简单身份验证和安全层（SASL）是Internet标准（ <a href="http://www.ietf.org/rfc/rfc2222.txt" target="_blank">RFC 2222</a> ），它指定了用于身份验证的协议以及客户端和服务器应用程序之间安全层的可选建立。SASL定义了身份验证数据的交换方式，但它本身并未指定该数据的内容。它是一个框架，特定的身份验证机制可用于指定身份验证数据的内容和语义。
               </p>
               <p>协议（例如， <a href="http://www.ietf.org/rfc/rfc2251.txt" target="_blank">轻型目录访问协议版本3（LDAP v3）</a>和<a href="http://www.ietf.org/rfc/rfc2060.txt" target="_blank">Internet消息访问协议版本4（IMAP v4））</a>使用SASL来启用可插入身份验证。LDAP v3和IMAP v4不用将验证方法硬性地嵌入到协议中，而是使用SASL来执行验证，从而可以通过各种SASL机制进行验证。
               </p>
               <p>Internet社区为各种级别的安全性和部署方案定义了许多标准SASL机制。范围从无安全性（例如，匿名身份验证）到高安全性（例如，Kerberos身份验证）以及介于两者之间的级别。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-6D78EE33-62E6-4D85-9695-322EED493F72__GUID-021CCE81-4D64-40EA-8384-898814B8DC7E">Java SASL API</p>
                  <p>Java SASL API为使用SASL机制的应用程序定义了类和接口。它被定义为与机制无关的：使用API的应用程序不必硬连接到使用任何特定的SASL机制。该API支持客户端和服务器应用程序。它允许应用程序根据所需的安全功能（例如，是否容易受到被动字典攻击或是否接受匿名身份验证）来选择要使用的机制。</p>
                  <p>Java SASL API还允许开发人员使用他们自己的自定义SASL机制。SASL机制是使用Java密码体系结构（JCA）安装的；请参阅《 <a href="java-cryptography-architecture-jca-reference-guide.html#GUID-2BCFDD85-D533-4E6C-8CE9-29990DEB0190" title="Java密码体系结构（JCA）是该平台的主要部分，包含一个" name="" provide="=" ="">Java密码学体系结构（JCA）参考指南》</a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-6D78EE33-62E6-4D85-9695-322EED493F72__GUID-B7D74243-4EE4-493E-B59C-CFFADA741C71">何时使用SASL</p>
                  <p>SASL为网络应用程序提供了可插入的身份验证和安全层。Java SE中还有其他功能可以提供相似的功能，包括Java安全套接字扩展（JSSE）（请参阅<a href="java-secure-socket-extension-jsse-reference-guide.html#GUID-93DEEE16-0B70-40E5-BBE7-55C3FD432345" title="Java安全套接字扩展（JSSE）支持安全的Internet通信。它为TLS和DTLS协议的Java版本提供了框架和实现，并包括数据加密，服务器身份验证，消息完整性和可选的客户端身份验证的功能。">Java安全套接字扩展（JSSE）参考指南</a> ）和<a href="http://www.ietf.org/rfc/rfc2853.txt" target="_blank">Java通用安全服务</a> 。JSSE为SSL，TLS和DTLS协议的Java语言版本提供了框架和实现。Java GSS是<a href="http://www.ietf.org/rfc/rfc2743.txt" target="_blank">通用安全服务应用程序编程接口（GSS-API）</a>的Java语言绑定。当前在Java SE上此API下唯一支持的机制是Kerberos v5。
                  </p>
                  <p>除了从头开始定义和构建协议之外，协议定义通常是决定使用哪个API的最大因素。与JSSE和Java GSS相比，SASL相对较轻，并且在某些协议中很流行。它还具有以下优点：已经定义了几种流行的轻量级（就基础结构支持而言）SASL机制。另一方面，主要的JSSE和Java GSS机制具有相对较重的机制，需要更复杂的基础结构（分别为公钥基础结构和Kerberos）。</p>
                  <p>SASL，JSSE和Java GSS通常一起使用。例如，一种常见模式是应用程序使用JSSE建立安全通道，并使用SASL进行基于用户名，用户名/密码的身份验证。在GSS-API机制之上还存在SASL机制。一个流行的示例是与LDAP一起使用的SASL GSS-API / Kerberos v5机制。</p>
                  <p>除了从头开始定义和构建协议之外，协议定义通常是确定使用哪个API的最大因素。例如，LDAP和IMAP被定义为使用SASL，因此与这些协议相关的软件应使用Java SASL API。构建Kerberos应用程序和服务时，要使用的API是Java GSS。在构建使用SSL / TLS作为其协议的应用程序和服务时，要使用的API是JSSE。</p>
               </div>
               <!-- class="section" -->
            </div>
            <div class="sect2"><a id="GUID-6F735DD5-1648-4BB7-A4BC-D001DC3B82AC" name="GUID-6F735DD5-1648-4BB7-A4BC-D001DC3B82AC"></a><h3 id="JSSEC-GUID-6F735DD5-1648-4BB7-A4BC-D001DC3B82AC" class="sect3">Java SASL API概述</h3>
               <div>
                  <p></p>
                  <p>SASL是质询响应协议。服务器向客户端发出质询，客户端根据质询发送响应。这种交换一直持续到服务器满意为止，不再发出任何进一步的挑战。这些挑战和响应是任意长度的二进制令牌。封装协议（例如LDAP或IMAP）指定如何编码和交换这些令牌。例如，LDAP指定将SASL令牌封装在LDAP绑定请求和响应中的方式。</p>
                  <p>Java SASL API是根据这种交互和用法样式建模的。它具有接口， <code class="codeph">SaslClient</code>和<code class="codeph">SaslServer</code> ，分别代表客户端和服务器端机制。应用程序通过代表挑战和响应的字节数组与机制进行交互。服务器端机制进行迭代，发出挑战并处理响应，直到满足为止；而客户端机制进行迭代，评估挑战并发出响应，直到满足服务器为止。使用该机制的应用程序将驱动每次迭代。也就是说，它从协议数据包中提取质询或响应，并将其提供给该机制，然后将该机制返回的响应或质询放入协议包中，并将其发送给对等方。
                  </p>
               </div>
               <div class="sect3"><a id="GUID-7CFF731F-8330-40D6-8841-C1FB07C73655" name="GUID-7CFF731F-8330-40D6-8841-C1FB07C73655"></a><h4 id="JSSEC-GUID-7CFF731F-8330-40D6-8841-C1FB07C73655" class="sect4">建立机制</h4>
                  <div>
                     <p>使用SASL机制的客户端代码和服务器代码未经过硬连线以使用特定的机制。在许多使用SASL的协议中，服务器（静态或动态）发布其支持的SASL机制列表。然后，客户端根据其安全要求选择其中之一。</p>
                     <div class="section">
                        <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html" target="_blank"><span class="apiname">Sasl</span></a>类用于创建<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html" target="_blank"><span class="apiname">SaslClient</span></a>和<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslServer.html" target="_blank"><span class="apiname">SaslServer的</span></a>实例。这是应用程序如何使用可能的SASL机制列表创建SASL客户端机制的示例。
                        </p><pre class="codeblock"><code>    String[] mechanisms = new String[]{"DIGEST-MD5", "PLAIN"}; 
    SaslClient sc = Sasl.createSaslClient(
        mechanisms, authzid, protocol, serverName, props, callbackHandler);
</code></pre><p>基于平台支持的机制的可用性以及通过参数提供的其他配置信息，Java SASL框架选择列出的机制之一并返回<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html" target="_blank"><span class="apiname">SaslClient</span></a>的实例。
                        </p>
                        <p>所选机制的名称通常通过应用协议传输到服务器。收到机制名称后，服务器将创建一个相应的<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslServer.html" target="_blank"><span class="apiname">SaslServer</span></a>对象，以处理客户端发送的响应。这是服务器如何创建<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslServer.html" target="_blank"><span class="apiname">SaslServer</span></a>实例的示例。
                        </p><pre class="codeblock"><code>    SaslServer ss = Sasl.createSaslServer(
        mechanism, protocol, myName, props, callbackHandler);
</code></pre></div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-90092190-14A7-48F9-923A-A37FDCC28D6B" name="GUID-90092190-14A7-48F9-923A-A37FDCC28D6B"></a><h4 id="JSSEC-GUID-90092190-14A7-48F9-923A-A37FDCC28D6B" class="sect4">将输入传递给机制</h4>
                  <div>
                     <p>因为Java SASL API是通用框架，所以它必须能够容纳许多不同类型的机制。每个机制都需要使用输入进行初始化，并且可能需要输入才能取得进展。API提供了三种方法，应用程序可通过这些方法向机制提供输入：</p>
                     <ol>
                        <li>
                           <p><span class="bold">通用输入参数</span> ：应用程序使用预定义的参数来提供由SASL规范定义且机制通常需要的信息。对于<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html" target="_blank"><span class="apiname">SaslClient</span></a>机制，输入参数为授权ID，协议ID和服务器名称。对于<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslServer.html" target="_blank"><span class="apiname">SaslServer</span></a>机制，常见的输入参数是协议ID和（其自己的完全限定）服务器名称。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">属性参数</span> ：应用程序使用属性参数（属性名称到（可能是非字符串）属性值的映射）提供配置信息。Java SASL API定义了一些标准属性，例如<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。QOP</span></a> （保护质量）， <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#STRENGTH" target="_blank"><span class="apiname">Sasl。强度</span></a> （密码强度）和<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#MAX_BUFFER" target="_blank"><span class="apiname">Sasl。MAX_BUFFER</span></a> （最大缓冲区大小）。该参数还可以用于传递特定于特定机制的非标准属性。
                           </p>
                        </li>
                        <li>
                           <p><span class="bold">回调</span> ：应用程序使用<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/CallbackHandler.html" target="_blank"><span class="apiname">CallbackHandler</span></a>参数来提供无法预先确定或跨机制可能不常见的输入。当一种机制需要输入数据时，它使用应用程序提供的回调处理程序来收集数据，可能是从应用程序的最终用户那里收集的。例如，一种机制可能要求应用程序的最终用户提供名称和密码。
                           </p> 
                           <p>机制可以使用<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/package-summary.html" target="_blank"><span class="apiname">javax.security.auth.callback</span></a>包中定义的回调。这些是通用回调，对于构建执行身份验证的应用程序很有用。机制可能还需要特定于SASL的回调，例如用于收集领域和授权信息的回调，甚至（特定于（非标准化的））特定于机制的回调。该应用程序应该能够适应各种机制。因此，其回调处理程序必须能够为该机制可能请求的所有回调提供服务。通常对于任意机制这是不可能的，但由于通常部署和使用的机制数量有限，因此通常是可行的。
                           </p> 
                        </li>
                     </ol>
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F3774782-A395-48C9-A9BD-10C9F25FFE50" name="GUID-F3774782-A395-48C9-A9BD-10C9F25FFE50"></a><h4 id="JSSEC-GUID-F3774782-A395-48C9-A9BD-10C9F25FFE50" class="sect4">使用机制</h4>
                  <div>
                     <p></p>
                     <div class="section">
                        <p>一旦应用程序创建了一种机制，它将使用该机制获取SASL令牌以与对等方交换。客户端通常通过应用协议向服务器指示要使用哪种机制。某些协议允许客户端为具有初始响应的机制在请求中随附可选的初始响应。此功能可用于减少身份验证所需的消息交换数量。这是客户端如何使用<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html" target="_blank"><span class="apiname">SaslClient</span></a>进行身份验证的示例。
                        </p><pre class="codeblock"><code>    // Get optional initial response
    byte[] response = 
        (sc.hasInitialResponse() ? sc.evaluateChallenge(new byte[]) : null);

    String mechanism = sc.getMechanismName();

    // Send selected mechanism name and optional initial response to server
    send(mechanism, response);

    // Read response
    msg = receive();
    while (!sc.isComplete() &amp;&amp; (msg.status == CONTINUE || msg.status == SUCCESS)) {
        // Evaluate server challenge
        response = sc.evaluateChallenge(msg.contents);

        if (msg.status == SUCCESS) {
            // done; server doesn't expect any more SASL data
             if (response != null) {
                throw new IOException(
                    "Protocol error: attempting to send response after completion");
            } 
            break;
        } else {
            send(mechanism, response);
            msg = receive();
        }
    }  
</code></pre><p>客户端应用程序通过使用以下机制来遍历认证的每个步骤（ <code class="codeph">sc</code> ）评估从服务器收到的挑战，并获得响应以发送回服务器。它会继续此循环，直到该机制或应用程序级别协议指示认证已完成，或者该机制无法评估质询为止。如果该机制无法评估质询，它将抛出异常以指示错误并终止身份验证。机制和协议之间关于完成状态的分歧必须视为错误，因为这可能表明认证交换受到损害。
                        </p>
                        <p>这是服务器如何使用<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslServer.html" target="_blank"><span class="apiname">SaslServer</span></a>的示例。
                        </p><pre class="codeblock"><code>    // Read request that contains mechanism name and optional initial response
    msg.receive();

    // Obtain a SaslServer to perform authentication
    SaslServer ss = Sasl.createSaslServer(msg.mechanism, 
        protocol, myName, props, callbackHandler);

    // Perform authentication steps until done
    while (!ss.isComplete()) {
        try {
            // Process response
            byte[] challenge = sc.evaluateResponse(msg.contents);

            if (ss.isComplete()) {
                send(mechanism, challenge, SUCCESS);
            } else {
                send(mechanism, challenge, CONTINUE);
                msg.receive();
            } 
        } catch (SaslException e) {
            send(ERROR);
            sc.dispose();
            break;
        }
    }
</code></pre><p>服务器应用程序通过向客户端提供对该机制的响应，来遍历认证的每个步骤（ <code class="codeph">ss</code> ）进行处理。如果响应不正确，则该机制将通过抛出<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslException.html" target="_blank"><span class="apiname">SaslException来</span></a>指示错误，以便服务器可以报告错误并终止身份验证。如果响应正确，则该机制返回质询数据以发送给客户端，并指示认证是否完成。注意挑战数据可以伴随“成功”指示。例如，这可以用于告诉客户端确定某些协商状态。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-762BDD49-6EE8-419C-A45E-540462CB192B" name="GUID-762BDD49-6EE8-419C-A45E-540462CB192B"></a><h4 id="JSSEC-GUID-762BDD49-6EE8-419C-A45E-540462CB192B" class="sect4">使用协商的安全层</h4>
                  <div>
                     <p>一些SASL机制仅支持身份验证，而其他机制则支持在身份验证之后使用协商的安全层。当应用程序使用某些其他方式（例如SSL / TLS）与对等方安全通信时，通常不使用安全层功能。</p>
                     <div class="section">
                        <p>协商安全层后，必须使用安全层与对等方进行所有后续通信。要确定安全层是否已协商，请获取已协商<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><code class="codeph">Sasl.QOP</code></a>从机制。这是如何确定安全层是否已协商的示例。
                        </p><pre class="codeblock"><code>
String qop = (String) sc.getNegotiatedProperty(Sasl.QOP);
boolean hasSecurityLayer = (qop != null &amp;&amp; 
    (qop.equals("auth-int") || qop.equals("auth-conf")));
</code></pre><p>如果安全层已经协商过， <a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><code class="codeph">Sasl.QOP</code></a>属性表示已协商完整性和/或机密性。
                        </p>
                        <p>为了使用协商层与对等方进行通信，应用程序首先使用<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html#wrap-byte:A-int-int-" target="_blank"><code class="codeph">wrap</code></a>对要发送到对等方的数据进行编码以生成“包装”缓冲区的方法。然后，它将代表打包后的缓冲区中的八位位组数的长度字段，然后是打包后的缓冲区的内容传输到对等方。接收八位字节流的对等点将缓冲区（没有长度字段）传递给<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/SaslClient.html#unwrap-byte:A-int-int-" target="_blank"><code class="codeph">unwrap</code></a>获取对等体发送的解码字节。<a href="http://www.ietf.org/rfc/rfc2222.txt" target="_blank">RFC 2222</a>中描述了此协议的详细信息。<a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-762BDD49-6EE8-419C-A45E-540462CB192B__SAMPLECODEFORSASLCLIENTSENDANDRECEI-7547A249">例11-1</a>说明了客户端应用程序如何使用安全层发送和接收应用程序数据。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="example" id="GUID-762BDD49-6EE8-419C-A45E-540462CB192B__SAMPLECODEFORSASLCLIENTSENDANDRECEI-7547A249">
                        <p class="titleinexample">示例11-1 SASL客户端发送和接收数据的示例代码</p><pre class="codeblock"><code>
// Send outgoing application data to peer
byte[] outgoing = ...;
byte[] netOut = sc.wrap(outgoing, 0, outgoing.length);

send(netOut.length, netOut);   // send to peer

// Receive incoming application data from peer
byte[] netIn = receive();      // read length and ensuing bytes from peer

byte[] incoming = sc.unwrap(netIn, 0, netIn.length);
</code></pre></div>
                     <!-- class="example" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-93982F1C-AFFE-47B9-B4BA-41551ECCE2D2" name="GUID-93982F1C-AFFE-47B9-B4BA-41551ECCE2D2"></a><h3 id="JSSEC-GUID-93982F1C-AFFE-47B9-B4BA-41551ECCE2D2" class="sect3">如何安装和选择SASL机制</h3>
               <div>
                  <p>SASL机制实现由SASL安全提供程序提供。每个提供程序可以支持一个或多个SASL机制，并已在JCA中注册。</p>
                  <div class="section">默认情况下，SunSASL提供程序会自动注册为JCA提供程序。要删除它或重新排列其作为JCA提供者的优先级，请更改以下行<pre class="codeblock"><code>security.provider.7=SunSASL</code></pre><p>在Java安全属性文件中（ <code><span class="variable" translate="no">java-home</span>/conf/security/java.security</code> ）。
                     </p>
                     <p>要添加或删除SASL提供程序，请在安全属性文件中添加或删除相应的行。例如，如果要添加SASL提供程序，并选择其机制而不是SunSASL提供程序实施的机制，则可以在安全属性文件中添加一个编号较小的行。</p><pre class="codeblock"><code>security.provider.7=com.example.MyProvider
security.provider.8=SunSASL</code></pre><p>另外，您也可以使用<code class="codeph">java.security.Security</code>类。例如，以下示例代码注册了<code class="codeph">com.example.MyProvider</code>到可用的SASL安全提供程序列表。
                     </p><pre class="codeblock"><code>Security.addProvider(new com.example.MyProvider());
</code></pre><p>有关将提供程序添加到安全属性文件以及以编程方式添加自己的提供<a href="howtoimplaprovider.html#GUID-CC161921-EBD2-48C6-B543-A956658B68B6" title="Follow these steps to implement a provider and integrate it into the JCA framework:">程序</a>的更多信息，请参见<a href="howtoimplaprovider.html#GUID-FB9C6DB2-DE9A-4EFE-89B4-C2C168C5982D" title="The next steps describe how to install and configure your new provider so that it is available via the JCA.">步骤8：准备</a> <a href="howtoimplaprovider.html#GUID-CC161921-EBD2-48C6-B543-A956658B68B6" title="请遵循以下步骤来实现提供程序并将其集成到JCA框架中：">和集成提供程序的步骤中的</a> <a href="howtoimplaprovider.html#GUID-FB9C6DB2-DE9A-4EFE-89B4-C2C168C5982D" title="后续步骤描述了如何安装和配置新的提供程序，以便可以通过JCA使用它。">测试准备</a> 。
                     </p>
                     <p>当应用程序通过提供一个或多个机制名称来请求SASL机制时，SASL框架将按顺序查看注册提供者的列表，以查找支持该机制的注册SASL提供者。然后，提供者必须确定请求的机制是否与<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html" target="_blank"><code class="codeph">Sasl</code></a>如果是，则返回该机制的实现。
                     </p>
                     <p>选择策略属性指定了机制的安全性，例如其对某些攻击的敏感性。这些是机制（定义）的特征，而不是机制的实施，因此所有提供者都应就特定机制得出相同的结论。例如，不管PLAIN机制如何实现，都容易受到纯文本攻击。如果没有提供选择策略属性，则对所选机制没有任何限制。使用这些属性，应用程序可以确保它不使用可能在执行环境中部署的不合适的机制。例如，如果应用程序不想允许使用易受纯文本攻击的机制，则可以使用以下示例代码。</p><pre class="codeblock"><code>    Map&lt;String, String&gt; props = new HashMap&lt;&gt;();
    props.put(Sasl.POLICY_NOPLAINTEXT, "true");
    SaslClient sc = Sasl.createSaslClient(
        mechanisms, authzid, protocol, serverName, props, callbackHandler);
</code></pre></div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-2F50B103-FE9F-459F-9EC5-B708358A7B59" name="GUID-2F50B103-FE9F-459F-9EC5-B708358A7B59"></a><h3 id="JSSEC-GUID-2F50B103-FE9F-459F-9EC5-B708358A7B59" class="sect3">SunSASL提供程序</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>SunSASL提供程序支持以下客户端和服务器机制：</p>
                     <ul style="list-style-type:disc">
                        <li>客户机制<ul style="list-style-type:disc">
                              <li>普通（ <a href="http://www.ietf.org/rfc/rfc2595.txt" target="_blank">RFC 2595</a> ）。此机制支持明文用户名/密码验证。
                              </li>
                              <li>CRAM-MD5（ <a href="http://www.ietf.org/rfc/rfc2195.txt" target="_blank">RFC 2195</a> ）。此机制支持散列的用户名/密码认证方案。
                              </li>
                              <li>DIGEST-MD5（ <a href="http://www.ietf.org/rfc/rfc2831.txt" target="_blank">RFC 2831</a> ）。此机制定义了如何将HTTP摘要身份验证用作SASL机制。
                              </li>
                              <li>外部（ <a href="http://www.ietf.org/rfc/rfc2222.txt" target="_blank">RFC 2222</a> ）。此机制从外部通道（例如TLS或IPsec）获取身份验证信息。
                              </li>
                              <li>NTLM。此机制支持NTLM身份验证。</li>
                           </ul> 
                        </li>
                        <li>服务器机制<ul style="list-style-type:disc">
                              <li>CRAM-MD5</li>
                              <li>DIGEST-MD5</li>
                              <li>NTLM</li>
                           </ul> 
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177" name="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177"></a><h4 id="JSSEC-GUID-681CD78D-D2E4-43DE-9225-249AA83FF177" class="sect4">SunSASL提供程序客户端机制</h4>
                  <div>
                     <p>SunSASL提供程序支持流行协议（例如LDAP，IMAP和SMTP）中使用的几种SASL客户端机制。</p>
                     <div class="section">
                        <p>下表总结了客户端机制及其所需的输入。</p>
                        <div class="tblformalwide" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-1D69316D-2076-406F-B36F-A36E7FF429FA">
                           <p class="titleintable">表11-1 SunSASL提供程序客户端机制</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="SunSASL提供程序客户端机制" width="100%" border="1" summary="List of SunSASL Provider Client Mechanisms" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e423">客户机制名称</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e425">参数/输入</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e427">回呼</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e429">配置属性</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e431">选拔政策</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e435" headers="d138937e423 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__CRAM-MD5-20E3E27A">CRAM-MD5</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e435 d138937e425 ">授权ID（作为默认用户名）</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e435 d138937e427 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">名称回调</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e435 d138937e429 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e435 d138937e431 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e466" headers="d138937e423 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__DIGEST-MD5-20E3E4D3">DIGEST-MD5</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e466 d138937e425 ">
                                       <p>授权编号</p> 
                                       <p>协议ID</p> 
                                       <p>服务器名称</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e466 d138937e427 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">名称回调</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmCallback.html" target="_blank"><span class="apiname">RealmCallback</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmChoiceCallback.html" target="_blank"><span class="apiname">RealmChoiceCallback</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e466 d138937e429 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#STRENGTH" target="_blank"><span class="apiname">Sasl。强度</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#MAX_BUFFER" target="_blank"><span class="apiname">Sasl。MAX_BUFFER</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#SERVER_AUTH" target="_blank"><span class="apiname">Sasl。SERVER_AUTH</span></a></p>
                                       <p><code class="codeph">javax.security.sasl.sendmaxbuffer</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.digest.cipher</code></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e466 d138937e431 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e539" headers="d138937e423 ">外部</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e539 d138937e425 ">
                                       <p>授权编号</p> 
                                       <p>外部渠道</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e539 d138937e427 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e539 d138937e429 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e539 d138937e431 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOACTIVE" target="_blank"><span class="apiname">Sasl。POLICY_NOACTIVE</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NODICTIONARY" target="_blank"><span class="apiname">Sasl。POLICY_NODICTIONARY</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e568" headers="d138937e423 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__NTLM-2319A6BE">NTLM</a></td>
                                    <td align="left" valign="top" headers="d138937e568 d138937e425 ">
                                       <p>authzId（作为默认用户名）</p>
                                       <p>serverName（作为默认域）</p>
                                    </td>
                                    <td align="left" valign="top" headers="d138937e568 d138937e427 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmCallback.html" target="_blank"><span class="apiname">RealmCallback</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">名称回调</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                    </td>
                                    <td align="left" valign="top" headers="d138937e568 d138937e429 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.version</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.random</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.hostname</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d138937e568 d138937e431 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e619" headers="d138937e423 ">普通</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e619 d138937e425 ">授权编号</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e619 d138937e427 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><code class="codeph">NameCallback</code></a></p> 
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e619 d138937e429 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e619 d138937e431 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><code class="codeph">Sasl.POLICY_NOANONYMOUS</code></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>使用SunSASL提供程序中的这些机制的应用程序必须提供所需的参数，回调和属性。这些属性具有合理的默认值，仅在应用程序要覆盖默认值时才需要设置。API文档中介绍了大多数参数，回调和属性。以下各节描述了API文档中尚未涵盖的特定于机制的行为和参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__CRAM-MD5-20E3E27A">
                        <p class="subhead3" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-CC2EDE3B-FDFF-4AA0-AE8A-8F8E2CEC4D49">补习班-MD5</p>
                        <p>Cram-MD5客户端机制使用授权ID参数（如果提供）作为服务器中的默认用户名。 <code class="codeph">NameCallback</code>向应用程序/最终用户请求身份验证ID。否则，Cram-MD5机制不使用授权ID。与服务器仅交换身份验证ID。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__DIGEST-MD5-20E3E4D3">
                        <p class="subhead3" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-87F13CC9-023E-4169-A4A0-B81D4B976308">文摘-MD5</p>
                        <p>Digest-MD5机制用于摘要身份验证和可选的安全层建立。它指定了用于安全层的以下密码：三重DES，DES和RC4（128、56和40位）。Digest-MD5机制只能支持平台上可用的密码。例如，如果平台不支持RC4密码，则Digest-MD5机制将不使用这些密码。</p>
                        <p>的<code class="codeph">Sasl.STRENGTH</code>财产支持<code class="codeph">high</code> ， <code class="codeph">medium</code>和<code class="codeph">low</code>设置;它的默认值为<code class="codeph">high,medium,low</code> 。密码映射到强度设置，如下所示：</p>
                        <div class="tblformalwide" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-F294490C-564E-4074-BE8B-B011BD34F308">
                           <p class="titleintable">表11-2密码强度</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="密码强度" width="100%" border="1" summary="List of Cipher strength " frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e686">强度</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e688">密码</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e690">密码ID</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e694" headers="d138937e686 ">高</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e694 d138937e688 ">三重DES<p>RC4 128位</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e694 d138937e690 ">3des rc4</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e703" headers="d138937e686 ">介质</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e703 d138937e688 ">DES<p>RC4 56位</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e703 d138937e690 ">des rc4-56</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e712" headers="d138937e686 ">低</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e712 d138937e688 ">RC4 40位</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e712 d138937e690 ">rc4-40</td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>当特定强度有多个选择时，所选密码取决于基础平台中密码的可用性。要明确命名要使用的密码，请设置<code class="codeph">com.sun.security.sasl.digest.cipher</code>属性对应的密码ID。请注意，此属性设置必须与<code class="codeph">Sasl.STRENGTH</code>以及底层平台中可用的密码。例如， <code class="codeph">Sasl.STRENGTH</code>被设置为<code class="codeph">low</code>和<code class="codeph">com.sun.security.sasl.digest.cipher</code>被设置为<code class="codeph">3des</code>不兼容。的<code class="codeph">com.sun.security.sasl.digest.cipher</code>属性没有默认值。
                        </p>
                        <p>的<code class="codeph">javax.security.sasl.sendmaxbuffer</code>属性指定最大发送缓冲区大小（的字符串表示形式），以字节为单位。默认值为65536。实际的最大字节数将是该数目与对等方的最大接收缓冲区大小之间的最小值。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__NTLM-2319A6BE">
                        <p class="subhead3" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-E9078C0D-92EF-406C-8B36-76ACEA93A8C2">NTLM</p>
                        <div class="infoboxnote" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-4D1CC0B8-4639-4805-AEF7-C774E8AD23D4">
                           <p class="notep1">注意：</p>
                           <p>本节适用于NTLM客户端机制和NTLM服务器机制。</p>
                        </div>
                        <p>NT LAN Manager（NTLM）是Microsoft的一种安全协议，用于访问其各种服务，例如IIS Web Server和Exchange Mail Server。作为SASL机制，它可以用于访问Microsoft Exchange Server。这对于使用NTLM方案进行HTTP身份验证也很有用。</p>
                        <p>NTLM机制用于NTLM身份验证。它不提供安全层。这意味着您只能设置<code class="codeph">javax.security.sasl.qop</code>环境财产<code class="codeph">auth</code> 。
                        </p>
                        <p>如果LMCompatibilityLevel注册表值在服务器上设置为高值，则不支持某些低值请求。但是，服务器没有协议可通知客户端使用更高版本，因此用户必须在客户端手动选择正确的版本。</p>
                        <p>将系统属性<span class="apiname">ntlm.debug</span>设置为任何值以打开调试</p>
                        <p>在机制创建时或通过回调提供以下信息：</p>
                        <div class="tblformalwide" id="GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__GUID-5B82E4DA-2BED-4FD0-B054-705FBEF1D69F">
                           <p class="titleintable">表11-3 NTLM必需信息</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="NTLM必需信息" width="100%" border="1" summary="NTLM required information to provide at mechanism creation or through callbacks" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th align="left" valign="bottom" id="d138937e784">信息</th>
                                    <th align="left" valign="bottom" id="d138937e786">类型</th>
                                    <th align="left" valign="bottom" id="d138937e788">必需或可选</th>
                                    <th align="left" valign="bottom" id="d138937e790">描述</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e794" headers="d138937e784 ">名称</td>
                                    <td align="left" valign="top" headers="d138937e794 d138937e786 "><span class="apiname">串</span></td>
                                    <td align="left" valign="top" headers="d138937e794 d138937e788 ">需要</td>
                                    <td align="left" valign="top" headers="d138937e794 d138937e790 ">通过<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">NameCallback</span></a>提供，其中<span class="apiname">authzid</span>输入参数为默认值</td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e812" headers="d138937e784 ">密码</td>
                                    <td align="left" valign="top" headers="d138937e812 d138937e786 "><span class="apiname">字符[]</span></td>
                                    <td align="left" valign="top" headers="d138937e812 d138937e788 ">需要</td>
                                    <td align="left" valign="top" headers="d138937e812 d138937e790 ">通过<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">PasswordCallback</span></a>提供<p>如果密码包含非ASCII字符，则原始LM版本可能会失败。在这种情况下，请勿选择<span class="apiname">LM</span>作为版本。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e831" headers="d138937e784 ">域</td>
                                    <td align="left" valign="top" headers="d138937e831 d138937e786 "><span class="apiname">串</span></td>
                                    <td align="left" valign="top" headers="d138937e831 d138937e788 ">可选的</td>
                                    <td align="left" valign="top" headers="d138937e831 d138937e790 ">
                                       <p>通过<a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmCallback.html" target="_blank"><span class="apiname">RealmCallback</span></a>提供，其中<span class="apiname">serverName</span>输入参数为默认值。
                                       </p>
                                       <p>客户端提供的域用于创建Type 1消息。协商财产<code class="codeph">com.sun.security.sasl.ntlm.domain</code>由服务器的Type 2消息确定。
                                       </p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e855" headers="d138937e784 ">NTLM版本</td>
                                    <td align="left" valign="top" headers="d138937e855 d138937e786 "><span class="apiname">串</span></td>
                                    <td align="left" valign="top" headers="d138937e855 d138937e788 ">可选的</td>
                                    <td align="left" valign="top" headers="d138937e855 d138937e790 ">
                                       <p>指定要使用的特定版本。通过提供<code class="codeph">com.sun.security.sasl.ntlm.version</code>属性。它可以具有以下值之一：</p>
                                       <ul style="list-style-type:disc">
                                          <li><code class="codeph">LM/NTLM</code> ：原始NTLM v1</li>
                                          <li><code class="codeph">LM</code> ：原始NTLM v1，仅限LM</li>
                                          <li><code class="codeph">NTLM</code> ：原始NTLM v1，仅NTLM</li>
                                          <li><code class="codeph">NTLM2</code> ：具有客户挑战的NTLM v1</li>
                                          <li><code class="codeph">LMv2/NTLMv2</code> ：NTLM v2</li>
                                          <li><code class="codeph">LMv2</code> ：NTLM v2，仅LM</li>
                                          <li><code class="codeph">NTLMv2</code> ：NTLM v2，仅NTLM</li>
                                       </ul>
                                       <p>如果未提供，则使用系统属性<span class="apiname">ntlm.version</span> 。如果仍未提供，则该值<code class="codeph">LMv2/NTLMv2</code>使用，并且在服务器端，所有值都被接受。
                                       </p>
                                       <p>注意：这些类型仅在客户端不同。在服务器端，由于仅验证LM（或LMv2）或NTLM（或NTLMv2）中的一个即可成功进行身份验证，因此前三种类型实际上是相同的；请参见图5。对于后三种类型也是如此。</p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e908" headers="d138937e784 ">主机名</td>
                                    <td align="left" valign="top" headers="d138937e908 d138937e786 "><span class="apiname">串</span></td>
                                    <td align="left" valign="top" headers="d138937e908 d138937e788 ">可选的</td>
                                    <td align="left" valign="top" headers="d138937e908 d138937e790 ">通过提供<code class="codeph">com.sun.security.sasl.ntlm.hostname</code>属性，该属性将发送到服务器。如果未提供，则系统将自动导出主机名。此属性仅在客户端使用。
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e921" headers="d138937e784 ">随机来源</td>
                                    <td align="left" valign="top" headers="d138937e921 d138937e786 "><span class="apiname">java.util。随机</span></td>
                                    <td align="left" valign="top" headers="d138937e921 d138937e788 ">可选的</td>
                                    <td align="left" valign="top" headers="d138937e921 d138937e790 ">用作随机数源以得出随机数字节。通过提供<code class="codeph">com.sun.security.sasl.ntlm.random</code>属性。如果未提供， <span class="apiname">则为内部<span class="apiname">java.util。使用随机</span>对象。
                                    </span></td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>身份验证后，客户端将收到一个名为的协商属性<code class="codeph">com.sun.security.sasl.html.domain</code> ，由服务器提供，服务器将收到一个名为的协商属性<code class="codeph">com.sun.security.sasl.ntlm.hostname</code> ，这是客户端用来访问该服务器的主机名。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9" name="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9"></a><h4 id="JSSEC-GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9" class="sect4">SunSASL提供程序服务器机制</h4>
                  <div>
                     <p>SunSASL提供程序支持流行协议（例如LDAP，IMAP和SMTP）中使用的几种SASL服务器机制。</p>
                     <div class="section">
                        <p>下表总结了服务器机制和所需的输入：</p>
                        <div class="tblformalwide" id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__GUID-FD50A5C2-E577-4CFC-AF11-5324E08ACA0A">
                           <p class="titleintable">表11-4服务器机制</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="服务器机制" width="100%" border="1" summary="The server mechanisms and the required input" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e969">服务器机制名称</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e971">参数/输入</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e973">回呼</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e975">配置属性</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e977">选拔政策</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e981" headers="d138937e969 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__CRAM-MD5-20E4303C">CRAM-MD5</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e981 d138937e971 ">服务器名称</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e981 d138937e973 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/AuthorizeCallback.html" target="_blank"><span class="apiname">AuthorizeCallback</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">名称回调</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e981 d138937e975 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e981 d138937e977 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1017" headers="d138937e969 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__DIGEST-MD5-20E43288">DIGEST-MD5</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1017 d138937e971 ">协议ID<p>服务器名称</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1017 d138937e973 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/AuthorizeCallback.html" target="_blank"><span class="apiname">AuthorizeCallback</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">名称回调</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmCallback.html" target="_blank"><span class="apiname">RealmCallback</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1017 d138937e975 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#STRENGTH" target="_blank"><span class="apiname">Sasl。强度</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#MAX_BUFFER" target="_blank"><span class="apiname">Sasl。MAX_BUFFER</span></a></p>
                                       <p><code class="codeph">javax.security.sasl.sendmaxbuffer</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.digest.realm</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.digest.utf8</code></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1017 d138937e977 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                                 <tr align="left" valign="top">
                                    <td align="left" valign="top" id="d138937e1083" headers="d138937e969 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-681CD78D-D2E4-43DE-9225-249AA83FF177__NTLM-2319A6BE">NTLM</a> 
                                    </td>
                                    <td align="left" valign="top" headers="d138937e1083 d138937e971 ">serverName（作为域，可以被属性覆盖）</td>
                                    <td align="left" valign="top" headers="d138937e1083 d138937e973 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/RealmCallback.html" target="_blank"><span class="apiname">RealmCallback</span></a> ，提供请求用户的域</p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/NameCallback.html" target="_blank"><span class="apiname">NameCallback</span></a> ，提供请求用户的名称</p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/callback/PasswordCallback.html" target="_blank"><span class="apiname">密码回拨</span></a></p>
                                    </td>
                                    <td align="left" valign="top" headers="d138937e1083 d138937e975 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.random</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.version</code></p>
                                       <p><code class="codeph">com.sun.security.sasl.ntlm.domain</code></p>
                                    </td>
                                    <td align="left" valign="top" headers="d138937e1083 d138937e977 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>使用SunSASL提供程序中的这些机制的应用程序必须提供所需的参数，回调和属性。这些属性具有合理的默认值，仅在应用程序要覆盖默认值时才需要设置。</p>
                        <p>服务器机制的所有用户都必须具有处理以下内容的回调处理程序： <code class="codeph">AuthorizeCallback</code> 。该机制使用它来确定是否允许经过身份验证的用户代表所请求的授权id进行操作，还可以获取已授权用户的规范化名称（如果可以进行规范化）。
                        </p>
                        <p>API文档中介绍了大多数参数，回调和属性。以下各节描述了API文档中尚未涵盖的特定于机制的行为和参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__CRAM-MD5-20E4303C">
                        <p class="subhead3" id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__GUID-ED89A540-EC5E-4D2D-861F-18DE60F62612">补习班-MD5</p>
                        <p>Cram-MD5服务器机制使用<code class="codeph">NameCallback</code>和<code class="codeph">PasswordCallback</code>获取验证SASL客户端响应所需的密码。回调处理程序应使用<code class="codeph">NameCallback.getDefaultName()</code>作为获取密码的密钥。
                        </p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__DIGEST-MD5-20E43288">
                        <p class="subhead3" id="GUID-0D61D8E5-31E8-4F26-9BD2-9AF92F5318F9__GUID-38384617-6CF4-4112-BEDA-B80A0C773A3A">文摘-MD5</p>
                        <p>Digest-MD5服务器机制使用<code class="codeph">RealmCallback</code> ， <code class="codeph">NameCallback</code>和<code class="codeph">PasswordCallback</code>获取验证SASL客户端响应所需的密码。回调处理程序应使用<code class="codeph">RealmCallback.getDefaultText()</code>和<code class="codeph">NameCallback.getDefaultName()</code>作为获取密码的键。
                        </p>
                        <p>的<code class="codeph">javax.security.sasl.sendmaxbuffer</code>属性指定最大发送缓冲区大小（的字符串表示形式），以字节为单位。默认值为65536。实际的最大字节数将是该数目与对等方的最大接收缓冲区大小之间的最小值。
                        </p>
                        <p>的<code class="codeph">com.sun.security.sasl.digest.realm</code>属性用于指定服务器支持的以空格分隔的领域名称的列表。该列表将作为质询的一部分发送给客户端。如果尚未设置此属性，则默认域是服务器的名称（作为参数提供）。
                        </p>
                        <p>c <code class="codeph">om.sun.security.sasl.digest.utf8</code>属性用于指定要使用的字符编码。价值<code class="codeph">true</code>使用UTF-8编码的方式；价值<code class="codeph">false</code>表示使用ISO拉丁语1（ISO-8859-1）。默认值为<code class="codeph">true</code> 。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-B6A1E089-0C59-413F-ABF6-E73F44F89E6A" name="GUID-B6A1E089-0C59-413F-ABF6-E73F44F89E6A"></a><h3 id="JSSEC-GUID-B6A1E089-0C59-413F-ABF6-E73F44F89E6A" class="sect3">JdkSASL提供程序</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>JdkSASL提供程序支持以下客户端和服务器机制：</p>
                     <ul style="list-style-type:disc">
                        <li>客户机制<ul style="list-style-type:disc">
                              <li>GSSAPI（ <a href="http://www.ietf.org/rfc/rfc2222.txt" target="_blank">RFC 2222</a> ）。该机制使用<a href="http://www.ietf.org/rfc/rfc2078.txt" target="_blank">GSSAPI</a>来获取认证信息。它支持Kerberos v5身份验证。
                              </li>
                           </ul> 
                        </li>
                        <li>服务器机制<ul style="list-style-type:disc">
                              <li>GSSAPI（Kerberos v5）</li>
                           </ul> 
                        </li>
                     </ul>
                  </div>
                  <!-- class="section" -->
               </div>
               <div class="sect3"><a id="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971" name="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971"></a><h4 id="JSSEC-GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971" class="sect4">JdkSASL提供程序客户端机制</h4>
                  <div>
                     <p>JdkSASL提供程序支持在流行的协议（例如LDAP，IMAP和SMTP）中使用的GSSAPI客户端机制。</p>
                     <div class="section">
                        <p>下表总结了GSSAPI客户端机制及其所需的输入。</p>
                        <div class="tblformalwide" id="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GUID-1D69316D-2076-406F-B36F-A36E7FF429FA">
                           <p class="titleintable">表11-5 JdkSASL提供程序客户端机制</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="JdkSASL提供程序客户端机制" width="100%" border="1" summary="JdkSASL Provider GSSAPI Client Mechanism" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1257">客户机制名称</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1259">参数/输入</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1261">回呼</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1263">配置属性</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1265">选拔政策</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1269" headers="d138937e1257 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GSSAPI-20E4086B">GSSAPI</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1269 d138937e1259 ">JAAS主题<p>授权编号</p>
                                       <p>协议ID</p>
                                       <p>服务器名称</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1269 d138937e1261 ">没有</td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1269 d138937e1263 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#MAX_BUFFER" target="_blank"><span class="apiname">Sasl。MAX_BUFFER</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#SERVER_AUTH" target="_blank"><span class="apiname">Sasl。SERVER_AUTH</span></a></p>
                                       <p> <code class="codeph">javax.security.sasl.sendmaxbuffer</code></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1269 d138937e1265 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOACTIVE" target="_blank"><span class="apiname">Sasl。POLICY_NOACTIVE</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>使用来自JdkSASL提供程序的GSSAPI机制的应用程序必须提供所需的参数，回调和属性。这些属性具有合理的默认值，仅在应用程序要覆盖默认值时才需要设置。API文档中介绍了大多数参数，回调和属性。以下部分描述了API文档中尚未涵盖的其他GSSAPI行为和参数。</p>
                     </div>
                     <!-- class="section" -->
                     <div class="section" id="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GSSAPI-20E4086B">
                        <p class="subhead3" id="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GUID-C2F69149-8586-4873-ACFA-77680A84DB66">GSSAPI</p>
                        <div class="infoboxnote" id="GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GUID-1B681CA8-3E44-42D6-8391-D6BEA10FB863">
                           <p class="notep1">注意：</p>
                           <p>就Kerberos凭证和<span class="apiname">javax.security.sasl.sendmaxbuffer</span>属性而言，GSSAPI服务器机制与GSSAPI客户端机制具有相同的要求。
                           </p>
                        </div>
                        <p>GSSAPI机制用于Kerberos v5身份验证和可选的安全层建立。该机制期望调用线程的<code class="codeph">Subject</code>包含客户端的Kerberos凭据，或者可以通过隐式登录Kerberos获得该凭据。要获取客户端的Kerberos凭据，请使用Java身份验证和授权服务（JAAS）通过Kerberos登录模块登录。有关详细信息和示例，请参见JDK 8文档中的<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/index.html" target="_blank">JAAS简介和Java GSS-API教程</a> 。使用JAAS身份验证获取Kerberos凭据后，将使用SASL GSSAPI机制的代码放入<code class="codeph">doAs</code>要么<code class="codeph">doAsPrivileged</code> 。
                        </p><pre class="codeblock"><code>LoginContext lc = new LoginContext("JaasSample", new TextCallbackHandler());
lc.login();
lc.getSubject().doAs(new SaslAction());

class SaslAction implements java.security.PrivilegedAction&lt;Void&gt; {
   public Void run() {
       // ...
       String[] mechanisms = new String[]{"GSSAPI"};
       SaslClient sc = Sasl.createSaslClient(
           mechanisms, authzid, protocol, serverName, props, callbackHandler);
       // ...
   }
}
</code></pre><p>要获得Kerberos凭据而不进行显式的JAAS编程，请参阅JDK 8文档中的<a href="https://docs.oracle.com/javase/8/docs/technotes/guides/security/jgss/tutorials/BasicClientServer.html" target="_blank">使用Java GSS-API进行不使用JAAS编程的安全消息交换</a> 。使用这种方法时，无需将代码包装在其中<code class="codeph">doAs</code>要么<code class="codeph">doAsPrivileged</code></p>
                        <p>的<code class="codeph">javax.security.sasl.sendmaxbuffer</code>属性指定最大发送缓冲区大小（的字符串表示形式），以字节为单位。默认值为65536。实际的最大字节数将是该数目与对等方的最大接收缓冲区大小之间的最小值。
                        </p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
               <div class="sect3"><a id="GUID-F815A77D-744E-4914-9963-886A1B10FC3C" name="GUID-F815A77D-744E-4914-9963-886A1B10FC3C"></a><h4 id="JSSEC-GUID-F815A77D-744E-4914-9963-886A1B10FC3C" class="sect4">JdkSASL提供程序服务器机制</h4>
                  <div>
                     <p>JdkSASL提供程序支持在流行的协议（例如LDAP，IMAP和SMTP）中使用的GSSAPI机制。</p>
                     <div class="section">
                        <p>下表总结了GSSAPI服务器机制和所需的输入：</p>
                        <div class="tblformalwide" id="GUID-F815A77D-744E-4914-9963-886A1B10FC3C__GUID-FD50A5C2-E577-4CFC-AF11-5324E08ACA0A">
                           <p class="titleintable">表11-6服务器机制</p>
                           <table cellpadding="4" cellspacing="0" class="FormalWide" title="服务器机制" width="100%" border="1" summary="The GSSAPI server mechanism and the required input" frame="hsides" rules="rows">
                              <thead>
                                 <tr align="left" valign="top">
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1388">服务器机制名称</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1390">参数/输入</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1392">回呼</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1394">配置属性</th>
                                    <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1396">选拔政策</th>
                                 </tr>
                              </thead>
                              <tbody>
                                 <tr align="left" valign="top">
                                    <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1400" headers="d138937e1388 "><a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-6B2412AB-D5BC-4C8A-9DA7-515E32DDE971__GSSAPI-20E4086B">GSSAPI</a></td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1400 d138937e1390 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/auth/Subject.html" target="_blank"><span class="apiname">学科</span></a></p>
                                       <p>协议ID</p>
                                       <p>服务器名称</p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1400 d138937e1392 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/AuthorizeCallback.html" target="_blank"><span class="apiname">AuthorizeCallback</span></a></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1400 d138937e1394 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#QOP" target="_blank"><span class="apiname">Sasl。质量保证</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#MAX_BUFFER" target="_blank"><span class="apiname">Sasl。MAX_BUFFER</span></a></p>
                                       <p><code class="codeph">javax.security.sasl.sendmaxbuffer</code></p>
                                    </td>
                                    <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1400 d138937e1396 ">
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOACTIVE" target="_blank"><span class="apiname">Sasl。POLICY_NOACTIVE</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOANONYMOUS" target="_blank"><span class="apiname">Sasl。POLICY_NOANONYMOUS</span></a></p>
                                       <p><a href="https://docs.oracle.com/javase/10/docs/api/javax/security/sasl/Sasl.html#POLICY_NOPLAINTEXT" target="_blank"><span class="apiname">Sasl。POLICY_NOPLAINTEXT</span></a></p>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                        <!-- class="inftblhruleinformal" -->
                        <p>使用来自JdkSASL提供程序的GSSAPI机制的应用程序必须提供所需的参数，回调和属性。这些属性具有合理的默认值，仅在应用程序要覆盖默认值时才需要设置。</p>
                        <p>服务器机制的所有用户都必须具有处理以下内容的回调处理程序： <code class="codeph">AuthorizeCallback</code> 。该机制使用它来确定是否允许经过身份验证的用户代表请求的授权id进行操作，还可以获取已授权用户的规范化名称（如果可以进行规范化）。
                        </p>
                        <p>API文档中介绍了大多数参数，回调和属性。</p>
                     </div>
                     <!-- class="section" -->
                  </div>
               </div>
            </div>
            <div class="sect2"><a id="GUID-10BCFA2D-E33C-4A11-BDD4-012B5713F430" name="GUID-10BCFA2D-E33C-4A11-BDD4-012B5713F430"></a><h3 id="JSSEC-GUID-10BCFA2D-E33C-4A11-BDD4-012B5713F430" class="sect3">调试与监控</h3>
               <div>
                  <p></p>
                  <div class="section">
                     <p>SunSASL和JdkSASL提供程序使用Logging API提供实施日志输出。可以使用日志记录配置文件和编程API（ <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/package-summary.html" target="_blank"><span class="apiname">java.util.logging</span></a> ）控制此输出。SunSASL提供程序使用的记录器名称为<code class="codeph">javax.security.sasl</code> 。这是一个示例日志记录配置文件，可用于启用<code class="codeph">FINEST</code> SunSASL提供程序的日志记录级别：</p><pre class="codeblock"><code>javax.security.sasl.level=FINEST
handlers=java.util.logging.ConsoleHandler
java.util.logging.ConsoleHandler.level=FINEST
</code></pre><p>下表显示了机制以及它们生成的日志记录输出：</p>
                     <div class="tblformalwide" id="GUID-10BCFA2D-E33C-4A11-BDD4-012B5713F430__GUID-767DB7F7-241D-465E-AEFC-D91959675CEE">
                        <p class="titleintable">表11-7日志输出</p>
                        <table cellpadding="4" cellspacing="0" class="FormalWide" title="记录输出" width="100%" border="1" summary="List of mechanisms and the logging output that they generate." frame="hsides" rules="rows">
                           <thead>
                              <tr align="left" valign="top">
                                 <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1496">机制</th>
                                 <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1498">记录级别</th>
                                 <th rowspan="1" colspan="1" align="left" valign="bottom" id="d138937e1500">信息记录</th>
                              </tr>
                           </thead>
                           <tbody>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1504" headers="d138937e1496 ">CRAM-MD5</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1504 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINE" target="_blank"><span class="apiname">精细</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1504 d138937e1500 ">配置属性；质询/响应消息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1514" headers="d138937e1496 ">DIGEST-MD5</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1514 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#INFO" target="_blank"><span class="apiname">信息</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1514 d138937e1500 ">由于编码问题（例如，MAC不匹配，填充错误）而丢弃的消息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1524" headers="d138937e1496 ">DIGEST-MD5</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1524 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINE" target="_blank"><span class="apiname">精细</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1524 d138937e1500 ">配置属性；质询/响应消息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1534" headers="d138937e1496 ">DIGEST-MD5</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1534 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINER" target="_blank"><span class="apiname">罚款</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1534 d138937e1500 ">有关质询/响应消息的更多详细信息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1544" headers="d138937e1496 ">DIGEST-MD5</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1544 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINEST" target="_blank"><span class="apiname">最好的</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1544 d138937e1500 ">在安全层交换的缓冲区</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1554" headers="d138937e1496 ">GSSAPI</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1554 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINE" target="_blank"><span class="apiname">精细</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1554 d138937e1500 ">配置属性；质询/响应消息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1564" headers="d138937e1496 ">GSSAPI</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1564 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINER" target="_blank"><span class="apiname">罚款</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1564 d138937e1500 ">有关质询/响应消息的更多详细信息</td>
                              </tr>
                              <tr align="left" valign="top">
                                 <td rowspan="1" colspan="1" align="left" valign="top" id="d138937e1574" headers="d138937e1496 ">GSSAPI</td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1574 d138937e1498 "><a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.logging/java/util/logging/Level.html#FINEST" target="_blank"><span class="apiname">最好的</span></a></td>
                                 <td rowspan="1" colspan="1" align="left" valign="top" headers="d138937e1574 d138937e1500 ">在安全层交换的缓冲区</td>
                              </tr>
                           </tbody>
                        </table>
                     </div>
                     <!-- class="inftblhruleinformal" -->
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
            <div class="sect2"><a id="GUID-A21D50AD-3730-4FE6-A13B-75529607E068" name="GUID-A21D50AD-3730-4FE6-A13B-75529607E068"></a><h3 id="JSSEC-GUID-A21D50AD-3730-4FE6-A13B-75529607E068" class="sect3">实施SASL安全提供程序</h3>
               <div>
                  <p></p>
                  <div class="section">实施SASL安全提供程序的三个基本步骤：</div>
                  <!-- class="section" -->
                  <ol>
                     <li class="stepexpand"><span>写一个实现<code class="codeph">SaslClient</code>要么<code class="codeph">SaslServer</code>接口。</span><div>
                           <p>这涉及提供SASL机制的实现。要实施客户端机制，您需要实施在<code class="codeph">SaslClient</code>接口。同样，对于服务器机制，您需要实现在<code class="codeph">SaslServer</code>接口。为了便于讨论，假设您正在开发由类实现的客户端机制“ SAMPLE-MECH”的实现， <code class="codeph">com.example.SampleMechClient</code> 。您必须确定该机制需要哪些输入以及实现将如何收集它们。例如，如果该机制是基于用户名/密码的，则该实现可能需要通过回调处理程序参数来收集该信息。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>编写一个工厂类（实现<code class="codeph">SaslClientFactory</code>要么<code class="codeph">SaslServerFactory</code> ）创建类的实例。</span><div>
                           <p>这涉及提供一个工厂类，该工厂类将创建<code class="codeph">com.example.SampleMechClient</code> 。工厂需要确定其支持的机制的特征（如<code class="codeph">Sasl.POLICY_*</code>属性），以便当API用户使用兼容的策略属性请求该机制时，它可以返回该机制的实例。在创建机制之前，工厂还可以检查参数的有效性。为了便于讨论，假设工厂类名为<code class="codeph">com.example.MySampleClientFactory</code> 。尽管我们的样本工厂仅负责一种机制，但是单个工厂可以负责多种机制。
                           </p>
                        </div>
                     </li>
                     <li class="stepexpand"><span>编写一个注册工厂的JCA提供程序。</span><div>
                           <p>这涉及创建JCA提供程序。创建<a href="howtoimplaprovider.html#GUID-CC161921-EBD2-48C6-B543-A956658B68B6" title="Follow these steps to implement a provider and integrate it into the JCA framework:">和集成提供程序的步骤</a>中详细描述了创建JCA提供程序的<a href="howtoimplaprovider.html#GUID-CC161921-EBD2-48C6-B543-A956658B68B6" title="请遵循以下步骤来实现提供程序并将其集成到JCA框架中：">步骤</a> 。SASL客户端工厂使用以下格式的属性名称注册<code class="codeph">SaslClientFactory.</code>使用表单的属性名称注册SASL服务器工厂时使用<span class="italic">mechName</span> <code class="codeph">SaslServerFactory.</code> <span class="italic">机名</span></p>
                           <p><span class="italic">mechName</span>是SASL机制的名称。这是返回的<code class="codeph">SaslClient.getMechanismName()</code>和<code class="codeph">SaslServer.getMechanismName()</code> 。继续我们的示例，这是提供者如何注册“ SAMPLE-MECH”机制。
                           </p><pre class="codeblock"><code>    put("SaslClientFactory.SAMPLE-MECH", "com.example.MySampleClientFactory");
</code></pre><p>单个SASL提供程序可能负责许多机制。因此，它可能有许多调用<code class="codeph">put</code>注册相关工厂。然后，可以按照<a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-93982F1C-AFFE-47B9-B4BA-41551ECCE2D2" title="SASL mechanism implementations are provided by SASL security providers. Each provider may support one or more SASL mechanisms and is registered with the JCA.">如何安装和选择SASL机制中</a>所述的说明，将完整的SASL提供程序提供给应用<a href="java-sasl-api-programming-and-deployment-guide1.html#GUID-93982F1C-AFFE-47B9-B4BA-41551ECCE2D2" title="SASL机制实现由SASL安全提供程序提供。每个提供程序可以支持一个或多个SASL机制，并已在JCA中注册。">程序</a> 。
                           </p>
                        </div>
                     </li>
                  </ol>
               </div>
            </div>
         </div>
      </article>
   

</body></html>