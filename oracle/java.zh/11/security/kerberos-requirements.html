<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Kerberos Requirements</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Security Developer’s Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Security Developer’s Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="security-developer-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T08:42:26-07:00">
      
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E94828-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="more-things-you-can-do-java-gss-api-and-jaas.html" title="Previous" type="text/html">
      <link rel="next" href="troubleshooting.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.title" content="Security Developer Guide">
    <meta name="dcterms.isVersionOf" content="SECURITY">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body >
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="more-things-you-can-do-java-gss-api-and-jaas.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="troubleshooting.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">安全开发人员指南</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="java-generic-security-services-java-gss-api1.html" property="item" typeof="WebPage"><span property="name">Java通用安全服务（Java GSS-API）</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="introduction-jaas-and-java-gss-api-tutorials1.html" property="item" typeof="WebPage"><span property="name">JAAS和Java GSS-API教程简介</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">Kerberos要求</li>
            </ol>
            <a id="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998" name="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998"></a>
            
            <h2 id="JSSEC-GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998" class="sect2">Kerberos要求</h2>
         </header>
         <div class="ind">
            <div>
               <p>Kerberos版本5用于本教程中开发的客户端和服务器应用程序的身份验证和安全通信方面。假定读者已经熟悉Kerberos。请参阅<a href="http://web.MIT.edu/kerberos/www/index.html" target="_blank">Kerberos参考文档</a> 。
               </p>
               <p>所有供应商的JDK都内置了JAAS框架以及Java GSS-API方法所需的Kerberos机制。本教程中JAAS身份验证所需的Kerberos LoginModule可能并非在所有供应商的JDK中都可用。我们将使用Oracle JDK提供的用于Kerberos的LoginModule。</p>
               <p>为了运行示例程序，您将需要访问Kerberos安装。如以下各节所述，您可能还需要<code class="codeph">krb5.conf</code> Kerberos配置文件以及该文件位于何处的指示。
               </p>
               <p>与所有Kerberos安装一样，需要Kerberos密钥分发中心（KDC）。它需要包含用于验证Kerberos的用户名和密码。</p>
               <div class="infoboxnote" id="GUID-EAA2758B-3071-4CDA-AEF1-D76F5271E998__GUID-4FC2940F-C2B5-4760-98EC-C22375CB0C22">
                  <p class="notep1">注意：</p>
                  <p>KDC实现是Kerberos安装的一部分，而不是JDK的一部分。</p>
               </div>
               <p>与大多数Kerberos安装一样，Kerberos配置文件<code class="codeph">krb5.conf</code>请咨询以确定默认领域和KDC之类的东西。如果您使用的Kerberos实现不包含<code class="codeph">krb5.conf</code>文件（例如Windows中的文件），您将需要创建一个文件或使用系统属性（如<a href="kerberos-requirements.html#GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7">设置属性以指示默认领域和KDC中所述）</a> 。</p>
            </div>
            <div class="sect2"><a id="GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7" name="GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7"></a><h3 id="JSSEC-GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7" class="sect3">设置属性以指示默认领域和KDC</h3>
               <div>
                  <p>通常，默认领域和该领域的KDC在Kerberos中指示<code class="codeph">krb5.conf</code>配置文件。但是，如果愿意，可以通过设置以下系统属性分别指示域和KDC来指定这些值：</p><pre class="pre codeblock"><code>java.security.krb5.realm
java.security.krb5.kdc</code></pre><p>如果设置这些属性之一，则必须同时设置它们。</p>
                  <p>另请注意，如果您设置了这些属性，则除非进行以下操作，否则无法进行跨域身份验证： <code class="codeph">krb5.conf</code>还提供文件，从中可以获取跨域身份验证所需的其他信息。
                  </p>
                  <p>如果您为这些属性设置值，那么它们将覆盖默认域和在KDC中指定的KDC值<code class="codeph">krb5.conf</code> （如果找到了这样的文件）。的<code class="codeph">krb5.conf</code>如果需要除默认领域和KDC以外的其他项目的值，仍将参考该文件。如果不<code class="codeph">krb5.conf</code>找到文件，然后用于这些项目的默认值是特定于实现的。
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641" name="GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641"></a><h3 id="JSSEC-GUID-0C6413BA-417B-493D-BC89-F9FB90D5E641" class="sect3">找到krb5.conf配置文件</h3>
               <div>
                  <p>Kerberos的基本配置信息是默认领域和默认KDC。如<a href="kerberos-requirements.html#GUID-8B30CD5C-64B6-48DE-9CD5-0E44D3A434A7">设置属性以指示默认领域和KDC中所示</a> ，如果设置属性以指示这些值，则它们不是从<code class="codeph">krb5.conf</code>配置文件。
                  </p>
                  <p>如果未设置这些属性的值，或者需要其他Kerberos配置信息，则尝试在服务器中查找所需的信息。 <code class="codeph">krb5.conf</code>文件。定位算法<code class="codeph">krb5.conf</code>文件如下：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>如果系统属性<code class="codeph">java.security.krb5.conf</code>设置时，假定其值为指定路径和文件名。
                        </p>
                     </li>
                     <li>
                        <p>如果未设置该系统属性值，则在目录中查找配置文件</p>
                        <ul style="list-style-type:disc">
                           <li><code class="codeph"><span class="variable" translate="no"><java-home></span>\conf\security</code> （视窗）</li>
                           <li><code class="codeph"><span class="variable" translate="no"><java-home></span>/conf/security</code> （Solaris，Linux和macOS）</li>
                        </ul>
                        <p>这里<code class="codeph"><span class="variable" translate="no"><java-home></span></code>指的是JDK的安装目录。
                        </p>
                     </li>
                     <li>
                        <p>如果仍然找不到该文件，则尝试按以下步骤查找它：</p>
                        <ul style="list-style-type:disc">
                           <li><code class="codeph">/etc/krb5/krb5.conf</code> （Solaris）</li>
                           <li><code class="codeph">C:\Windows\krb5.ini</code> （视窗）</li>
                           <li><code class="codeph">/etc/krb5.conf</code> （Linux）</li>
                           <li><code>~/Library/Preferences/edu.mit.Kerberos</code> ， <code>/Library/Preferences/edu.mit.Kerberos</code> ， 要么<code>/etc/krb5.conf</code> （苹果系统）</li>
                        </ul>
                     </li>
                     <li>
                        <p>如果仍然找不到该文件，并且要搜索的配置信息<span class="variable" translate="no">not</span>默认领域和KDC，则使用特定于实现的默认值。另一方面，如果要搜索的配置信息是默认领域和KDC，因为它们未在系统属性中指定，则<code class="codeph">krb5.conf</code>找不到文件，然后引发异常。
                        </p>
                     </li>
                     <li>
                        <p>在Windows上，如果<code>krb5.conf</code>找不到文件，或者该文件不包含默认领域及其KDC的设置，然后是环境变量<code class="codeph">USERDNSDOMAIN</code>和<code class="codeph">LOGONSERVER</code>用作默认领域及其KDC。</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="sect2"><a id="GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A" name="GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A"></a><h3 id="JSSEC-GUID-E73CCEA1-E94F-4E8D-9C42-403AF825658A" class="sect3">领域名称和主机名的命名约定</h3>
               <div>
                  <p>按照约定，所有Kerberos领域名称均为大写，所有DNS主机名和域名均为小写。在Windows上，域也是Kerberos领域。但是，领域名称始终是域名的大写版本。</p>
                  <p>主机名不区分大小写，按照惯例，它们都是小写字母。它们必须通过各自的命名服务在客户端和服务器上解析为相同的主机名。</p>
                  <p>但是，在Kerberos数据库中，主机名区分大小写。在KDC中所有基于主机的Kerberos服务主体中，主机名区分大小写。Kerberos服务主体名称中使用的主机名必须与命名服务返回的主机名完全匹配。例如，如果命名服务返回标准的小写DNS主机名，例如<code class="codeph">raven.example.com</code> ，那么在KDC中创建基于主机的主体名称时，管理员必须使用相同的完全限定的小写DNS主机名称： <code class="codeph">host/raven.example.com</code> 。
                  </p>
               </div>
            </div>
            <div class="sect2"><a id="GUID-9D76C533-8EF4-4417-884A-37C60FA233FC" name="GUID-9D76C533-8EF4-4417-884A-37C60FA233FC"></a><h3 id="JSSEC-GUID-9D76C533-8EF4-4417-884A-37C60FA233FC" class="sect3">跨领域身份验证</h3>
               <div>
                  <p>在跨领域身份验证中，一个领域中的主体可以向另一领域中的主体进行身份验证。</p>
                  <p>在Kerberos中，跨领域身份验证是通过在两个领域之间共享加密密钥来实现的。两个不同领域中的KDC共享一个特殊的跨领域秘密。当跨越领域之间的边界时，此秘密用于证明身份。</p>
                  <p>共享的密钥是票证授予服务主体的密钥。这是单个领域的典型票务授予服务负责人：</p><pre class="pre codeblock"><code>ktbtgt/EXAMPLE.COM@EXAMPLE.COM
</code></pre><p>在跨领域身份验证中，在每个参与领域上创建两个主体。对于两个领域， <code class="codeph">ENG.EAST.EXAMPLE.COM</code>和<code class="codeph">SALES.WEST.EXAMPLE.COM</code> ，这些原则是：</p><pre class="pre codeblock"><code>krbtgt/ENG.EAST.EXAMPLE.COM@SALES.WEST.EXAMPLE.COM
krbtgt/SALES.WEST.EXAMPLE.COM@ENG.EAST.EXAMPLE.COM
</code></pre><p>这些主体（称为远程票证授予服务器主体）必须在两个领域中创建。</p>
                  <p>对于Windows KDC， <code class="codeph">krbtgt</code>创建Windows域时会自动创建一个帐户。此帐户无法删除和重命名。
                  </p>
               </div>
            </div>
         </div>
      </article>
   

</body></html>