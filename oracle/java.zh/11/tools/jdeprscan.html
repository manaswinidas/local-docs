<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You use the jdeprscan tool as a static analysis tool that scans a jar file (or some other aggregation of class files) for uses of deprecated API elements.">
      <meta name="description" content="You use the jdeprscan tool as a static analysis tool that scans a jar file (or some other aggregation of class files) for uses of deprecated API elements.">
      <title>jdeprscan</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Tools Reference">
      <meta property="og:description" content="You use the jdeprscan tool as a static analysis tool that scans a jar file (or some other aggregation of class files) for uses of deprecated API elements.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Tools Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="tools-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:03:46-07:00">
      <meta name="dcterms.title" content="Tools Reference">
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E95074-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="jdeps.html" title="Previous" type="text/html">
      <link rel="next" href="language-shell.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TOOLS">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jdeps.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="language-shell.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">工具参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="main-tools-create-and-build-applications.html" property="item" typeof="WebPage"><span property="name">创建和构建应用程序的主要工具</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">jdeprscan</li>
            </ol>
            <a id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62" name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62"></a>
            
            <h2 id="JSWOR-GUID-2B7588B0-92DB-4A88-88D4-24D183660A62" class="sect2">jdeprscan</h2>
         </header>
         <div class="ind">
            <div>
               <p><span>您使用<code class="codeph">jdeprscan</code>作为静态分析工具的工具，它会扫描jar文件（或类文件的某些其他聚合）以查找已弃用的API元素的使用。</span></p>
               <div class="section">
                  <p class="subhead1" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-04630817-12DD-4479-8418-08598554882F">概要</p><pre class="pre codeblock"><code>jdeprscan [ <span class="variable" translate="no">options</span> ]{<span class="variable" translate="no">dir</span>|<span class="variable" translate="no">jar</span>|<span class="variable" translate="no">class</span>}</code></pre><dl>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-4AAE1B86-4FE9-40F0-B833-A3FA150E5C71">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">options</span></code></dt>
                     <dd>
                        <p>请参阅<a href="jdeprscan.html#GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__OPTIONSFORTHEJDEPRSCANCOMMAND-6556526B">jdeprscan命令的选项</a></p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-F36ABE73-BF06-46BD-90C5-82706D4FF00A">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">dir</span>|<span class="variable" translate="no">jar</span>|<span class="variable" translate="no">class</span></code></dt>
                     <dd>
                        <p><code class="codeph">jdeprscan</code>该命令会扫描每个参数以获取不赞成使用的API的用法。参数可以是：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">dir</span></code> ： 目录</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">jar</span></code> ：JAR文件</p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">class</span></code> ：类名或类文件</p>
                           </li>
                        </ul>
                        <p>类名应使用点（ <code class="codeph">.</code> ）作为分隔符。例如：</p>
                        <p><code class="codeph">java.lang.Thread</code></p>
                        <p>对于嵌套类，美元符号<code class="codeph">$</code>应该使用分隔符。例如：</p>
                        <p><code class="codeph">java.lang.Thread$State</code> 
                        </p>
                        <p>也可以命名一个类文件。例如：</p>
                        <p> <code class="codeph">build/classes/java/lang/Thread$State.class</code></p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-9324001C-186E-4C12-98D9-C99CC609F43C">描述</p>
                  <p>的<code class="codeph">jdeprscan</code>该工具是JDK提供的静态分析工具，它会扫描JAR文件或其他一些类文件的聚合，以使用不赞成使用的API元素。由API标识的已弃用的API <code class="codeph">jdeprscan</code>该工具仅是Java SE定义的工具。不会报告由第三方库定义的已弃用的API。
                  </p>
                  <p>要扫描JAR文件或一组类文件，必须首先确保所扫描的类所依赖的所有类都存在于类路径中。使用<code class="codeph">--class-path</code> <a href="jdeprscan.html#GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__OPTIONSFORTHEJDEPRSCANCOMMAND-6556526B">jdeprscan命令的</a>选项中描述的<a href="jdeprscan.html#GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__OPTIONSFORTHEJDEPRSCANCOMMAND-6556526B">选项</a> 。通常，您将使用与调用应用程序时使用的类路径相同的类路径。
                  </p>
                  <p>如果<code class="codeph">jdeprscan</code>找不到所有相关类，它将为每个缺少的类生成一条错误消息。这些错误消息通常具有以下形式：</p><pre class="pre codeblock"><code>error: cannot find class ...  </code></pre><p>如果发生这些错误，则必须调整类路径，以使其包括所有相关类。</p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__OPTIONSFORTHEJDEPRSCANCOMMAND-6556526B">
                  <p class="subhead1" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-01E38826-CC30-4E8A-ABB9-7A334B04EDDC">jdeprscan命令的选项</p>
                  <p>提供以下选项：</p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-88A5368B-453E-43A7-92D8-8251F0525823">
                           <!-- --></a><code class="codeph">--class-path <span class="variable" translate="no">PATH</span></code> 
                     </dt>
                     <dd>
                        <p>提供用于解析依赖类的搜索路径。</p>
                        <p><code class="codeph"><span class="variable" translate="no">PATH</span></code>可以是由一个或多个目录组成的搜索路径，这些目录由系统特定的路径分隔符分隔。例如：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold"><span>Oracle Solaris，Linux和macOS</span> ：</span></p><pre class="pre codeblock"><code>--class-path /some/directory:/another/different/dir </code></pre></li>
                        </ul>
                        <div class="infoboxnote" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-274FB200-CC7C-41A0-A318-7A7574730C04">
                           <p class="notep1">注意：</p>
                           <p>在Windows上，使用分号（ <code class="codeph">;</code> ）作为分隔符，而不是冒号（ <code class="codeph">:</code> ）。
                           </p>
                        </div>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><span class="bold">视窗：</span></p><pre class="pre codeblock"><code>--class-path \some\directory;\another\different\dir </code></pre></li>
                        </ul>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-998AAB6B-79A8-4ECE-8F62-39E16F0CDF66">
                           <!-- --></a><code class="codeph">--for-removal</code></dt>
                     <dd>
                        <p>将扫描或列表限制为不建议删除的API。发行版价值不能为6、7或8。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-EC78ABD0-F97F-43D5-B58F-CC194C10B2C4">
                           <!-- --></a><code class="codeph">--full-version</code></dt>
                     <dd>
                        <p>打印出该工具的完整版本字符串。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-7C397927-DEC5-4D88-8C3B-88E8296C258D"><!-- --></a> <code class="codeph">--help</code>要么<code class="codeph">—h</code></dt>
                     <dd>
                        <p>打印出完整的帮助消息。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-23649027-0E4E-455E-A50A-F9D1E1EA64FA"><!-- --></a> <code class="codeph">--list</code>要么<code class="codeph">—l</code></dt>
                     <dd>
                        <p>打印不推荐使用的API集。不进行扫描，因此不应该提供目录，jar或类参数。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-D91569DE-886C-4405-A546-3645DB16B331">
                           <!-- --></a><code class="codeph">--release <span class="variable" translate="no">6|7|8|9|10|11</span></code> 
                     </dt>
                     <dd>
                        <p>指定Java SE版本，该版本提供一组不推荐使用的API进行扫描。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-FFC834A2-01BB-472C-BC43-8C6702E1F5E5"><!-- --></a> <code class="codeph">--verbose</code>要么<code class="codeph">—v</code></dt>
                     <dd>
                        <p>在处理期间启用其他消息输出。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-1F1D05D1-8E31-4B25-81DD-6A4EE075270C">
                           <!-- --></a><code class="codeph">--version</code></dt>
                     <dd>
                        <p>打印出该工具的缩写版本字符串。</p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-5DFEDEBE-F565-46D7-BA7C-C9DC871926E0">jdeprscan输出示例</p>
                  <p>该库的JAR文件将命名为类似于<code class="codeph">commons-math3-3.6.1.jar</code> 。要扫描此JAR文件以使用不赞成使用的API，请运行以下命令：</p><pre class="pre codeblock"><code>jdeprscan commons-math3-3.6.1.jar </code></pre> <p>此命令产生几行输出。例如，输出的一行可能是：</p><pre class="pre codeblock"><code>class org/apache/commons/math3/util/MathUtils uses deprecated method java/lang/Double::&lt;init&gt;(D)V</code></pre>   <div class="infoboxnote" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-F98C8535-AE1B-4DD4-9102-E6108049C252">
                     <p class="notep1">注意：</p>
                     <p>使用JVMS 4.2.1中描述的使用斜杠分隔的二进制名称指定类名称。这是类文件内部使用的形式。</p>
                  </div>
                  <p>它使用的已弃用的API是<code class="codeph">java.lang.Double</code>类。
                  </p>
                  <p>不推荐使用的方法的名称是<code class="codeph"><init></code> ，这是一个特殊名称，表示该方法实际上是构造函数。另一个特殊的名字是<code class="codeph"><clinit></code> ，它指示类静态初始化器。
                  </p>
                  <p>其他方法仅按其方法名称列出。方法名称后面是参数列表和返回类型：</p><pre class="pre codeblock"><code>(D)V</code></pre><p>这表明它仅接受一个double值（原始），并返回void。参数和返回类型可能变得晦涩难懂。例如，另一行输出可能是：</p><pre class="pre codeblock"><code>class org/apache/commons/math3/util/Precision uses deprecated method java/math/BigDecimal::setScale(II)Ljava/math/BigDecimal;   </code></pre><p>在此输出行中，不赞成使用的方法在类上<code class="codeph">java.math.BigDecimal</code> ，方法是<code class="codeph">setScale()</code> 。在这种情况下， <code class="codeph">(II)</code>意味着需要两个<code class="codeph">int</code>论点。的<code class="codeph">Ljava/math/BigDecimal;</code>括号后表示它返回对<code class="codeph">java.math.BigDecimal</code> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-2B7588B0-92DB-4A88-88D4-24D183660A62__GUID-7657A0F1-B77C-4AE8-9977-E3D889B62C67">jdeprscan分析可以是特定于版本的</p>
                  <p>您可以使用<code class="codeph">jdeprscan</code>相对于前三个JDK版本。例如，如果您正在运行JDK 9，则可以对照JDK 8、7和6进行检查。
                  </p>
                  <div class="p">作为示例，请看以下代码片段：<pre class="pre codeblock"><code>public class Deprecations {	
   SecurityManager sm = new RMISecurityManager();    // deprecated in 8	
   Boolean b2 = new Boolean(true);          // deprecated in 9		
}</code></pre>完整的类在JDK 7中编译时不会发出警告。</div>
                  <p>如果你跑<code class="codeph">jdeprscan</code>在具有JDK 9的系统上，那么您将看到：</p><pre class="pre codeblock"><code>$ <span class="bold">jdeprscan --class-path classes --release 7 example.Deprecations</span>	
(no output)	</code></pre><div class="p">跑<code class="codeph">jdeprscan</code>释放值为8：<pre class="pre codeblock"><code>$ <span class="bold">jdeprscan --class-path classes --release 8 example.Deprecations</span>
class example/Deprecations uses type java/rmi/RMISecurityManager deprecated	
class example/Deprecations uses method in type java/rmi/RMISecurityManager deprecated</code></pre></div>
                  <div class="p">跑<code class="codeph">jdeprscan</code>在JDK 9上：<pre class="pre codeblock"><code>$ <span class="bold">jdeprscan --class-path classes example.Deprecations</span>
class example/Deprecations uses type java/rmi/RMISecurityManager deprecated	
class example/Deprecations uses method in type java/rmi/RMISecurityManager deprecated
class example/Deprecations uses method java/lang/Boolean &lt;init&gt; (Z)V deprecated</code></pre></div>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   

</body></html>