<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You use the rmid command to start the activation system daemon that enables objects to be registered and activated in a Java Virtual Machine (JVM).">
      <meta name="description" content="You use the rmid command to start the activation system daemon that enables objects to be registered and activated in a Java Virtual Machine (JVM).">
      <title>rmid</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Tools Reference">
      <meta property="og:description" content="You use the rmid command to start the activation system daemon that enables objects to be registered and activated in a Java Virtual Machine (JVM).">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Tools Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="tools-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:03:46-07:00">
      <meta name="dcterms.title" content="Tools Reference">
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E95074-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="rmiregistry.html" title="Previous" type="text/html">
      <link rel="next" href="serialver.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TOOLS">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body>
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="rmiregistry.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="serialver.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">工具参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="remote-method-invocation-rmi-commands.html" property="item" typeof="WebPage"><span property="name">远程方法调用（RMI）工具和命令</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">里米德</li>
            </ol>
            <a id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155" name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155"></a>
            
            <h2 id="JSWOR-GUID-D87047C1-EC4C-4170-B093-5F028C1EE155" class="sect2">里米德</h2>
         </header>
         <div class="ind">
            <div>
               <p><span>您使用<code class="codeph">rmid</code>命令以启动激活系统守护程序，该守护程序允许在Java虚拟机（JVM）中注册和激活对象。</span></p>
               <div class="section">
                  <p class="subhead1" id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-E1D3DD83-5EFA-4FF4-8C97-C056683150A3">概要</p><pre class="pre codeblock"><code>rmid [<span class="variable" translate="no">options</span>]</code></pre><dl>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-5DB28DCE-FBE3-4730-A4AF-64D0EF78E810">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">options</span></code></dt>
                     <dd>
                        <p>这代表了命令行选项<code class="codeph">rmid</code>命令。请参阅<a href="rmid.html#GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__CIHDCGEF">rmid的选项</a> 。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-DAB99438-8EFA-4C24-B2A1-198052FD7AA8">描述</p>
                  <p>的<code class="codeph">rmid</code>命令启动激活系统守护程序。必须先启动激活系统守护程序，然后才能将可以激活的对象注册到激活系统或在JVM中激活。</p>
                  <p>通过执行以下命令启动守护程序<code class="codeph">rmid</code>命令并指定安全策略文件，如下所示：</p><code class="codeph">rmid -J-Djava.security.policy=rmid.policy</code><p>当您运行Oracle的实现时<code class="codeph">rmid</code>命令，默认情况下，您必须指定一个安全策略文件，以便<code class="codeph">rmid</code>该命令可以验证每个信息是否<code class="codeph">ActivationGroupDesc</code>允许用于启动激活组的JVM。具体来说，由<code class="codeph">CommandEnvironment</code>并将任何属性传递给<code class="codeph">ActivationGroupDesc</code>现在必须在安全策略文件中明确允许使用构造函数<code class="codeph">rmid</code>命令。的价值<code class="codeph">sun.rmi.activation.execPolicy</code>财产规定了以下政策： <code class="codeph">rmid</code>该命令用于确定是否<code class="codeph">ActivationGroupDesc</code>可用于为激活组启动JVM。有关更多信息，请参见<code class="codeph">-J-Dsun.rmi.activation.execPolicy=policy</code>选项。
                  </p>
                  <p>执行<code class="codeph">rmid</code>命令启动<code class="codeph">Activator</code>和默认端口1098上的内部注册表，并绑定<code class="codeph">ActivationSystem</code>的名字<code class="codeph">java.rmi.activation.ActivationSystem</code>在此内部注册表中。
                  </p>
                  <p>要为注册表指定备用端口，必须指定<code class="codeph">-port</code>执行时的选项<code class="codeph">rmid</code>命令。例如，以下命令启动激活系统守护程序和注册表默认端口1099上的注册表。
                  </p><pre class="pre codeblock"><code>rmid -J-Djava.security.policy=rmid.policy -port 1099
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-842E0A24-C478-48CE-AB78-078E727C06A7">按需启动RMID（仅Oracle Solaris和Linux）</p>
                  <p>替代开始<code class="codeph">rmid</code>从命令行进行配置<code class="codeph">inetd</code> （Oracle Solaris）或<code class="codeph">xinetd</code> （Linux）开始<code class="codeph">rmid</code>一经请求。
                  </p>
                  <p>RMID启动时，它将尝试获取一个继承的通道（从<code class="codeph">inetd</code> / <code class="codeph">xinetd</code> ），方法是： <code class="codeph">System.inheritedChannel</code>方法。如果继承的通道为null或不是的实例<code class="codeph">java.nio.channels.ServerSocketChannel</code> ，则RMID假定它不是由<code class="codeph">inetd</code> / <code class="codeph">xinetd</code> ，然后如前所述开始。
                  </p>
                  <p>如果继承的频道是<code class="codeph">ServerSocketChannel</code>实例，则RMID使用<code class="codeph">java.net.ServerSocket</code>从<code class="codeph">ServerSocketChannel</code>作为接受对其导出的远程对象的请求的服务器套接字： <code class="codeph">java.rmi.activation.ActivationSystem</code>绑定并且<code class="codeph">java.rmi.activation.Activator</code>远程对象。在这种模式下，RMID的行为与从命令行启动时的行为相同，除了以下情况：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>输出打印到<code class="codeph">System.err</code>重定向到文件。该文件位于由<code class="codeph">java.io.tmpdir</code>系统属性（通常是<code class="codeph">/var/tmp</code>要么<code class="codeph">/tmp</code> ）和前缀<code class="codeph">rmid-err</code>和后缀<code class="codeph">tmp</code> 。
                        </p>
                     </li>
                     <li>
                        <p>的<code class="codeph">-port</code>选项是不允许的。如果指定了此选项，则RMID退出并显示错误消息。
                        </p>
                     </li>
                     <li>
                        <p>的<code class="codeph">-log</code>选项是必需的。如果未指定此选项，则RMID退出并显示错误消息</p>
                     </li>
                  </ul>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__CIHDCGEF">
                  <p class="subhead1" id="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-46BF060E-8041-4D71-8B25-5B3AE1751CBB">rmid的选项</p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-1C6EAD91-8163-4BAD-BD23-2267AD4AA3F6">
                           <!-- --></a><code class="codeph">-C<span class="variable" translate="no"> option</span></code></dt>
                     <dd>
                        <p>指定一个选项，该选项作为命令行参数传递给该组件的每个子进程（激活组） <code class="codeph">rmid</code>创建该过程时的命令。例如，您可以将属性传递给激活系统守护程序产生的每个虚拟机：</p><pre class="pre codeblock"><code>rmid -C-Dsome.property=value
</code></pre><p>这种将命令行参数传递给子进程的功能对于调试很有用。例如，以下命令启用所有子JVM中的服务器调用日志记录。</p><pre class="pre codeblock"><code>rmid -C-Djava.rmi.server.logCalls=true
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-D771A451-A918-4B64-AA97-53A20EC31C99">
                           <!-- --></a><code class="codeph">-J<span class="variable" translate="no"> option</span></code></dt>
                     <dd>
                        <p>指定传递给运行RMID命令的Java解释器的选项。例如，指定<code class="codeph">rmid</code>命令使用名为<code class="codeph">rmid.policy</code> ， <code class="codeph">-J</code>选项可用于定义<code class="codeph">java.security.policy</code>财产<code class="codeph">rmid</code>命令行，例如：</p><pre class="pre codeblock"><code>rmid -J-Djava.security.policy-rmid.policy
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-695E53AA-666E-4094-8E2E-466DBCB7F7A7">
                           <!-- --></a><code class="codeph">-J-Dsun.rmi.activation.execPolicy=<span class="variable" translate="no">policy</span></code></dt>
                     <dd>
                        <p>指定RMID命令用来检查用于启动运行激活组的JVM的命令和命令行选项的策略。该选项仅存在于Oracle的Java RMI激活守护程序实现中。如果未在命令行上指定此属性，则结果与<code class="codeph">-J-Dsun.rmi.activation.execPolicy=default</code>被指定。
                        </p>
                        <p>的可能值<code class="codeph"><span class="variable" translate="no">policy</span></code>可<code class="codeph">default</code> ， <code class="codeph"><span class="variable" translate="no">policyClassName</span></code> ， 要么<code class="codeph">none</code> 。
                        </p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">default</code></p>
                              <p>的<code class="codeph">default</code>或未指定的值<code class="codeph">execPolicy</code>允许<code class="codeph">rmid</code>命令仅在以下情况下执行具有特定命令行选项的命令： <code class="codeph">rmid</code>该命令被授予执行安全策略文件中那些命令和选项的权限， <code class="codeph">rmid</code>命令使用。只有默认激活组实现才能与默认执行策略一起使用。
                              </p>
                              <p>的<code class="codeph">rmid</code>命令使用激活组的已注册激活组描述符中的信息启动激活组的JVM， <code class="codeph">ActivationGroupDesc</code> 。组描述符指定一个可选<code class="codeph">ActivationGroupDesc.CommandEnvironment</code>包括要执行以启动激活组的命令以及要添加到命令行的所有命令行选项。默认情况下， <code class="codeph">rmid</code>命令使用<code class="codeph">java</code>在中找到命令<code class="codeph">java.home</code> 。组描述符还包含属性替代，这些属性替代作为定义为以下选项的选项添加到命令行： <code class="codeph">-D<span class="variable" translate="no">property</span>=<span class="variable" translate="no">value</span></code> 。的<code class="codeph">com.sun.rmi.rmid.ExecPermission</code>许可授予<code class="codeph">rmid</code>执行组描述符的指定命令的命令权限<code class="codeph">CommandEnvironment</code>启动激活组。的<code class="codeph">com.sun.rmi.rmid.ExecOptionPermission</code>权限启用<code class="codeph">rmid</code>命令以使用命令行选项，这些选项在组描述符中指定为属性替代，或者在<code class="codeph">CommandEnvironment</code>启动激活组时。当授予<code class="codeph">rmid</code>执行各种命令和选项的命令权限，权限<code class="codeph">ExecPermission</code>和<code class="codeph">ExecOptionPermission</code>必须授予所有代码源。
                              </p>
                              <p><code class="codeph">ExecPermission</code> class：表示对<code class="codeph">rmid</code>命令以执行特定命令来启动激活组。
                              </p>
                              <p><code class="codeph">ExecPermission</code>语法：名称<code class="codeph">ExecPermission</code>是授予该命令的命令的路径名<code class="codeph">rmid</code>命令权限执行。
                              </p>
                              <p>路径名称以斜杠（ <code class="codeph">/</code> ）和一个星号（ <code class="codeph">*</code> ）表示所有文件都包含在该目录中，其中斜杠是文件分隔符， <code class="codeph">File.separatorChar</code> 。
                              </p>
                              <p>路径名称以斜杠（ <code class="codeph">/</code> ）和减号（ <code class="codeph">-</code> ）表示所有文件和子目录都包含在该目录中（递归）。
                              </p>
                              <p>由特殊标记组成的路径名<code class="codeph"><<ALL FILES>></code>匹配任何文件。
                              </p>
                              <p>包含星号（ <code class="codeph">*</code> ）表示所有文件都在当前目录中。
                              </p>
                              <p>包含减号（ <code class="codeph">-</code> ）表示所有文件都在当前目录中，并且（递归）所有文件和子目录都包含在当前目录中。
                              </p>
                              <p><code class="codeph">ExecOptionPermission</code> class：表示对<code class="codeph">rmid</code>命令以在启动激活组时使用特定的命令行选项。的名字<code class="codeph">ExecOptionPermission</code>是命令行选项的值。
                              </p>
                              <p><code class="codeph">ExecOptionPermission</code>语法：选项支持有限的通配符方案。星号表示通配符匹配，并且可以作为选项名称本身（与任何选项匹配）出现，或者仅当星号（ <code class="codeph">*</code> ）跟随点（ <code class="codeph">.</code> ）或等号（ <code class="codeph">=</code> ）。
                              </p>
                              <p>例如： <code class="codeph">*</code>要么<code class="codeph">-Dmydir.*</code>要么<code class="codeph">-Da.b.c=*</code>是有效的，但是<code class="codeph">*mydir</code>要么<code class="codeph">-Da*b</code>要么<code class="codeph">ab*</code>无效。
                              </p>
                              <p><span class="bold">Rmid的策略文件</span></p>
                              <p>当您授予<code class="codeph">rmid</code>执行各种命令和选项的命令权限，权限<code class="codeph">ExecPermission</code>和<code class="codeph">ExecOptionPermission</code>必须授予所有代码源（通用）。普遍授予这些权限是安全的，因为只有<code class="codeph">rmid</code>命令检查这些权限。
                              </p>
                              <p>一个示例策略文件，向文件授予各种执行权限<code class="codeph">rmid</code>命令是：</p>
                              <ul style="list-style-type:disc">
                                 <li>
                                    <p><span class="bold">Oracle Solaris：</span></p><pre class="pre codeblock"><code>grant {
    permission com.sun.rmi.rmid.ExecPermission
        "/files/apps/java/jdk1.7.0/solaris/bin/java";
 
    permission com.sun.rmi.rmid.ExecPermission
        "/files/apps/rmidcmds/*";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Djava.security.policy=/files/policies/group.policy";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Djava.security.debug=*";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Dsun.rmi.*";
};
</code></pre></li>
                                 <li>
                                    <p><span class="bold">视窗：</span></p><pre class="pre codeblock"><code>grant {
    permission com.sun.rmi.rmid.ExecPermission
        "c:\\files\\apps\\java\\jdk1.7.0\\win\\bin\\java";
 
    permission com.sun.rmi.rmid.ExecPermission
        "c:\\files\\apps\\rmidcmds\\*";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Djava.security.policy=c:\\files\\policies\\group.policy";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Djava.security.debug=*";
 
    permission com.sun.rmi.rmid.ExecOptionPermission
        "-Dsun.rmi.*";
};
</code></pre></li>
                              </ul>
                              <p>授予的第一许可允许<code class="codeph">rmid</code>命令执行1.7.0版本的<code class="codeph">java</code>命令，由其显式路径名指定。默认情况下， <code class="codeph">java</code>在中找到命令<code class="codeph">java.home</code>用于（与<code class="codeph">rmid</code>命令使用），并且无需在策略文件中指定。第二个权限允许<code class="codeph">rmid</code>命令以执行任一目录中的任何命令<code class="codeph">/files/apps/rmidcmds</code> （Oracle Solaris，Linux和macOS）或目录<code class="codeph">c:\files\apps\rmidcmds\</code> （视窗）。
                              </p>
                              <p>授予的第三次许可， <code class="codeph">ExecOptionPermission</code> ，允许<code class="codeph">rmid</code>命令以启动将安全策略文件定义为<code class="codeph">/files/policies/group.policy</code> （Oracle Solaris）或<code class="codeph">c:\files\policies\group.policy</code> （视窗）。下一个权限允许<code class="codeph">java.security.debug property</code>由激活组使用。最后的权限允许使用<code class="codeph">sun.rmi property</code>激活组要使用的名称层次结构。
                              </p>
                              <p>开始<code class="codeph">rmid</code>带有策略文件的命令<code class="codeph">java.security.policy</code>需要在<code class="codeph">rmid</code>命令行，例如：</p>
                              <p><code class="codeph">rmid -J-Djava.security.policy=rmid.policy</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph"><span class="variable" translate="no">policyClassName</span></code> 
                              </p>
                              <p>如果默认行为不够灵活，则管理员可以在启动<code class="codeph">rmid</code>命令，其类的名称<code class="codeph">checkExecCommand</code>方法执行以检查要由命令执行的命令<code class="codeph">rmid</code>命令。
                              </p>
                              <p>的<code class="codeph">policyClassName</code>用一个公共的，无参数的构造函数指定一个公共类，并实现以下内容<code class="codeph">checkExecCommand</code>方法：</p><pre class="pre codeblock"><code> public void checkExecCommand(ActivationGroupDesc desc, String[] command)
        throws SecurityException;
</code></pre><p>在启动激活组之前， <code class="codeph">rmid</code>命令调用策略的<code class="codeph">checkExecCommand</code>方法，并向其传递激活组描述符和一个包含用于启动激活组的完整命令的数组。如果<code class="codeph">checkExecCommand</code>抛出一个<code class="codeph">SecurityException</code> ，然后<code class="codeph">rmid</code>命令不会启动激活组，并且<code class="codeph">ActivationException</code>被抛出给试图激活该对象的调用者。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">none</code></p>
                              <p>如果<code class="codeph">sun.rmi.activation.execPolicy</code>财产价值是<code class="codeph">none</code> ，然后<code class="codeph">rmid</code>命令不执行任何命令验证来启动激活组。
                              </p>
                           </li>
                        </ul>
                     </dd>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-FA5C979F-370E-4434-8BA0-CE9517296139">
                           <!-- --></a><code class="codeph">-log <span class="variable" translate="no">dir</span></code></dt>
                     <dd>
                        <p>指定激活系统守护程序用来写入其数据库和相关信息的目录的名称。日志目录默认在以下目录中创建日志： <code class="codeph">rmid</code>命令已执行。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-86ECA5D5-89EC-4798-9526-3C72523C2219">
                           <!-- --></a><code class="codeph">-port <span class="variable" translate="no">port</span></code></dt>
                     <dd>
                        <p>指定注册表使用的端口。激活系统守护程序绑定<code class="codeph">ActivationSystem</code> ，名称<code class="codeph">java.rmi.activation.ActivationSystem</code> ，在此注册表中。的<code class="codeph">ActivationSystem</code>可以使用以下命令在本地计算机上获取<code class="codeph">Naming.lookup</code>方法调用：</p><pre class="pre codeblock"><code>import java.rmi.*; 
    import java.rmi.activation.*;
 
    ActivationSystem system; system = (ActivationSystem)
    Naming.lookup("//:port/java.rmi.activation.ActivationSystem");
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-D87047C1-EC4C-4170-B093-5F028C1EE155__GUID-92C8E98A-21C7-434B-A4A2-BD31219B9A2D">
                           <!-- --></a><code class="codeph">-stop</code></dt>
                     <dd>
                        <p>停止当前的调用<code class="codeph">rmid</code>命令指定的端口<code class="codeph">-port</code>选项。如果未指定端口，则此选项将停止<code class="codeph">rmid</code>调用在端口1098上运行。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   

</body></html>