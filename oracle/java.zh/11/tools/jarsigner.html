<html lang="en-us"  xml:lang="en-us"><head></head><body >﻿
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You use the jarsigner tool to sign and verify Java Archive (JAR) files.">
      <meta name="description" content="You use the jarsigner tool to sign and verify Java Archive (JAR) files.">
      <title>罐子签名者</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Tools Reference">
      <meta property="og:description" content="You use the jarsigner tool to sign and verify Java Archive (JAR) files.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Tools Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="tools-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:03:46-07:00">
      <meta name="dcterms.title" content="Tools Reference">
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E95074-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="keytool.html" title="Previous" type="text/html">
      <link rel="next" href="kinit.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TOOLS">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script>
   
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="keytool.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="kinit.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">工具参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="security-tools-and-commands.html" property="item" typeof="WebPage"><span property="name">安全工具和命令</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">罐子签名者</li>
            </ol>
            <a id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864" name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864"></a>
            
            <h2 id="JSWOR-GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864" class="sect2">罐子签名者</h2>
         </header>
         <div class="ind">
            <div>
               <p><span>您使用<code class="codeph">jarsigner</code>签名和验证Java归档（JAR）文件的工具。</span></p>
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-CB1D63D7-4228-42B8-BE18-587E4E611FCE">概要</p><pre class="pre codeblock"><code>jarsigner [ <span class="variable" translate="no">options</span> ] <span class="variable" translate="no">jar-file</span> <span class="variable" translate="no">alias</span> jarsigner -verify [ <span class="variable" translate="no">options</span> ] <span class="variable" translate="no">jar-file</span> [<span class="variable" translate="no">alias ...</span>]</code></pre><pre class="pre codeblock"><code>jarsigner -verify [ <span class="variable" translate="no">options</span> ] <span class="variable" translate="no">jar-file</span> [<span class="variable" translate="no">alias ...</span>]</code></pre><dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-F349FBC4-96ED-45B0-BFBF-6B225BDC8653">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">options</span></code></dt>
                     <dd>
                        <p>命令行选项。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">jarsigner的选项</a> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-CE43A33D-33C9-4645-B50F-7C318351D64D">
                           <!-- --></a><code class="codeph">-verify</code></dt>
                     <dd>
                        <p>的<code class="codeph">-verify</code>选项可以在JAR文件名之后使用零个或多个密钥库别名。当。。。的时候<code class="codeph">-verify</code>指定选项， <code class="codeph">jarsigner</code>命令检查用于验证JAR文件中每个已签名条目的证书是否与密钥库别名之一匹配。别名在以下项指定的密钥库中定义<code class="codeph">-keystore</code>或默认密钥库。
                        </p>
                        <p>如果您还指定<code class="codeph">-strict</code>选项，以及<code class="codeph">jarsigner</code>命令检测到严重警告，则显示消息“ jar验证，带有签名者错误”。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-DBFD3E4F-0BAF-4DC2-AEC7-B9EA10CEF6A4">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">jar-file</span></code></dt>
                     <dd>
                        <p>要签名的JAR文件。</p>
                        <p>如果您还指定了<code class="codeph">-strict</code>选项，以及<code class="codeph">jarsigner</code>命令检测到严重警告时，将显示消息“ jar签名，带有签名者错误”。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-04A31530-AB96-4148-A933-F146F8766593">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">alias</span></code></dt>
                     <dd>
                        <p>别名在以下项指定的密钥库中定义<code class="codeph">-keystore</code>或默认密钥库。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-4CADE431-3B2C-487E-857E-B5673826155E">描述</p>
                  <p>的<code class="codeph">jarsigner</code>该工具有两个目的：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>签署Java Archive（JAR）文件。</p>
                     </li>
                     <li>
                        <p>验证签名的JAR文件的签名和完整性。</p>
                     </li>
                  </ul>
                  <p>通过JAR功能，可以将类文件，图像，声音和其他数字数据打包到一个文件中，从而可以更快，更轻松地进行分发。名为的工具<code class="codeph">jar</code>使开发人员可以生成JAR文件。（从技术上讲，尽管ZIP文件是由<code class="codeph">jar</code>命令或由<code class="codeph">jarsigner</code>命令，JAR文件还包含一个<code class="codeph">META-INF/MANIFEST.MF</code>文件。）
                  </p>
                  <p>数字签名是从某些数据（正在签名的数据）和实体（个人，公司等）的私钥中计算出的一串比特。类似于手写签名，数字签名具有许多有用的特征：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>可以通过使用对应于用于生成签名的私钥的公钥的计算来验证其真实性。</p>
                     </li>
                     <li>
                        <p>假设私钥是秘密的，则无法伪造。</p>
                     </li>
                     <li>
                        <p>它是签名数据的函数，因此也不能声称是其他数据的签名。</p>
                     </li>
                     <li>
                        <p>签名的数据无法更改。如果数据被更改，则签名不能被验证为真实。</p>
                     </li>
                  </ul>
                  <p>要为文件生成实体的签名，该实体必须首先具有与其关联的公钥/私钥对以及一个或多个认证其公钥的证书。证书是来自一个实体的经过数字签名的声明，该声明说另一实体的公钥具有特定的值。</p>
                  <p>的<code class="codeph">jarsigner</code>该命令使用来自密钥库的密钥和证书信息来生成JAR文件的数字签名。密钥库是专用密钥及其相关联的X.509证书链的数据库，这些证书对相应的公用密钥进行身份验证。的<code class="codeph">keytool</code>命令用于创建和管理密钥库。
                  </p>
                  <p>的<code class="codeph">jarsigner</code>命令使用实体的私钥来生成签名。除其他事项外，已签名的JAR文件包含来自密钥库的证书副本，该证书副本包含与用于签署文件的私钥相对应的公钥。的<code class="codeph">jarsigner</code>命令可以使用签名JAR文件中的证书（在其签名块文件中）验证签名的JAR文件的数字签名。
                  </p>
                  <p>的<code class="codeph">jarsigner</code>命令可以生成包括时间戳的签名，该签名使系统或部署者可以在签名证书仍然有效时检查JAR文件是否已签名。
                  </p>
                  <p>另外，API允许应用程序获取时间戳信息。</p>
                  <p>此时， <code class="codeph">jarsigner</code>该命令只能对由<code class="codeph">jar</code>命令或zip文件。JAR文件与zip文件相同，除了它们还具有一个<code class="codeph">META-INF/MANIFEST.MF</code>文件。一种<code class="codeph">META-INF/MANIFEST.MF</code>文件是在<code class="codeph">jarsigner</code>命令签署一个zip文件。
                  </p>
                  <p>默认值<code class="codeph">jarsigner</code>命令行为是对JAR或zip文件进行签名。使用<code class="codeph">-verify</code>验证签名的JAR文件的选项。
                  </p>
                  <p>的<code class="codeph">jarsigner</code>该命令还会在签名或验证后尝试验证签名者的证书。如果存在验证错误或任何其他问题，该命令将生成警告消息。如果您指定<code class="codeph">-strict</code>选项，然后命令将严重警告视为错误。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">错误和警告</a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5C84418F-42B4-43E1-8518-7E70A3392209">密钥库别名</p>
                  <p>使用唯一的别名访问所有密钥库实体。</p>
                  <p>当您使用<code class="codeph">jarsigner</code>如果要使用命令签名JAR文件，则必须为密钥库条目指定别名，该别名包含生成签名所需的私钥。如果未指定输出文件，它将使用签名的JAR文件覆盖原始JAR文件。
                  </p>
                  <p>密钥库受密码保护，因此必须指定商店密码。如果未在命令行上指定它，则会提示您输入。同样，私钥在密码存储区中受密码保护，因此必须指定私钥的密码，并且当您在命令行中未指定且与存储区不同时，系统会提示您输入密码。密码。</p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-51D89C0B-1B3F-4B80-831B-F8E1AE8B8476">密钥库位置</p>
                  <p>的<code class="codeph">jarsigner</code>命令有一个<code class="codeph">-keystore</code>用于指定要使用的密钥库的URL的选项。密钥库默认情况下存储在名为<code class="codeph">.keystore</code>在用户的主目录中，由<code class="codeph">user.home</code>系统属性。
                  </p>
                  <p><span class="bold"><span>Oracle Solaris，Linux和macOS</span> ：</span> <code class="codeph">user.home</code>默认为用户的主目录。
                  </p>
                  <p>来自的输入流<code class="codeph">-keystore</code>选项传递给<code class="codeph">KeyStore.load</code>方法。如果<code class="codeph">NONE</code>指定为URL，然后将空流传递给<code class="codeph">KeyStore.load</code>方法。 <code class="codeph">NONE</code>应该在<code class="codeph">KeyStore</code>例如，当类位于硬件令牌设备上时，它不是基于文件的。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5FA1DF7F-86CF-491F-8F0A-F1834940ADF7">密钥库实现</p>
                  <p>的<code class="codeph">KeyStore</code>类中提供的<code class="codeph">java.security</code>软件包提供了许多定义明确的接口来访问和修改密钥库中的信息。您可以具有多个不同的具体实现，其中每个实现都针对特定类型的密钥库。
                  </p>
                  <p>当前，有两种使用密钥库实现的命令行工具（ <code class="codeph">keytool</code>和<code class="codeph">jarsigner</code> ）。
                  </p>
                  <p>默认的密钥库实现是<code class="codeph">PKCS12</code> 。这是一个基于RSA PKCS12个人信息交换语法标准的跨平台密钥库。该标准主要用于存储或传输用户的私钥，证书和其他机密信息。Oracle提供了另一个内置的实现。它将密钥库实现为具有专有密钥库类型（格式）的文件，该文件名为<code class="codeph">JKS</code> 。它使用其各自的密码保护每个私钥，并使用（可能不同的）密码保护整个密钥库的完整性。
                  </p>
                  <p>密钥库实现是基于提供程序的，这意味着由<code class="codeph">KeyStore</code>类是根据服务提供商接口（SPI）实现的。有一个对应的摘要<code class="codeph">KeystoreSpi</code>类，也在<code class="codeph">java.security package</code> ，它定义了提供者必须实现的服务提供者接口方法。术语“提供者”是指一个包或一组包，它们提供可被Java Security API访问的服务子集的具体实现。要提供密钥库实现，客户端必须实现提供程序并提供一个<code class="codeph">KeystoreSpi</code>子类实现，如<a href="https://www.oracle.com/pls/topic/lookup?ctx=en/java/javase/11/tools&id=JSSEC-GUID-2BCFDD85-D533-4E6C-8CE9-29990DEB0190" target="_blank">如何在Java密码体系结构中实现提供程序中所述</a> 。
                  </p>
                  <p>应用程序可以通过不同的提供商从不同的提供商中选择不同类型的密钥库实现。 <code class="codeph">getInstance</code>工厂方法<code class="codeph">KeyStore</code>类。密钥库类型定义了密钥库信息的存储和数据格式，以及用于保护密钥库中的私钥和密钥库本身完整性的算法。不同类型的密钥库实现不兼容。
                  </p>
                  <p>的<code class="codeph">jarsigner</code>命令可以从可以使用URL指定的任何位置读取基于文件的密钥库。此外，这些命令可以读取非基于文件的密钥库，例如Windows上的MSCAPI和所有平台上的PKCS11提供的密钥库。
                  </p>
                  <p>为了<code class="codeph">jarsigner</code>和<code class="codeph">keytool</code>命令，您可以在命令行中使用<code class="codeph">-storetype</code>选项。
                  </p>
                  <p>如果您未明确指定密钥库类型，则工具会根据<code class="codeph">keystore.type</code>安全属性文件中指定的属性。安全属性文件称为<code class="codeph">java.security</code> ，它位于JDK安全属性目录中， <code class="codeph">java.home/conf/security</code> 。
                  </p>
                  <p>每个工具都可以<code class="codeph">keystore.type</code>值，然后检查所有已安装的提供程序，直到找到实现该类型的密钥库的提供程序为止。然后，它将使用该提供程序的密钥库实现。
                  </p>
                  <p>的<code class="codeph">KeyStore</code>类定义了一个名为<code class="codeph">getDefaultType</code>让应用程序检索<code class="codeph">keystore.type</code>属性。以下代码行创建了默认密钥库类型的实例，如<code class="codeph">keystore.type property</code> ：</p><pre class="pre codeblock"><code>KeyStore keyStore = KeyStore.getInstance(KeyStore.getDefaultType());
</code></pre><p>默认密钥库类型是<code class="codeph">pkcs12</code> ，这是基于RSA PKCS12个人信息交换语法标准的跨平台密钥库。这由安全属性文件中的以下行指定：</p><pre class="pre codeblock"><code>keystore.type=pkcs12
</code></pre><p>密钥库类型名称中的大小写无关紧要。例如， <code class="codeph">JKS</code>是相同的<code class="codeph">jks</code> 。
                  </p>
                  <p>要使工具使用默认设置以外的密钥库实现，可以更改该行以指定其他密钥库类型。例如，如果您想使用Oracle的<code class="codeph">jks</code>密钥库实现，然后将行更改为以下内容：</p><pre class="pre codeblock"><code>keystore.type=jks
</code></pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-A8AC4BAD-0CC4-495F-B2A8-9C81A50899CF">支持的算法</p>
                  <p>默认情况下， <code class="codeph">jarsigner</code>命令根据私钥的类型和大小使用以下签名算法之一对JAR文件进行签名：</p>
                  <div class="tblformal" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5709F884-DD73-4401-A2FC-C7610922DC53">
                     <table cellpadding="4" cellspacing="0" class="Formal" title="" width="100%" border="1" summary="Default signature algorithms" frame="hsides" rules="rows">
                        <thead>
                           <tr align="left" valign="top">
                              <th align="left" valign="bottom" width="15%" id="d41533e426">关键算法</th>
                              <th align="left" valign="bottom" width="15%" id="d41533e428">密钥大小</th>
                              <th align="left" valign="bottom" width="70%" id="d41533e430">默认签名算法</th>
                           </tr>
                        </thead>
                        <tbody>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d41533e434" headers="d41533e426 ">
                                 <p>DSA</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d41533e434 d41533e428 ">
                                 <p>任何大小</p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d41533e434 d41533e430 ">
                                 <p>SHA256withDSA</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d41533e444" headers="d41533e426 ">
                                 <p>RSA</p>    
                              </td>
                              <td align="left" valign="top" width="15%" headers="d41533e444 d41533e428 ">
                                 <p><= 3072</p>
                                 <p><= 7680</p>
                                 <p>> 7680</p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d41533e444 d41533e430 ">
                                 <p>SHA256withRSA</p>
                                 <p>SHA384withRSA</p>
                                 <p>SHA512withRSA</p>
                              </td>
                           </tr>
                           <tr align="left" valign="top">
                              <td align="left" valign="top" width="15%" id="d41533e463" headers="d41533e426 ">
                                 <p>欧共体</p>
                              </td>
                              <td align="left" valign="top" width="15%" headers="d41533e463 d41533e428 ">
                                 <p><384</p>
                                 <p><512</p>
                                 <p>= 512</p>
                              </td>
                              <td align="left" valign="top" width="70%" headers="d41533e463 d41533e430 ">
                                 <p>SHA256withECDSA</p>
                                 <p>SHA384withECDSA</p>
                                 <p>SHA512withECDSA</p>
                              </td>
                           </tr>
                        </tbody>
                     </table>
                  </div>
                  <!-- class="inftblhruleinformal" -->
                  <p>这些默认签名算法可以通过使用<code class="codeph">-sigalg</code>选项。
                  </p>
                  <p>已签名的JAR文件算法将根据<code class="codeph">jdk.jar.disabledAlgorithms</code>验证期间的安全属性（ <code class="codeph">-verify</code> ）。如果使用禁用的任何算法对JAR文件进行了签名，则它将被视为未签名的JAR文件。有关详细的验证输出，请包括<code class="codeph">-J-Djava.security.debug=jar</code> 。的默认值<code class="codeph">jdk.jar.disabledAlgorithms</code>安全属性在<code class="codeph">java.security</code>文件（位于JRE的<code class="codeph">$JAVA_HOME/conf/security</code>目录）。
                  </p>
                  <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-F9BBEC6A-79DF-49D2-8043-F8F85FA783A2">
                     <p class="notep1">注意：</p>
                     <p>为了提高开箱即用的安全性，每个JDK版本都会将默认密钥大小和签名算法名称定期更新为更强的值。如果与旧版JDK的互操作性很重要，请确保这些版本支持默认值，或者使用<code class="codeph">-sigalg</code>选项覆盖默认值，后果自负。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6E416805-0395-4A6B-B329-08582422F128">签名的JAR文件</p>
                  <p>当。。。的时候<code class="codeph">jarsigner</code>命令用于对JAR文件进行签名，输出的签名JAR文件与输入的JAR文件完全相同，不同之处在于它在META-INF目录中放置了两个附加文件：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>带有<code class="codeph">.SF</code>延期</p>
                     </li>
                     <li>
                        <p>带有<code class="codeph">.DSA</code> ， <code class="codeph">.RSA</code> ， 要么<code class="codeph">.EC</code>延期</p>
                     </li>
                  </ul>
                  <p>这两个文件的基本文件名来自于<code class="codeph">-sigfile</code>选项。例如，当选项为<code class="codeph">-sigfile MKSIGN</code> ，文件名为<code class="codeph">MKSIGN.SF</code>和<code class="codeph">MKSIGN.DSA</code></p>
                  <p>如果不<code class="codeph">-sigfile</code>选项出现在命令行上，然后该文件的基本文件名<code class="codeph">.SF</code>和<code class="codeph">.DSA</code> files是在命令行上指定的别名的前8个字符，都转换为大写。如果别名少于8个字符，则使用完整的别名。如果别名名称包含签名文件名中不允许的任何字符，则在形成文件名时，每个此类字符都将转换为下划线（_）字符。有效字符包括字母，数字，下划线和连字符。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6FC650D8-F17E-49E6-9BB7-C53DD161E63C">签名文件</p>
                  <p>签名文件（ <code class="codeph">.SF</code>文件）看起来类似于始终包含在JAR文件中的清单文件。 <code class="codeph">jarsigner</code>命令用于对文件签名。对于JAR文件中包含的每个源文件， <code class="codeph">.SF</code>该文件有两行，例如清单文件中的两行，列出了以下内容：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>文档名称</p>
                     </li>
                     <li>
                        <p>摘要算法（SHA）的名称</p>
                     </li>
                     <li>
                        <p>SHA摘要值</p>
                     </li>
                  </ul>
                  <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D10F208C-BF2D-4DFD-9715-6B7975E29891">
                     <p class="notep1">注意：</p>
                     <p>摘要算法（SHA）的名称和SHA摘要值在同一行上。</p>
                  </div>
                  <p>在清单文件中，每个源文件的SHA摘要值是源文件中二进制数据的摘要（哈希）。在里面<code class="codeph">.SF</code>文件中，指定源文件的摘要值是源文件清单文件中两行的哈希值。
                  </p>
                  <p>默认情况下，签名文件包括带有整个清单文件哈希的标头。标头还包含清单标头的哈希。标头的存在使验证优化成为可能。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">JAR文件验证</a> 。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-50E9A97E-8C11-422F-9DE2-B45A433845D1">签名块文件</p>
                  <p>的<code class="codeph">.SF</code>签名文件并将签名放置在签名块文件中。此文件还包含在其内部编码的，来自密钥库的证书或证书链，该证书或证书链对与用于签名的私钥相对应的公钥进行身份验证。该文件具有扩展名<code class="codeph">.DSA</code> ， <code class="codeph">.RSA</code> ， 要么<code class="codeph">.EC</code> ，具体取决于所使用的摘要算法。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-437B7378-5ECE-4D2D-AAD8-02D5474FCCD0">签名时间戳</p>
                  <div class="p">的<code class="codeph">jarsigner</code>与以下选项一起使用的命令在对JAR文件进行签名时会生成并存储签名时间戳：<ul style="list-style-type:disc">
                        <li>
                           <p><code class="codeph">-tsa <span class="variable" translate="no">url</span></code></p>
                        </li>
                        <li>
                           <p><code class="codeph">-tsacert <span class="variable" translate="no">alias</span></code></p>
                        </li>
                        <li>
                           <p><code class="codeph">-tsapolicyid <span class="variable" translate="no">policyid</span></code></p>
                        </li>
                        <li>
                           <p><code class="codeph">-tsadigestalg <span class="variable" translate="no">algorithm</span></code></p>
                        </li>
                     </ul>请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">jarsigner的选项</a> 。
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-991B95F4-F2D0-4E5F-94EA-009A8D93D3C9">JAR文件验证</p>
                  <p>当签名有效时，将成功进行JAR文件验证，此后，生成签名时JAR文件中的文件均未更改。JAR文件验证涉及以下步骤：</p>
                  <ol>
                     <li>
                        <p>验证签名<code class="codeph">.SF</code>文件。
                        </p>
                        <p>验证可确保存储在每个签名块中的签名（ <code class="codeph">.DSA</code> ）文件是使用与公钥相对应的私钥生成的，该公钥的证书（或证书链）也出现在<code class="codeph">.DSA</code>文件。它还可以确保签名是相应签名的有效签名（ <code class="codeph">.SF</code> ）文件，因此<code class="codeph">.SF</code>文件未被篡改。
                        </p>
                     </li>
                     <li>
                        <p>验证摘要中每个条目中列出的摘要<code class="codeph">.SF</code>文件以及清单中的每个相应部分。</p>
                        <p>的<code class="codeph">.SF</code>默认情况下，文件包含一个头，该头包含整个清单文件的哈希。当标头存在时，验证可以检查标头中的哈希是否与清单文件的哈希匹配。如果存在匹配项，则验证继续进行下一步。
                        </p>
                        <p>如果没有匹配项，则需要进行优化程度较低的验证，以确保该文件中每个源文件信息部分中的哈希<code class="codeph">.SF</code>文件等于清单文件中其对应节的哈希值。请参阅签名文件。
                        </p>
                        <p>原因之一是存储在清单文件中的清单文件的哈希<code class="codeph">.SF</code>文件头可能不等于当前清单文件的哈希，因为一个或多个文件已添加到JAR文件中（ <code class="codeph">jar</code>工具），然后签名并<code class="codeph">.SF</code>文件已生成。当。。。的时候<code class="codeph">jar</code>该工具用于添加文件，清单文件通过为新文件添加节来更改，但<code class="codeph">.SF</code>文件未更改。从那时起，如果没有更改生成签名时JAR文件中的文件，则仍然认为验证成功。当哈希表的非标题部分中的哈希值出现时，就会发生这种情况<code class="codeph">.SF</code>文件等于清单文件中相应节的哈希值。
                        </p>
                     </li>
                     <li>
                        <p>读取JAR文件中每个文件的条目， <code class="codeph">.SF</code>文件。读取时，计算文件的摘要，并将结果与清单部分中此文件的摘要进行比较。摘要应相同或验证失败。
                        </p>
                        <p>如果在验证过程中发生任何严重的验证失败，则该过程将停止并引发安全异常。的<code class="codeph">jarsigner</code>命令捕获并显示异常。
                        </p>
                     </li>
                     <li>
                        <p>检查禁用的算法使用情况。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">支持的算法</a> 。
                        </p>
                     </li>
                  </ol>
                  <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-96FA2F8A-C473-4193-A8E6-8C679E369A73">
                     <p class="notep1">注意：</p>
                     <p>您应该阅读所有附加警告（如果您指定了<code class="codeph">-strict</code>选项）以及证书的内容（通过指定<code class="codeph">-verbose</code>和<code class="codeph">-certs</code>选项）以确定签名是否可以信任。
                     </p>
                  </div>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-AEAAEE42-D6B0-4457-A8B5-D56233B09BDC">JAR文件的多个签名</p>
                  <p>一个JAR文件可以由多个人通过运行<code class="codeph">jarsigner</code>在文件上多次输入命令，并每次为另一个人指定别名，如下所示：</p><pre class="pre codeblock"><code>jarsigner myBundle.jar susan
jarsigner myBundle.jar kevin
</code></pre><p>当对JAR文件进行多次签名时，有多个<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>生成的JAR文件中的文件，每个签名一对。在上一个示例中，输出JAR文件包括具有以下名称的文件：</p><pre class="pre codeblock"><code>SUSAN.SF
SUSAN.DSA
KEVIN.SF
KEVIN.DSA</code></pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHIFIAD">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-A75E090D-E2F1-4BCA-A8E9-A918F78D4290">jarsigner的选项</p>
                  <p>以下各节介绍了<code class="codeph">jarsigner</code> 。请注意以下标准：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>所有选项名称前均带有连字符（-）。</p>
                     </li>
                     <li>
                        <p>可以按任何顺序提供选项。</p>
                     </li>
                     <li>
                        <p>斜体或带下划线的项目（选项值）表示必须提供的实际值。</p>
                     </li>
                     <li>
                        <p>的<code class="codeph">-storepass</code> ， <code class="codeph">-keypass</code> ， <code class="codeph">-sigfile</code> ， <code class="codeph">-sigalg</code> ， <code class="codeph">-digestalg</code> ， <code class="codeph">-signedjar</code>和TSA相关的选项仅在签名JAR文件时才相关；验证签名的JAR文件时，它们无关紧要。的<code class="codeph">-keystore</code>该选项与签名和验证JAR文件有关。另外，在签名和验证JAR文件时，将指定别名。
                        </p>
                     </li>
                  </ul>
                  <dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-C9F1FF0B-A356-4A0B-BF5E-34DCB44826FD">
                           <!-- --></a><code class="codeph">-keystore <span class="variable" translate="no">url</span></code> 
                     </dt>
                     <dd>
                        <p>指定用于告知密钥库位置的URL。默认为文件<code class="codeph">.keystore</code>在用户的主目录中，由<code class="codeph">user.home</code>系统属性。
                        </p>
                        <p>签名时需要密钥库。如果默认密钥库不存在，或者要使用默认密钥库以外的其他密钥库，则必须显式指定密钥库。</p>
                        <p>验证时不需要密钥库，但是如果指定了密钥库或默认密钥库存在且<code class="codeph">-verbose</code>还指定了option，然后输出有关该密钥库中是否包含用于验证JAR文件的任何证书的附加信息。
                        </p>
                        <p>的<code class="codeph">-keystore</code>参数可以是文件名和路径说明，而不是URL，在这种情况下，它与文件相同：URL，例如，以下等价项：</p><pre class="pre codeblock"><code>-keystore <span class="variable" translate="no">filePathAndName</span>
-keystore file:<span class="variable" translate="no">filePathAndName</span>
</code></pre><p>如果Sun PKCS＃11提供程序已在<code class="codeph">java.security</code>安全属性文件（位于JRE的<code class="codeph">$JAVA_HOME/conf/security</code>目录），然后<code class="codeph">keytool</code>和<code class="codeph">jarsigner</code>通过指定以下选项，工具可以对PKCS＃11令牌进行操作：</p><pre class="pre codeblock"><code>-keystore NONE
-storetype PKCS11
</code></pre><p>例如，以下命令列出了已配置的PKCS＃11令牌的内容：</p><pre class="pre codeblock"><code>keytool -keystore NONE -storetype PKCS11 -list
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-815348A3-B454-41FA-8630-C6EEC58E148A">
                           <!-- --></a><code class="codeph">-storepass[:env | :file] <span class="variable" translate="no">argument</span></code> 
                     </dt>
                     <dd>
                        <p>指定访问密钥库所需的密码。仅在签名（而不验证）JAR文件时才需要。在这种情况下，如果<code class="codeph">-storepass</code>命令行中未提供option选项，则提示用户输入密码。
                        </p>
                        <p>如果修饰符<code class="codeph">env</code>要么<code class="codeph">file</code>未指定，则密码具有值<code class="codeph">argument</code> 。否则，将按以下方式检索密码：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">env</code> ：从名为环境变量中检索密码<code class="codeph"><span class="variable" translate="no">argument</span></code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">file</code> ：从名为文件的文件中检索密码<code class="codeph"><span class="variable" translate="no">argument</span></code> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-B9C88D3A-D7C1-4595-BF24-53489FB3572C">
                           <p class="notep1">注意：</p>
                           <p>除非用于测试目的，或者您使用的是安全系统，否则不应在命令行或脚本中指定密码。</p>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-13355940-D4A5-4DC3-8D4A-2CD17A6CE22F">
                           <!-- --></a><code class="codeph">-storetype <span class="variable" translate="no">storetype</span></code> 
                     </dt>
                     <dd>
                        <p>指定要实例化的密钥库的类型。默认密钥库类型是指定为密钥库值的密钥库类型。 <code class="codeph">keystore.type</code>安全属性文件中的属性，该文件由静态属性返回<code class="codeph">getDefaultType</code>方法中<code class="codeph">java.security.KeyStore</code> 。
                        </p>
                        <p>PKCS＃11令牌的PIN也可以通过<code class="codeph">-storepass</code>选项。如果未指定，则<code class="codeph">keytool</code>和<code class="codeph">jarsigner</code>命令提示输入令牌PIN。如果令牌具有受保护的身份验证路径（例如专用密码键盘或生物识别读取器），则<code class="codeph">-protected</code>必须指定选项，并且不能指定密码选项。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-BC7F0225-ACF5-4065-BE50-7C0D59C0ADF7">
                           <!-- --></a><code class="codeph">-keypass [:env | :file] <span class="variable" translate="no">argument</span> -certchain <span class="variable" translate="no">file</span></code> 
                     </dt>
                     <dd>
                        <p>指定用于保护由命令行上指定的别名寻址的密钥库条目的私钥的密码。使用时需要密码<code class="codeph">jarsigner</code>签名JAR文件。如果命令行上未提供密码，并且所需的密码与商店密码不同，则会提示用户输入密码。
                        </p>
                        <p>如果修饰符<code class="codeph">env</code>要么<code class="codeph">file</code>未指定，则密码具有值<code class="codeph">argument</code> 。否则，将按以下方式检索密码：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p><code class="codeph">env</code> ：从名为环境变量中检索密码<code class="codeph">argument</code> 。
                              </p>
                           </li>
                           <li>
                              <p><code class="codeph">file</code> ：从名为文件的文件中检索密码<code class="codeph">argument</code> 。
                              </p>
                           </li>
                        </ul>
                        <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-FD3D46E8-58AC-4592-8813-C4AAE7567D12">
                           <p class="notep1">注意：</p>
                           <p>除非用于测试目的，或者您使用的是安全系统，否则不应在命令行或脚本中指定密码。</p>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-0FB23158-7C8A-4BFB-B2D7-4286A486652E">
                           <!-- --></a><code class="codeph">-certchain <span class="variable" translate="no">file</span></code> 
                     </dt>
                     <dd>
                        <p>指定当与在命令行上指定的别名解决的，与密钥库条目的私钥相关联的证书链不完整时要使用的证书链。当密钥库位于没有足够容量来容纳完整证书链的硬件令牌上时，可能会发生这种情况。该文件可以是按<a href="http://tools.ietf.org/html/rfc1421" target="_blank">Internet RFC 1421证书编码标准</a>定义的二进制编码格式或可打印编码格式（也称为Base64编码）的一系列X.509证书序列或单个PKCS＃7格式的数据块。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-A2DD69D4-29DD-402A-ACA4-96C9C6CDB5AD">
                           <!-- --></a><code class="codeph">-sigfile <span class="variable" translate="no">file</span></code> 
                     </dt>
                     <dd>
                        <p>指定用于生成的基本文件名<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>文件。例如，如果文件是<code class="codeph">DUKESIGN</code> ，然后生成<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>文件被命名<code class="codeph">DUKESIGN.SF</code>和<code class="codeph">DUKESIGN.DSA</code> ，并放置在<code class="codeph">META-INF</code>签名的JAR文件的目录。
                        </p>
                        <p>文件中的字符必须来自集合<code class="codeph">a-zA-Z0-9_-</code> 。仅允许使用字母，数字，下划线和连字符。所有小写字符都将转换为大写<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>文件名。
                        </p>
                        <p>如果不<code class="codeph">-sigfile</code>选项出现在命令行上，然后该文件的基本文件名<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>文件是在命令行上指定的别名的前8个字符，均转换为大写。如果别名少于8个字符，则使用完整的别名。如果别名中包含在签名文件名中无效的任何字符，则每个此类字符都将转换为下划线（_）字符以形成文件名。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-ED00AF95-8D5C-4349-B661-6FBE6CBDBB24">
                           <!-- --></a><code class="codeph">-signedjar <span class="variable" translate="no">file</span></code></dt>
                     <dd>
                        <p>指定签名的JAR文件的名称。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-17CCF4A8-AFF1-4CB6-A73D-181DD2ED5A1F">
                           <!-- --></a><code class="codeph">-digestalg <span class="variable" translate="no">algorithm</span></code> 
                     </dt>
                     <dd>
                        <p>指定摘要JAR文件的条目时要使用的消息摘要算法的名称。</p>
                        <p>有关标准消息摘要算法名称的列表，请参见<cite>Java安全性标准算法名称</cite> 。
                        </p>
                        <p>如果未指定此选项，则<code class="codeph">SHA256</code>用来。必须有一个静态安装的提供程序来提供指定算法的实现，或者用户必须使用<code class="codeph">-addprovider</code>要么<code class="codeph">-providerClass</code>选项;否则，该命令将不会成功。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-98EB9E1F-7588-45A8-9CFD-0EA4D020BD02">
                           <!-- --></a><code class="codeph" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SIGALG-38071505">-sigalg <span class="variable" translate="no">algorithm</span></code> 
                     </dt>
                     <dd>
                        <p>指定用于对JAR文件进行签名的签名算法的名称。</p>
                        <p>该算法必须与用于签名JAR文件的私钥兼容。如果未指定此选项，则使用与私钥匹配的默认算法，如“ <a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">支持的算法”</a>部分所述。必须有一个静态安装的提供程序来提供指定算法的实现，或者您必须使用<code class="codeph">-addprovider</code>要么<code class="codeph">-providerClass</code>选项;否则，该命令将不会成功。
                        </p>
                        <p>有关标准消息摘要算法名称的列表，请参见<cite>Java安全性标准算法名称</cite> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-B9BBBF70-D8CC-49FD-B99C-20ACA243D318">
                           <!-- --></a><code class="codeph">-verify</code></dt>
                     <dd>验证签名的JAR文件。</dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-44730BE6-4A4B-429C-ACA8-AD23D2EEA689">
                           <!-- --></a><code class="codeph">-verbose [:<span class="variable" translate="no">suboptions</span>]</code></dt>
                     <dd>
                        <p>当。。。的时候<code class="codeph">-verbose</code>选项出现在命令行上，表示<code class="codeph">jarsigner</code>在使用子选项进行签名或验证时使用详细模式，以确定显示多少信息。这导致，导致<code class="codeph">jarsigner</code>输出有关JAR签名或验证进度的额外信息。的<code class="codeph"><span class="variable" translate="no">suboptions</span></code>可<code class="codeph">all</code> ， <code class="codeph">grouped</code> ， 要么<code class="codeph">summary</code> 。
                        </p>
                        <p>如果<code class="codeph">-certs</code>还指定了选项，则使用默认模式（或子选项<code class="codeph">all</code> ）显示正在处理的每个条目，然后显示每个JAR文件签名者的证书信息。
                        </p>
                        <p>如果<code class="codeph">-certs</code>和<code class="codeph">-verbose:grouped</code>指定子选项，然后将具有相同签名者信息的条目分组并与它们的证书信息一起显示。
                        </p>
                        <p>如果<code class="codeph">-certs</code>和<code class="codeph">-verbose:summary</code>指定子选项，然后将具有相同签名者信息的条目分组并与它们的证书信息一起显示。
                        </p>
                        <p>关于每个条目的详细信息被汇总并显示为<span class="italic">一个（或多个）条目</span> 。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFYINGASIGNEDJARFILE-98AC326E">验证签名的JAR文件的</a> <a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFICATIONWITHCERTIFICAT-98AC3750">示例和带有证书信息的验证的示例</a> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-3D1D0583-F824-4006-AFEC-11BC77DE6AB8">
                           <!-- --></a><code class="codeph">-certs</code></dt>
                     <dd>
                        <p>如果<code class="codeph">-certs</code>选项出现在命令行中，并且<code class="codeph">-verify</code>和<code class="codeph">-verbose</code>选项，然后输出包括JAR文件每个签名者的证书信息。此信息包括证书类型的名称（存储在<code class="codeph">.DSA</code>文件）来验证签名者的公钥，以及该证书是否为X.509证书（ <code class="codeph">java.security.cert.X509Certificate</code> ），然后是签名者的专有名称。
                        </p>
                        <p>还检查了密钥库。如果在命令行上未指定密钥库值，那么将检查缺省密钥库文件（如果有）。如果签名者的公共密钥证书与密钥库中的条目匹配，则该签名者的密钥库条目的别名将显示在括号中。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8E12FCFC-C59E-41DD-8FB2-C953EC1665F6">
                           <!-- --></a><code class="codeph">-tsa <span class="variable" translate="no">url</span></code> 
                     </dt>
                     <dd>
                        <p>如果<code class="codeph">-tsa http://example.tsa.url</code>在对JAR文件进行签名时出现在命令行上，然后为签名生成时间戳。网址， <code class="codeph">http://example.tsa.url</code> ，标识时间戳记授权机构（TSA）的位置，并覆盖通过<code class="codeph">-tsacert</code>选项。的<code class="codeph">-tsa</code>选项不需要在密钥库中存在TSA公共密钥证书。
                        </p>
                        <p>要生成时间戳， <code class="codeph">jarsigner</code>使用RFC 3161中定义的时间戳协议（TSP）与TSA通信。成功后，TSA返回的时间戳记令牌与签名一起存储在签名块文件中。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-87956D40-3BC0-426E-BAE0-424EFB4C601B">
                           <!-- --></a><code class="codeph">-tsacert <span class="variable" translate="no">alias</span></code> 
                     </dt>
                     <dd>
                        <p>什么时候<code class="codeph">-tsacert alias</code>在对JAR文件进行签名时出现在命令行上，将为签名生成时间戳。别名标识有效的密钥库中的TSA公共密钥证书。检查条目的证书是否包含主题信息访问扩展名，该扩展名包含标识TSA位置的URL。</p>
                        <p>使用以下命令时，TSA公共密钥证书必须存在于密钥库中： <code class="codeph">-tsacert</code>选项。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-9B096F7D-B29B-440B-B765-55FB84A1E608">
                           <!-- --></a><code class="codeph">-tsapolicyid <span class="variable" translate="no">policyid</span></code> 
                     </dt>
                     <dd>
                        <p>指定对象标识符（OID），该对象标识符标识要发送到TSA服务器的策略ID。如果未指定此选项，则不会发送任何策略ID，TSA服务器将选择一个默认策略ID。</p>
                        <p>对象标识符由X.696定义，X.696是ITU电信标准化部门（ITU-T）的标准。这些标识符通常是句点分隔的非负数字集，例如<code class="codeph">1.2.3.4</code> ， 例如。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2C246C98-4F46-4177-ACE9-656D6042185B">
                           <!-- --></a><code class="codeph">—tsadigestalg <span class="variable" translate="no">algorithm</span></code> 
                     </dt>
                     <dd>
                        <p>指定消息摘要算法，该算法用于生成要发送到TSA服务器的消息印记。如果未指定此选项，则将使用SHA-256。</p>
                        <p>请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__SUPPORTEDALGORITHMS-9B9E0E06">支持的算法</a> 。
                        </p>
                        <p>有关标准消息摘要算法名称的列表，请参见<cite>Java安全性标准算法名称</cite> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-14658619-5176-469F-8C64-EF35B4EADDA5">
                           <!-- --></a><code class="codeph">-internalsf</code></dt>
                     <dd>
                        <p>过去， <code class="codeph">.DSA</code>签名JAR文件时生成的（签名块）文件包括的完整编码副本<code class="codeph">.SF</code>文件（签名文件）也会生成。此行为已更改。为了减小输出JAR文件的整体大小， <code class="codeph">.DSA</code>默认情况下，文件不包含<code class="codeph">.SF</code>归档了。如果<code class="codeph">-internalsf</code>出现在命令行上，然后利用旧的行为。此选项对于测试很有用。在实践中，请勿使用<code class="codeph">-internalsf</code>选项，因为它会产生更高的开销。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D752AACD-5CB7-47B0-AB88-1F6D86039765">
                           <!-- --></a><code class="codeph">-sectionsonly</code></dt>
                     <dd>
                        <p>如果<code class="codeph">-sectionsonly</code>选项出现在命令行上，然后<code class="codeph">.SF</code>签名JAR文件时生成的文件（签名文件）不包含包含整个清单文件哈希的标头。它仅包含与JAR文件中包含的每个单独的源文件有关的信息和哈希。请参阅签名文件。
                        </p>
                        <p>默认情况下，此标头是作为优化添加的。当标头存在时，无论何时验证JAR文件，验证都可以首先检查以查看标头中的哈希是否与整个清单文件的哈希匹配。如果存在匹配项，则验证继续进行下一步。当没有匹配项时，有必要进行较少优化的验证，以确保<code class="codeph">.SF</code>文件等于清单文件中其对应节的哈希值。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__CCHDCIBD">JAR文件验证</a> 。
                        </p>
                        <p>的<code class="codeph">-sectionsonly</code>选项主要用于测试。它不应该用于测试，因为使用它会导致更高的开销。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-0DB4C4BF-31AB-46EC-BE52-559CAC74803E">
                           <!-- --></a><code class="codeph">-protected</code></dt>
                     <dd>
                        <p>值可以是<code class="codeph">true</code>要么<code class="codeph">false</code> 。指定<code class="codeph">true</code>当必须通过受保护的身份验证路径（例如专用PIN读取器）指定密码时。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-4D34E80E-53D8-4410-AA22-863F8AC87199">
                           <!-- --></a><code class="codeph">-providerName <span class="variable" translate="no">providerName</span></code> 
                     </dt>
                     <dd>
                        <p>如果在<code class="codeph">java.security</code>安全属性文件，则可以使用<code class="codeph">-providerName</code>以特定的提供者实例为目标的选项。此选项的参数是提供程序的名称。
                        </p>
                        <p>对于Oracle PKCS＃11提供程序， <code class="codeph"><span class="variable" translate="no">providerName</span></code>的形式<code class="codeph">SunPKCS11-<span class="variable" translate="no">TokenName</span></code> ，在哪里<code class="codeph"><span class="variable" translate="no">TokenName</span></code>是配置了提供程序实例的名称后缀，如配置属性表中所述。例如，以下命令列出了<code class="codeph">PKCS #11</code>名称后缀的密钥库提供程序实例<code class="codeph">SmartCard</code> ：</p><pre class="pre codeblock"><code>jarsigner -keystore NONE -storetype PKCS11
        -providerName SunPKCS11-SmartCard
        -list
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E322263D-7CD6-48F4-906B-CE1102818642">
                           <!-- --></a><code class="codeph">-addprovider <span class="variable" translate="no">name</span> [-providerArg <span class="variable" translate="no">arg</span>]</code> 
                     </dt>
                     <dd>
                        <p>通过名称（例如SunPKCS11）和可选的configure参数添加安全提供程序。安全提供程序的值是模块中定义的安全提供程序的名称。</p>
                        <p>与<code class="codeph">-providerArg ConfigFilePath</code>选项， <code class="codeph">keytool</code>和<code class="codeph">jarsigner</code>工具动态安装提供程序并使用<code class="codeph">ConfigFilePath</code>令牌配置文件的路径。以下示例显示了列出列表的命令<code class="codeph">PKCS #11</code>在安全属性文件中未配置Oracle PKCS＃11提供程序时的密钥库。
                        </p><pre class="pre codeblock"><code>jarsigner -keystore NONE -storetype PKCS11
          -addprovider SunPKCS11
          -providerArg /mydir1/mydir2/token.config
</code></pre></dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-C79C5D40-3296-4761-89C7-403E786F5247">
                           <!-- --></a><code class="codeph">-providerClass <span class="variable" translate="no">provider-class-name</span> [-providerArg <span class="variable" translate="no">arg</span>]</code> 
                     </dt>
                     <dd>
                        <p>当服务提供者未在列表中列出时，用于指定加密服务提供者的主类文件的名称。 <code class="codeph">java.security</code>安全属性文件。通过完全限定的类名和可选的configure参数添加安全提供程序。
                        </p>
                        <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2ACFEE05-B43A-4CA3-97F8-4587C0232EB9">
                           <p class="notep1">注意：</p>
                           <p>加载PKCS11的首选方法是使用模块。看到<code class="codeph">-addprovider</code> 。
                           </p>
                        </div>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-68BB3416-68CA-4AF7-B89B-BBC3ECBD513E">
                           <!-- --></a><code class="codeph">-J<span class="variable" translate="no">javaoption</span></code></dt>
                     <dd>
                        <p>通过指定<code class="codeph"><span class="variable" translate="no">javaoption</span></code>字符串直接发送到Java解释器。的<code class="codeph">jarsigner</code>命令是解释器的包装器。此选项不应包含任何空格。这对于调整执行环境或内存使用情况很有用。有关可能的解释器选项的列表，请键入<code class="codeph">java -h</code>要么<code class="codeph">java -X</code>在命令行中。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E8B4EE6F-229A-4307-97CC-53CB4F9BEC74">
                           <!-- --></a><code class="codeph">-strict</code></dt>
                     <dd>
                        <p>在签名或验证过程中，该命令可能会发出警告消息。如果指定此选项，则该工具的退出代码将反映此命令发现的严重警告消息。请参阅<a href="jarsigner.html#GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">错误和警告</a> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-49A3F64D-3441-4045-93B5-3B8C7F1E74B3">
                           <!-- --></a><code class="codeph">-conf <span class="variable" translate="no">url</span></code></dt>
                     <dd>
                        <p>指定一个预配置的选项文件。</p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-3E4AC4ED-4417-467C-9630-734650A742B4">不推荐使用的选项</p>
                  <p>下列<code class="codeph">jarsigner</code> <span>从JDK 9开始不推荐使用这些</span>选项<span>，并且可能在以后的JDK版本中将其删除。</span></p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-27951A1D-CDF5-4D32-A69A-950378B6A48E">
                           <!-- --></a><code class="codeph">-altsigner <span class="variable" translate="no">class</span></code> 
                     </dt>
                     <dd>
                        <p>此选项指定替代的签名机制。完全限定的类名称标识扩展了以下内容的类文件： <code class="codeph">com.sun.jarsigner.ContentSigner</code>抽象类。此类文件的路径由<code class="codeph">-altsignerpath</code>选项。如果<code class="codeph">-altsigner</code>选项被使用，然后<code class="codeph">jarsigner</code>命令使用指定类提供的签名机制。否则， <code class="codeph">jarsigner</code>命令使用其默认签名机制。
                        </p>
                        <p>例如，使用由名为的类提供的签名机制<code class="codeph">com.sun.sun.jarsigner.AuthSigner</code> ， 使用<code class="codeph">jarsigner</code>选项<code class="codeph">-altsigner com.sun.jarsigner.AuthSigner</code> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-D98BC464-50D9-4B10-9D00-27E90D513B03">
                           <!-- --></a><code class="codeph">-altsignerpath <span class="variable" translate="no">classpathlist</span></code> 
                     </dt>
                     <dd>
                        <p>指定类文件及其依赖的任何JAR文件的路径。类文件名用<code class="codeph">-altsigner</code>选项。如果类文件在JAR文件中，则此选项指定该JAR文件的路径。
                        </p>
                        <p>可以指定绝对路径或相对于当前目录的路径。如果<code class="codeph"><span class="variable" translate="no">classpathlist</span></code>包含多个路径或JAR文件，则应将它们分隔为：</p>
                        <ul style="list-style-type:disc">
                           <li>
                              <p>在Oracle Solaris，Linux和macOS上的冒号（:)</p>
                           </li>
                           <li>
                              <p>Windows上的分号（;）</p>
                           </li>
                        </ul>
                        <p>当类已在搜索路径中时，则不需要此选项。</p>
                        <p>下面的示例演示如何指定包含类文件的JAR文件的路径。包含JAR文件名。</p><pre class="pre codeblock"><code>-altsignerpath /home/user/lib/authsigner.jar
</code></pre><p>以下示例显示如何指定包含类文件的JAR文件的路径。JAR文件名被省略。</p><pre class="pre codeblock"><code>-altsignerpath /home/user/classes/com/sun/tools/jarsigner/
</code></pre></dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__BGBIIAAG">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-298665C9-03FB-4742-B4FE-E0D8726187F6">错误和警告</p>
                  <p>在签名或验证过程中， <code class="codeph">jarsigner</code>该命令可能会发出各种错误或警告。
                  </p>
                  <p>如果发生故障， <code class="codeph">jarsigner</code>命令以代码1退出。如果没有故障，但是有一个或多个严重警告，则<code class="codeph">jarsigner</code>当以下命令退出时，代码为0 <code class="codeph">-strict</code>选项<span class="bold">未</span>指定，或者当警告代码的OR值退出时， <code class="codeph">-strict</code>已指定。如果只有信息警告或根本没有警告，则该命令始终以代码0退出。
                  </p>
                  <p>例如，如果用于签署条目的证书已过期并且具有KeyUsage扩展名，不允许其签署文件，则<code class="codeph">jarsigner</code>当以下命令退出时，代码12（= 4 + 8）退出<code class="codeph">-strict</code>指定了选项。
                  </p>
                  <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-81838F36-2704-42F5-A266-9DC9B1411E18">
                     <p class="notep1">注意：</p>
                     <p>退出代码被重用，因为在Oracle Solaris，Linux和OS X上只有0到255之间的值是合法的。</p>
                  </div>
                  <p>以下各节描述了错误和警告的名称，代码和说明， <code class="codeph">jarsigner</code>命令可以发出。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-56EE2A79-3D04-4124-A59B-C02E4B65FD2D">失败</p>
                  <p>的原因<code class="codeph">jarsigner</code>命令失败包括（但不限于）命令行解析错误，无法找到用于签名JAR文件的密钥对或签名的JAR验证失败。
                  </p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-436C6B34-48F8-4859-B515-206811063270"><!-- --></a>失败</dt>
                     <dd>
                        <p>代码1签名或验证失败。</p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-9BD723B2-9EFB-4D01-B9A2-360EEA021816">严重警告</p>
                  <div class="infoboxnote" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6B1F9333-9506-422D-9CE8-F9047503B109">
                     <p class="notep1">注意：</p>
                     <p>如果您指定严重警告，则报告为错误。 <code class="codeph">-strict</code>选项。
                     </p>
                  </div>
                  <p>的原因<code class="codeph">jarsigner</code>命令发出严重警告，包括用于签名JAR文件的证书有错误或签名的JAR文件有其他问题。
                  </p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-33F3C598-9844-4FAC-B6F6-7456D3074AEA"><!-- --></a> hasExpiredCert</dt>
                     <dd>
                        <p>代码4。该JAR包含其签名者证书已过期的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-67DD63FB-9485-4A73-BE8D-A5FB23E89F70"><!-- --></a> hasExpiredTsaCert</dt>
                     <dd>
                        <p>代码4。时间戳已过期。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-915659AD-B96A-426A-8223-503346A7D3DF"><!-- --></a> notYetValidCert</dt>
                     <dd>
                        <p>代码4。此JAR包含其签署者证书尚未生效的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2FB6B625-A297-418B-BBF0-C60C861E05FE"><!-- --></a> chainNotValidated</dt>
                     <dd>
                        <p>代码4。该JAR包含其证书链未经验证的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-ED6F4E54-5DA7-4E1C-AC87-31B978EF8DDF"><!-- --></a> tsaChainNotValidated</dt>
                     <dd>
                        <p>代码64时间戳无效。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8FE7F319-E665-45EC-BE82-3416E141023E"><!-- --></a>签名者自签名</dt>
                     <dd>
                        <p>代码4。此JAR包含签名者证书是自签名的条目。</p> 
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-280AB9B2-DF17-4967-91C5-29CE2CFA4066"><!-- --></a></dt>
                     <dd>
                        <p>代码4。在命令行上指定的算法被认为是安全风险。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-86F6C447-BD50-4464-8F6E-71F6AA8231B0"><!-- --></a> badKeyUsage</dt>
                     <dd>
                        <p>代码8。此JAR包含其签名者证书的KeyUsage扩展名不允许代码签名的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E332FD6A-227E-4C26-BA88-431F02EE8F3C"><!-- --></a> badExtendedKeyUsage</dt>
                     <dd>
                        <p>代码8。此JAR包含其签名者证书的ExtendedKeyUsage扩展名不允许代码签名的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2FD31072-4FCA-426A-A4A6-D413499CFBF6"><!-- --></a> badNetscapeCertType</dt>
                     <dd>
                        <p>代码8。此JAR包含其签名者证书的NetscapeCertType扩展名不允许代码签名的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-5D6643D6-D266-4EE7-9B1B-D48B9742E3FC"><!-- --></a> hasUnsignedEntry</dt>
                     <dd>
                        <p>代码16。此JAR包含未经签名的条目，这些条目未经完整性检查。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-6ABF4536-1318-4591-AD02-E0AC02ED6A4C"><!-- --></a> notSignedByAlias</dt>
                     <dd>
                        <p>代码32此JAR包含未由指定别名签名的已签名条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-9055442D-534A-4088-B00A-DD7C2964ABBB"><!-- --></a> aliasNotInStore</dt>
                     <dd>
                        <p>代码32此JAR包含未在此密钥库中由别名签名的签名条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8229A865-D667-4BCF-8481-1E30B23C9FF1"><!-- --></a> tsaChainNotValidated</dt>
                     <dd>
                        <p>代码64此JAR包含其TSA证书链无效的条目。</p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-929025C9-46EC-4DDC-9E4B-753133A05AB9">信息警告</p>
                  <p>信息警告包括那些不是错误但被视为不良做法的警告。他们没有密码。</p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-DBB19A17-E966-498A-8707-80BA68E213AA"><!-- --></a> hasExpiringCert</dt>
                     <dd>
                        <p>该JAR包含其签名者证书在六个月内到期的条目。</p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-948E38EC-94D2-49D8-A4C2-35FA1A93FA8E"><!-- --></a> hasExpiringTsaCert</dt>
                     <dd>
                        <p>时间戳记将在一年内过期<code class="codeph">YYYY-MM-DD</code> 。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-2A03F610-2E80-4AEA-95C7-751643C52E74"><!-- --></a> noTimestamp</dt>
                     <dd>
                        <p>此JAR包含不包含时间戳的签名。如果没有时间戳，则用户可能无法在签署者证书的到期日期之后验证此JAR文件（ <code class="codeph">YYYY-MM-DD</code> ）或以后的任何撤消日期之后。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFSIGNINGAJARFILE-98AC2C8D">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-8DE81983-223E-4151-B1D7-2376735A83ED">签名JAR文件的示例</p>
                  <p>使用以下命令进行签名<code class="codeph">bundle.jar</code>使用其密钥库别名为的用户的私钥<code class="codeph">jane</code>在名为<code class="codeph">mystore</code>在里面<code class="codeph">working</code>目录并命名已签名的JAR文件<code class="codeph">sbundle.jar</code> ：</p><pre class="pre codeblock"><code>jarsigner -keystore /working/mystore
    -storepass <span class="variable" translate="no">&lt;keystore password&gt;</span>
    -keypass <span class="variable" translate="no">&lt;private key password&gt;</span>
    -signedjar sbundle.jar bundle.jar jane
</code></pre><p>没有<code class="codeph">-sigfile</code>在上一条命令中指定，以便生成<code class="codeph">.SF</code>和<code class="codeph">.DSA</code>放置在签名的JAR文件中的文件具有基于别名的默认名称。他们被命名<code class="codeph">JANE.SF</code>和<code class="codeph">JANE.DSA</code> 。
                  </p>
                  <p>如果要提示您输入商店密码和私钥密码，则可以将前面的命令缩短为以下内容：</p><pre class="pre codeblock"><code>jarsigner -keystore /working/mystore
    -signedjar sbundle.jar bundle.jar jane
</code></pre><p>如果<code class="codeph">keystore</code>是默认值<code class="codeph">keystore</code> （ <code class="codeph">.keystore</code>在您的主目录中），则无需指定一个<code class="codeph">keystore</code> ， 如下：</p><pre class="pre codeblock"><code>jarsigner -signedjar sbundle.jar bundle.jar jane
</code></pre><p>如果您希望已签名的JAR文件覆盖输入的JAR文件（ <code class="codeph">bundle.jar</code> ），则无需指定一个<code class="codeph">-signedjar</code>选项，如下所示：</p><pre class="pre codeblock"><code>jarsigner bundle.jar jane
</code></pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFYINGASIGNEDJARFILE-98AC326E">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-E8E5264B-2EE0-466C-973B-2653BC5B2D9B">验证签名的JAR文件的示例</p>
                  <p>要验证已签名的JAR文件以确保签名有效并且未篡改JAR文件，请使用以下命令：</p><pre class="pre codeblock"><code>jarsigner -verify ButtonDemo.jar
</code></pre><p>验证成功后， <code class="codeph">jar verified</code>被陈列。否则，将显示错误消息。当您使用<code class="codeph">-verbose</code>选项。样本使用<code class="codeph">jarsigner</code>与<code class="codeph">-verbose</code>选项如下：</p><pre class="pre codeblock"><code>jarsigner -verify -verbose ButtonDemo.jar

s       866 Tue Sep 12 20:08:48 EDT 2017 META-INF/MANIFEST.MF
        825 Tue Sep 12 20:08:48 EDT 2017 META-INF/ORACLE_C.SF
       7475 Tue Sep 12 20:08:48 EDT 2017 META-INF/ORACLE_C.RSA
          0 Tue Sep 12 20:07:54 EDT 2017 META-INF/
          0 Tue Sep 12 20:07:16 EDT 2017 components/
          0 Tue Sep 12 20:07:16 EDT 2017 components/images/
sm      523 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo$1.class
sm     3440 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo.class
sm     2346 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo.jnlp
sm      172 Tue Sep 12 20:07:16 EDT 2017 components/images/left.gif
sm      235 Tue Sep 12 20:07:16 EDT 2017 components/images/middle.gif
sm      172 Tue Sep 12 20:07:16 EDT 2017 components/images/right.gif

  s = signature was verified
  m = entry is listed in manifest
  k = at least one certificate was found in keystore

- Signed by "CN="Oracle America, Inc.", OU=Software Engineering, O="Oracle America, Inc.", L=Redwood City, ST=California, C=US"
    Digest algorithm: SHA-256
    Signature algorithm: SHA256withRSA, 2048-bit key
  Timestamped by "CN=Symantec Time Stamping Services Signer - G4, O=Symantec Corporation, C=US" on Tue Sep 12 20:08:49 UTC 2017
    Timestamp digest algorithm: SHA-1
    Timestamp signature algorithm: SHA1withRSA, 2048-bit key

jar verified.

The signer certificate expired on 2018-02-01. However, the JAR will be valid until the timestamp expires on 2020-12-29.
</code></pre></div>
               <!-- class="section" -->
               <div class="section" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__EXAMPLEOFVERIFICATIONWITHCERTIFICAT-98AC3750">
                  <p class="subhead1" id="GUID-925E7A1B-B3F3-44D2-8B49-0B3FA2C54864__GUID-DD5358A6-310D-470A-9185-7C927A680249">带有证书信息的验证示例</p>
                  <p>如果您指定<code class="codeph">-certs</code>与选项<code class="codeph">-verify</code>和<code class="codeph">-verbose</code>选项，然后输出包括JAR文件每个签名者的证书信息。该信息包括证书类型，签名者专有名称信息（当它是X.509证书时），以及在括号中，当JAR文件中的公钥证书与密钥库条目中的签名相匹配时，签名者的密钥库别名，例如：</p><pre class="pre codeblock"><code>jarsigner -keystore $JAVA_HOME/lib/security/cacerts -verify -verbose -certs ButtonDemo.jar

s k     866 Tue Sep 12 20:08:48 EDT 2017 META-INF/MANIFEST.MF

      &gt;&gt;&gt; Signer
      X.509, CN="Oracle America, Inc.", OU=Software Engineering, O="Oracle America, Inc.", L=Redwood City, ST=California, C=US
      [certificate is valid from 2017-01-30, 7:00 PM to 2018-02-01, 6:59 PM]
      X.509, CN=Symantec Class 3 SHA256 Code Signing CA, OU=Symantec Trust Network, O=Symantec Corporation, C=US
      [certificate is valid from 2013-12-09, 7:00 PM to 2023-12-09, 6:59 PM]
      X.509, CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US (verisignclass3g5ca [jdk])
      [trusted certificate]
      &gt;&gt;&gt; TSA
      X.509, CN=Symantec Time Stamping Services Signer - G4, O=Symantec Corporation, C=US
      [certificate is valid from 2012-10-17, 8:00 PM to 2020-12-29, 6:59 PM]
      X.509, CN=Symantec Time Stamping Services CA - G2, O=Symantec Corporation, C=US
      [certificate is valid from 2012-12-20, 7:00 PM to 2020-12-30, 6:59 PM]

        825 Tue Sep 12 20:08:48 EDT 2017 META-INF/ORACLE_C.SF
       7475 Tue Sep 12 20:08:48 EDT 2017 META-INF/ORACLE_C.RSA
          0 Tue Sep 12 20:07:54 EDT 2017 META-INF/
          0 Tue Sep 12 20:07:16 EDT 2017 components/
          0 Tue Sep 12 20:07:16 EDT 2017 components/images/
smk     523 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo$1.class

      [entry was signed on 2017-09-12, 4:08 PM]
      &gt;&gt;&gt; Signer
      X.509, CN="Oracle America, Inc.", OU=Software Engineering, O="Oracle America, Inc.", L=Redwood City, ST=California, C=US
      [certificate is valid from 2017-01-30, 7:00 PM to 2018-02-01, 6:59 PM]
      X.509, CN=Symantec Class 3 SHA256 Code Signing CA, OU=Symantec Trust Network, O=Symantec Corporation, C=US
      [certificate is valid from 2013-12-09, 7:00 PM to 2023-12-09, 6:59 PM]
      X.509, CN=VeriSign Class 3 Public Primary Certification Authority - G5, OU="(c) 2006 VeriSign, Inc. - For authorized use only", OU=VeriSign Trust Network, O="VeriSign, Inc.", C=US (verisignclass3g5ca [jdk])
      [trusted certificate]
      &gt;&gt;&gt; TSA
      X.509, CN=Symantec Time Stamping Services Signer - G4, O=Symantec Corporation, C=US
      [certificate is valid from 2012-10-17, 8:00 PM to 2020-12-29, 6:59 PM]
      X.509, CN=Symantec Time Stamping Services CA - G2, O=Symantec Corporation, C=US
      [certificate is valid from 2012-12-20, 7:00 PM to 2020-12-30, 6:59 PM]

smk    3440 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo.class
...
smk    2346 Tue Sep 12 20:07:16 EDT 2017 components/ButtonDemo.jnlp
...
smk     172 Tue Sep 12 20:07:16 EDT 2017 components/images/left.gif
...
smk     235 Tue Sep 12 20:07:16 EDT 2017 components/images/middle.gif
...
smk     172 Tue Sep 12 20:07:16 EDT 2017 components/images/right.gif
...

  s = signature was verified
  m = entry is listed in manifest
  k = at least one certificate was found in keystore

- Signed by "CN="Oracle America, Inc.", OU=Software Engineering, O="Oracle America, Inc.", L=Redwood City, ST=California, C=US"
    Digest algorithm: SHA-256
    Signature algorithm: SHA256withRSA, 2048-bit key
  Timestamped by "CN=Symantec Time Stamping Services Signer - G4, O=Symantec Corporation, C=US" on Tue Sep 12 20:08:49 UTC 2017
    Timestamp digest algorithm: SHA-1
    Timestamp signature algorithm: SHA1withRSA, 2048-bit key

jar verified.

The signer certificate expired on 2018-02-01. However, the JAR will be valid until the timestamp expires on 2020-12-29.
</code></pre><p>如果签名者的证书不是X.509证书，则没有可分辨的名称信息。在这种情况下，仅显示证书类型和别名。例如，如果证书是PGP证书，而别名是<code class="codeph">bob</code> ，那么您将获得： <code class="codeph">PGP, (bob)</code> 。
                  </p>
               </div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   

</body></html>