<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="abstract" content="You use the jstatd command to monitor the creation and termination of instrumented Java HotSpot VMs. This command is experimental and unsupported.">
      <meta name="description" content="You use the jstatd command to monitor the creation and termination of instrumented Java HotSpot VMs. This command is experimental and unsupported.">
      <title>jstatd</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="Tools Reference">
      <meta property="og:description" content="You use the jstatd command to monitor the creation and termination of instrumented Java HotSpot VMs. This command is experimental and unsupported.">
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="Tools Reference">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="tools-reference.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-20T10:03:46-07:00">
      <meta name="dcterms.title" content="Tools Reference">
      <meta name="dcterms.dateCopyrighted" content="1993, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E95074-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="jstat.html" title="Previous" type="text/html">
      <link rel="next" href="java-accessibility-utilities-and-commands.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="TOOLS">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body >
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="jstat.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="java-accessibility-utilities-and-commands.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">工具参考</span></a></li>
               <li property="itemListElement" typeof="ListItem"><a href="monitoring-tools-and-commands.html" property="item" typeof="WebPage"><span property="name">监控工具和命令</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">jstatd</li>
            </ol>
            <a id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870" name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870"></a><a id="JSWOR735"></a>
            
            <h2 id="JSWOR-GUID-FA737806-75CD-4EE7-A087-1CC4A5441870" class="sect2">jstatd</h2>
         </header>
         <div class="ind">
            <div>
               <p><span>您使用<code class="codeph">jstatd</code>命令以监视已检测Java HotSpot VM的创建和终止。此命令是实验性的，不受支持。</span></p>
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-C565DF59-C2A8-4FB1-A6D5-F7E15F4D197F">概要</p><pre class="pre codeblock"><code>jstatd [ <span class="variable" translate="no">options</span> ]</code></pre><dl>
                     <dt class="dlterm"><a name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-5FE67FA7-7926-4934-9579-1E5FF4E6034A">
                           <!-- --></a><code class="codeph"><span class="variable" translate="no">options</span></code></dt>
                     <dd>
                        <p>这代表<code class="codeph">jstatd</code>命令行选项。请参见<a href="jstatd.html#GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__BABGDCJC">jstatd命令的选项</a> 。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-FBDCB5C1-D2B3-4FED-8BF1-90D3B7D7F943">描述</p>
                  <p>的<code class="codeph">jstatd</code> command是一个RMI服务器应用程序，它监视已检测的Java HotSpot VM的创建和终止，并提供启用远程监视工具的界面， <code class="codeph">jstat</code>和<code class="codeph">jps</code> ，以附加到在本地主机上运行的JVM并收集有关JVM进程的信息。
                  </p>
                  <p>的<code class="codeph">jstatd</code>服务器需要本地主机上的RMI注册表。的<code class="codeph">jstatd</code>服务器尝试在默认端口或您使用以下命令指定的端口上附加到RMI注册表： <code class="codeph">-p</code><code class="codeph">port</code>选项。如果未找到RMI注册表，则会在<code class="codeph">jstatd</code>绑定到端口所指示的应用程序<code class="codeph">-p</code><code class="codeph">port</code>选项或默认的RMI注册表端口<code class="codeph">-p</code><code class="codeph">port</code>选项被省略。您可以通过指定以下内容来停止内部RMI注册表的创建： <code class="codeph">-nr</code>选项。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__BABGDCJC">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-F7ED4455-E32A-4311-9847-A76F2119A8A0">jstatd命令的选项</p>
                  <dl>
                     <dt class="dlterm"><a name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-0AAFD5F7-D523-447B-BA9C-9E7ABE1D7BFD">
                           <!-- --></a><code class="codeph">-nr</code></dt>
                     <dd>
                        <p>该选项不会尝试在内部创建内部RMI注册表。 <code class="codeph">jstatd</code>找不到现有的RMI注册表时进行处理。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-A64ED3F2-98B6-4432-81E5-118A857312DB">
                           <!-- --></a><code class="codeph">-p <span class="variable" translate="no">port</span></code> 
                     </dt>
                     <dd>
                        <p>此选项设置端口号，该端口号应在RMI注册表中可以找到的位置，或者在找不到时创建的端口号<code class="codeph">-nr</code>未指定选项。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-4EA93017-0758-4BA5-9874-BB6A15BD80ED">
                           <!-- --></a><code class="codeph">-n <span class="variable" translate="no">rminame</span></code> 
                     </dt>
                     <dd>
                        <p>此选项设置RMI注册表中远程RMI对象绑定的名称。默认名称是<code class="codeph">JStatRemoteHost</code> 。如果多个<code class="codeph">jstatd</code>服务器在同一主机上启动，然后可以通过指定此选项使每个服务器的导出RMI对象的名称唯一。但是，这样做需要将唯一的服务器名称包含在监视客户端的服务器名称中。 <code class="codeph">hostid</code>和<code class="codeph">vmid</code>字符串。
                        </p>
                     </dd>
                     <dt class="dlterm"><a name="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-2BDF105B-2499-4EBF-99C8-200CCAD96762">
                           <!-- --></a><code class="codeph">-J<span class="variable" translate="no">option</span></code></dt>
                     <dd>
                        <p>此选项通过Java <code class="codeph">option</code> JVM，其中该选项是Java应用程序启动器参考页上描述的选项之一。例如， <code class="codeph">-J-Xms48m</code>将启动内存设置为48 MB。参见<a href="java.html#GUID-3B1CE181-CD30-4178-9602-230B800D4FAE" title="您可以使用java命令启动Java应用程序。">java</a> 。
                        </p>
                     </dd>
                  </dl>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-D34AAE4F-2CBE-4D2D-89B5-F1521FDC9E48">安全</p>
                  <p>的<code class="codeph">jstatd</code>服务器只能监视具有相应本机访问权限的JVM。因此， <code class="codeph">jstatd</code>进程必须使用与目标JVM相同的用户凭据运行。某些用户凭据（例如<span>Oracle Solaris，Linux和macOS</span>操作系统中的root用户）有权访问系统上任何JVM导出的工具。一种<code class="codeph">jstatd</code>使用此类凭据运行的进程可以监视系统上的任何JVM，但会带来其他安全问题。
                  </p>
                  <p>的<code class="codeph">jstatd</code>服务器不提供任何远程客户端身份验证。因此，运行<code class="codeph">jstatd</code>服务器进程公开了所有JVM的工具导出<code class="codeph">jstatd</code>进程具有对网络上任何用户的访问权限。在您的环境中，这种暴露可能是不希望的，因此，在开始执行此操作之前应考虑本地安全策略。 <code class="codeph">jstatd</code>过程，特别是在生产环境或不安全的网络中。
                  </p>
                  <p>的<code class="codeph">jstatd</code>服务器安装以下实例<code class="codeph">RMISecurityPolicy</code>当未安装其他安全管理器时，因此需要指定安全策略文件。该策略文件必须符合默认策略实施和策略文件语法。
                  </p>
                  <p>如果使用自定义的策略文件无法解决您的安全问题，则最安全的操作是不运行<code class="codeph">jstatd</code>服务器并使用<code class="codeph">jstat</code>和<code class="codeph">jps</code>本地工具。但是，使用时<code class="codeph">jps</code>要获取已检测的JVM列表，该列表将不包括在Docker容器中运行的任何JVM。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-DE495BF8-F19F-4FAE-A093-1C1CBC997932">远端介面</p>
                  <p>导出的接口<code class="codeph">jstatd</code>流程是专有的，并保证可以更改。不鼓励用户和开发人员编写此接口。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-84521FD6-7501-491E-AAF0-0239BDC7A564">例子</p>
                  <p>以下是示例<code class="codeph">jstatd</code>命令。的<code class="codeph">jstatd</code>脚本会在后台自动启动服务器。
                  </p>
               </div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-C31C58EA-4C61-4244-A88D-147F6E461A45">内部RMI注册表</p>
                  <p>本示例说明了如何启动<code class="codeph">jstatd</code>内部RMI注册表进行会话。本示例假定没有其他服务器绑定到默认RMI注册表端口（端口<code class="codeph">1099</code> ）。
                  </p><pre class="pre codeblock"><code>jstatd -J-Djava.security.policy=all.policy
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-067A934F-9518-4B3E-A49B-43088693207E">外部RMI注册中心</p>
                  <p>这个例子开始<code class="codeph">jstatd</code>与外部RMI注册表的会话。
                  </p><pre class="pre codeblock"><code>rmiregistry&amp;
jstatd -J-Djava.security.policy=all.policy
</code></pre><p>这个例子开始<code class="codeph">jstatd</code>端口上与外部RMI注册表服务器进行会话<code class="codeph">2020</code> 。
                  </p><pre class="pre codeblock"><code>jrmiregistry 2020&amp;
jstatd -J-Djava.security.policy=all.policy -p 2020
</code></pre><p>这个例子开始<code class="codeph">jstatd</code>在端口2020上与外部RMI注册表进行会话<code class="codeph">AlternateJstatdServerName</code> 。
                  </p><pre class="pre codeblock"><code>rmiregistry 2020&amp;
jstatd -J-Djava.security.policy=all.policy -p 2020
    -n AlternateJstatdServerName
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-804C6FC7-0337-4612-A34D-BEAFC897513F">停止创建进程内RMI注册表</p>
                  <p>这个例子开始<code class="codeph">jstatd</code>找不到一个不会创建RMI注册表的会话。本示例假定RMI注册表已在运行。如果RMI注册表未运行，则会显示错误消息。
                  </p><pre class="pre codeblock"><code>jstatd -J-Djava.security.policy=all.policy -nr
</code></pre></div>
               <!-- class="section" -->
               <div class="section">
                  <p class="subhead1" id="GUID-FA737806-75CD-4EE7-A087-1CC4A5441870__GUID-8E595C98-A9A0-4E82-88D1-F7CAA7AAF6D6">启用RMI记录</p>
                  <p>这个例子开始<code class="codeph">jstatd</code>启用RMI日志记录功能的会话。此技术可用作故障排除辅助工具或用于监视服务器活动。
                  </p><pre class="pre codeblock"><code>jstatd -J-Djava.security.policy=all.policy
    -J-Djava.rmi.server.logCalls=true
</code></pre></div>
               <!-- class="section" -->
            </div>
         </div>
      </article>
   

</body></html>