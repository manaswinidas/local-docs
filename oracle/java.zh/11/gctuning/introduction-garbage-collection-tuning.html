<html lang="en-us"  xml:lang="en-us"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <title>Introduction to Garbage Collection Tuning</title>
      <meta property="og:site_name" content="Oracle Help Center">
      <meta property="og:title" content="HotSpot Virtual Machine Garbage Collection Tuning Guide">
      <meta property="og:description" content>
      <link rel="stylesheet" href="/sp_common/book-template/ohc-book-template/css/book.css">
      <link rel="shortcut icon" href="/sp_common/book-template/ohc-common/img/favicon.ico">
      <meta name="application-name" content="HotSpot Virtual Machine Garbage Collection Tuning Guide">
      <meta name="generator" content="DITA Open Toolkit version 1.8.5 (Mode = doc)">
      <meta name="plugin" content="SP_docbuilder HTML plugin release 18.2.2">
      <link rel="alternate" href="hotspot-virtual-machine-garbage-collection-tuning-guide.pdf" title="PDF File" type="application/pdf">
      <meta name="robots" content="all">
      <link rel="schema.dcterms" href="http://purl.org/dc/terms/">
      <meta name="dcterms.created" content="2018-09-21T11:00:40-07:00">
      <meta name="dcterms.title" content="HotSpot Virtual Machine Garbage Collection Tuning Guide">
      <meta name="dcterms.dateCopyrighted" content="2015, 2018">
      <meta name="dcterms.category" content="java">
      <meta name="dcterms.identifier" content="E95201-01">
      
      <meta name="dcterms.product" content="en/java/javase/11">
      <meta name="dcterms.release" content="11">
      <link rel="prev" href="preface.html" title="Previous" type="text/html">
      <link rel="next" href="ergonomics.html" title="Next" type="text/html">
      <script>
        document.write('<style type="text/css">');
        document.write('body > .noscript, body > .noscript ~ * { visibility: hidden; }');
        document.write('</style>');
     </script>
      <script data-main="/sp_common/book-template/ohc-book-template/js/book-config" src="/sp_common/book-template/requirejs/require.js"></script>
      <script>
            if (window.require === undefined) {
                document.write('<script data-main="sp_common/book-template/ohc-book-template/js/book-config" src="sp_common/book-template/requirejs/require.js"><\/script>');
                document.write('<link href="sp_common/book-template/ohc-book-template/css/book.css" rel="stylesheet"/>');
            }
        </script>
      <script type="application/json" id="ssot-metadata">{"primary":{"category":{"short_name":"java","element_name":"Java","display_in_url":true},"suite":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product_group":{"short_name":"not-applicable","element_name":"Not Applicable","display_in_url":false},"product":{"short_name":"javase","element_name":"Java SE","display_in_url":true},"release":{"short_name":"11","element_name":"11","display_in_url":true}}}</script>
      
    <meta name="dcterms.isVersionOf" content="GCTUNING">
  <script>window.ohcglobal || document.write('<script src="/en/dcommon/js/global.js">\x3C/script>')</script></head>
   <body >
      <div class="noscript alert alert-danger text-center" role="alert">
         <a href="preface.html" class="pull-left"><span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>上一个</a> <a href="ergonomics.html" class="pull-right">下一个<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span></a> <span class="fa fa-exclamation-triangle" aria-hidden="true"></span>必须启用JavaScript才能正确显示此内容</div>
      <article>
         <header>
            <ol class="breadcrumb" vocab="http://schema.org/" typeof="BreadcrumbList">
               <li property="itemListElement" typeof="ListItem"><a href="index.html" property="item" typeof="WebPage"><span property="name">HotSpot虚拟机垃圾收集优化指南</span></a></li>
               <li class="active" property="itemListElement" typeof="ListItem">垃圾收集优化简介</li>
            </ol>
            <a id="GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304" name="GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304"></a>
            
            <h2 id="JSGCT-GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304" class="sect2"><span class="enumeration_chapter">1</span>垃圾收集优化简介</h2>
         </header>
         <div class="ind">
            <div>
               <p>从桌面上的小applet到大型服务器上的Web服务，各种各样的应用程序都使用Java平台标准版（Java SE）。为了支持这种多样化的部署范围，Java HotSpot VM提供了多个垃圾收集器，每个垃圾收集器旨在满足不同的需求。Java SE根据运行应用程序的计算机的类别选择最合适的垃圾收集器。但是，此选择可能并非对每个应用程序都是最佳的。具有严格性能目标或其他要求的用户，开发人员和管理员可能需要明确选择垃圾回收器并调整某些参数以实现所需的性能水平。本文档提供了有助于完成这些任务的信息。</p>
               <p>首先，在串行世界停止收集器的上下文中描述了垃圾收集器的一般功能和基本调整选项。然后介绍其他收集器的特定功能以及选择收集器时要考虑的因素。</p>
               <div class="section">
                  <p class="subhead1" id="GUID-326EB4CF-8C8C-4267-8355-21AB04F0D304__GUID-87255E7E-6211-4BD5-B2EB-A474D1148F4C">话题</p>
                  <ul style="list-style-type:disc">
                     <li><a href="introduction-garbage-collection-tuning.html#GUID-8A443184-7E07-4B71-9777-4F12947C8184" title="垃圾收集器（GC）自动管理应用程序的动态内存分配请求。">什么是垃圾收集器？</a></li>
                     <li><a href="introduction-garbage-collection-tuning.html#GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C" title="垃圾收集器的目的是使应用程序开发人员从手动动态内存管理中解放出来。开发人员摆脱了将分配与释放分配相匹配的要求，并密切注意分配的动态内存的生命周期。这完全消除了与内存管理有关的某些错误类别，但付出了一些额外的运行时开销。Java HotSpot VM提供了一系列垃圾回收算法供您选择。">为什么选择垃圾收集器很重要？</a></li>
                     <li><a href="introduction-garbage-collection-tuning.html#GUID-223394DF-2E27-4F5D-A7DF-83151EB577BB">文档中支持的操作系统</a></li>
                  </ul>
               </div>
               <!-- class="section" -->
            </div>
            <div class="props_rev_3"><a id="GUID-8A443184-7E07-4B71-9777-4F12947C8184" name="GUID-8A443184-7E07-4B71-9777-4F12947C8184"></a><h3 id="JSGCT-GUID-8A443184-7E07-4B71-9777-4F12947C8184" class="sect3">什么是垃圾收集器？</h3>
               <div>
                  <p>垃圾收集器（GC）自动管理应用程序的动态内存分配请求。</p>
                  <p>垃圾收集器通过以下操作执行自动动态内存管理：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>从操作系统分配内存并还给操作系统。</p>
                     </li>
                     <li>
                        <p>根据请求将内存分发给应用程序。</p>
                     </li>
                     <li>
                        <p>确定应用程序仍在使用该内存的哪些部分。</p>
                     </li>
                     <li>
                        <p>回收未使用的内存，以供应用程序重新使用。</p>  
                     </li>
                  </ul>
                  <p>Java HotSpot垃圾收集器采用各种技术来提高这些操作的效率：</p>
                  <ul style="list-style-type:disc">
                     <li>
                        <p>将分代清理与老化结合使用，将精力集中在最可能包含大量可回收内存区域的堆区域中。</p>
                     </li>
                     <li>
                        <p>使用多个线程积极地使操作并行化，或者在后台与应用程序并发执行一些长时间运行的操作。</p>
                     </li>
                     <li>
                        <p>尝试通过压缩活动对象来恢复较大的连续可用内存。</p>
                     </li>
                  </ul>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C" name="GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C"></a><h3 id="JSGCT-GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C" class="sect3">为什么选择垃圾收集器很重要？</h3>
               <div>
                  <p>垃圾收集器的目的是使应用程序开发人员从手动动态内存管理中解放出来。开发人员摆脱了将分配与释放分配相匹配的要求，并密切注意分配的动态内存的生命周期。这完全消除了与内存管理有关的某些错误类别，但付出了一些额外的运行时开销。Java HotSpot VM提供了一系列垃圾回收算法供您选择。</p>
                  <p>什么时候选择垃圾收集器很重要？对于某些应用，答案永远是不可能的。也就是说，在存在垃圾收集的情况下，应用程序可以在频率和持续时间适度的暂停下表现良好。但是，对于大类应用程序却不是这种情况，尤其是那些具有大量数据（多个千兆字节），许多线程和高事务处理率的应用程序。</p>
                  <p>阿姆达尔定律（给定问题中的并行加速受到问题的顺序部分的限制）意味着大多数工作负载无法完美并行化。某些部分始终是顺序的，不能从并行性中受益。在Java平台中，当前有四个受支持的垃圾收集替代方案，除了其中一个（串行GC）之外，其他所有方案均并行进行以提高性能。尽可能减少垃圾收集的开销非常重要。在下面的示例中可以看到。</p>
                  <p><a href="introduction-garbage-collection-tuning.html#GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C__PERCENTAGE_TIME_GC">图1-1中</a>的图为理想的系统建模，该系统除了垃圾回收外，还具有完美的可伸缩性。红线表示应用程序仅在单处理器系统上花费1％的时间进行垃圾回收。在具有32个处理器的系统上，这意味着吞吐量损失超过20％。洋红色线显示，对于一个应用程序，其垃圾回收的时间为10％（在单处理器应用程序中，垃圾回收的时间不算多），当扩展到32个处理器时，将损失超过75％的吞吐量。
                  </p>
                  <div class="figure" id="GUID-A48F272E-A6C1-45A0-9A8B-6D5790EB454C__PERCENTAGE_TIME_GC">
                     <p class="titleinfigure">图1-1比较垃圾回收中花费的时间百分比</p><img src="img/jsgct_dt_005_gph_pc_vs_tp.png" alt="如下图1-1所示" title="如下图1-1所示" longdesc="img_text/jsgct_dt_005_gph_pc_vs_tp.html"><br><a href="img_text/jsgct_dt_005_gph_pc_vs_tp.html">“图1-1比较垃圾收集中所花费的时间百分比”的描述</a></div>
                  <!-- class="figure" -->
                  <p>该图表明，在小型系统上进行开发时，可忽略的吞吐量问题可能会在扩展到大型系统时成为主要瓶颈。但是，在减少这种瓶颈方面进行小的改进可以提高性能。对于足够大的系统，有必要选择合适的垃圾收集器并在必要时进行调整。</p>
                  <p>串行收集器通常适合大多数小型应用程序，特别是那些在现代处理器上需要高达100 MB的堆的应用程序。其他收集器具有额外的开销或复杂性，这是专门行为的代价。如果应用程序不需要备用收集器的特殊行为，请使用串行收集器。不能期望串行收集器是最佳选择的一种情况是大型，高线程应用程序运行在具有大量内存和两个或多个处理器的计算机上。在此类服务器级计算机上运行应用程序时，默认情况下会选择“垃圾优先”（G1）收集器；参见<a href="ergonomics.html#GUID-DB4CAE94-2041-4A16-90EC-6AE3D91EC1F1" title="人体工程学是Java虚拟机（JVM）和垃圾收集启发法（例如基于行为的启发法）提高应用程序性能的过程。">人体工程学</a> 。
                  </p>
               </div>
            </div>
            <div class="props_rev_3"><a id="GUID-223394DF-2E27-4F5D-A7DF-83151EB577BB" name="GUID-223394DF-2E27-4F5D-A7DF-83151EB577BB"></a><h3 id="JSGCT-GUID-223394DF-2E27-4F5D-A7DF-83151EB577BB" class="sect3">文档中支持的操作系统</h3>
               <div>
                  <div class="section">
                     <p>本文档及其建议适用于所有JDK <span>11</span>支持的系统配置，但受特定配置中某些垃圾收集器的实际可用性限制。请参阅<a href="http://www.oracle.com/technetwork/java/javase/documentation/jdk11certconfig-5010719.html" target="_blank">Oracle JDK认证的系统配置</a> 。
                     </p>
                  </div>
                  <!-- class="section" -->
               </div>
            </div>
         </div>
      </article>
   

</body></html>