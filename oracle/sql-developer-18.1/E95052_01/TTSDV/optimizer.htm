<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta charset="utf-8">
<title>Interfacing with the TimesTen Query Optimizer</title>
<meta name="generator" content="Oracle DARB XHTML Converter (Mode = document) - Version 5.1.2 Build 737" />
<meta name="dcterms.created" content="2013-11-26T15:16:54Z" />
<meta name="robots" content="all" />
<meta name="dcterms.title" content="SQL Developer Oracle TimesTen In-Memory Database Support User's Guide" />
<meta name="dcterms.identifier" content="E39882-02" />
<meta name="dcterms.isVersionOf" content="TTSDV" />
<meta name="dcterms.rights" content="Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved." />
<link rel="Start" href="../index.htm" title="Home" type="text/html" />
<link rel="Copyright" href="../dcommon/html/cpyr.htm" title="Copyright" type="text/html" />

<script type="application/javascript"  src="../dcommon/js/headfoot.js"></script>
<script type="application/javascript"  src="../nav/js/doccd.js"></script>
<link rel="Contents" href="toc.htm" title="Contents" type="text/html" />
<link rel="Index" href="index.htm" title="Index" type="text/html" />
<link rel="Prev" href="objects.htm" title="Previous" type="text/html" />
<link rel="Next" href="ixadvisor.htm" title="Next" type="text/html" />
<link rel="alternate" href="TTSDV.pdf" title="PDF version" type="application/pdf" />
<link rel="schema.dcterms" href="http://purl.org/dc/terms/" />
<link rel="stylesheet" href="../dcommon/css/fusiondoc.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/header.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/footer.css">
<link rel="stylesheet" type="text/css"  href="../dcommon/css/fonts.css">
<link rel="stylesheet" href="../dcommon/css/foundation.css">
<link rel="stylesheet" href="../dcommon/css/codemirror.css">
<link rel="stylesheet" type="text/css" title="Default" href="../nav/css/html5.css">
<link rel="stylesheet" href="../dcommon/css/respond-480-tablet.css">
<link rel="stylesheet" href="../dcommon/css/respond-768-laptop.css">
<link rel="stylesheet" href="../dcommon/css/respond-1140-deskop.css">
<script type="application/javascript" src="../dcommon/js/modernizr.js"></script>
<script type="application/javascript" src="../dcommon/js/codemirror.js"></script>
<script type="application/javascript" src="../dcommon/js/jquery.js"></script>
<script type="application/javascript" src="../dcommon/js/foundation.min.js"></script>
<script type="application/javascript" src="../dcommon/js/jqfns.js"></script>
<script type="application/javascript" src="../dcommon/js/ohc-inline-videos.js"></script>
<!-- Add fancyBox -->
<link rel="stylesheet" href="../dcommon/fancybox/jquery.fancybox.css?v=2.1.5" type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/jquery.fancybox.pack.js?v=2.1.5"></script>
<!-- Optionally add helpers - button, thumbnail and/or media -->
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-buttons.css?v=1.0.5"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-media.js?v=1.0.6"></script>
<link rel="stylesheet"  href="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.css?v=1.0.7"  type="text/css" media="screen" />
<script type="text/javascript" src="../dcommon/fancybox/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>
<script type="text/javascript" src="target.js"></script>
</head>
<body>
<a href="#BEGIN" class="accessibility-top skipto" tabindex="0">Go to main content</a><header><!--
<div class="zz-skip-header"><a id="top" href="#BEGIN">Go to main content</a>--></header>
<div class="row" id="CONTENT">
<div class="IND large-9 medium-8 columns">
<a id="BEGIN" name="BEGIN"></a>
<span id="PAGE" style="display:none;">7/17</span> <!-- End Header -->
<div id="TTSDV167" class="chapter"><a id="sthref138"></a>
<h1 class="chapter"><span class="secnum">3</span> Interfacing with the TimesTen Query Optimizer</h1>
<p>This chapter shows you how to interact with the TimesTen <a id="sthref139"></a>query optimizer in SQL Developer. Topics include:</p>
<ul>
<li>
<p><a href="#CCHIEGFE">Updating the table and column statistics used by the query optimizer</a></p>
</li>
<li>
<p><a href="#BABCCHFD">Exporting table statistics</a></p>
</li>
<li>
<p><a href="#CHDDHHCH">Viewing the execution plan of a statement</a></p>
</li>
</ul>
<a id="CCHIEGFE"></a>
<div id="TTSDV168" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Updating the <a id="sthref140"></a>table and column statistics used by the query optimizer</h2>
<p>The query optimizer uses statistics stored in TimesTen database system tables to determine the optimal execution plan for a statement. TimesTen stores table level statistics in the <code>SYS.TBL_STATS</code> table. Column level statistics, such as the minimum and maximum value, and the number of unique values in a column, are stored in the <code>SYS.COL_STATS</code> table.</p>
<p>TimesTen does not compute table and column statistics as updates occur on regular and cache tables. Instead, TimesTen updates statistics when an explicit request is made.</p>
<p>You can update statistics for all tables owned by a user or for a specific table owned by an user.</p>
<p>To update statistics for all tables, right-click the <span class="bold">Tables</span> node and select <span class="bold">Statistics</span>, then select <span class="bold">Update</span>.</p>
<p>To update statistics for a specific table, click the <span class="bold">+</span> to the left of the <span class="bold">Tables</span> node. Right-click the name of the table and select <span class="bold">Statistics</span>, then select <span class="bold">Update</span>.</p>
<div id="TTSDV188" class="figure">
<p class="titleinfigure"><a id="sthref141"></a>Figure 3-1 Update statistics for a table</p>
<img width="313" height="413" src="img/statisticsupdate.gif" alt="Description of Figure 3-1 follows" /><br />
<a id="sthref142" href="img_text/statisticsupdate.htm">Description of "Figure 3-1 Update statistics for a table"</a><br />
<br /></div>
<!-- class="figure" -->
<p>If you are unable to find the table, see <a href="objects.htm#BEIGFGCI">"Viewing the characteristics of a table"</a>.</p>
<p>In the <span class="bold">Prompts</span> tab of the <span class="bold">Update statistics</span> dialog, choose <span class="bold">Invalidate referenced commands</span> to invalidate the execution plans of statements that reference the table for which statistics are updated. When you invalidate the execution plan of a statement, TimesTen recompiles or reprepares that statement upon its next execution.</p>
<p>For <span class="bold">Interval type for table statistics</span>, choose <span class="bold">Complete interval</span> to divide the rows of the table into two or more intervals and compute statistics on each interval, or <span class="bold">Single interval</span> to compute statistics on the entire set of rows as a single interval. You must define a range index on the table to compute complete interval statistics.</p>
<p>Click <span class="bold">Apply</span>.</p>
<div id="TTSDV189" class="figure">
<p class="titleinfigure"><a id="sthref143"></a>Figure 3-2 Update statistics dialog</p>
<img width="342" height="314" src="img/updatestatistics.gif" alt="Description of Figure 3-2 follows" /><br />
<a id="sthref144" href="img_text/updatestatistics.htm">Description of "Figure 3-2 Update statistics dialog"</a><br />
<br /></div>
<!-- class="figure" -->
<p>To view the optimizer statistics of a table, click the name of the table.</p>
<div id="TTSDV275" class="figure">
<p class="titleinfigure"><a id="sthref145"></a>Figure 3-3 Statistics for employees table</p>
<img width="740" height="428" src="img/tablestatistics.gif" alt="Description of Figure 3-3 follows" /><br />
<a id="sthref146" href="img_text/tablestatistics.htm">Description of "Figure 3-3 Statistics for employees table"</a><br />
<br /></div>
<!-- class="figure" -->
<p>If you are unable to find the table that you are looking for, see <a href="objects.htm#CHDIBDBB">"Locating a TimesTen database object"</a>.</p>
<p>In the <a id="sthref147"></a><span class="bold">Statistics</span> tab of the table pane, the top section shows the table statistics such as:</p>
<ul>
<li>
<p>The number of rows in the table</p>
</li>
<li>
<p>A timestamp indicating when statistics were most recently updated for the table</p>
</li>
</ul>
<p>The bottom section shows the column statistics. For each column, the following information is displayed:</p>
<ul>
<li>
<p>The name of the column</p>
</li>
<li>
<p>The number of intervals the data is divided into to compute statistics</p>
</li>
<li>
<p>Total number of <code>NULL</code> values</p>
</li>
<li>
<p>Total number of non-<code>NULL</code> unique values</p>
</li>
<li>
<p>Total number of rows in each interval</p>
</li>
</ul>
<p>For each interval of each column, SQL Developer displays the following:</p>
<ul>
<li>
<p>The number of unique values other than the most frequently occurring value</p>
</li>
<li>
<p>The number of rows that contain a value other than the most frequently occurring value</p>
</li>
<li>
<p>The number of rows that contain the most frequently occurring value</p>
</li>
<li>
<p>The minimum value</p>
</li>
<li>
<p>The maximum value</p>
</li>
<li>
<p>The most frequently occurring value</p>
</li>
</ul>
<p>For more information about query optimizer statistics, see <a class="olink TTCIN184" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTCIN184">"Statistics"</a> in the <span class="italic">Oracle In-Memory Database Cache Introduction</span>, <a class="olink TTOPR513" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTOPR513">"When optimization occurs"</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span> or <a class="olink TTREF277" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTREF277">"ttOptUpdateStats"</a> in the <span class="italic">Oracle TimesTen In-Memory Database Reference</span>.</p>
</div>
<!-- class="sect1" -->
<a id="BABCCHFD"></a>
<div id="TTSDV295" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Exporting table statistics</h2>
<p>You can generate a set of SQL statements that allow you to restore the table statistics to the current state. You can generate SQL statements for a single table or for user tables that the connection user has permission to access. After you export your table statistics to a <code>.sql</code> file, you can import your table statistics by opening the <code>.sql</code> file in SQL Developer and running the script file.</p>
<p>To export the current TimesTen table statistics, make sure you are on the main SQL Developer page.</p>
<ol>
<li>
<p>To save table statistics for a single table, right-click the name of the table and select <span class="bold">Statistics</span>, then select <span class="bold">Export</span>. To save table statistics for all user tables, right-click <span class="bold">Tables</span> and select <span class="bold">Statistics</span>, then select <span class="bold">Export</span>.</p>
<div id="TTSDV296" class="figure">
<p class="titleinfigure"><a id="sthref148"></a>Figure 3-4 Exporting statistics</p>
<img width="345" height="417" src="img/exportstats.gif" alt="Description of Figure 3-4 follows" /><br />
<a id="sthref149" href="img_text/exportstats.htm">Description of "Figure 3-4 Exporting statistics"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The <span class="bold">Export Optimizer Statistics</span> dialog displays. Locate the <span class="bold">Save</span> button at the bottom right of the dialog.</p>
</li>
<li>
<p>Click <span class="bold">Save</span>.</p>
<div id="TTSDV297" class="figure">
<p class="titleinfigure"><a id="sthref150"></a>Figure 3-5 Click save</p>
<img width="743" height="650" src="img/saveexportstats.gif" alt="Description of Figure 3-5 follows" /><br />
<a id="sthref151" href="img_text/saveexportstats.htm">Description of "Figure 3-5 Click save"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The <span class="bold">Save Optimizer Statistics Export Commands</span> dialog displays.</p>
</li>
<li>
<p>Select the directory where you want to save the current TimesTen table statistics.</p>
</li>
<li>
<p>In the <span class="bold">File Name</span> field, define the name of your current TimesTen table statistics.</p>
<p>The default filename of the current TimesTen table statistics is <code><span class="codeinlineitalic">connection_name</span></code><code>-exportstatistics-</code><code><span class="codeinlineitalic">YYYYMMDDMISS</span></code><code>.sql</code>, where <code><span class="codeinlineitalic">connection_name</span></code> is the name of the connection. <code><span class="codeinlineitalic">YYYYMMDDHHMISS</span></code> is a timestamp of when the recommendations were made, where <code><span class="codeinlineitalic">YYYY</span></code> is the year, <code><span class="codeinlineitalic">MM</span></code> the month, <code><span class="codeinlineitalic">DD</span></code> the day, <code><span class="codeinlineitalic">HH</span></code> the hour, <code><span class="codeinlineitalic">MI</span></code> the minutes, and <code><span class="codeinlineitalic">SS</span></code> the seconds.</p>
</li>
<li>
<p>Click <span class="bold">Save</span>.</p>
<div id="TTSDV298" class="figure">
<p class="titleinfigure"><a id="sthref152"></a>Figure 3-6 Save current TimesTen table statistics</p>
<img width="516" height="364" src="img/saveexportstatsdial.gif" alt="Description of Figure 3-6 follows" /><br />
<a id="sthref153" href="img_text/saveexportstatsdial.htm">Description of "Figure 3-6 Save current TimesTen table statistics"</a><br />
<br /></div>
<!-- class="figure" -->
<p>TimesTen saves your current TimesTen table statistics.</p>
</li>
</ol>
</div>
<!-- class="sect1" -->
<a id="CHDDHHCH"></a>
<div id="TTSDV169" class="sect1"><!-- infolevel="all" infotype="General" -->
<h2 class="sect1">Viewing the <a id="sthref154"></a>execution plan of a statement</h2>
<p>A statement must be prepared or compiled before it is executed. When the statement is prepared or compiled, the query optimizer generates an execution plan for the statement.</p>
<p>To view the execution plan of a statement, create the statement in the SQL Worksheet. If you do not have a worksheet open in your connection, right-click the node of the connection name and select <span class="bold">Open SQL Worksheet</span>. See <a href="connect.htm#BHADCHJC">Figure 1-7, "Viewing a TimesTen connection"</a>.</p>
<p>If you do not have a connection open, select <span class="bold">SQL Worksheet</span> to establish a connection and then open a worksheet for that connection.</p>
<div id="TTSDV191" class="figure">
<p class="titleinfigure"><a id="sthref155"></a>Figure 3-7 Selecting the SQL Worksheet</p>
<img width="471" height="209" src="img/sqlworksheeticon.gif" alt="Description of Figure 3-7 follows" /><br />
<a id="sthref156" href="img_text/sqlworksheeticon.htm">Description of "Figure 3-7 Selecting the SQL Worksheet"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The <span class="bold">Select Connection</span> dialog appears. In the <span class="bold">Connection</span> field, select the name of the connection. Click <span class="bold">OK</span>.</p>
<div id="TTSDV192" class="figure">
<p class="titleinfigure"><a id="sthref157"></a>Figure 3-8 Select Connection dialog</p>
<img width="334" height="163" src="img/selectconnection.gif" alt="Description of Figure 3-8 follows" /><br />
<a id="sthref158" href="img_text/selectconnection.htm">Description of "Figure 3-8 Select Connection dialog"</a><br />
<br /></div>
<!-- class="figure" -->
<p>A connection to the TimesTen database is established if a connection associated with the selected connection name does not exist.</p>
<p>Before composing the statement in <span class="bold">SQL Worksheet</span>, make sure appropriate indexes have been created on the tables that are being referenced in the statement, and that table and column statistics have been updated. For more information about updating statistics, see <a href="#CCHIEGFE">"Updating the table and column statistics used by the query optimizer"</a>.</p>
<p>Compose the statement in the <span class="bold">SQL Worksheet</span>. Then choose <span class="bold">Explain Plan</span> to display the execution plan for the statement.</p>
<div id="TTSDV250" class="figure">
<p class="titleinfigure"><a id="sthref159"></a>Figure 3-9 Viewing explain plan</p>
<img width="398" height="142" src="img/explainplan.gif" alt="Description of Figure 3-9 follows" /><br />
<a id="sthref160" href="img_text/explainplan.htm">Description of "Figure 3-9 Viewing explain plan"</a><br />
<br /></div>
<!-- class="figure" -->
<p>The execution plan is shown in the <a id="sthref161"></a><span class="bold">Explain Plan</span> pane and is displayed in a hierarchical format in reverse chronological order such that the operation at the bottom of the tree is processed first and the operation at the top of the tree is processed last. For each operation, the plan shows the table or index the operation is performed on, or if applicable, the expressions of the statement's predicate the operation is processing. Types of operations that can appear in the execution plan include table or index scan (with lock granularity shown), join, group and sort.</p>
<div id="TTSDV194" class="figure">
<p class="titleinfigure"><a id="sthref162"></a>Figure 3-10 Viewing the execution plan</p>
<img width="963" height="384" src="img/executionplan.gif" alt="Description of Figure 3-10 follows" /><br />
<a id="sthref163" href="img_text/executionplan.htm">Description of "Figure 3-10 Viewing the execution plan"</a><br />
<br /></div>
<!-- class="figure" -->
<p>For more information about interpreting an execution plan, see <a class="olink TTCIN193" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTCIN193">"Optimizer plan"</a> in the <span class="italic">Oracle In-Memory Database Cache Introduction</span> or <a class="olink TTOPR519" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTOPR519">"Viewing SQL query plans"</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
<p>For more information about query performance tuning, see <a class="olink TTOPR519" href="http://www.oracle.com/pls/topic/lookup?ctx=E95052-01&amp;id=TTOPR519">"Viewing SQL query plans"</a> in the <span class="italic">Oracle TimesTen In-Memory Database Operations Guide</span>.</p>
</div>
<!-- class="sect1" --></div>
<!-- class="chapter" --></div>
<!-- class="ind" -->
<!-- Start Footer -->
</div>
<!-- add extra wrapper close div-->
<footer><!--
<hr />
<table class="cellalignment194">
<tr>
<td class="cellalignment201">
<table class="cellalignment199">
<tr>
<td class="cellalignment198"><a href="objects.htm"><img width="24" height="24" src="../dcommon/gifs/leftnav.gif" alt="Go to previous page" /><br />
<span class="icon">Previous</span></a></td>
<td class="cellalignment198"><a href="ixadvisor.htm"><img width="24" height="24" src="../dcommon/gifs/rightnav.gif" alt="Go to next page" /><br />
<span class="icon">Next</span></a></td>
</tr>
</table>
</td>
<td class="cellalignment-copyrightlogo"><img width="144" height="18" src="../dcommon/gifs/oracle.gif" alt="Oracle" /><br />
Copyright&nbsp;&copy;&nbsp;2009, 2013,&nbsp;Oracle&nbsp;and/or&nbsp;its&nbsp;affiliates.&nbsp;All&nbsp;rights&nbsp;reserved.<br />
<a href="../dcommon/html/cpyr.htm">Legal Notices</a></td>
<td class="cellalignment203">
<table class="cellalignment197">
<tr>
<td class="cellalignment198"><a href="../index.htm"><img width="24" height="24" src="../dcommon/gifs/doclib.gif" alt="Go to Documentation Home" /><br />
<span class="icon">Home</span></a></td>
<td class="cellalignment198"><a href="../nav/portal_booklist.htm"><img width="24" height="24" src="../dcommon/gifs/booklist.gif" alt="Go to Book List" /><br />
<span class="icon">Book List</span></a></td>
<td class="cellalignment198"><a href="toc.htm"><img width="24" height="24" src="../dcommon/gifs/toc.gif" alt="Go to Table of Contents" /><br />
<span class="icon">Contents</span></a></td>
<td class="cellalignment198"><a href="index.htm"><img width="24" height="24" src="../dcommon/gifs/index.gif" alt="Go to Index" /><br />
<span class="icon">Index</span></a></td>
<td class="cellalignment198"><a href="../nav/mindx.htm"><img width="24" height="24" src="../dcommon/gifs/masterix.gif" alt="Go to Master Index" /><br />
<span class="icon">Master Index</span></a></td>
<td class="cellalignment198"><a href="../dcommon/html/feedback.htm"><img width="24" height="24" src="../dcommon/gifs/feedbck2.gif" alt="Go to Feedback page" /><br />
<span class="icon">Contact Us</span></a></td>
</tr>
</table>
</td>
</tr>
</table>
--></footer>
<noscript>
<p>Scripting on this page enhances content navigation, but does not change the content in any way.</p>
</noscript>
</body>
</html>
