<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>32.&nbsp;Working with NoSQL Technologies</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-sql.html" title="31.&nbsp;Working with SQL Databases"><link rel="next" href="boot-features-caching.html" title="33.&nbsp;Caching"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">32.&nbsp;Working with NoSQL Technologies</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-sql.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-caching.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-nosql" href="#boot-features-nosql"></a>32.&nbsp;Working with NoSQL Technologies</h2></div></div></div><p>Spring Data provides additional projects that help you access a variety of NoSQL
technologies, including:
<a class="link" href="https://projects.spring.io/spring-data-mongodb/" target="_top">MongoDB</a>,
<a class="link" href="https://projects.spring.io/spring-data-neo4j/" target="_top">Neo4J</a>,
<a class="link" href="https://github.com/spring-projects/spring-data-elasticsearch/" target="_top">Elasticsearch</a>,
<a class="link" href="https://projects.spring.io/spring-data-solr/" target="_top">Solr</a>,
<a class="link" href="https://projects.spring.io/spring-data-redis/" target="_top">Redis</a>,
<a class="link" href="https://projects.spring.io/spring-data-gemfire/" target="_top">Gemfire</a>,
<a class="link" href="https://projects.spring.io/spring-data-cassandra/" target="_top">Cassandra</a>,
<a class="link" href="https://projects.spring.io/spring-data-couchbase/" target="_top">Couchbase</a> and
<a class="link" href="https://projects.spring.io/spring-data-ldap/" target="_top">LDAP</a>.
Spring Boot provides auto-configuration for Redis, MongoDB, Neo4j, Elasticsearch, Solr
Cassandra, Couchbase, and LDAP. You can make use of the other projects, but you must
configure them yourself. Refer to the appropriate reference documentation at
<a class="link" href="https://projects.spring.io/spring-data" target="_top">projects.spring.io/spring-data</a>.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-redis" href="#boot-features-redis"></a>32.1&nbsp;Redis</h2></div></div></div><p><a class="link" href="https://redis.io/" target="_top">Redis</a> is a cache, message broker, and richly-featured key-value store.
Spring Boot offers basic auto-configuration for the
<a class="link" href="https://github.com/lettuce-io/lettuce-core/" target="_top">Lettuce</a> and
<a class="link" href="https://github.com/xetorthio/jedis/" target="_top">Jedis</a> client libraries and the abstractions on top
of them provided by <a class="link" href="https://github.com/spring-projects/spring-data-redis" target="_top">Spring Data
Redis</a>.</p><p>There is a <code class="literal">spring-boot-starter-data-redis</code> &#8220;Starter&#8221; for collecting the dependencies
in a convenient way. By default, it uses
<a class="link" href="https://github.com/lettuce-io/lettuce-core/" target="_top">Lettuce</a>. That starter handles both
traditional and reactive applications.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>we also provide a <code class="literal">spring-boot-starter-data-redis-reactive</code> &#8220;Starter&#8221; for
consistency with the other stores with reactive support.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-redis" href="#boot-features-connecting-to-redis"></a>32.1.1&nbsp;Connecting to Redis</h3></div></div></div><p>You can inject an auto-configured <code class="literal">RedisConnectionFactory</code>, <code class="literal">StringRedisTemplate</code>, or
vanilla <code class="literal">RedisTemplate</code> instance as you would any other Spring Bean. By default, the
instance tries to connect to a Redis server at <code class="literal">localhost:6379</code>. The following listing
shows an example of such a bean:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> StringRedisTemplate template;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(StringRedisTemplate template) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.template = template;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You can also register an arbitrary number of beans that implement
<code class="literal">LettuceClientConfigurationBuilderCustomizer</code> for more advanced customizations. If you
use Jedis, <code class="literal">JedisClientConfigurationBuilderCustomizer</code> is also available.</p></td></tr></table></div><p>If you add your own <code class="literal">@Bean</code> of any of the auto-configured types, it replaces the default
(except in the case of <code class="literal">RedisTemplate</code>, when the exclusion is based on the bean name,
<code class="literal">redisTemplate</code>, not its type). By default, if <code class="literal">commons-pool2</code> is on the classpath, you
get a pooled connection factory.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-mongodb" href="#boot-features-mongodb"></a>32.2&nbsp;MongoDB</h2></div></div></div><p><a class="link" href="https://www.mongodb.com/" target="_top">MongoDB</a> is an open-source NoSQL document database that uses a
JSON-like schema instead of traditional table-based relational data. Spring Boot offers
several conveniences for working with MongoDB, including the
<code class="literal">spring-boot-starter-data-mongodb</code> and <code class="literal">spring-boot-starter-data-mongodb-reactive</code>
&#8220;Starters&#8221;.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-mongodb" href="#boot-features-connecting-to-mongodb"></a>32.2.1&nbsp;Connecting to a MongoDB Database</h3></div></div></div><p>To access Mongo databases, you can inject an auto-configured
<code class="literal">org.springframework.data.mongodb.MongoDbFactory</code>. By default, the instance tries to
connect to a MongoDB server at <code class="literal">mongodb://localhost/test</code> The following example shows how
to connect to a MongoDB database:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.data.mongodb.MongoDbFactory;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> com.mongodb.DB;

<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> MongoDbFactory mongo;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(MongoDbFactory mongo) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.mongo = mongo;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> example() {
		DB db = mongo.getDb();
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>
	}

}</pre><p>You can set the <code class="literal">spring.data.mongodb.uri</code> property to change the URL and configure
additional settings such as the <span class="emphasis"><em>replica set</em></span>, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.mongodb.uri</span>=mongodb://user:secret@mongo1.example.com:12345,mongo2.example.com:23456/test</pre><p>Alternatively, as long as you use Mongo 2.x, you can specify a <code class="literal">host</code>/<code class="literal">port</code>. For
example, you might declare the following settings in your <code class="literal">application.properties</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.mongodb.host</span>=mongoserver
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.mongodb.port</span>=27017</pre><p>If you have defined your own <code class="literal">MongoClient</code>, it will be used to auto-configure a suitable
<code class="literal">MongoDbFactory</code>. Both <code class="literal">com.mongodb.MongoClient</code> and <code class="literal">com.mongodb.client.MongoClient</code>
are supported.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you use the Mongo 3.0 Java driver, <code class="literal">spring.data.mongodb.host</code> and
<code class="literal">spring.data.mongodb.port</code> are not supported. In such cases, <code class="literal">spring.data.mongodb.uri</code>
should be used to provide all of the configuration.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If <code class="literal">spring.data.mongodb.port</code> is not specified, the default of <code class="literal">27017</code> is used. You
could delete this line from the example shown earlier.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you do not use Spring Data Mongo, you can inject <code class="literal">com.mongodb.MongoClient</code> beans
instead of using <code class="literal">MongoDbFactory</code>. If you want to take complete control of establishing
the MongoDB connection, you can also declare your own <code class="literal">MongoDbFactory</code> or <code class="literal">MongoClient</code>
bean.</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you are using the reactive driver, Netty is required for SSL. The
auto-configuration configures this factory automatically if Netty is available and the
factory to use hasn&#8217;t been customized already.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-mongo-template" href="#boot-features-mongo-template"></a>32.2.2&nbsp;MongoTemplate</h3></div></div></div><p><a class="link" href="https://projects.spring.io/spring-data-mongodb/" target="_top">Spring Data MongoDB</a> provides a
<a class="link" href="https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoTemplate.html" target="_top"><code class="literal">MongoTemplate</code></a> class that is very
similar in its design to Spring&#8217;s <code class="literal">JdbcTemplate</code>. As with <code class="literal">JdbcTemplate</code>, Spring Boot
auto-configures a bean for you to inject the template, as follows:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.data.mongodb.core.MongoTemplate;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.stereotype.Component;

<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> MongoTemplate mongoTemplate;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(MongoTemplate mongoTemplate) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.mongoTemplate = mongoTemplate;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>See the
<a class="link" href="https://docs.spring.io/spring-data/mongodb/docs/current/api/org/springframework/data/mongodb/core/MongoOperations.html" target="_top"><code class="literal">MongoOperations</code>
Javadoc</a> for complete details.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-mongo-repositories" href="#boot-features-spring-data-mongo-repositories"></a>32.2.3&nbsp;Spring Data MongoDB Repositories</h3></div></div></div><p>Spring Data includes repository support for MongoDB. As with the JPA repositories
discussed earlier, the basic principle is that queries are constructed automatically,
based on method names.</p><p>In fact, both Spring Data JPA and Spring Data MongoDB share the same common
infrastructure. You could take the JPA example from earlier and, assuming that <code class="literal">City</code> is
now a Mongo data class rather than a JPA <code class="literal">@Entity</code>, it works in the same way, as shown
in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">package</span> com.example.myapp.domain;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.data.domain.*;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.data.repository.*;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">interface</span> CityRepository <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">extends</span> Repository&lt;City, Long&gt; {

	Page&lt;City&gt; findAll(Pageable pageable);

	City findByNameAndStateAllIgnoringCase(String name, String state);

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You can customize document scanning locations by using the <code class="literal">@EntityScan</code> annotation.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>For complete details of Spring Data MongoDB, including its rich object mapping
technologies, refer to its <a class="link" href="https://projects.spring.io/spring-data-mongodb/" target="_top">reference
documentation</a>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-mongo-embedded" href="#boot-features-mongo-embedded"></a>32.2.4&nbsp;Embedded Mongo</h3></div></div></div><p>Spring Boot offers auto-configuration for
<a class="link" href="https://github.com/flapdoodle-oss/de.flapdoodle.embed.mongo" target="_top">Embedded Mongo</a>. To use it in
your Spring Boot application, add a dependency on
<code class="literal">de.flapdoodle.embed:de.flapdoodle.embed.mongo</code>.</p><p>The port that Mongo listens on can be configured by setting the <code class="literal">spring.data.mongodb.port</code>
property. To use a randomly allocated free port, use a value of 0. The <code class="literal">MongoClient</code>
created by <code class="literal">MongoAutoConfiguration</code> is automatically configured to use the randomly
allocated port.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you do not configure a custom port, the embedded support uses a random port
(rather than 27017) by default.</p></td></tr></table></div><p>If you have SLF4J on the classpath, the output produced by Mongo is automatically routed
to a logger named <code class="literal">org.springframework.boot.autoconfigure.mongo.embedded.EmbeddedMongo</code>.</p><p>You can declare your own <code class="literal">IMongodConfig</code> and <code class="literal">IRuntimeConfig</code> beans to take control of
the Mongo instance&#8217;s configuration and logging routing.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-neo4j" href="#boot-features-neo4j"></a>32.3&nbsp;Neo4j</h2></div></div></div><p><a class="link" href="https://neo4j.com/" target="_top">Neo4j</a> is an open-source NoSQL graph database that uses a rich data
model of nodes connected by first class relationships, which is better suited for
connected big data than traditional RDBMS approaches. Spring Boot offers several
conveniences for working with Neo4j, including the <code class="literal">spring-boot-starter-data-neo4j</code>
&#8220;Starter&#8221;.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-neo4j" href="#boot-features-connecting-to-neo4j"></a>32.3.1&nbsp;Connecting to a Neo4j Database</h3></div></div></div><p>To access a Neo4j server, you can inject an auto-configured
<code class="literal">org.neo4j.ogm.session.Session</code>. By default, the instance tries to connect to a Neo4j
server at <code class="literal">localhost:7687</code> using the Bolt protocol. The following example shows how to
inject a Neo4j <code class="literal">Session</code>:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> Session session;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(Session session) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.session = session;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>You can configure the uri and credentials to use by setting the <code class="literal">spring.data.neo4j.*</code>
properties, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.neo4j.uri</span>=bolt://my-server:7687
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.neo4j.username</span>=neo4j
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.neo4j.password</span>=secret</pre><p>You can take full control over the session creation by adding a
<code class="literal">org.neo4j.ogm.config.Configuration</code> <code class="literal">@Bean</code>. Also, adding a <code class="literal">@Bean</code> of type
<code class="literal">SessionFactory</code> disables the auto-configuration and gives you full control.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-neo4j-embedded" href="#boot-features-connecting-to-neo4j-embedded"></a>32.3.2&nbsp;Using the Embedded Mode</h3></div></div></div><p>If you add <code class="literal">org.neo4j:neo4j-ogm-embedded-driver</code> to the dependencies of your application,
Spring Boot automatically configures an in-process embedded instance of Neo4j that does
not persist any data when your application shuts down.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>As the embedded Neo4j OGM  driver  does not provide the Neo4j kernel itself, you have
to declare <code class="literal">org.neo4j:neo4j</code> as dependency yourself. Refer to
<a class="link" href="https://neo4j.com/docs/ogm-manual/current/reference/#reference:getting-started" target="_top">the
Neo4j OGM documentation</a> for a list of compatible versions.</p></td></tr></table></div><p>The embedded driver takes precedence over the other drivers when there are multiple
drivers on the classpath. You can explicitly disable the embedded mode by setting
<code class="literal">spring.data.neo4j.embedded.enabled=false</code>.</p><p><a class="link" href="boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-neo4j-test" title="46.3.17&nbsp;Auto-configured Data Neo4j Tests">Data Neo4j Tests</a>
automatically make use of an embedded Neo4j instance if the embedded driver and Neo4j
kernel are on the classpath as described above.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can enable persistence for the embedded mode by providing a path to a database file
in your configuration, e.g. <code class="literal">spring.data.neo4j.uri=file://var/tmp/graph.db</code>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-neo4j-ogm-session" href="#boot-features-neo4j-ogm-session"></a>32.3.3&nbsp;Neo4jSession</h3></div></div></div><p>By default, if you are running a web application, the session is bound to the thread for
the entire processing of the request (that is, it uses the "Open Session in View"
pattern). If you do not want this behavior, add the following line to your
<code class="literal">application.properties</code> file:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.neo4j.open-in-view</span>=false</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-neo4j-repositories" href="#boot-features-spring-data-neo4j-repositories"></a>32.3.4&nbsp;Spring Data Neo4j Repositories</h3></div></div></div><p>Spring Data includes repository support for Neo4j.</p><p>Spring Data Neo4j shares the common infrastructure with Spring Data JPA as many other
Spring Data modules do. You could take the JPA example from earlier and define
<code class="literal">City</code> as Neo4j OGM <code class="literal">@NodeEntity</code> rather than JPA <code class="literal">@Entity</code> and the repository
abstraction works in the same way, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">package</span> com.example.myapp.domain;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.util.Optional;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.data.neo4j.repository.*;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">interface</span> CityRepository <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">extends</span> Neo4jRepository&lt;City, Long&gt; {

	Optional&lt;City&gt; findOneByNameAndState(String name, String state);

}</pre><p>The <code class="literal">spring-boot-starter-data-neo4j</code> &#8220;Starter&#8221; enables the repository support as well
as transaction management. You can customize the locations to look for repositories and
entities by using <code class="literal">@EnableNeo4jRepositories</code> and <code class="literal">@EntityScan</code> respectively on a
<code class="literal">@Configuration</code>-bean.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>For complete details of Spring Data Neo4j, including its object mapping
technologies, refer to the <a class="link" href="https://projects.spring.io/spring-data-neo4j/" target="_top">reference
documentation</a>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-gemfire" href="#boot-features-gemfire"></a>32.4&nbsp;Gemfire</h2></div></div></div><p><a class="link" href="https://github.com/spring-projects/spring-data-gemfire" target="_top">Spring Data Gemfire</a> provides
convenient Spring-friendly tools for accessing the
<a class="link" href="https://pivotal.io/big-data/pivotal-gemfire#details" target="_top">Pivotal Gemfire</a> data management
platform. There is a <code class="literal">spring-boot-starter-data-gemfire</code> &#8220;Starter&#8221; for collecting the
dependencies in a convenient way. There is currently no auto-configuration support for
Gemfire, but you can enable Spring Data Repositories with a
<a class="link" href="https://github.com/spring-projects/spring-data-gemfire/blob/master/src/main/java/org/springframework/data/gemfire/repository/config/EnableGemfireRepositories.java" target="_top">single annotation: <code class="literal">@EnableGemfireRepositories</code></a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-solr" href="#boot-features-solr"></a>32.5&nbsp;Solr</h2></div></div></div><p><a class="link" href="https://lucene.apache.org/solr/" target="_top">Apache Solr</a> is a search engine. Spring Boot offers basic
auto-configuration for the Solr 5 client library and the abstractions on top of it
provided by <a class="link" href="https://github.com/spring-projects/spring-data-solr" target="_top">Spring Data Solr</a>. There
is a <code class="literal">spring-boot-starter-data-solr</code> &#8220;Starter&#8221; for collecting the dependencies in a
convenient way.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-solr" href="#boot-features-connecting-to-solr"></a>32.5.1&nbsp;Connecting to Solr</h3></div></div></div><p>You can inject an auto-configured <code class="literal">SolrClient</code> instance as you would any other Spring
bean. By default, the instance tries to connect to a server at
<code class="literal"><a class="link" href="http://localhost:8983/solr" target="_top">localhost:8983/solr</a></code>. The following example shows how to inject a Solr bean:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> SolrClient solr;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(SolrClient solr) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.solr = solr;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>If you add your own <code class="literal">@Bean</code> of type <code class="literal">SolrClient</code>, it replaces the default.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-solr-repositories" href="#boot-features-spring-data-solr-repositories"></a>32.5.2&nbsp;Spring Data Solr Repositories</h3></div></div></div><p>Spring Data includes repository support for Apache Solr. As with the JPA repositories
discussed earlier, the basic principle is that queries are automatically constructed for \
you based on method names.</p><p>In fact, both Spring Data JPA and Spring Data Solr share the same common infrastructure.
You could take the JPA example from earlier and, assuming that <code class="literal">City</code> is now a
<code class="literal">@SolrDocument</code> class rather than a JPA <code class="literal">@Entity</code>, it works in the same way.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>For complete details of Spring Data Solr, refer to the
<a class="link" href="https://projects.spring.io/spring-data-solr/" target="_top">reference documentation</a>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-elasticsearch" href="#boot-features-elasticsearch"></a>32.6&nbsp;Elasticsearch</h2></div></div></div><p><a class="link" href="https://www.elastic.co/products/elasticsearch" target="_top">Elasticsearch</a> is an open source,
distributed, RESTful search and analytics engine. Spring Boot offers basic
auto-configuration for Elasticsearch.</p><p>Spring Boot supports several HTTP clients:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">The official Java "Low Level" and "High Level" REST clients</li><li class="listitem"><a class="link" href="https://github.com/searchbox-io/Jest" target="_top">Jest</a></li></ul></div><p>The transport client is still being used by
<a class="link" href="https://github.com/spring-projects/spring-data-elasticsearch" target="_top">Spring Data Elasticsearch</a>,
which you can start using with the <code class="literal">spring-boot-starter-data-elasticsearch</code> &#8220;Starter&#8221;.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-elasticsearch-rest" href="#boot-features-connecting-to-elasticsearch-rest"></a>32.6.1&nbsp;Connecting to Elasticsearch by REST clients</h3></div></div></div><p>Elasticsearch ships
<a class="link" href="https://www.elastic.co/guide/en/elasticsearch/client/java-rest/current/index.html" target="_top">two different REST clients</a>
that you can use to query a cluster: the "Low Level" client and the "High Level" client.</p><p>If you have the <code class="literal">org.elasticsearch.client:elasticsearch-rest-client</code> dependency on the
classpath, Spring Boot will auto-configure and register a <code class="literal">RestClient</code> bean that
by default targets <code class="literal"><a class="link" href="http://localhost:9200" target="_top">localhost:9200</a></code>.
You can further tune how <code class="literal">RestClient</code> is configured, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.rest.uris</span>=https://search.example.com:9200
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.rest.username</span>=user
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.rest.password</span>=secret</pre><p>You can also register an arbitrary number of beans that implement
<code class="literal">RestClientBuilderCustomizer</code> for more advanced customizations.
To take full control over the registration, define a <code class="literal">RestClient</code> bean.</p><p>If you have the <code class="literal">org.elasticsearch.client:elasticsearch-rest-high-level-client</code> dependency
on the classpath, Spring Boot will auto-configure a <code class="literal">RestHighLevelClient</code>, which wraps
any existing <code class="literal">RestClient</code> bean, reusing its HTTP configuration.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-elasticsearch-jest" href="#boot-features-connecting-to-elasticsearch-jest"></a>32.6.2&nbsp;Connecting to Elasticsearch by Using Jest</h3></div></div></div><p>If you have <code class="literal">Jest</code> on the classpath, you can inject an auto-configured <code class="literal">JestClient</code> that
by default targets <code class="literal"><a class="link" href="http://localhost:9200" target="_top">localhost:9200</a></code>. You can further tune how the client is
configured, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.jest.uris</span>=https://search.example.com:9200
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.jest.read-timeout</span>=10000
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.jest.username</span>=user
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.elasticsearch.jest.password</span>=secret</pre><p>You can also register an arbitrary number of beans that implement
<code class="literal">HttpClientConfigBuilderCustomizer</code> for more advanced customizations. The following
example tunes additional HTTP settings:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">static</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> HttpSettingsCustomizer <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">implements</span> HttpClientConfigBuilderCustomizer {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Override</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> customize(HttpClientConfig.Builder builder) {
		builder.maxTotalConnection(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">100</xslthl:number>).defaultMaxTotalConnectionPerRoute(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">5</xslthl:number>);
	}

}</pre><p>To take full control over the registration, define a <code class="literal">JestClient</code> bean.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-elasticsearch-spring-data" href="#boot-features-connecting-to-elasticsearch-spring-data"></a>32.6.3&nbsp;Connecting to Elasticsearch by Using Spring Data</h3></div></div></div><p>To connect to Elasticsearch, you must provide the address of one or more cluster nodes.
The address can be specified by setting the <code class="literal">spring.data.elasticsearch.cluster-nodes</code>
property to a comma-separated <code class="literal">host:port</code> list. With this configuration in place, an
<code class="literal">ElasticsearchTemplate</code> or <code class="literal">TransportClient</code> can be injected like any other Spring bean,
as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.elasticsearch.cluster-nodes</span>=localhost:9300</pre><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> ElasticsearchTemplate template;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(ElasticsearchTemplate template) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.template = template;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>If you add your own <code class="literal">ElasticsearchTemplate</code> or <code class="literal">TransportClient</code> <code class="literal">@Bean</code>, it replaces the
default.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-elasticsearch-repositories" href="#boot-features-spring-data-elasticsearch-repositories"></a>32.6.4&nbsp;Spring Data Elasticsearch Repositories</h3></div></div></div><p>Spring Data includes repository support for Elasticsearch. As with the JPA repositories
discussed earlier, the basic principle is that queries are constructed for you
automatically based on method names.</p><p>In fact, both Spring Data JPA and Spring Data Elasticsearch share the same common
infrastructure. You could take the JPA example from earlier and, assuming that <code class="literal">City</code> is
now an Elasticsearch <code class="literal">@Document</code> class rather than a JPA <code class="literal">@Entity</code>, it works in the same
way.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>For complete details of Spring Data Elasticsearch, refer to the
<a class="link" href="https://docs.spring.io/spring-data/elasticsearch/docs/" target="_top">reference documentation</a>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-cassandra" href="#boot-features-cassandra"></a>32.7&nbsp;Cassandra</h2></div></div></div><p><a class="link" href="https://cassandra.apache.org/" target="_top">Cassandra</a> is an open source, distributed database
management system designed to handle large amounts of data across many commodity servers.
Spring Boot offers auto-configuration for Cassandra and the abstractions on top of it
provided by <a class="link" href="https://github.com/spring-projects/spring-data-cassandra" target="_top">Spring Data
Cassandra</a>. There is a <code class="literal">spring-boot-starter-data-cassandra</code> &#8220;Starter&#8221; for collecting
the dependencies in a convenient way.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-cassandra" href="#boot-features-connecting-to-cassandra"></a>32.7.1&nbsp;Connecting to Cassandra</h3></div></div></div><p>You can inject an auto-configured <code class="literal">CassandraTemplate</code> or a Cassandra <code class="literal">Session</code> instance
as you would with any other Spring Bean. The <code class="literal">spring.data.cassandra.*</code> properties can be
used to customize the connection. Generally, you provide <code class="literal">keyspace-name</code> and
<code class="literal">contact-points</code> properties, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.cassandra.keyspace-name</span>=mykeyspace
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.data.cassandra.contact-points</span>=cassandrahost1,cassandrahost2</pre><p>You can also register an arbitrary number of beans that implement
<code class="literal">ClusterBuilderCustomizer</code> for more advanced customizations.</p><p>The following code listing shows how to inject a Cassandra bean:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> CassandraTemplate template;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(CassandraTemplate template) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.template = template;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>If you add your own <code class="literal">@Bean</code> of type <code class="literal">CassandraTemplate</code>, it replaces the default.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-cassandra-repositories" href="#boot-features-spring-data-cassandra-repositories"></a>32.7.2&nbsp;Spring Data Cassandra Repositories</h3></div></div></div><p>Spring Data includes basic repository support for Cassandra. Currently, this is more
limited than the JPA repositories discussed earlier and needs to annotate finder methods
with <code class="literal">@Query</code>.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>For complete details of Spring Data Cassandra, refer to the
<a class="link" href="https://docs.spring.io/spring-data/cassandra/docs/" target="_top">reference documentation</a>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-couchbase" href="#boot-features-couchbase"></a>32.8&nbsp;Couchbase</h2></div></div></div><p><a class="link" href="https://www.couchbase.com/" target="_top">Couchbase</a> is an open-source, distributed, multi-model NoSQL
document-oriented database that is optimized for interactive applications. Spring Boot
offers auto-configuration for Couchbase and the abstractions on top of it provided by
<a class="link" href="https://github.com/spring-projects/spring-data-couchbase" target="_top">Spring Data Couchbase</a>. There are
<code class="literal">spring-boot-starter-data-couchbase</code> and <code class="literal">spring-boot-starter-data-couchbase-reactive</code>
&#8220;Starters&#8221; for collecting the dependencies in a convenient way.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-couchbase" href="#boot-features-connecting-to-couchbase"></a>32.8.1&nbsp;Connecting to Couchbase</h3></div></div></div><p>You can get a <code class="literal">Bucket</code> and <code class="literal">Cluster</code> by adding the Couchbase SDK and some configuration.
The <code class="literal">spring.couchbase.*</code> properties can be used to customize the connection. Generally,
you provide the bootstrap hosts, bucket name, and password, as shown in the following
example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.bootstrap-hosts</span>=my-host-1,192.168.1.123
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.bucket.name</span>=my-bucket
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.bucket.password</span>=secret</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You need to provide <span class="emphasis"><em>at least</em></span> the bootstrap host(s), in which case the bucket name is
<code class="literal">default</code> and the password is an empty String. Alternatively, you can define your own
<code class="literal">org.springframework.data.couchbase.config.CouchbaseConfigurer</code> <code class="literal">@Bean</code> to take control
over the whole configuration.</p></td></tr></table></div><p>It is also possible to customize some of the <code class="literal">CouchbaseEnvironment</code> settings. For
instance, the following configuration changes the timeout to use to open a new <code class="literal">Bucket</code>
and enables SSL support:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.env.timeouts.connect</span>=3000
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.env.ssl.key-store</span>=/location/of/keystore.jks
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.couchbase.env.ssl.key-store-password</span>=secret</pre><p>Check the <code class="literal">spring.couchbase.env.*</code> properties for more details.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-spring-data-couchbase-repositories" href="#boot-features-spring-data-couchbase-repositories"></a>32.8.2&nbsp;Spring Data Couchbase Repositories</h3></div></div></div><p>Spring Data includes repository support for Couchbase. For complete details of Spring
Data Couchbase, refer to the
<a class="link" href="https://docs.spring.io/spring-data/couchbase/docs/current/reference/html/" target="_top">reference
documentation</a>.</p><p>You can inject an auto-configured <code class="literal">CouchbaseTemplate</code> instance as you would with any
other Spring Bean, provided a <span class="emphasis"><em>default</em></span> <code class="literal">CouchbaseConfigurer</code> is available (which
happens when you enable Couchbase support, as explained earlier).</p><p>The following examples shows how to inject a Couchbase bean:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> CouchbaseTemplate template;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(CouchbaseTemplate template) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.template = template;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>There are a few beans that you can define in your own configuration to override those
provided by the auto-configuration:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A <code class="literal">CouchbaseTemplate</code> <code class="literal">@Bean</code> with a name of <code class="literal">couchbaseTemplate</code>.</li><li class="listitem">An <code class="literal">IndexManager</code> <code class="literal">@Bean</code> with a name of <code class="literal">couchbaseIndexManager</code>.</li><li class="listitem">A <code class="literal">CustomConversions</code> <code class="literal">@Bean</code> with a name of <code class="literal">couchbaseCustomConversions</code>.</li></ul></div><p>To avoid hard-coding those names in your own config, you can reuse <code class="literal">BeanNames</code> provided
by Spring Data Couchbase. For instance, you can customize the converters to use, as
follows:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Configuration</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> SomeConfiguration {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Bean(BeanNames.COUCHBASE_CUSTOM_CONVERSIONS)</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> CustomConversions myCustomConversions() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> CustomConversions(...);
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you want to fully bypass the auto-configuration for Spring Data Couchbase,
provide your own implementation of
<code class="literal">org.springframework.data.couchbase.config.AbstractCouchbaseDataConfiguration</code>.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-ldap" href="#boot-features-ldap"></a>32.9&nbsp;LDAP</h2></div></div></div><p><a class="link" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol" target="_top">LDAP</a> (Lightweight
Directory Access Protocol) is an open, vendor-neutral, industry standard application
protocol for accessing and maintaining distributed directory information services over an
IP network. Spring Boot offers auto-configuration for any compliant LDAP server as well
as support for the embedded in-memory LDAP server from
<a class="link" href="https://www.ldap.com/unboundid-ldap-sdk-for-java" target="_top">UnboundID</a>.</p><p>LDAP abstractions are provided by
<a class="link" href="https://github.com/spring-projects/spring-data-ldap" target="_top">Spring Data LDAP</a>.
There is a <code class="literal">spring-boot-starter-data-ldap</code> &#8220;Starter&#8221; for collecting the dependencies in
a convenient way.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-ldap-connecting" href="#boot-features-ldap-connecting"></a>32.9.1&nbsp;Connecting to an LDAP Server</h3></div></div></div><p>To connect to an LDAP server, make sure you declare a dependency on the
<code class="literal">spring-boot-starter-data-ldap</code> &#8220;Starter&#8221; or <code class="literal">spring-ldap-core</code> and then declare the
URLs of your server in your application.properties, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.urls</span>=ldap://myserver:1235
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.username</span>=admin
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.password</span>=secret</pre><p>If you need to customize connection settings, you can use the <code class="literal">spring.ldap.base</code> and
<code class="literal">spring.ldap.base-environment</code> properties.</p><p>An <code class="literal">LdapContextSource</code> is auto-configured based on these settings. If you need to customize
it, for instance to use a <code class="literal">PooledContextSource</code>, you can still inject the auto-configured
<code class="literal">LdapContextSource</code>. Make sure to flag your customized <code class="literal">ContextSource</code> as <code class="literal">@Primary</code> so
that the auto-configured <code class="literal">LdapTemplate</code> uses it.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-ldap-spring-data-repositories" href="#boot-features-ldap-spring-data-repositories"></a>32.9.2&nbsp;Spring Data LDAP Repositories</h3></div></div></div><p>Spring Data includes repository support for LDAP. For complete details of Spring
Data LDAP, refer to the
<a class="link" href="https://docs.spring.io/spring-data/ldap/docs/1.0.x/reference/html/" target="_top">reference
documentation</a>.</p><p>You can also inject an auto-configured <code class="literal">LdapTemplate</code> instance as you would with any
other Spring Bean, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> LdapTemplate template;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyBean(LdapTemplate template) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.template = template;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-ldap-embedded" href="#boot-features-ldap-embedded"></a>32.9.3&nbsp;Embedded In-memory LDAP Server</h3></div></div></div><p>For testing purposes, Spring Boot supports auto-configuration of an in-memory LDAP server
from <a class="link" href="https://www.ldap.com/unboundid-ldap-sdk-for-java" target="_top">UnboundID</a>. To configure the server,
add a dependency to <code class="literal">com.unboundid:unboundid-ldapsdk</code> and declare a <code class="literal">base-dn</code> property, as
follows:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.embedded.base-dn</span>=dc=spring,dc=io</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>It is possible to define multiple base-dn values, however, since distinguished names
usually contain commas, they must be defined using the correct notation.</p><p>In yaml files, you can use the yaml list notation:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.embedded.base-dn</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  - dc</span>=spring,dc=io
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  - dc</span>=pivotal,dc=io</pre><p>In properties files, you must include the index as part of the property name:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.embedded.base-dn[0]</span>=dc=spring,dc=io
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.ldap.embedded.base-dn[1]</span>=dc=pivotal,dc=io</pre></td></tr></table></div><p>By default, the server starts on a random port and triggers the regular LDAP support.
There is no need to specify a <code class="literal">spring.ldap.urls</code> property.</p><p>If there is a <code class="literal">schema.ldif</code> file on your classpath, it is used to initialize the server.
If you want to load the initialization script from a different resource, you can also use
the <code class="literal">spring.ldap.embedded.ldif</code> property.</p><p>By default, a standard schema is used to validate <code class="literal">LDIF</code> files. You can turn off
validation altogether by setting the <code class="literal">spring.ldap.embedded.validation.enabled</code> property.
If you have custom attributes, you can use <code class="literal">spring.ldap.embedded.validation.schema</code> to
define your custom attribute types or object classes.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-influxdb" href="#boot-features-influxdb"></a>32.10&nbsp;InfluxDB</h2></div></div></div><p><a class="link" href="https://www.influxdata.com/" target="_top">InfluxDB</a> is an open-source time series database optimized
for fast, high-availability storage and retrieval of time series data in fields such as
operations monitoring, application metrics, Internet-of-Things sensor data, and real-time
analytics.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-connecting-to-influxdb" href="#boot-features-connecting-to-influxdb"></a>32.10.1&nbsp;Connecting to InfluxDB</h3></div></div></div><p>Spring Boot auto-configures an <code class="literal">InfluxDB</code> instance, provided the <code class="literal">influxdb-java</code> client
is on the classpath and the URL of the database is set, as shown in the following
example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.influx.url</span>=https://172.0.0.1:8086</pre><p>If the connection to InfluxDB requires a user and password, you can set the
<code class="literal">spring.influx.user</code> and <code class="literal">spring.influx.password</code> properties accordingly.</p><p>InfluxDB relies on OkHttp. If you need to tune the http client <code class="literal">InfluxDB</code> uses behind the
scenes, you can register an <code class="literal">InfluxDbOkHttpClientBuilderProvider</code> bean.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-sql.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-caching.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">31.&nbsp;Working with SQL Databases&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;33.&nbsp;Caching</td></tr></table></div></body></html>