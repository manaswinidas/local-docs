<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>42.&nbsp;Task Execution and Scheduling</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-quartz.html" title="41.&nbsp;Quartz Scheduler"><link rel="next" href="boot-features-integration.html" title="43.&nbsp;Spring Integration"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">42.&nbsp;Task Execution and Scheduling</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-quartz.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-integration.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-task-execution-scheduling" href="#boot-features-task-execution-scheduling"></a>42.&nbsp;Task Execution and Scheduling</h2></div></div></div><p>In the absence of an <code class="literal">Executor</code> bean in the context, Spring Boot auto-configures a
<code class="literal">ThreadPoolTaskExecutor</code> with sensible defaults that can be automatically associated to
asynchronous task execution (<code class="literal">@EnableAsync</code>) and Spring MVC asynchronous request
processing.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you have defined a custom <code class="literal">Executor</code> in the context, regular task execution (i.e.
<code class="literal">@EnableAsync</code>) will use it transparently but the Spring MVC support will not be
configured as it requires an <code class="literal">AsyncTaskExecutor</code> implementation (named
<code class="literal">applicationTaskExecutor</code>). Depending on your target arrangement, you could change your
<code class="literal">Executor</code> into a <code class="literal">ThreadPoolTaskExecutor</code> or define both a <code class="literal">ThreadPoolTaskExecutor</code> and
an <code class="literal">AsyncConfigurer</code> wrapping your custom <code class="literal">Executor</code>.</p><p>The auto-configured <code class="literal">TaskExecutorBuilder</code> allows you to easily create instances that
reproduce what the auto-configuration does by default.</p></td></tr></table></div><p>The thread pool uses 8 core threads that can grow and shrink according to the load. Those
default settings can be fine-tuned using the <code class="literal">spring.task.execution</code> namespace as shown in
the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.task.execution.pool.max-threads</span>=16
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.task.execution.pool.queue-capacity</span>=100
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.task.execution.pool.keep-alive</span>=10s</pre><p>This changes the thread pool to use a bounded queue so that when the queue is full (100
tasks), the thread pool increases to maximum 16 threads. Shrinking of the pool is more
aggressive as threads are reclaimed when they are idle for 10 seconds (rather than
60 seconds by default).</p><p>A <code class="literal">ThreadPoolTaskScheduler</code> can also be auto-configured if need to be associated to
scheduled task execution (<code class="literal">@EnableScheduling</code>). The thread pool uses one thread by default
and those settings can be fine-tuned using the <code class="literal">spring.task.scheduling</code> namespace.</p><p>Both a <code class="literal">TaskExecutorBuilder</code> bean and a <code class="literal">TaskSchedulerBuilder</code> bean are made available in
the context if a custom executor or scheduler needs to be created.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-quartz.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-integration.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">41.&nbsp;Quartz Scheduler&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;43.&nbsp;Spring Integration</td></tr></table></div></body></html>