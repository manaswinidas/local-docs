<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>50.&nbsp;Kotlin support</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-developing-auto-configuration.html" title="49.&nbsp;Creating Your Own Auto-configuration"><link rel="next" href="boot-features-whats-next.html" title="51.&nbsp;What to Read Next"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">50.&nbsp;Kotlin support</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-developing-auto-configuration.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-whats-next.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-kotlin" href="#boot-features-kotlin"></a>50.&nbsp;Kotlin support</h2></div></div></div><p><a class="link" href="https://kotlinlang.org" target="_top">Kotlin</a> is a statically-typed language targeting the JVM (and other
platforms) which allows writing concise and elegant code while providing
<a class="link" href="https://kotlinlang.org/docs/reference/java-interop.html" target="_top">interoperability</a> with existing libraries written
in Java.</p><p>Spring Boot provides Kotlin support by leveraging the support in other Spring projects
such as Spring Framework, Spring Data, and Reactor. See the
<a class="link" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/spring-framework-reference/languages.html#kotlin" target="_top">Spring Framework Kotlin support documentation</a>
for more information.</p><p>The easiest way to start with Spring Boot and Kotlin is to follow
<a class="link" href="https://spring.io/guides/tutorials/spring-boot-kotlin/" target="_top">this comprehensive tutorial</a>. You
can create new Kotlin projects via
<a class="link" href="https://start.spring.io/#!language=kotlin" target="_top">start.spring.io</a>. Feel free to join the #spring
channel of <a class="link" href="https://slack.kotlinlang.org/" target="_top">Kotlin Slack</a> or ask a question with the <code class="literal">spring</code>
and <code class="literal">kotlin</code> tags on <a class="link" href="https://stackoverflow.com/questions/tagged/spring+kotlin" target="_top">Stack
Overflow</a> if you need support.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-requirements" href="#boot-features-kotlin-requirements"></a>50.1&nbsp;Requirements</h2></div></div></div><p>Spring Boot supports Kotlin 1.2.x. To use Kotlin, <code class="literal">org.jetbrains.kotlin:kotlin-stdlib</code> and
<code class="literal">org.jetbrains.kotlin:kotlin-reflect</code> must be present on the classpath. The
<code class="literal">kotlin-stdlib</code> variants <code class="literal">kotlin-stdlib-jdk7</code> and <code class="literal">kotlin-stdlib-jdk8</code> can also be used.</p><p>Since <a class="link" href="https://discuss.kotlinlang.org/t/classes-final-by-default/166" target="_top">Kotlin classes are
final by default</a>, you are likely to want to configure
<a class="link" href="https://kotlinlang.org/docs/reference/compiler-plugins.html#spring-support" target="_top">kotlin-spring</a>
plugin in order to automatically open Spring-annotated classes so that they can be
proxied.</p><p><a class="link" href="https://github.com/FasterXML/jackson-module-kotlin" target="_top">Jackson&#8217;s Kotlin module</a> is required
for serializing / deserializing JSON data in Kotlin. It is automatically registered when
found on the classpath. A warning message is logged if Jackson and Kotlin are present but
the Jackson Kotlin module is not.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>These dependencies and plugins are provided by default if one bootstraps a Kotlin
project on <a class="link" href="https://start.spring.io/#!language=kotlin" target="_top">start.spring.io</a>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-null-safety" href="#boot-features-kotlin-null-safety"></a>50.2&nbsp;Null-safety</h2></div></div></div><p>One of Kotlin&#8217;s key features is <a class="link" href="https://kotlinlang.org/docs/reference/null-safety.html" target="_top">null-safety</a>. It
deals with <code class="literal">null</code> values at compile time rather than deferring the problem to runtime and
encountering a <code class="literal">NullPointerException</code>. This helps to eliminate a common source of bugs
without paying the cost of wrappers like <code class="literal">Optional</code>. Kotlin also allows using functional
constructs with nullable values as described in this
<a class="link" href="https://www.baeldung.com/kotlin-null-safety" target="_top">comprehensive guide to null-safety in Kotlin</a>.</p><p>Although Java does not allow one to express null-safety in its type system, Spring
Framework, Spring Data, and Reactor now provide null-safety of their API via
tooling-friendly annotations. By default, types from Java APIs used in Kotlin are
recognized as
<a class="link" href="https://kotlinlang.org/docs/reference/java-interop.html#null-safety-and-platform-types" target="_top">platform types</a>
for which null-checks are relaxed.
<a class="link" href="https://kotlinlang.org/docs/reference/java-interop.html#jsr-305-support" target="_top">Kotlin&#8217;s support for JSR 305
annotations</a> combined with nullability annotations provide null-safety for the related
Spring API in Kotlin.</p><p>The JSR 305 checks can be configured by adding the <code class="literal">-Xjsr305</code> compiler flag with the
following options: <code class="literal">-Xjsr305={strict|warn|ignore}</code>. The default behavior is the same as
<code class="literal">-Xjsr305=warn</code>. The <code class="literal">strict</code> value is required to have null-safety taken in account in
Kotlin types inferred from Spring API but should be used with the knowledge that Spring
API nullability declaration could evolve even between minor releases and more checks may
be added in the future).</p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>Generic type arguments, varargs and array elements nullability are not yet
supported. See <a class="link" href="https://jira.spring.io/browse/SPR-15942" target="_top">SPR-15942</a> for up-to-date
information. Also be aware that Spring Boot&#8217;s own API is <a class="link" href="https://github.com/spring-projects/spring-boot/issues/10712" target="_top">not yet
annotated</a>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-api" href="#boot-features-kotlin-api"></a>50.3&nbsp;Kotlin API</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-kotlin-api-runapplication" href="#boot-features-kotlin-api-runapplication"></a>50.3.1&nbsp;runApplication</h3></div></div></div><p>Spring Boot provides an idiomatic way to run an application with
<code class="literal">runApplication&lt;MyApplication&gt;(*args)</code> as shown in the following example:</p><pre class="programlisting">import org.springframework.boot.autoconfigure.SpringBootApplication
import org.springframework.boot.runApplication

@SpringBootApplication
class MyApplication

fun main(args: Array&lt;String&gt;) {
	runApplication&lt;MyApplication&gt;(*args)
}</pre><p>This is a drop-in replacement for
<code class="literal">SpringApplication.run(MyApplication::class.java, *args)</code>. It also allows customization
of the application as shown in the following example:</p><pre class="programlisting">runApplication&lt;MyApplication&gt;(*args) {
	setBannerMode(OFF)
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-kotlin-api-extensions" href="#boot-features-kotlin-api-extensions"></a>50.3.2&nbsp;Extensions</h3></div></div></div><p>Kotlin <a class="link" href="https://kotlinlang.org/docs/reference/extensions.html" target="_top">extensions</a> provide the ability
to extend existing classes with additional functionality. The Spring Boot Kotlin API makes
use of these extensions to add new Kotlin specific conveniences to existing APIs.</p><p><code class="literal">TestRestTemplate</code> extensions, similar to those provided by Spring Framework for
<code class="literal">RestOperations</code> in Spring Framework, are provided. Among other things, the extensions
make it possible to take advantage of Kotlin reified type parameters.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-dependency-management" href="#boot-features-kotlin-dependency-management"></a>50.4&nbsp;Dependency management</h2></div></div></div><p>In order to avoid mixing different version of Kotlin dependencies on the classpath,
dependency management of the following Kotlin dependencies is provided:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">kotlin-reflect</code></li><li class="listitem"><code class="literal">kotlin-runtime</code></li><li class="listitem"><code class="literal">kotlin-stdlib</code></li><li class="listitem"><code class="literal">kotlin-stdlib-jdk7</code></li><li class="listitem"><code class="literal">kotlin-stdlib-jdk8</code></li><li class="listitem"><code class="literal">kotlin-stdlib-jre7</code></li><li class="listitem"><code class="literal">kotlin-stdlib-jre8</code></li></ul></div><p>With Maven, the Kotlin version can be customized via the <code class="literal">kotlin.version</code> property and
plugin management is provided for <code class="literal">kotlin-maven-plugin</code>. With Gradle, the Spring Boot
plugin automatically aligns the <code class="literal">kotlin.version</code> with the version of the Kotlin plugin.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-configuration-properties" href="#boot-features-kotlin-configuration-properties"></a>50.5&nbsp;<code class="literal">@ConfigurationProperties</code></h2></div></div></div><p><code class="literal">@ConfigurationProperties</code> currently only works with <code class="literal">lateinit</code> or nullable <code class="literal">var</code>
properties (the former is recommended), since immutable classes initialized by
constructors are <a class="link" href="https://github.com/spring-projects/spring-boot/issues/8762" target="_top">not yet supported</a>.</p><pre class="programlisting">@ConfigurationProperties("example.kotlin")
class KotlinExampleProperties {

	lateinit var name: String

	lateinit var description: String

	val myService = MyService()

	class MyService {

		lateinit var apiToken: String

		lateinit var uri: URI

	}

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>To generate
<a class="link" href="configuration-metadata.html#configuration-metadata-annotation-processor" title="B.3&nbsp;Generating Your Own Metadata by Using the Annotation Processor">your own
metadata</a> using the annotation processor, <a class="link" href="https://kotlinlang.org/docs/reference/kapt.html" target="_top"><code class="literal">kapt</code> should
be configured</a> with the <code class="literal">spring-boot-configuration-processor</code> dependency.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-testing" href="#boot-features-kotlin-testing"></a>50.6&nbsp;Testing</h2></div></div></div><p>While it is possible to use JUnit 4 (the default provided by <code class="literal">spring-boot-starter-test</code>)
to test Kotlin code, JUnit 5 is recommended. JUnit 5 enables a test class to be
instantiated once and reused for all of the class&#8217;s tests. This makes it possible to use
<code class="literal">@BeforeAll</code> and <code class="literal">@AfterAll</code> annotations on non-static methods, which is a good fit for
Kotlin.</p><p>To use JUnit 5, exclude <code class="literal">junit:junit</code> dependency from <code class="literal">spring-boot-starter-test</code>, add
JUnit 5 dependencies, and configure the Maven or Gradle plugin accordingly. See the
<a class="link" href="https://junit.org/junit5/docs/current/user-guide/#dependency-metadata-junit-jupiter-samples" target="_top">JUnit 5
documentation</a> for more details. You also need to
<a class="link" href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-test-instance-lifecycle-changing-default" target="_top">switch test
instance lifecycle to "per-class"</a>.</p><p>To mock Kotlin classes, <a class="link" href="https://mockk.io/" target="_top">MockK</a> is recommended. If you need the <code class="literal">Mockk</code>
equivalent of the Mockito specific
<a class="link" href="boot-features-testing.html#boot-features-testing-spring-boot-applications-mocking-beans" title="46.3.7&nbsp;Mocking and Spying Beans"><code class="literal">@MockBean</code> and <code class="literal">@SpyBean</code>
annotations</a>, you can use <a class="link" href="https://github.com/Ninja-Squad/springmockk" target="_top">SpringMockK</a> which
provides similar <code class="literal">@MockkBean</code> and <code class="literal">@SpykBean</code> annotations.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-kotlin-resources" href="#boot-features-kotlin-resources"></a>50.7&nbsp;Resources</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-kotlin-resources-further-reading" href="#boot-features-kotlin-resources-further-reading"></a>50.7.1&nbsp;Further reading</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="https://kotlinlang.org/docs/reference/" target="_top">Kotlin language reference</a></li><li class="listitem"><a class="link" href="https://slack.kotlinlang.org/" target="_top">Kotlin Slack</a> (with a dedicated #spring channel)</li><li class="listitem"><a class="link" href="https://stackoverflow.com/questions/tagged/spring+kotlin" target="_top">Stackoverflow with <code class="literal">spring</code> and <code class="literal">kotlin</code> tags</a></li><li class="listitem"><a class="link" href="https://try.kotlinlang.org/" target="_top">Try Kotlin in your browser</a></li><li class="listitem"><a class="link" href="https://blog.jetbrains.com/kotlin/" target="_top">Kotlin blog</a></li><li class="listitem"><a class="link" href="https://kotlin.link/" target="_top">Awesome Kotlin</a></li><li class="listitem"><a class="link" href="https://spring.io/guides/tutorials/spring-boot-kotlin/" target="_top">Tutorial: building web applications with Spring Boot and Kotlin</a></li><li class="listitem"><a class="link" href="https://spring.io/blog/2016/02/15/developing-spring-boot-applications-with-kotlin" target="_top">Developing Spring Boot applications with Kotlin</a></li><li class="listitem"><a class="link" href="https://spring.io/blog/2016/03/20/a-geospatial-messenger-with-kotlin-spring-boot-and-postgresql" target="_top">A Geospatial Messenger with Kotlin, Spring Boot and PostgreSQL</a></li><li class="listitem"><a class="link" href="https://spring.io/blog/2017/01/04/introducing-kotlin-support-in-spring-framework-5-0" target="_top">Introducing Kotlin support in Spring Framework 5.0</a></li><li class="listitem"><a class="link" href="https://spring.io/blog/2017/08/01/spring-framework-5-kotlin-apis-the-functional-way" target="_top">Spring Framework 5 Kotlin APIs, the functional way</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-kotlin-resources-examples" href="#boot-features-kotlin-resources-examples"></a>50.7.2&nbsp;Examples</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="https://github.com/sdeleuze/spring-boot-kotlin-demo" target="_top">spring-boot-kotlin-demo</a>: regular Spring Boot + Spring Data JPA project</li><li class="listitem"><a class="link" href="https://github.com/mixitconf/mixit" target="_top">mixit</a>: Spring Boot 2 + WebFlux + Reactive Spring Data MongoDB</li><li class="listitem"><a class="link" href="https://github.com/sdeleuze/spring-kotlin-fullstack" target="_top">spring-kotlin-fullstack</a>: WebFlux Kotlin fullstack example with Kotlin2js for frontend instead of JavaScript or TypeScript</li><li class="listitem"><a class="link" href="https://github.com/spring-petclinic/spring-petclinic-kotlin" target="_top">spring-petclinic-kotlin</a>: Kotlin version of the Spring PetClinic Sample Application</li><li class="listitem"><a class="link" href="https://github.com/sdeleuze/spring-kotlin-deepdive" target="_top">spring-kotlin-deepdive</a>: a step by step migration for Boot 1.0 + Java to Boot 2.0 + Kotlin</li></ul></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-developing-auto-configuration.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-whats-next.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">49.&nbsp;Creating Your Own Auto-configuration&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;51.&nbsp;What to Read Next</td></tr></table></div></body></html>