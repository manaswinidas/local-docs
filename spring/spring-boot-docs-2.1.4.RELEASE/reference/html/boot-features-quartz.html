<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>41.&nbsp;Quartz Scheduler</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-hazelcast.html" title="40.&nbsp;Hazelcast"><link rel="next" href="boot-features-task-execution-scheduling.html" title="42.&nbsp;Task Execution and Scheduling"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">41.&nbsp;Quartz Scheduler</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-hazelcast.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-task-execution-scheduling.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-quartz" href="#boot-features-quartz"></a>41.&nbsp;Quartz Scheduler</h2></div></div></div><p>Spring Boot offers several conveniences for working with the
<a class="link" href="https://www.quartz-scheduler.org/" target="_top">Quartz scheduler</a>, including the
<code class="literal">spring-boot-starter-quartz</code> &#8220;Starter&#8221;. If Quartz is available, a <code class="literal">Scheduler</code> is
auto-configured (through the <code class="literal">SchedulerFactoryBean</code> abstraction).</p><p>Beans of the following types are automatically picked up and associated with the
<code class="literal">Scheduler</code>:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">JobDetail</code>: defines a particular Job. <code class="literal">JobDetail</code> instances can be built with the
<code class="literal">JobBuilder</code> API.</li><li class="listitem"><code class="literal">Calendar</code>.</li><li class="listitem"><code class="literal">Trigger</code>: defines when a particular job is triggered.</li></ul></div><p>By default, an in-memory <code class="literal">JobStore</code> is used. However, it is possible to configure a
JDBC-based store if a <code class="literal">DataSource</code> bean is available in your application and if the
<code class="literal">spring.quartz.job-store-type</code> property is configured accordingly, as shown in the
following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.quartz.job-store-type</span>=jdbc</pre><p>When the JDBC store is used, the schema can be initialized on startup, as shown in the
following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring.quartz.jdbc.initialize-schema</span>=always</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>By default, the database is detected and initialized by using the standard scripts
provided with the Quartz library. These scripts drop existing tables, deleting all triggers
on every restart. It is also possible to provide a custom script by setting the
<code class="literal">spring.quartz.jdbc.schema</code> property.</p></td></tr></table></div><p>To have Quartz use a <code class="literal">DataSource</code> other than the application&#8217;s main <code class="literal">DataSource</code>, declare
a <code class="literal">DataSource</code> bean, annotating its <code class="literal">@Bean</code> method with <code class="literal">@QuartzDataSource</code>. Doing so
ensures that the Quartz-specific <code class="literal">DataSource</code> is used by both the <code class="literal">SchedulerFactoryBean</code>
and for schema initialization.</p><p>By default, jobs created by configuration will not overwrite already registered jobs that
have been read from a persistent job store. To enable overwriting existing job definitions
set the <code class="literal">spring.quartz.overwrite-existing-jobs</code> property.</p><p>Quartz Scheduler configuration can be customized using <code class="literal">spring.quartz</code> properties and
<code class="literal">SchedulerFactoryBeanCustomizer</code> beans, which allow programmatic <code class="literal">SchedulerFactoryBean</code>
customization. Advanced Quartz configuration properties can be customized using
<code class="literal">spring.quartz.properties.*</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>In particular, an <code class="literal">Executor</code> bean is not associated with the scheduler as Quartz
offers a way to configure the scheduler via <code class="literal">spring.quartz.properties</code>. If you need
to customize the task executor, consider implementing <code class="literal">SchedulerFactoryBeanCustomizer</code>.</p></td></tr></table></div><p>Jobs can define setters to inject data map properties. Regular beans can also be injected
in a similar manner, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> SampleJob <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">extends</span> QuartzJobBean {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> MyService myService;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> String name;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// Inject "MyService" bean</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setMyService(MyService myService) { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// Inject the "name" job data property</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setName(String name) { ... }

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Override</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">protected</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> executeInternal(JobExecutionContext context)
			<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">throws</span> JobExecutionException {
		...
	}

}</pre></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-hazelcast.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-task-execution-scheduling.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">40.&nbsp;Hazelcast&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;42.&nbsp;Task Execution and Scheduling</td></tr></table></div></body></html>