<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>24.&nbsp;Externalized Configuration</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-spring-application.html" title="23.&nbsp;SpringApplication"><link rel="next" href="boot-features-profiles.html" title="25.&nbsp;Profiles"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">24.&nbsp;Externalized Configuration</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-spring-application.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-profiles.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-external-config" href="#boot-features-external-config"></a>24.&nbsp;Externalized Configuration</h2></div></div></div><p>Spring Boot lets you externalize your configuration so that you can work with the same
application code in different environments. You can use properties files, YAML files,
environment variables, and command-line arguments to externalize configuration. Property
values can be injected directly into your beans by using the <code class="literal">@Value</code> annotation,
accessed through Spring&#8217;s <code class="literal">Environment</code> abstraction, or be
<a class="link" href="boot-features-external-config.html#boot-features-external-config-typesafe-configuration-properties" title="24.8&nbsp;Type-safe Configuration Properties">bound to structured
objects</a> through <code class="literal">@ConfigurationProperties</code>.</p><p>Spring Boot uses a very particular <code class="literal">PropertySource</code> order that is designed to allow
sensible overriding of values. Properties are considered in the following order:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><a class="link" href="using-boot-devtools.html#using-boot-devtools-globalsettings" title="20.4&nbsp;Global Settings">Devtools global settings properties</a>
on your home directory (<code class="literal">~/.spring-boot-devtools.properties</code> when devtools is active).</li><li class="listitem"><a class="link" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/javadoc-api/org/springframework/test/context/TestPropertySource.html" target="_top"><code class="literal">@TestPropertySource</code></a>
annotations on your tests.</li><li class="listitem"><code class="literal">properties</code> attribute on your tests. Available on
<a class="link" href="https://docs.spring.io/spring-boot/docs/2.1.4.RELEASE/api/org/springframework/boot/test/context/SpringBootTest.html" target="_top"><code class="literal">@SpringBootTest</code></a> and the
<a class="link" href="boot-features-testing.html#boot-features-testing-spring-boot-applications-testing-autoconfigured-tests" title="46.3.8&nbsp;Auto-configured Tests">test
annotations for testing a particular slice of your application</a>.</li><li class="listitem">Command line arguments.</li><li class="listitem">Properties from <code class="literal">SPRING_APPLICATION_JSON</code> (inline JSON embedded in an environment
variable or system property).</li><li class="listitem"><code class="literal">ServletConfig</code> init parameters.</li><li class="listitem"><code class="literal">ServletContext</code> init parameters.</li><li class="listitem">JNDI attributes from <code class="literal">java:comp/env</code>.</li><li class="listitem">Java System properties (<code class="literal">System.getProperties()</code>).</li><li class="listitem">OS environment variables.</li><li class="listitem">A <code class="literal">RandomValuePropertySource</code> that has properties only in <code class="literal">random.*</code>.</li><li class="listitem"><a class="link" href="boot-features-external-config.html#boot-features-external-config-profile-specific-properties" title="24.4&nbsp;Profile-specific Properties">Profile-specific
application properties</a> outside of your packaged jar
(<code class="literal">application-{profile}.properties</code> and YAML variants).</li><li class="listitem"><a class="link" href="boot-features-external-config.html#boot-features-external-config-profile-specific-properties" title="24.4&nbsp;Profile-specific Properties">Profile-specific
application properties</a> packaged inside your jar (<code class="literal">application-{profile}.properties</code>
and YAML variants).</li><li class="listitem">Application properties outside of your packaged jar (<code class="literal">application.properties</code> and YAML
variants).</li><li class="listitem">Application properties packaged inside your jar (<code class="literal">application.properties</code> and YAML
variants).</li><li class="listitem"><a class="link" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/javadoc-api/org/springframework/context/annotation/PropertySource.html" target="_top"><code class="literal">@PropertySource</code></a>
annotations on your <code class="literal">@Configuration</code> classes.</li><li class="listitem">Default properties (specified by setting <code class="literal">SpringApplication.setDefaultProperties</code>).</li></ol></div><p>To provide a concrete example, suppose you develop a <code class="literal">@Component</code> that uses a <code class="literal">name</code>
property, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.stereotype.*;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.beans.factory.annotation.*;

<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyBean {

    <xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Value("${name}")</xslthl:annotation>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> String name;

    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>

}</pre><p>On your application classpath (for example, inside your jar) you can have an
<code class="literal">application.properties</code> file that provides a sensible default property value for <code class="literal">name</code>.
When running in a new environment, an <code class="literal">application.properties</code> file can be provided
outside of your jar that overrides the <code class="literal">name</code>. For one-off testing, you can launch with a
specific command line switch (for example, <code class="literal">java -jar app.jar --name="Spring"</code>).</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">SPRING_APPLICATION_JSON</code> properties can be supplied on the command line with an
environment variable. For example, you could use the following line in a UN*X
shell:</p><pre class="screen">$ SPRING_APPLICATION_JSON='{"acme":{"name":"test"}}' java -jar myapp.jar</pre><p>In the preceding example, you end up with <code class="literal">acme.name=test</code> in the Spring <code class="literal">Environment</code>.
You can also supply the JSON as <code class="literal">spring.application.json</code> in a System property, as shown
in the following example:</p><pre class="screen">$ java -Dspring.application.json='{"name":"test"}' -jar myapp.jar</pre><p>You can also supply the JSON by using a command line argument, as shown in the following
example:</p><pre class="screen">$ java -jar myapp.jar --spring.application.json='{"name":"test"}'</pre><p>You can also supply the JSON as a JNDI variable, as follows:
<code class="literal">java:comp/env/spring.application.json</code>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-random-values" href="#boot-features-external-config-random-values"></a>24.1&nbsp;Configuring Random Values</h2></div></div></div><p>The <code class="literal">RandomValuePropertySource</code> is useful for injecting random values (for example, into
secrets or test cases). It can produce integers, longs, uuids, or strings, as shown in the
following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.secret</span>=${random.value}
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.number</span>=${random.int}
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.bignumber</span>=${random.long}
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.uuid</span>=${random.uuid}
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.number.less.than.ten</span>=${random.int(10)}
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.number.in.range</span>=${random.int[1024,65536]}</pre><p>The <code class="literal">random.int*</code> syntax is <code class="literal">OPEN value (,max) CLOSE</code> where the <code class="literal">OPEN,CLOSE</code> are any
character and <code class="literal">value,max</code> are integers. If <code class="literal">max</code> is provided, then <code class="literal">value</code> is the minimum
value and <code class="literal">max</code> is the maximum value (exclusive).</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-command-line-args" href="#boot-features-external-config-command-line-args"></a>24.2&nbsp;Accessing Command Line Properties</h2></div></div></div><p>By default, <code class="literal">SpringApplication</code> converts any command line option arguments (that is,
arguments starting with <code class="literal">--</code>, such as <code class="literal">--server.port=9000</code>) to a <code class="literal">property</code> and adds
them to the Spring <code class="literal">Environment</code>. As mentioned previously, command line properties always
take precedence over other property sources.</p><p>If you do not want command line properties to be added to the <code class="literal">Environment</code>, you can
disable them by using <code class="literal">SpringApplication.setAddCommandLineProperties(false)</code>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-application-property-files" href="#boot-features-external-config-application-property-files"></a>24.3&nbsp;Application Property Files</h2></div></div></div><p><code class="literal">SpringApplication</code> loads properties from <code class="literal">application.properties</code> files in the following
locations and adds them to the Spring <code class="literal">Environment</code>:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">A <code class="literal">/config</code> subdirectory of the current directory</li><li class="listitem">The current directory</li><li class="listitem">A classpath <code class="literal">/config</code> package</li><li class="listitem">The classpath root</li></ol></div><p>The list is ordered by precedence (properties defined in locations higher in the list
override those defined in lower locations).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can also <a class="link" href="boot-features-external-config.html#boot-features-external-config-yaml" title="24.7&nbsp;Using YAML Instead of Properties">use YAML ('.yml') files</a> as an
alternative to '.properties'.</p></td></tr></table></div><p>If you do not like <code class="literal">application.properties</code> as the configuration file name, you can
switch to another file name by specifying a <code class="literal">spring.config.name</code> environment property.
You can also refer to an explicit location by using the <code class="literal">spring.config.location</code>
environment property (which is a comma-separated list of directory locations or file
paths). The following example shows how to specify a different file name:</p><pre class="screen">$ java -jar myproject.jar --spring.config.name=myproject</pre><p>The following example shows how to specify two locations:</p><pre class="screen">$ java -jar myproject.jar --spring.config.location=classpath:/default.properties,classpath:/override.properties</pre><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p><code class="literal">spring.config.name</code> and <code class="literal">spring.config.location</code> are used very early to
determine which files have to be loaded, so they must be defined as an environment
property (typically an OS environment variable, a system property, or a command-line
argument).</p></td></tr></table></div><p>If <code class="literal">spring.config.location</code> contains directories (as opposed to files), they should end
in <code class="literal">/</code> (and, at runtime, be appended with the names generated from <code class="literal">spring.config.name</code>
before being loaded, including profile-specific file names). Files specified in
<code class="literal">spring.config.location</code> are used as-is, with no support for profile-specific variants,
and are overridden by any profile-specific properties.</p><p>Config locations are searched in reverse order. By default, the configured locations are
<code class="literal">classpath:/,classpath:/config/,file:./,file:./config/</code>. The resulting search order is
the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">file:./config/</code></li><li class="listitem"><code class="literal">file:./</code></li><li class="listitem"><code class="literal">classpath:/config/</code></li><li class="listitem"><code class="literal">classpath:/</code></li></ol></div><p>When custom config locations are configured by using <code class="literal">spring.config.location</code>, they
replace the default locations. For example, if <code class="literal">spring.config.location</code> is configured with
the value <code class="literal">classpath:/custom-config/,file:./custom-config/</code>, the search order becomes the
following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">file:./custom-config/</code></li><li class="listitem"><code class="literal">classpath:custom-config/</code></li></ol></div><p>Alternatively, when custom config locations are configured by using
<code class="literal">spring.config.additional-location</code>, they are used in addition to the default locations.
Additional locations are searched before the default locations. For example, if
additional locations of <code class="literal">classpath:/custom-config/,file:./custom-config/</code> are configured,
the search order becomes the following:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><code class="literal">file:./custom-config/</code></li><li class="listitem"><code class="literal">classpath:custom-config/</code></li><li class="listitem"><code class="literal">file:./config/</code></li><li class="listitem"><code class="literal">file:./</code></li><li class="listitem"><code class="literal">classpath:/config/</code></li><li class="listitem"><code class="literal">classpath:/</code></li></ol></div><p>This search ordering lets you specify default values in one configuration file and then
selectively override those values in another. You can provide default values for your
application in <code class="literal">application.properties</code> (or whatever other basename you choose with
<code class="literal">spring.config.name</code>) in one of the default locations. These default values can then be
overridden at runtime with a different file located in one of the custom locations.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you use environment variables rather than system properties, most operating
systems disallow period-separated key names, but you can use underscores instead (for
example, <code class="literal">SPRING_CONFIG_NAME</code> instead of <code class="literal">spring.config.name</code>).</p></td></tr></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If your application runs in a container, then JNDI properties (in <code class="literal">java:comp/env</code>)
or servlet context initialization parameters can be used instead of, or as well as,
environment variables or system properties.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-profile-specific-properties" href="#boot-features-external-config-profile-specific-properties"></a>24.4&nbsp;Profile-specific Properties</h2></div></div></div><p>In addition to <code class="literal">application.properties</code> files, profile-specific properties can also be
defined by using the following naming convention: <code class="literal">application-{profile}.properties</code>. The
<code class="literal">Environment</code> has a set of default profiles (by default, <code class="literal">[default]</code>) that are used if no
active profiles are set. In other words, if no profiles are explicitly activated, then
properties from <code class="literal">application-default.properties</code> are loaded.</p><p>Profile-specific properties are loaded from the same locations as standard
<code class="literal">application.properties</code>, with profile-specific files always overriding the non-specific
ones, whether or not the profile-specific files are inside or outside your
packaged jar.</p><p>If several profiles are specified, a last-wins strategy applies. For example, profiles
specified by the <code class="literal">spring.profiles.active</code> property are added after those configured
through the <code class="literal">SpringApplication</code> API and therefore take precedence.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you have specified any files in <code class="literal">spring.config.location</code>, profile-specific
variants of those files are not considered. Use directories in
<code class="literal">spring.config.location</code> if you want to also use profile-specific properties.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-placeholders-in-properties" href="#boot-features-external-config-placeholders-in-properties"></a>24.5&nbsp;Placeholders in Properties</h2></div></div></div><p>The values in <code class="literal">application.properties</code> are filtered through the existing <code class="literal">Environment</code>
when they are used, so you can refer back to previously defined values (for example, from
System properties).</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">app.name</span>=MyApp
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">app.description</span>=${app.name} is a Spring Boot application</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You can also use this technique to create &#8220;short&#8221; variants of existing Spring Boot
properties. See the <span class="emphasis"><em><a class="xref" href="howto-properties-and-configuration.html#howto-use-short-command-line-arguments" title="77.4&nbsp;Use &#8216;Short&#8217; Command Line Arguments">Section&nbsp;77.4, &#8220;Use &#8216;Short&#8217; Command Line Arguments&#8221;</a></em></span> how-to for
details.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-encrypting-properties" href="#boot-features-encrypting-properties"></a>24.6&nbsp;Encrypting Properties</h2></div></div></div><p>Spring Boot does not provide any built in support for encrypting property values, however,
it does provide the hook points necessary to modify values contained in the Spring
<code class="literal">Environment</code>. The <code class="literal">EnvironmentPostProcessor</code> interface allows you to manipulate the
<code class="literal">Environment</code> before the application starts. See <a class="xref" href="howto-spring-boot-application.html#howto-customize-the-environment-or-application-context" title="76.3&nbsp;Customize the Environment or ApplicationContext Before It Starts">Section&nbsp;76.3, &#8220;Customize the Environment or ApplicationContext Before It Starts&#8221;</a>
for details.</p><p>If you&#8217;re looking for a secure way to store credentials and passwords, the
<a class="link" href="https://cloud.spring.io/spring-cloud-vault/" target="_top">Spring Cloud Vault</a> project provides
support for storing externalized configuration in
<a class="link" href="https://www.vaultproject.io/" target="_top">HashiCorp Vault</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-yaml" href="#boot-features-external-config-yaml"></a>24.7&nbsp;Using YAML Instead of Properties</h2></div></div></div><p><a class="link" href="https://yaml.org" target="_top">YAML</a> is a superset of JSON and, as such, is a convenient format for
specifying hierarchical configuration data. The <code class="literal">SpringApplication</code> class automatically
supports YAML as an alternative to properties whenever you have the
<a class="link" href="https://bitbucket.org/asomov/snakeyaml" target="_top">SnakeYAML</a> library on your classpath.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If you use &#8220;Starters&#8221;, SnakeYAML is automatically provided by
<code class="literal">spring-boot-starter</code>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-loading-yaml" href="#boot-features-external-config-loading-yaml"></a>24.7.1&nbsp;Loading YAML</h3></div></div></div><p>Spring Framework provides two convenient classes that can be used to load YAML documents.
The <code class="literal">YamlPropertiesFactoryBean</code> loads YAML as <code class="literal">Properties</code> and the <code class="literal">YamlMapFactoryBean</code>
loads YAML as a <code class="literal">Map</code>.</p><p>For example, consider the following YAML document:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">environments</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	dev</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		url</span>: https://dev.example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		name</span>: Developer Setup
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	prod</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		url</span>: https://another.example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		name</span>: My Cool App</pre><p>The preceding example would be transformed into the following properties:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">environments.dev.url</span>=https://dev.example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">environments.dev.name</span>=Developer Setup
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">environments.prod.url</span>=https://another.example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">environments.prod.name</span>=My Cool App</pre><p>YAML lists are represented as property keys with <code class="literal">[index]</code> dereferencers. For example,
consider the following YAML:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">servers</span>:
	- dev.example.com
	- another.example.com</pre><p>The preceding example would be transformed into these properties:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.servers[0]</span>=dev.example.com
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">my.servers[1]</span>=another.example.com</pre><p>To bind to properties like that by using Spring Boot&#8217;s <code class="literal">Binder</code> utilities (which is what
<code class="literal">@ConfigurationProperties</code> does), you need to have a property in the target bean of type
<code class="literal">java.util.List</code> (or <code class="literal">Set</code>) and you either need to provide a setter or initialize it with
a mutable value. For example, the following example binds to the properties shown
previously:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix="my")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> Config {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> List&lt;String&gt; servers = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> ArrayList&lt;String&gt;();

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> List&lt;String&gt; getServers() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.servers;
	}
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-exposing-yaml-to-spring" href="#boot-features-external-config-exposing-yaml-to-spring"></a>24.7.2&nbsp;Exposing YAML as Properties in the Spring Environment</h3></div></div></div><p>The <code class="literal">YamlPropertySourceLoader</code> class can be used to expose YAML as a <code class="literal">PropertySource</code> in
the Spring <code class="literal">Environment</code>. Doing so lets you use the <code class="literal">@Value</code> annotation with placeholders
syntax to access YAML properties.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-multi-profile-yaml" href="#boot-features-external-config-multi-profile-yaml"></a>24.7.3&nbsp;Multi-profile YAML Documents</h3></div></div></div><p>You can specify multiple profile-specific YAML documents in a single file by using a
<code class="literal">spring.profiles</code> key to indicate when the document applies, as shown in the following
example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	address</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">192.168</xslthl:number>.<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1.100</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	profiles</span>: development
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	address</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">127.0</xslthl:number>.<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">0.1</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	profiles</span>: production &amp; eu-central
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	address</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">192.168</xslthl:number>.<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1.120</xslthl:number></pre><p>In the preceding example, if the <code class="literal">development</code> profile is active, the <code class="literal">server.address</code>
property is <code class="literal">127.0.0.1</code>. Similarly, if the <code class="literal">production</code> <span class="strong"><strong>and</strong></span> <code class="literal">eu-central</code> profiles are
active, the <code class="literal">server.address</code> property is <code class="literal">192.168.1.120</code>. If the <code class="literal">development</code>,
<code class="literal">production</code> and <code class="literal">eu-central</code> profiles are <span class="strong"><strong>not</strong></span> enabled, then the value for the property
is <code class="literal">192.168.1.100</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p><code class="literal">spring.profiles</code> can therefore contain a simple profile name (for example <code class="literal">production</code>)
or a profile expression. A profile expression allows for more complicated profile logic
to be expressed, for example <code class="literal">production &amp; (eu-central | eu-west)</code>. Check the
<a class="link" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/spring-framework-reference/core.html#beans-definition-profiles-java" target="_top">reference guide</a> for more
details.</p></td></tr></table></div><p>If none are explicitly active when the application context starts, the default profiles
are activated. So, in the following YAML, we set a value for <code class="literal">spring.security.user.password</code>
that is available <span class="strong"><strong>only</strong></span> in the "default" profile:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  port</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">8000</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  profiles</span>: default
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  security</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    user</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      password</span>: weak</pre><p>Whereas, in the following example, the password is always set because it is not attached
to any profile, and it would have to be explicitly reset in all other profiles as
necessary:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  port</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">8000</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  security</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    user</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      password</span>: weak</pre><p>Spring profiles designated by using the <code class="literal">spring.profiles</code> element may optionally be
negated by using the <code class="literal">!</code> character. If both negated and non-negated profiles are
specified for a single document, at least one non-negated profile must match, and no
negated profiles may match.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-yaml-shortcomings" href="#boot-features-external-config-yaml-shortcomings"></a>24.7.4&nbsp;YAML Shortcomings</h3></div></div></div><p>YAML files cannot be loaded by using the <code class="literal">@PropertySource</code> annotation. So, in the case
that you need to load values that way, you need to use a properties file.</p><p>Using the multi YAML document syntax in profile-specific YAML files can lead to unexpected
behavior. For example, consider the following config in a file called <code class="literal">application-dev.yml</code>,
with the <code class="literal">dev</code> profile being active:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">server</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  port</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">8000</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  profiles</span>: !test
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  security</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    user</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      password</span>: weak</pre><p>In the example above, profile negation and profile expressions will not behave as expected.
We recommend that you don&#8217;t combine profile-specific YAML files and multiple YAML documents and stick
to using only one of them.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-external-config-typesafe-configuration-properties" href="#boot-features-external-config-typesafe-configuration-properties"></a>24.8&nbsp;Type-safe Configuration Properties</h2></div></div></div><p>Using the <code class="literal">@Value("${property}")</code> annotation to inject configuration properties can
sometimes be cumbersome, especially if you are working with multiple properties or your
data is hierarchical in nature. Spring Boot provides an alternative method of working
with properties that lets strongly typed beans govern and validate the configuration of
your application, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">package</span> com.example;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.net.InetAddress;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.util.ArrayList;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.util.Collections;
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> java.util.List;

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">import</span> org.springframework.boot.context.properties.ConfigurationProperties;

<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties("acme")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">boolean</span> enabled;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> InetAddress remoteAddress;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> Security security = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> Security();

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">boolean</span> isEnabled() { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setEnabled(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">boolean</span> enabled) { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> InetAddress getRemoteAddress() { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setRemoteAddress(InetAddress remoteAddress) { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Security getSecurity() { ... }

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">static</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> Security {

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> String username;

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> String password;

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> List&lt;String&gt; roles = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> ArrayList&lt;&gt;(Collections.singleton(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"USER"</span>));

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> String getUsername() { ... }

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setUsername(String username) { ... }

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> String getPassword() { ... }

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setPassword(String password) { ... }

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> List&lt;String&gt; getRoles() { ... }

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setRoles(List&lt;String&gt; roles) { ... }

	}
}</pre><p>The preceding POJO defines the following properties:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">acme.enabled</code>, with a value of <code class="literal">false</code> by default.</li><li class="listitem"><code class="literal">acme.remote-address</code>, with a type that can be coerced from <code class="literal">String</code>.</li><li class="listitem"><code class="literal">acme.security.username</code>, with a nested "security" object whose name is determined by
the name of the property. In particular, the return type is not used at all there and
could have been <code class="literal">SecurityProperties</code>.</li><li class="listitem"><code class="literal">acme.security.password</code>.</li><li class="listitem"><code class="literal">acme.security.roles</code>, with a collection of <code class="literal">String</code>.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Getters and setters are usually mandatory, since binding is through standard Java Beans
property descriptors, just like in Spring MVC. A setter may be omitted in the following
cases:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Maps, as long as they are initialized, need a getter but not necessarily a setter,
since they can be mutated by the binder.</li><li class="listitem">Collections and arrays can be accessed either through an index (typically with YAML) or
by using a single comma-separated value (properties). In the latter case, a setter is
mandatory. We recommend to always add a setter for such types. If you initialize a
collection, make sure it is not immutable (as in the preceding example).</li><li class="listitem">If nested POJO properties are initialized (like the <code class="literal">Security</code> field in the preceding
example), a setter is not required. If you want the binder to create the instance on the
fly by using its default constructor, you need a setter.</li></ul></div><p>Some people use Project Lombok to add getters and setters automatically. Make sure that
Lombok does not generate any particular constructor for such a type, as it is used
automatically by the container to instantiate the object.</p><p>Finally, only standard Java Bean properties are considered and binding on static
properties is not supported.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>See also the <a class="link" href="boot-features-external-config.html#boot-features-external-config-vs-value" title="24.8.6&nbsp;@ConfigurationProperties vs. @Value">differences between <code class="literal">@Value</code>
and <code class="literal">@ConfigurationProperties</code></a>.</p></td></tr></table></div><p>You also need to list the properties classes to register in the
<code class="literal">@EnableConfigurationProperties</code> annotation, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Configuration</xslthl:annotation>
<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@EnableConfigurationProperties(AcmeProperties.class)</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyConfiguration {
}</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When the <code class="literal">@ConfigurationProperties</code> bean is registered that way, the bean has a
conventional name: <code class="literal">&lt;prefix&gt;-&lt;fqn&gt;</code>, where <code class="literal">&lt;prefix&gt;</code> is the environment key prefix
specified in the <code class="literal">@ConfigurationProperties</code> annotation and <code class="literal">&lt;fqn&gt;</code> is the fully qualified
name of the bean. If the annotation does not provide any prefix, only the fully qualified
name of the bean is used.</p><p>The bean name in the example above is <code class="literal">acme-com.example.AcmeProperties</code>.</p></td></tr></table></div><p>The preceding configuration creates a regular bean for <code class="literal">AcmeProperties</code>. We recommend that
<code class="literal">@ConfigurationProperties</code> only deal with the environment and, in particular, does not
inject other beans from the context. Keep in mind that the
<code class="literal">@EnableConfigurationProperties</code> annotation is <span class="emphasis"><em>also</em></span> automatically applied to your
project so that any <span class="emphasis"><em>existing</em></span> bean annotated with <code class="literal">@ConfigurationProperties</code> is
configured from the <code class="literal">Environment</code>. Instead of annotating <code class="literal">MyConfiguration</code> with
<code class="literal">@EnableConfigurationProperties(AcmeProperties.class)</code>, you could make <code class="literal">AcmeProperties</code>
a bean, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Component</xslthl:annotation>
<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix="acme")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ... see the preceding example</span>

}</pre><p>This style of configuration works particularly well with the <code class="literal">SpringApplication</code> external
YAML configuration, as shown in the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment"># application.yml</span>

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	remote-address</span>: <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">192.168</xslthl:number>.<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1.1</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">	security</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		username</span>: admin
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">		roles</span>:
		  - USER
		  - ADMIN

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment"># additional configuration as required</span></pre><p>To work with <code class="literal">@ConfigurationProperties</code> beans, you can inject them in the same way
as any other bean, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Service</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> MyService {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> AcmeProperties properties;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Autowired</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> MyService(AcmeProperties properties) {
	    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.properties = properties;
	}

 	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">//...</span>

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@PostConstruct</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> openConnection() {
		Server server = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> Server(<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.properties.getRemoteAddress());
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ...</span>
	}

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Using <code class="literal">@ConfigurationProperties</code> also lets you generate metadata files that can be
used by IDEs to offer auto-completion for your own keys. See the
<a class="xref" href="configuration-metadata.html" title="Appendix&nbsp;B.&nbsp;Configuration Metadata">Appendix&nbsp;B, <i>Configuration Metadata</i></a> appendix for details.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-3rd-party-configuration" href="#boot-features-external-config-3rd-party-configuration"></a>24.8.1&nbsp;Third-party Configuration</h3></div></div></div><p>As well as using <code class="literal">@ConfigurationProperties</code> to annotate a class, you can also use it on
public <code class="literal">@Bean</code> methods. Doing so can be particularly useful when you want to bind
properties to third-party components that are outside of your control.</p><p>To configure a bean from the <code class="literal">Environment</code> properties, add <code class="literal">@ConfigurationProperties</code> to
its bean registration, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix = "another")</xslthl:annotation>
<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Bean</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> AnotherComponent anotherComponent() {
	...
}</pre><p>Any property defined with the <code class="literal">another</code> prefix is mapped onto that <code class="literal">AnotherComponent</code> bean
in manner similar to the preceding <code class="literal">AcmeProperties</code> example.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-relaxed-binding" href="#boot-features-external-config-relaxed-binding"></a>24.8.2&nbsp;Relaxed Binding</h3></div></div></div><p>Spring Boot uses some relaxed rules for binding <code class="literal">Environment</code> properties to
<code class="literal">@ConfigurationProperties</code> beans, so there does not need to be an exact match between the
<code class="literal">Environment</code> property name and the bean property name.  Common examples where this is
useful include dash-separated environment properties (for example, <code class="literal">context-path</code> binds
to <code class="literal">contextPath</code>), and capitalized environment properties (for example, <code class="literal">PORT</code> binds to
<code class="literal">port</code>).</p><p>For example, consider the following <code class="literal">@ConfigurationProperties</code> class:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix="acme.my-project.person")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> OwnerProperties {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> String firstName;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> String getFirstName() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.firstName;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setFirstName(String firstName) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.firstName = firstName;
	}

}</pre><p>In the preceding example, the following properties names can all be used:</p><div class="table"><a name="d0e4996" href="#d0e4996"></a><p class="title"><b>Table&nbsp;24.1.&nbsp;relaxed binding</b></p><div class="table-contents"><table class="table" summary="relaxed binding" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Property</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Note</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">acme.my-project.person.first-name</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Kebab case, which is recommended for use in <code class="literal">.properties</code> and <code class="literal">.yml</code> files.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">acme.myProject.person.firstName</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Standard camel case syntax.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">acme.my_project.person.first_name</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Underscore notation, which is an alternative format for use in <code class="literal">.properties</code> and <code class="literal">.yml</code>
files.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">ACME_MYPROJECT_PERSON_FIRSTNAME</code></p></td><td style="" align="left" valign="top"><p>Upper case format, which is recommended when using system environment variables.</p></td></tr></tbody></table></div></div><br class="table-break"><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">prefix</code> value for the annotation <span class="emphasis"><em>must</em></span> be in kebab case (lowercase and
separated by <code class="literal">-</code>, such as <code class="literal">acme.my-project.person</code>).</p></td></tr></table></div><div class="table"><a name="d0e5068" href="#d0e5068"></a><p class="title"><b>Table&nbsp;24.2.&nbsp;relaxed binding rules per property source</b></p><div class="table-contents"><table class="table" summary="relaxed binding rules per property source" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Property Source</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Simple</th><th style="border-bottom: 1px solid ; " align="left" valign="top">List</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Properties Files</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Camel case, kebab case, or underscore notation</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Standard list syntax using <code class="literal">[ ]</code> or comma-separated values</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>YAML Files</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Camel case, kebab case, or underscore notation</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Standard YAML list syntax or comma-separated values</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Environment Variables</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Upper case format with underscore as the delimiter. <code class="literal">_</code> should not be used within a
property name</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Numeric values surrounded by underscores, such as <code class="literal">MY_ACME_1_OTHER = my.acme[1].other</code></p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p>System properties</p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p>Camel case, kebab case, or underscore notation</p></td><td style="" align="left" valign="top"><p>Standard list syntax using <code class="literal">[ ]</code> or comma-separated values</p></td></tr></tbody></table></div></div><br class="table-break"><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>We recommend that, when possible, properties are stored in lower-case kebab format,
such as <code class="literal">my.property-name=acme</code>.</p></td></tr></table></div><p>When binding to <code class="literal">Map</code> properties, if the <code class="literal">key</code> contains anything other than lowercase
alpha-numeric characters or <code class="literal">-</code>, you need to use the bracket notation so that the original
value is preserved. If the key is not surrounded by <code class="literal">[]</code>, any characters that are not alpha-numeric
or <code class="literal">-</code> are removed. For example, consider binding the following properties to a <code class="literal">Map</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  map</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    "[/key1]"</span>: value1
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    "[/key2]"</span>: value2
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    /key3</span>: value3</pre><p>The properties above will bind to a <code class="literal">Map</code> with <code class="literal">/key1</code>, <code class="literal">/key2</code> and <code class="literal">key3</code> as the keys in the map.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-complex-type-merge" href="#boot-features-external-config-complex-type-merge"></a>24.8.3&nbsp;Merging Complex Types</h3></div></div></div><p>When lists are configured in more than one place, overriding works by replacing the entire
list.</p><p>For example, assume a <code class="literal">MyPojo</code> object with <code class="literal">name</code> and <code class="literal">description</code> attributes that are
<code class="literal">null</code> by default. The following example exposes a list of <code class="literal">MyPojo</code> objects from
<code class="literal">AcmeProperties</code>:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties("acme")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> List&lt;MyPojo&gt; list = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> ArrayList&lt;&gt;();

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> List&lt;MyPojo&gt; getList() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.list;
	}

}</pre><p>Consider the following configuration:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  list</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    - name</span>: my name
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      description</span>: my description
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  profiles</span>: dev
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  list</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    - name</span>: my another name</pre><p>If the <code class="literal">dev</code> profile is not active, <code class="literal">AcmeProperties.list</code> contains one <code class="literal">MyPojo</code> entry,
as previously defined. If the <code class="literal">dev</code> profile is enabled, however, the <code class="literal">list</code> <span class="emphasis"><em>still</em></span>
contains only one entry (with a name of <code class="literal">my another name</code> and a description of <code class="literal">null</code>).
This configuration <span class="emphasis"><em>does not</em></span> add a second <code class="literal">MyPojo</code> instance to the list, and it does not
merge the items.</p><p>When a <code class="literal">List</code> is specified in multiple profiles, the one with the highest priority
(and only that one) is used. Consider the following example:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  list</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    - name</span>: my name
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      description</span>: my description
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    - name</span>: another name
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      description</span>: another description
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  profiles</span>: dev
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  list</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    - name</span>: my another name</pre><p>In the preceding example, if the <code class="literal">dev</code> profile is active, <code class="literal">AcmeProperties.list</code> contains
<span class="emphasis"><em>one</em></span> <code class="literal">MyPojo</code> entry (with a name of <code class="literal">my another name</code> and a description of <code class="literal">null</code>).
For YAML, both comma-separated lists and YAML lists can be used for
completely overriding the contents of the list.</p><p>For <code class="literal">Map</code> properties, you can bind with property values drawn from multiple sources. However,
for the same property in multiple sources, the one with the highest priority is used.
The following example exposes a <code class="literal">Map&lt;String, MyPojo&gt;</code> from <code class="literal">AcmeProperties</code>:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties("acme")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> Map&lt;String, MyPojo&gt; map = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> HashMap&lt;&gt;();

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Map&lt;String, MyPojo&gt; getMap() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.map;
	}

}</pre><p>Consider the following configuration:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  map</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    key1</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      name</span>: my name <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      description</span>: my description <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">---</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">spring</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  profiles</span>: dev
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">acme</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">  map</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    key1</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      name</span>: dev name <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">    key2</span>:
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      name</span>: dev name <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">2</xslthl:number>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">      description</span>: dev description <xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">2</xslthl:number></pre><p>If the <code class="literal">dev</code> profile is not active, <code class="literal">AcmeProperties.map</code> contains one entry with key <code class="literal">key1</code>
(with a name of <code class="literal">my name 1</code> and a description of <code class="literal">my description 1</code>).
If the <code class="literal">dev</code> profile is enabled, however, <code class="literal">map</code> contains two entries with keys <code class="literal">key1</code>
(with a name of <code class="literal">dev name 1</code> and a description of <code class="literal">my description 1</code>) and
<code class="literal">key2</code> (with a name of <code class="literal">dev name 2</code> and a description of <code class="literal">dev description 2</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The preceding merging rules apply to properties from all property sources and not just
YAML files.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-conversion" href="#boot-features-external-config-conversion"></a>24.8.4&nbsp;Properties Conversion</h3></div></div></div><p>Spring Boot attempts to coerce the external application properties to the right type when
it binds to the <code class="literal">@ConfigurationProperties</code> beans. If you need custom type conversion, you
can provide a <code class="literal">ConversionService</code> bean (with a bean named <code class="literal">conversionService</code>) or custom
property editors (through a <code class="literal">CustomEditorConfigurer</code> bean) or custom <code class="literal">Converters</code> (with
bean definitions annotated as <code class="literal">@ConfigurationPropertiesBinding</code>).</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>As this bean is requested very early during the application lifecycle, make sure to
limit the dependencies that your <code class="literal">ConversionService</code> is using. Typically, any dependency
that you require may not be fully initialized at creation time. You may want to rename
your custom <code class="literal">ConversionService</code> if it is not required for configuration keys coercion and
only rely on custom converters qualified with <code class="literal">@ConfigurationPropertiesBinding</code>.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="boot-features-external-config-conversion-duration" href="#boot-features-external-config-conversion-duration"></a>Converting durations</h4></div></div></div><p>Spring Boot has dedicated support for expressing durations. If you expose a
<code class="literal">java.time.Duration</code> property, the following formats in application properties are
available:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A regular <code class="literal">long</code> representation (using milliseconds as the default unit unless a
<code class="literal">@DurationUnit</code> has been specified)</li><li class="listitem">The standard ISO-8601 format
<a class="link" href="https://docs.oracle.com/javase/8/docs/api//java/time/Duration.html#parse-java.lang.CharSequence-" target="_top">used by
<code class="literal">java.util.Duration</code></a></li><li class="listitem">A more readable format where the value and the unit are coupled (e.g. <code class="literal">10s</code> means 10
seconds)</li></ul></div><p>Consider the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties("app.system")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AppSystemProperties {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@DurationUnit(ChronoUnit.SECONDS)</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> Duration sessionTimeout = Duration.ofSeconds(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">30</xslthl:number>);

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> Duration readTimeout = Duration.ofMillis(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">1000</xslthl:number>);

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Duration getSessionTimeout() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.sessionTimeout;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setSessionTimeout(Duration sessionTimeout) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.sessionTimeout = sessionTimeout;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> Duration getReadTimeout() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.readTimeout;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setReadTimeout(Duration readTimeout) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.readTimeout = readTimeout;
	}

}</pre><p>To specify a session timeout of 30 seconds, <code class="literal">30</code>, <code class="literal">PT30S</code> and <code class="literal">30s</code> are all equivalent. A
read timeout of 500ms can be specified in any of the following form: <code class="literal">500</code>, <code class="literal">PT0.5S</code> and
<code class="literal">500ms</code>.</p><p>You can also use any of the supported units. These are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">ns</code> for nanoseconds</li><li class="listitem"><code class="literal">us</code> for microseconds</li><li class="listitem"><code class="literal">ms</code> for milliseconds</li><li class="listitem"><code class="literal">s</code> for seconds</li><li class="listitem"><code class="literal">m</code> for minutes</li><li class="listitem"><code class="literal">h</code> for hours</li><li class="listitem"><code class="literal">d</code> for days</li></ul></div><p>The default unit is milliseconds and can be overridden using <code class="literal">@DurationUnit</code> as illustrated
in the sample above.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you are upgrading from a previous version that is simply using <code class="literal">Long</code> to express
the duration, make sure to define the unit (using <code class="literal">@DurationUnit</code>) if it isn&#8217;t
milliseconds alongside the switch to <code class="literal">Duration</code>. Doing so gives a transparent upgrade path
while supporting a much richer format.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="boot-features-external-config-conversion-datasize" href="#boot-features-external-config-conversion-datasize"></a>Converting Data Sizes</h4></div></div></div><p>Spring Framework has a <code class="literal">DataSize</code> value type that allows to express size in bytes. If you
expose a <code class="literal">DataSize</code> property, the following formats in application properties are
available:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">A regular <code class="literal">long</code> representation (using bytes as the default unit unless a
<code class="literal">@DataSizeUnit</code> has been specified)</li><li class="listitem">A more readable format where the value and the unit are coupled (e.g. <code class="literal">10MB</code> means 10
megabytes)</li></ul></div><p>Consider the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties("app.io")</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AppIoProperties {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@DataSizeUnit(DataUnit.MEGABYTES)</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> DataSize bufferSize = DataSize.ofMegabytes(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">2</xslthl:number>);

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> DataSize sizeThreshold = DataSize.ofBytes(<xslthl:number xmlns:xslthl="http://xslthl.sourceforge.net/">512</xslthl:number>);

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> DataSize getBufferSize() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.bufferSize;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setBufferSize(DataSize bufferSize) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.bufferSize = bufferSize;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> DataSize getSizeThreshold() {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">return</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.sizeThreshold;
	}

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">void</span> setSizeThreshold(DataSize sizeThreshold) {
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">this</span>.sizeThreshold = sizeThreshold;
	}

}</pre><p>To specify a buffer size of 10 megabytes, <code class="literal">10</code> and <code class="literal">10MB</code> are equivalent. A size threshold
of 256 bytes can be specified as <code class="literal">256</code> or <code class="literal">256B</code>.</p><p>You can also use any of the supported units. These are:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">B</code> for bytes</li><li class="listitem"><code class="literal">KB</code> for kilobytes</li><li class="listitem"><code class="literal">MB</code> for megabytes</li><li class="listitem"><code class="literal">GB</code> for gigabytes</li><li class="listitem"><code class="literal">TB</code> for terabytes</li></ul></div><p>The default unit is bytes and can be overridden using <code class="literal">@DataSizeUnit</code> as illustrated
in the sample above.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you are upgrading from a previous version that is simply using <code class="literal">Long</code> to express
the size, make sure to define the unit (using <code class="literal">@DataSizeUnit</code>) if it isn&#8217;t bytes alongside
the switch to <code class="literal">DataSize</code>. Doing so gives a transparent upgrade path while supporting a
much richer format.</p></td></tr></table></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-validation" href="#boot-features-external-config-validation"></a>24.8.5&nbsp;@ConfigurationProperties Validation</h3></div></div></div><p>Spring Boot attempts to validate <code class="literal">@ConfigurationProperties</code> classes whenever they are
annotated with Spring&#8217;s <code class="literal">@Validated</code> annotation. You can use JSR-303 <code class="literal">javax.validation</code>
constraint annotations directly on your configuration class. To do so, ensure that a
compliant JSR-303 implementation is on your classpath and then add constraint annotations
to your fields, as shown in the following example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix="acme")</xslthl:annotation>
<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Validated</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@NotNull</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> InetAddress remoteAddress;

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ... getters and setters</span>

}</pre><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You can also trigger validation by annotating the <code class="literal">@Bean</code> method that creates the
configuration properties with <code class="literal">@Validated</code>.</p></td></tr></table></div><p>Although nested properties will also be validated when bound, it&#8217;s good practice to
also annotate the associated field as <code class="literal">@Valid</code>. This ensure that validation is triggered
even if no nested properties are found. The following example builds on the preceding
<code class="literal">AcmeProperties</code> example:</p><pre class="programlisting"><xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@ConfigurationProperties(prefix="acme")</xslthl:annotation>
<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Validated</xslthl:annotation>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> AcmeProperties {

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@NotNull</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> InetAddress remoteAddress;

	<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@Valid</xslthl:annotation>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">private</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">final</span> Security security = <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">new</span> Security();

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ... getters and setters</span>

	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">static</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">class</span> Security {

		<xslthl:annotation xmlns:xslthl="http://xslthl.sourceforge.net/">@NotEmpty</xslthl:annotation>
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">public</span> String username;

		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">// ... getters and setters</span>

	}

}</pre><p>You can also add a custom Spring <code class="literal">Validator</code> by creating a bean definition called
<code class="literal">configurationPropertiesValidator</code>. The <code class="literal">@Bean</code> method should be declared <code class="literal">static</code>. The
configuration properties validator is created very early in the application&#8217;s lifecycle,
and declaring the <code class="literal">@Bean</code> method as static lets the bean be created without having to
instantiate the <code class="literal">@Configuration</code> class. Doing so avoids any problems that may be caused
by early instantiation. There is a
<a class="link" href="https://github.com/spring-projects/spring-boot/tree/v2.1.4.RELEASE/spring-boot-samples/spring-boot-sample-property-validation" target="_top">property
validation sample</a> that shows how to set things up.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">spring-boot-actuator</code> module includes an endpoint that exposes all
<code class="literal">@ConfigurationProperties</code> beans. Point your web browser to
<code class="literal">/actuator/configprops</code> or use the equivalent JMX endpoint. See the
"<a class="link" href="production-ready-endpoints.html" title="53.&nbsp;Endpoints">Production ready features</a>"
section for details.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-external-config-vs-value" href="#boot-features-external-config-vs-value"></a>24.8.6&nbsp;@ConfigurationProperties vs. @Value</h3></div></div></div><p>The <code class="literal">@Value</code> annotation is a core container feature, and it does not provide the same
features as type-safe configuration properties. The following table summarizes the
features that are supported by <code class="literal">@ConfigurationProperties</code> and <code class="literal">@Value</code>:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Feature</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><code class="literal">@ConfigurationProperties</code></th><th style="border-bottom: 1px solid ; " align="left" valign="top"><code class="literal">@Value</code></th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="boot-features-external-config.html#boot-features-external-config-relaxed-binding" title="24.8.2&nbsp;Relaxed Binding">Relaxed binding</a></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Yes</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>No</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><a class="link" href="configuration-metadata.html" title="Appendix&nbsp;B.&nbsp;Configuration Metadata">Meta-data support</a></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Yes</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>No</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">SpEL</code> evaluation</p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p>No</p></td><td style="" align="left" valign="top"><p>Yes</p></td></tr></tbody></table></div><p>If you define a set of configuration keys for your own components, we recommend you
group them in a POJO annotated with <code class="literal">@ConfigurationProperties</code>. You should also be aware
that, since <code class="literal">@Value</code> does not support relaxed binding, it is not a good candidate if you
need to provide the value by using environment variables.</p><p>Finally, while you can write a <code class="literal">SpEL</code> expression in <code class="literal">@Value</code>, such expressions are not
processed from <a class="link" href="boot-features-external-config.html#boot-features-external-config-application-property-files" title="24.3&nbsp;Application Property Files">application
property files</a>.</p></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-spring-application.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-profiles.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">23.&nbsp;SpringApplication&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;25.&nbsp;Profiles</td></tr></table></div></body></html>