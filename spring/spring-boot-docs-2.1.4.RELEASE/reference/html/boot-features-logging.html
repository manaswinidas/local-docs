<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>26.&nbsp;Logging</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.79.1"><link rel="home" href="index.html" title="Spring Boot Reference Guide"><link rel="up" href="boot-features.html" title="Part&nbsp;IV.&nbsp;Spring Boot features"><link rel="prev" href="boot-features-profiles.html" title="25.&nbsp;Profiles"><link rel="next" href="boot-features-internationalization.html" title="27.&nbsp;Internationalization"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">26.&nbsp;Logging</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="boot-features-profiles.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Boot features</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="boot-features-internationalization.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="boot-features-logging" href="#boot-features-logging"></a>26.&nbsp;Logging</h2></div></div></div><p>Spring Boot uses <a class="link" href="https://commons.apache.org/logging" target="_top">Commons Logging</a> for all internal
logging but leaves the underlying log implementation open. Default configurations are
provided for
<a class="link" href="https://docs.oracle.com/javase/8/docs/api//java/util/logging/package-summary.html" target="_top">Java Util
Logging</a>, <a class="link" href="https://logging.apache.org/log4j/2.x/" target="_top">Log4J2</a>, and
<a class="link" href="https://logback.qos.ch/" target="_top">Logback</a>. In each case, loggers are pre-configured to use console
output with optional file output also available.</p><p>By default, if you use the &#8220;Starters&#8221;, Logback is used for logging. Appropriate Logback
routing is also included to ensure that dependent libraries that use Java Util Logging,
Commons Logging, Log4J, or SLF4J all work correctly.</p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>There are a lot of logging frameworks available for Java. Do not worry if the above
list seems confusing. Generally, you do not need to change your logging dependencies and
the Spring Boot defaults work just fine.</p></td></tr></table></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-logging-format" href="#boot-features-logging-format"></a>26.1&nbsp;Log Format</h2></div></div></div><p>The default log output from Spring Boot resembles the following example:</p><pre class="screen">2014-03-05 10:57:51.112  INFO 45469 --- [           main] org.apache.catalina.core.StandardEngine  : Starting Servlet Engine: Apache Tomcat/7.0.52
2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2014-03-05 10:57:51.253  INFO 45469 --- [ost-startStop-1] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1358 ms
2014-03-05 10:57:51.698  INFO 45469 --- [ost-startStop-1] o.s.b.c.e.ServletRegistrationBean        : Mapping servlet: 'dispatcherServlet' to [/]
2014-03-05 10:57:51.702  INFO 45469 --- [ost-startStop-1] o.s.b.c.embedded.FilterRegistrationBean  : Mapping filter: 'hiddenHttpMethodFilter' to: [/*]</pre><p>The following items are output:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Date and Time: Millisecond precision and easily sortable.</li><li class="listitem">Log Level: <code class="literal">ERROR</code>, <code class="literal">WARN</code>, <code class="literal">INFO</code>, <code class="literal">DEBUG</code>, or <code class="literal">TRACE</code>.</li><li class="listitem">Process ID.</li><li class="listitem">A <code class="literal">---</code> separator to distinguish the start of actual log messages.</li><li class="listitem">Thread name: Enclosed in square brackets (may be truncated for console output).</li><li class="listitem">Logger name: This is usually the source class name (often abbreviated).</li><li class="listitem">The log message.</li></ul></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Logback does not have a <code class="literal">FATAL</code> level. It is mapped to <code class="literal">ERROR</code>.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-logging-console-output" href="#boot-features-logging-console-output"></a>26.2&nbsp;Console Output</h2></div></div></div><p>The default log configuration echoes messages to the console as they are written. By
default, <code class="literal">ERROR</code>-level, <code class="literal">WARN</code>-level, and <code class="literal">INFO</code>-level messages are logged. You can also
enable a &#8220;debug&#8221; mode by starting your application with a <code class="literal">--debug</code> flag.</p><pre class="screen">$ java -jar myapp.jar --debug</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>You can also specify <code class="literal">debug=true</code> in your <code class="literal">application.properties</code>.</p></td></tr></table></div><p>When the debug mode is enabled, a selection of core loggers (embedded container,
Hibernate, and Spring Boot) are configured to output more information. Enabling the debug
mode does <span class="emphasis"><em>not</em></span> configure your application to log all messages with <code class="literal">DEBUG</code> level.</p><p>Alternatively, you can enable a &#8220;trace&#8221; mode by starting your application with a
<code class="literal">--trace</code> flag (or <code class="literal">trace=true</code> in your <code class="literal">application.properties</code>). Doing so enables trace
logging for a selection of core loggers (embedded container, Hibernate schema generation,
and the whole Spring portfolio).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="boot-features-logging-color-coded-output" href="#boot-features-logging-color-coded-output"></a>26.2.1&nbsp;Color-coded Output</h3></div></div></div><p>If your terminal supports ANSI, color output is used to aid readability. You can set
<code class="literal">spring.output.ansi.enabled</code> to a
<a class="link" href="https://docs.spring.io/spring-boot/docs/2.1.4.RELEASE/api/org/springframework/boot/ansi/AnsiOutput.Enabled.html" target="_top">supported value</a> to override the auto
detection.</p><p>Color coding is configured by using the <code class="literal">%clr</code> conversion word. In its simplest form, the
converter colors the output according to the log level, as shown in the following
example:</p><pre class="screen">%clr(%5p)</pre><p>The following table describes the mapping of log levels to colors:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Level</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Color</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">FATAL</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Red</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">ERROR</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Red</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">WARN</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Yellow</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">INFO</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Green</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">DEBUG</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Green</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">TRACE</code></p></td><td style="" align="left" valign="top"><p>Green</p></td></tr></tbody></table></div><p>Alternatively, you can specify the color or style that should be used by providing it as
an option to the conversion. For example, to make the text yellow, use the following
setting:</p><pre class="screen">%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){yellow}</pre><p>The following colors and styles are supported:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">blue</code></li><li class="listitem"><code class="literal">cyan</code></li><li class="listitem"><code class="literal">faint</code></li><li class="listitem"><code class="literal">green</code></li><li class="listitem"><code class="literal">magenta</code></li><li class="listitem"><code class="literal">red</code></li><li class="listitem"><code class="literal">yellow</code></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-logging-file-output" href="#boot-features-logging-file-output"></a>26.3&nbsp;File Output</h2></div></div></div><p>By default, Spring Boot logs only to the console and does not write log files. If you
want to write log files in addition to the console output, you need to set a
<code class="literal">logging.file</code> or <code class="literal">logging.path</code> property (for example, in your
<code class="literal">application.properties</code>).</p><p>The following table shows how the <code class="literal">logging.*</code> properties can be used together:</p><div class="table"><a name="d0e6098" href="#d0e6098"></a><p class="title"><b>Table&nbsp;26.1.&nbsp;Logging properties</b></p><div class="table-contents"><table class="table" summary="Logging properties" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><code class="literal">logging.file</code></th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><code class="literal">logging.path</code></th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Example</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Description</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><span class="emphasis"><em>(none)</em></span></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><span class="emphasis"><em>(none)</em></span></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">&nbsp;</td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Console only logging.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Specific file</p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><span class="emphasis"><em>(none)</em></span></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">my.log</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Writes to the specified log file. Names can be an exact location or relative to the
current directory.</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><span class="emphasis"><em>(none)</em></span></p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p>Specific directory</p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">/var/log</code></p></td><td style="" align="left" valign="top"><p>Writes <code class="literal">spring.log</code> to the specified directory. Names can be an exact location or
relative to the current directory.</p></td></tr></tbody></table></div></div><br class="table-break"><p>Log files rotate when they reach 10 MB and, as with console output, <code class="literal">ERROR</code>-level,
<code class="literal">WARN</code>-level, and <code class="literal">INFO</code>-level messages are logged by default. Size limits can be changed
using the <code class="literal">logging.file.max-size</code> property. Previously rotated files are archived
indefinitely unless the <code class="literal">logging.file.max-history</code> property has been set.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The logging system is initialized early in the application lifecycle. Consequently,
logging properties are not found in property files loaded through <code class="literal">@PropertySource</code>
annotations.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Logging properties are independent of the actual logging infrastructure. As a
result, specific configuration keys (such as <code class="literal">logback.configurationFile</code> for Logback) are
not managed by spring Boot.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-custom-log-levels" href="#boot-features-custom-log-levels"></a>26.4&nbsp;Log Levels</h2></div></div></div><p>All the supported logging systems can have the logger levels set in the Spring
<code class="literal">Environment</code> (for example, in <code class="literal">application.properties</code>) by using
<code class="literal">logging.level.&lt;logger-name&gt;=&lt;level&gt;</code> where <code class="literal">level</code> is one of TRACE, DEBUG, INFO, WARN,
ERROR, FATAL, or OFF. The <code class="literal">root</code> logger can be configured by using <code class="literal">logging.level.root</code>.</p><p>The following example shows potential logging settings in <code class="literal">application.properties</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">logging.level.root</span>=WARN
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">logging.level.org.springframework.web</span>=DEBUG
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">logging.level.org.hibernate</span>=ERROR</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-custom-log-groups" href="#boot-features-custom-log-groups"></a>26.5&nbsp;Log Groups</h2></div></div></div><p>It&#8217;s often useful to be able to group related loggers together so that they can all be
configured at the same time. For example, you might commonly change the logging levels for
<span class="emphasis"><em>all</em></span> Tomcat related loggers, but you can&#8217;t easily remember top level packages.</p><p>To help with this, Spring Boot allows you to define logging groups in your Spring
<code class="literal">Environment</code>. For example, here&#8217;s how you could define a &#8220;tomcat&#8221; group by adding
it to your <code class="literal">application.properties</code>:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">logging.group.tomcat</span>=org.apache.catalina, org.apache.coyote, org.apache.tomcat</pre><p>Once defined, you can change the level for all the loggers in the group with a single
line:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">logging.level.tomcat</span>=TRACE</pre><p>Spring Boot includes the following pre-defined logging groups that can be used
out-of-the-box:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Name</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Loggers</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>web</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">org.springframework.core.codec</code>, <code class="literal">org.springframework.http</code>, <code class="literal">org.springframework.web</code></p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p>sql</p></td><td style="" align="left" valign="top"><p><code class="literal">org.springframework.jdbc.core</code>, <code class="literal">org.hibernate.SQL</code></p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-custom-log-configuration" href="#boot-features-custom-log-configuration"></a>26.6&nbsp;Custom Log Configuration</h2></div></div></div><p>The various logging systems can be activated by including the appropriate libraries on
the classpath and can be further customized by providing a suitable configuration file in
the root of the classpath or in a location specified by the following Spring <code class="literal">Environment</code>
property: <code class="literal">logging.config</code>.</p><p>You can force Spring Boot to use a particular logging system by using the
<code class="literal">org.springframework.boot.logging.LoggingSystem</code> system property. The value should be the
fully qualified class name of a <code class="literal">LoggingSystem</code> implementation. You can also disable
Spring Boot&#8217;s logging configuration entirely by using a value of <code class="literal">none</code>.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Since logging is initialized <span class="strong"><strong>before</strong></span> the <code class="literal">ApplicationContext</code> is created, it is
not possible to control logging from <code class="literal">@PropertySources</code> in Spring <code class="literal">@Configuration</code> files.
The only way to change the logging system or disable it entirely is via System properties.</p></td></tr></table></div><p>Depending on your logging system, the following files are loaded:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Logging System</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Customization</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Logback</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logback-spring.xml</code>, <code class="literal">logback-spring.groovy</code>, <code class="literal">logback.xml</code>, or <code class="literal">logback.groovy</code></p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p>Log4j2</p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">log4j2-spring.xml</code> or <code class="literal">log4j2.xml</code></p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p>JDK (Java Util Logging)</p></td><td style="" align="left" valign="top"><p><code class="literal">logging.properties</code></p></td></tr></tbody></table></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>When possible, we recommend that you use the <code class="literal">-spring</code> variants for your logging
configuration (for example, <code class="literal">logback-spring.xml</code> rather than <code class="literal">logback.xml</code>). If you use
standard configuration locations, Spring cannot completely control log initialization.</p></td></tr></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>There are known classloading issues with Java Util Logging that cause problems
when running from an 'executable jar'. We recommend that you avoid it when running from
an 'executable jar' if at all possible.</p></td></tr></table></div><p>To help with the customization, some other properties are transferred from the Spring
<code class="literal">Environment</code> to System properties, as described in the following table:</p><div class="informaltable"><table class="informaltable" style="border-collapse: collapse;border-top: 1px solid ; border-bottom: 1px solid ; border-left: 1px solid ; border-right: 1px solid ; "><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">Spring Environment</th><th style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top">System Property</th><th style="border-bottom: 1px solid ; " align="left" valign="top">Comments</th></tr></thead><tbody><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.exception-conversion-word</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_EXCEPTION_CONVERSION_WORD</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The conversion word used when logging exceptions.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.file</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_FILE</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>If defined, it is used in the default log configuration.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.file.max-size</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_FILE_MAX_SIZE</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Maximum log file size (if LOG_FILE enabled). (Only supported with the default Logback
setup.)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.file.max-history</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_FILE_MAX_HISTORY</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Maximum number of archive log files to keep (if LOG_FILE enabled). (Only supported with
the default Logback setup.)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.path</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_PATH</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>If defined, it is used in the default log configuration.</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.pattern.console</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">CONSOLE_LOG_PATTERN</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The log pattern to use on the console (stdout). (Only supported with the default Logback
setup.)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.pattern.dateformat</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_DATEFORMAT_PATTERN</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>Appender pattern for log date format. (Only supported with the default Logback setup.)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.pattern.file</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">FILE_LOG_PATTERN</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The log pattern to use in a file (if <code class="literal">LOG_FILE</code> is enabled). (Only supported with the
default Logback setup.)</p></td></tr><tr><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">logging.pattern.level</code></p></td><td style="border-right: 1px solid ; border-bottom: 1px solid ; " align="left" valign="top"><p><code class="literal">LOG_LEVEL_PATTERN</code></p></td><td style="border-bottom: 1px solid ; " align="left" valign="top"><p>The format to use when rendering the log level (default <code class="literal">%5p</code>). (Only supported with the
default Logback setup.)</p></td></tr><tr><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">PID</code></p></td><td style="border-right: 1px solid ; " align="left" valign="top"><p><code class="literal">PID</code></p></td><td style="" align="left" valign="top"><p>The current process ID (discovered if possible and when not already defined as an OS
environment variable).</p></td></tr></tbody></table></div><p>All the supported logging systems can consult System properties when parsing their
configuration files.  See the default configurations in <code class="literal">spring-boot.jar</code> for examples:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><a class="link" href="https://github.com/spring-projects/spring-boot/tree/v2.1.4.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/logback/defaults.xml" target="_top">Logback</a></li><li class="listitem"><a class="link" href="https://github.com/spring-projects/spring-boot/tree/v2.1.4.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/log4j2/log4j2.xml" target="_top">Log4j 2</a></li><li class="listitem"><a class="link" href="https://github.com/spring-projects/spring-boot/tree/v2.1.4.RELEASE/spring-boot-project/spring-boot/src/main/resources/org/springframework/boot/logging/java/logging-file.properties" target="_top">Java Util logging</a></li></ul></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>If you want to use a placeholder in a logging property, you should use
<a class="link" href="boot-features-external-config.html#boot-features-external-config-placeholders-in-properties" title="24.5&nbsp;Placeholders in Properties">Spring Boot&#8217;s syntax</a> and not
the syntax of the underlying framework. Notably, if you use Logback, you should use <code class="literal">:</code>
as the delimiter between a property name and its default value and not use <code class="literal">:-</code>.</p></td></tr></table></div><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="images/tip.png"></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>You can add MDC and other ad-hoc content to log lines by overriding only the
<code class="literal">LOG_LEVEL_PATTERN</code> (or <code class="literal">logging.pattern.level</code> with Logback). For example, if you use
<code class="literal">logging.pattern.level=user:%X{user} %5p</code>, then the default log format contains an MDC
entry for "user", if it exists, as shown in the following example.</p><pre class="screen">2015-09-30 12:30:04.031 user:someone INFO 22174 --- [  nio-8080-exec-0] demo.Controller
Handling authenticated request</pre></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="boot-features-logback-extensions" href="#boot-features-logback-extensions"></a>26.7&nbsp;Logback Extensions</h2></div></div></div><p>Spring Boot includes a number of extensions to Logback that can help with advanced
configuration. You can use these extensions in your <code class="literal">logback-spring.xml</code> configuration
file.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Because the standard <code class="literal">logback.xml</code> configuration file is loaded too early, you
cannot use extensions in it. You need to either use <code class="literal">logback-spring.xml</code> or define a
<code class="literal">logging.config</code> property.</p></td></tr></table></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="images/warning.png"></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>The extensions cannot be used with Logback&#8217;s
<a class="link" href="https://logback.qos.ch/manual/configuration.html#autoScan" target="_top">configuration scanning</a>. If you
attempt to do so, making changes to the configuration file results in an error similar to
one of the following being logged:</p></td></tr></table></div><pre class="screen">ERROR in ch.qos.logback.core.joran.spi.Interpreter@4:71 - no applicable action for [springProperty], current ElementPath is [[configuration][springProperty]]
ERROR in ch.qos.logback.core.joran.spi.Interpreter@4:71 - no applicable action for [springProfile], current ElementPath is [[configuration][springProfile]]</pre><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_profile_specific_configuration" href="#_profile_specific_configuration"></a>26.7.1&nbsp;Profile-specific Configuration</h3></div></div></div><p>The <code class="literal">&lt;springProfile&gt;</code> tag lets you optionally include or exclude sections of
configuration based on the active Spring profiles. Profile sections are supported
anywhere within the <code class="literal">&lt;configuration&gt;</code> element. Use the <code class="literal">name</code> attribute to specify which
profile accepts the configuration. The <code class="literal">&lt;springProfile&gt;</code> tag can contain a simple profile
name (for example <code class="literal">staging</code>) or a profile expression. A profile expression allows for more
complicated profile logic to be expressed, for example
<code class="literal">production &amp; (eu-central | eu-west)</code>. Check the
<a class="link" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/spring-framework-reference/core.html#beans-definition-profiles-java" target="_top">reference guide</a> for more
details. The following listing shows three sample profiles:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;springProfile</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"staging"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">&lt;!-- configuration to be enabled when the "staging" profile is active --&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/springProfile&gt;</span>

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;springProfile</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"dev | staging"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">&lt;!-- configuration to be enabled when the "dev" or "staging" profiles are active --&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/springProfile&gt;</span>

<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;springProfile</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"!production"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-comment">&lt;!-- configuration to be enabled when the "production" profile is not active --&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/springProfile&gt;</span></pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_environment_properties" href="#_environment_properties"></a>26.7.2&nbsp;Environment Properties</h3></div></div></div><p>The <code class="literal">&lt;springProperty&gt;</code> tag lets you expose properties from the Spring <code class="literal">Environment</code> for
use within Logback. Doing so can be useful if you want to access values from your
<code class="literal">application.properties</code> file in your Logback configuration. The tag works in a similar
way to Logback&#8217;s standard <code class="literal">&lt;property&gt;</code> tag. However, rather than specifying a direct
<code class="literal">value</code>, you specify the <code class="literal">source</code> of the property (from the <code class="literal">Environment</code>). If you need
to store the property somewhere other than in <code class="literal">local</code> scope, you can use the <code class="literal">scope</code>
attribute. If you need a fallback value (in case the property is not set in the
<code class="literal">Environment</code>), you can use the <code class="literal">defaultValue</code> attribute. The following example shows how
to expose properties for use within Logback:</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;springProperty</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">scope</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"context"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"fluentHost"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">source</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"myapp.fluentd.host"</span>
		<span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">defaultValue</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"localhost"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">/&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;appender</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">name</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"FLUENT"</span> <span xmlns:d="http://docbook.org/ns/docbook" class="hl-attribute">class</span>=<span xmlns:d="http://docbook.org/ns/docbook" class="hl-value">"ch.qos.logback.more.appenders.DataFluentAppender"</span><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&gt;</span>
	<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;remoteHost&gt;</span>${fluentHost}<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/remoteHost&gt;</span>
	...
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/appender&gt;</span></pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">source</code> must be specified in kebab case (such as <code class="literal">my.property-name</code>).
However, properties can be added to the <code class="literal">Environment</code> by using the relaxed rules.</p></td></tr></table></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="boot-features-profiles.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="boot-features.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="boot-features-internationalization.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">25.&nbsp;Profiles&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;27.&nbsp;Internationalization</td></tr></table></div></body></html>