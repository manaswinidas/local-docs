<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.3">
<title>API version verification</title>
<link rel="stylesheet" href="css//spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.4.0/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="api-version-verification"><a class="anchor" href="#api-version-verification"></a>1. API version verification</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Platforms are required to provide an <a href="https://github.com/openservicebrokerapi/servicebroker/blob/v2.13/spec.md#api-version-header">HTTP header</a> in each call to the Open Service Broker API, indicating the version of the API specification that the platform supports.
Spring Cloud Open Service Broker can be configured to verify the version provided by the platform on each call to the service broker.
This version verification is configured to allow any API version by default.</p>
</div>
<div class="paragraph">
<p>To customize the version verification, set the <code>apiVersion</code> property that specifies the API version required by the service broker, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">spring.cloud.openservicebroker.apiVersion=2.13</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, provide a <code>BrokerApiVersion</code> Spring bean, as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java" data-lang="java">Unresolved directive in api-version-verification.adoc - include::{examples-dir}/ExampleApiVersionConfiguration.java[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the case of both a Spring Bean and a property being configured, then the Spring Bean will take precedence over the property.</p>
</div>
<div class="paragraph">
<p>If an API version is specified and the platform provides a different version in the <code>X-Broker-API-Version</code> header, the framework will return a <code>412 Precondition Failed</code> error to the platform.</p>
</div>
<div class="paragraph">
<p>As mentioned earlier, the default version verification is configured to allow any API version. However, to disable version verification entirely, set the <code>api-version-check-endabled</code> property to <code>false</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash" data-lang="bash">spring.cloud.openservicebroker.api-version-check-enabled = false</code></pre>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>