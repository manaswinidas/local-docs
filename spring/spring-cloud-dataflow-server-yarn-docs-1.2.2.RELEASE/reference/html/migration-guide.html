<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Appendix&nbsp;A.&nbsp;Migrating from Spring XD to Spring Cloud Data Flow</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Cloud Data Flow for Apache YARN"><link rel="up" href="appendix.html" title="Part&nbsp;IX.&nbsp;Appendices"><link rel="prev" href="appendix.html" title="Part&nbsp;IX.&nbsp;Appendices"><link rel="next" href="building.html" title="Appendix&nbsp;B.&nbsp;Building"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Appendix&nbsp;A.&nbsp;Migrating from Spring XD to Spring Cloud Data Flow</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="appendix.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IX.&nbsp;Appendices</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="building.html">Next</a></td></tr></table><hr></div><div class="appendix"><div class="titlepage"><div><div><h2 class="title"><a name="migration-guide" href="#migration-guide"></a>Appendix&nbsp;A.&nbsp;Migrating from Spring XD to Spring Cloud Data Flow</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_terminology_changes" href="#_terminology_changes"></a>A.1&nbsp;Terminology Changes</h2></div></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Old</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">New</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>XD-Admin</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Server (<span class="emphasis"><em>implementations</em></span>: local, cloud foundry, apache yarn, kubernetes, and apache mesos)</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>XD-Container</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>N/A</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Modules</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Applications</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Admin UI</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Dashboard</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Message Bus</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Binders</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>Batch / Job</p></td><td style="" align="left" valign="top"><p>Task</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_modules_to_applications" href="#_modules_to_applications"></a>A.2&nbsp;Modules to Applications</h2></div></div></div><p>If you have custom Spring XD modules, you&#8217;d have to refactor them to use Spring Cloud
Stream and Spring Cloud Task annotations, with updated dependencies and built as normal
Spring Boot "applications".</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_custom_applications" href="#_custom_applications"></a>A.2.1&nbsp;Custom Applications</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Spring XD&#8217;s stream and batch modules are refactored into <a class="link" href="https://github.com/spring-cloud-stream-app-starters" target="_top">Spring Cloud Stream</a> and <a class="link" href="https://github.com/spring-cloud-task-app-starters" target="_top">Spring
Cloud Task</a> application-starters, respectively. These applications can be used as the reference while refactoring Spring XD modules</li><li class="listitem">There are also some samples for <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-samples" target="_top">Spring Cloud Stream</a> and <a class="link" href="https://github.com/spring-cloud/spring-cloud-task/tree/master/spring-cloud-task-samples" target="_top">Spring Cloud Task</a> applications for reference</li><li class="listitem">If you&#8217;d like to create a brand new custom application, use the getting started guide for <a class="link" href="http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_getting_started" target="_top">Spring Cloud Stream</a> and <a class="link" href="http://docs.spring.io/spring-cloud-task/docs/current/reference/htmlsingle/#getting-started" target="_top">Spring Cloud Task</a> applications and as well as  review the development <a class="link" href="http://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#_creating_your_own_applications" target="_top">guide</a></li><li class="listitem">Alternatively, if you&#8217;d like to patch any of the out-of-the-box stream applications, you can
follow the procedure <a class="link" href="http://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#_patching_pre_built_applications" target="_top">here</a></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_application_registration" href="#_application_registration"></a>A.2.2&nbsp;Application Registration</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Custom Stream/Task application requires being installed to a maven repository for Local, YARN, and
CF implementations or as docker images, when deploying to Kubernetes and Mesos. Other than maven and
docker resolution, you can also resolve application artifacts from <code class="literal">http</code>, <code class="literal">file</code>, or as <code class="literal">hdfs</code>
coordinates</li><li class="listitem">Unlike Spring XD, you do not have to upload the application bits while registering custom applications anymore; instead, you&#8217;re expected to <a class="link" href="spring-cloud-dataflow-register-apps.html" title="23.&nbsp;Register a Stream App">register</a> the application coordinates that are hosted in the maven repository or by other means as discussed in the previous bullet</li><li class="listitem">By default, none of the out-of-the-box applications are preloaded already. It is intentionally designed to
provide the flexibility to register app(s), as you find appropriate for the given use-case requirement</li><li class="listitem">Depending on the binder choice, you can manually add the appropriate binder dependency to build
applications specific to that binder-type. Alternatively, you can follow the Spring Initialzr <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-app-starters/blob/master/spring-cloud-stream-app-starters-docs/src/main/asciidoc/overview.adoc#using-the-starters-to-create-custom-components" target="_top">procedure</a>
to create an application with binder embedded in it</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_application_properties_2" href="#_application_properties_2"></a>A.2.3&nbsp;Application Properties</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p class="simpara">counter-sink:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">The peripheral <code class="literal">redis</code> is not required in Spring Cloud Data Flow. If you intend to use the <code class="literal">counter-sink</code>, then <code class="literal">redis</code> becomes required, and you&#8217;re expected to have your own running <code class="literal">redis</code> cluster</li></ul></div></li><li class="listitem"><p class="simpara">field-value-counter-sink:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">The peripheral <code class="literal">redis</code> is not required in Spring Cloud Data Flow. If you intend to use the <code class="literal">field-value-counter-sink</code>, then <code class="literal">redis</code> becomes required, and you&#8217;re expected to have your own running <code class="literal">redis</code> cluster</li></ul></div></li><li class="listitem"><p class="simpara">aggregate-counter-sink:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">The peripheral <code class="literal">redis</code> is not required in Spring Cloud Data Flow. If you intend to use the <code class="literal">aggregate-counter-sink</code>, then <code class="literal">redis</code> becomes required, and you&#8217;re expected to have your own running <code class="literal">redis</code> cluster</li></ul></div></li></ul></div></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_message_bus_to_binders" href="#_message_bus_to_binders"></a>A.3&nbsp;Message Bus to Binders</h2></div></div></div><p>Terminology wise, in Spring Cloud Data Flow, the message bus implementation is commonly referred to
as binders.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_message_bus" href="#_message_bus"></a>A.3.1&nbsp;Message Bus</h3></div></div></div><p>Similar to Spring XD, there&#8217;s an abstraction available to extend the binder interface. By default,
we take the opinionated view of <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-kafka" target="_top">Apache Kafka</a> and <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-rabbit" target="_top">RabbitMQ</a> as the
production-ready binders and are available as GA releases.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_binders" href="#_binders"></a>A.3.2&nbsp;Binders</h3></div></div></div><p>Selecting a binder is as simple as providing the right binder dependency in the classpath. If you&#8217;re
to choose Kafka as the binder, you&#8217;d register stream applications that are pre-built with Kafka binder
in it. If you were to create a custom application with Kafka binder, you&#8217;d add the following
dependency in the classpath.</p><pre class="programlisting"><span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;dependency&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;groupId&gt;</span>org.springframework.cloud<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/groupId&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;artifactId&gt;</span>spring-cloud-stream-binder-kafka<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/artifactId&gt;</span>
    <span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;version&gt;</span>1.0.2.RELEASE<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/version&gt;</span>
<span xmlns:d="http://docbook.org/ns/docbook" class="hl-tag">&lt;/dependency&gt;</span></pre><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Spring Cloud Stream supports <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-kafka" target="_top">Apache Kafka</a>, <a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-rabbit" target="_top">RabbitMQ</a> and experimental
<a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-google-pubsub" target="_top">Google PubSub</a> and
<a class="link" href="https://github.com/spring-cloud/spring-cloud-stream-binder-solace" target="_top">Solace JMS</a>.  All binder implementations
are maintained and managed in their individual repositories</li><li class="listitem">Every Stream/Task application can be built with a binder implementation of your choice.
All the out-of-the-box applications are pre-built for both Kafka and Rabbit and they&#8217;re
readily available for use as maven artifacts [<a class="link" href="http://repo.spring.io/libs-milestone/org/springframework/cloud/stream/app/" target="_top">Spring Cloud Stream</a> / <a class="link" href="http://repo.spring.io/libs-milestone/org/springframework/cloud/task/app/" target="_top">Spring Cloud Task</a> or docker images [<a class="link" href="https://hub.docker.com/r/springcloudstream/" target="_top">Spring Cloud Stream</a> / <a class="link" href="https://hub.docker.com/r/springcloudtask/" target="_top">Spring Cloud Task</a>
Changing the binder requires selecting the right binder <a class="link" href="http://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/#_binders" target="_top">dependency</a>. Alternatively, you can download the pre-built application from this version of <a class="link" href="http://start-scs.cfapps.io/" target="_top">Spring Initializr</a> with the desired &#8220;binder-starter&#8221; dependency</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_named_channels" href="#_named_channels"></a>A.3.3&nbsp;Named Channels</h3></div></div></div><p>Fundamentally, all the messaging channels are backed by pub/sub semantics. Unlike Spring XD, the
messaging channels are backed only by <code class="literal">topics</code> or <code class="literal">topic-exchange</code> and there&#8217;s no representation of
<code class="literal">queues</code> in the new architecture.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><code class="literal">${xd.module.index}</code> is not supported anymore; instead, you can directly interact with named
destinations</li><li class="listitem"><p class="simpara"><code class="literal">stream.index</code> changes to <code class="literal">:&lt;stream-name&gt;.&lt;label/app-name&gt;</code></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><span class="emphasis"><em>for instance:</em></span> <code class="literal">ticktock.0</code> changes to <code class="literal">:ticktock.time</code></li></ul></div></li><li class="listitem"><p class="simpara">&#8220;topic/queue&#8221; prefixes are not required to interact with named-channels</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem"><span class="emphasis"><em>for instance:</em></span> <code class="literal">topic:foo</code> changes to <code class="literal">:foo</code></li><li class="listitem"><span class="emphasis"><em>for instance:</em></span> <code class="literal">stream create stream1 --definition ":foo &gt; log"</code></li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_directed_graphs" href="#_directed_graphs"></a>A.3.4&nbsp;Directed Graphs</h3></div></div></div><p>If you&#8217;re building non-linear streams, you could take advantage of named destinations to build
directed graphs.</p><p><span class="emphasis"><em>for instance, in Spring XD:</em></span></p><pre class="programlisting">stream create f --definition "queue:foo &gt; transform --expression=payload+'-foo' | log" --deploy
stream create b --definition "queue:bar &gt; transform --expression=payload+'-bar' | log" --deploy
stream create r --definition "http | router --expression=payload.contains('a')?'queue:foo':'queue:bar'" --deploy</pre><p><span class="emphasis"><em>for instance, in Spring Cloud Data Flow:</em></span></p><pre class="programlisting">stream create f --definition ":foo &gt; transform --expression=payload+'-foo' | log" --deploy
stream create b --definition ":bar &gt; transform --expression=payload+'-bar' | log" --deploy
stream create r --definition "http | router --expression=payload.contains('a')?'foo':'bar'" --deploy</pre></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_batch_to_tasks" href="#_batch_to_tasks"></a>A.4&nbsp;Batch to Tasks</h2></div></div></div><p>A Task by definition, is any application that does not run forever, including Spring Batch jobs, and they
end/stop at some point. Task applications can be majorly used for on-demand use-cases such as database migration, machine learning, scheduled operations etc. Using <a class="link" href="http://cloud.spring.io/spring-cloud-task/" target="_top">Spring Cloud Task</a>, users can build Spring Batch jobs as microservice applications.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Spring Batch <a class="link" href="http://docs.spring.io/spring-xd/docs/current-SNAPSHOT/reference/html/#jobs" target="_top">jobs</a>
from Spring XD are being refactored to Spring Boot applications a.k.a Spring Cloud Task
<a class="link" href="https://github.com/spring-cloud-task-app-starters" target="_top">applications</a></li><li class="listitem">Unlike Spring XD, these &#8220;Tasks&#8221; don&#8217;t require explicit deployment; instead, a task is ready to be
launched directly once the definition is declared</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_shell_dsl_commands" href="#_shell_dsl_commands"></a>A.5&nbsp;Shell/DSL Commands</h2></div></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Old Command</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">New Command</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>module upload</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>app register / app import</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>module list</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>app list</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>module info</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>app info</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>admin config server</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>dataflow config server</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job create</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task create</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job launch</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task launch</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job list</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task list</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job status</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task status</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job display</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task display</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job destroy</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task destroy</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>job execution list</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>task execution list</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>runtime modules</p></td><td style="" align="left" valign="top"><p>runtime apps</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_rest_api" href="#_rest_api"></a>A.6&nbsp;REST-API</h2></div></div></div><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="70%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Old API</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">New API</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/modules</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/apps</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/runtime/modules</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/runtime/apps</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/runtime/modules/{moduleId}</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/runtime/apps/{appId}</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/jobs/definitions</p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>/task/definitions</p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>/jobs/deployments</p></td><td style="" align="left" valign="top"><p>/task/deployments</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_ui_flo" href="#_ui_flo"></a>A.7&nbsp;UI / Flo</h2></div></div></div><p>The Admin-UI is now renamed as Dashboard. The URI for accessing the Dashboard is changed from
<a class="link" href="http://localhost:9393/admin-ui" target="_top">localhost:9393/admin-ui</a> to <a class="link" href="http://localhost:9393/dashboard" target="_top">localhost:9393/dashboard</a></p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><span class="emphasis"><em>(New)</em></span> Apps: Lists all the registered applications that are available for use. This view includes informational details such as the URI and the properties supported by each application. You can also register/unregister applications from this view</li><li class="listitem">Runtime: Container changes to Runtime. The notion of <code class="literal">xd-container</code> is gone, replaced by out-of-the-box applications running as autonomous Spring Boot applications. The Runtime tab displays the applications
running in the runtime platforms (<span class="emphasis"><em>implementations:</em></span> cloud foundry, apache yarn, apache mesos, or
kubernetes). You can click on each application to review relevant details about the application such
as where it is running with, and what resources etc.</li><li class="listitem"><a class="link" href="https://github.com/spring-projects/spring-flo" target="_top">Spring Flo</a> is now an OSS product. Flo for
Spring Cloud Data Flow&#8217;s &#8220;Create Stream&#8221;, the designer-tab comes pre-built in the Dashboard</li><li class="listitem"><p class="simpara"><span class="emphasis"><em>(New)</em></span> Tasks:</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: circle; "><li class="listitem">The sub-tab &#8220;Modules&#8221; is renamed to &#8220;Apps&#8221;</li><li class="listitem">The sub-tab &#8220;Definitions&#8221; lists all the Task definitions, including Spring Batch jobs that are
orchestrated as Tasks</li><li class="listitem">The sub-tab &#8220;Executions&#8221; lists all the Task execution details similar to Spring XD&#8217;s Job executions</li></ul></div></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_architecture_components" href="#_architecture_components"></a>A.8&nbsp;Architecture Components</h2></div></div></div><p>Spring Cloud Data Flow comes with a significantly simplified architecture. In fact, when compared with
Spring XD, there are less peripherals that are necessary to operationalize Spring Cloud Data Flow.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_zookeeper" href="#_zookeeper"></a>A.8.1&nbsp;ZooKeeper</h3></div></div></div><p>ZooKeeper is not used in the new architecture.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_rdbms" href="#_rdbms"></a>A.8.2&nbsp;RDBMS</h3></div></div></div><p>Spring Cloud Data Flow uses an RDBMS instead of Redis for stream/task definitions, application
registration, and for job repositories.The default configuration uses an embedded H2 instance, but Oracle, DB2, SqlServer, MySQL/MariaDB, PostgreSQL, H2, and HSQLDB databases are supported. To use Oracle, DB2 and
SqlServer you will need to create your own Data Flow Server using <a class="link" href="https://start.spring.io/" target="_top">Spring Initializr</a> and add the appropriate JDBC driver dependency.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_redis" href="#_redis"></a>A.8.3&nbsp;Redis</h3></div></div></div><p>Running a Redis cluster is only required for analytics functionality. Specifically, when the <code class="literal">counter-sink</code>,
<code class="literal">field-value-counter-sink</code>, or <code class="literal">aggregate-counter-sink</code> applications are used, it is expected to also
have a running instance of Redis cluster.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_cluster_topology" href="#_cluster_topology"></a>A.8.4&nbsp;Cluster Topology</h3></div></div></div><p>Spring XD&#8217;s <code class="literal">xd-admin</code> and <code class="literal">xd-container</code> server components are replaced by stream and task
applications themselves running as autonomous Spring Boot applications. The applications run natively
on various platforms including Cloud Foundry, Apache YARN, Apache Mesos, or Kubernetes. You can develop,
test, deploy, scale +/-, and interact with (Spring Boot) applications individually, and they can
evolve in isolation.</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_central_configuration" href="#_central_configuration"></a>A.9&nbsp;Central Configuration</h2></div></div></div><p>To support centralized and consistent management of an application&#8217;s configuration properties,
<a class="link" href="https://cloud.spring.io/spring-cloud-config/" target="_top">Spring Cloud Config</a> client libraries have been
included into the Spring Cloud Data Flow server as well as the Spring Cloud Stream applications provided
by the Spring Cloud Stream App Starters. You can also <a class="link" href="spring-cloud-dataflow-create-stream.html#spring-cloud-dataflow-global-properties" title="25.3&nbsp;Common application properties">pass common application properties</a>
to all streams when the Data Flow Server starts.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_distribution" href="#_distribution"></a>A.10&nbsp;Distribution</h2></div></div></div><p>Spring Cloud Data Flow is a Spring Boot application. Depending on the platform of your choice, you
can download the respective release uber-jar and deploy/push it to the runtime platform
(cloud foundry, apache yarn, kubernetes, or apache mesos). For example, if you&#8217;re running Spring
Cloud Data Flow on Cloud Foundry, you&#8217;d download the Cloud Foundry server implementation and do a
<code class="literal">cf push</code> as explained in the <a class="link" href="http://docs.spring.io/spring-cloud-dataflow-server-cloudfoundry/docs/current-SNAPSHOT/reference/htmlsingle/#getting-started" target="_top">reference guide</a>.</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_hadoop_distribution_compatibility" href="#_hadoop_distribution_compatibility"></a>A.11&nbsp;Hadoop Distribution Compatibility</h2></div></div></div><p>The <code class="literal">hdfs-sink</code> application builds upon Spring Hadoop 2.4.0 release, so this application is compatible
with following Hadoop distributions.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Cloudera - cdh5</li><li class="listitem">Pivotal Hadoop - phd30</li><li class="listitem">Hortonworks Hadoop - hdp24</li><li class="listitem">Hortonworks Hadoop - hdp23</li><li class="listitem">Vanilla Hadoop - hadoop26</li><li class="listitem">Vanilla Hadoop - 2.7.x (default)</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_yarn_deployment" href="#_yarn_deployment"></a>A.12&nbsp;YARN Deployment</h2></div></div></div><p>Spring Cloud Data Flow can be deployed and used with Apche YARN in two different ways.</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">Deploy the server <a class="link" href="http://docs.spring.io/spring-cloud-dataflow-server-yarn/docs/current-SNAPSHOT/reference/htmlsingle/#yarn-deploying-on-yarn" target="_top">directly</a> in a YARN cluster</li><li class="listitem">Leverage Apache Ambari <a class="link" href="http://docs.spring.io/spring-cloud-dataflow-server-yarn/docs/current-SNAPSHOT/reference/htmlsingle/#yarn-deploying-on-ambari" target="_top">plugin to provision</a> Spring Cloud Data Flow as
a service</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_use_case_comparison" href="#_use_case_comparison"></a>A.13&nbsp;Use Case Comparison</h2></div></div></div><p>Let&#8217;s review some use-cases to compare and contrast the differences between Spring XD and Spring
Cloud Data Flow.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_use_case_1" href="#_use_case_1"></a>A.13.1&nbsp;Use Case #1</h3></div></div></div><p>(<span class="emphasis"><em>It is assumed both XD and SCDF distributions are already downloaded</em></span>)</p><p>Description: Simple <code class="literal">ticktock</code> example using local/singlenode.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Spring XD</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Spring Cloud Data Flow</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-singlenode</code> server from CLI
</p><p><code class="literal">&#8594; xd-singlenode</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start a binder of your choice
</p><p>Start <code class="literal">local-server</code> implementation of SCDF from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-server-local-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-shell</code> server from the CLI
</p><p><code class="literal">&#8594; xd-shell</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">dataflow-shell</code> server from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-shell-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create <code class="literal">ticktock</code> stream
</p><p><code class="literal">xd:&gt;stream create ticktock --definition &#8220;time | log&#8221; --deploy</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create <code class="literal">ticktock</code> stream
</p><p><code class="literal">dataflow:&gt;stream create ticktock --definition &#8220;time | log&#8221; --deploy</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>Review <code class="literal">ticktock</code> results in the <code class="literal">xd-singlenode</code> server console</p></td><td style="" align="left" valign="top"><p>Review <code class="literal">ticktock</code> results by tailing the <code class="literal">ticktock.log/stdout_log</code> application logs</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_use_case_2" href="#_use_case_2"></a>A.13.2&nbsp;Use Case #2</h3></div></div></div><p>(<span class="emphasis"><em>It is assumed both XD and SCDF distributions are already downloaded</em></span>)</p><p>Description: Stream with custom module/application.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Spring XD</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Spring Cloud Data Flow</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-singlenode</code> server from CLI
</p><p><code class="literal">&#8594; xd-singlenode</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start a binder of your choice
</p><p>Start <code class="literal">local-server</code> implementation of SCDF from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-server-local-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-shell</code> server from the CLI
</p><p><code class="literal">&#8594; xd-shell</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">dataflow-shell</code> server from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-shell-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Register custom &#8220;processor&#8221; module to transform payload to a desired format
</p><p><code class="literal">xd:&gt;module upload --name toupper --type processor --file &lt;CUSTOM_JAR_FILE_LOCATION&gt;</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Register custom &#8220;processor&#8221; application to transform payload to a desired format
</p><p><code class="literal">dataflow:&gt;app register --name toupper --type processor --uri &lt;MAVEN_URI_COORDINATES&gt;</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create a stream with custom module
</p><p><code class="literal">xd:&gt;stream create testupper --definition &#8220;http | toupper | log&#8221; --deploy</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create a stream with custom application
</p><p><code class="literal">dataflow:&gt;stream create testupper --definition &#8220;http | toupper | log&#8221; --deploy</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>Review results in the <code class="literal">xd-singlenode</code> server console</p></td><td style="" align="left" valign="top"><p>Review results by tailing the <code class="literal">testupper.log/stdout_log</code> application logs</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="_use_case_3" href="#_use_case_3"></a>A.13.3&nbsp;Use Case #3</h3></div></div></div><p>(<span class="emphasis"><em>It is assumed both XD and SCDF distributions are already downloaded</em></span>)</p><p>Description: Simple batch-job.</p><div class="informaltable"><table style="border-collapse: collapse;border-top: 0.5pt solid ; border-bottom: 0.5pt solid ; " width="100%"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top">Spring XD</th><th style="border-bottom: 0.5pt solid ; " align="left" valign="top">Spring Cloud Data Flow</th></tr></thead><tbody><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-singlenode</code> server from CLI
</p><p><code class="literal">&#8594; xd-singlenode</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">local-server</code> implementation of SCDF from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-server-local-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">xd-shell</code> server from the CLI
</p><p><code class="literal">&#8594; xd-shell</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Start <code class="literal">dataflow-shell</code> server from the CLI
</p><p><code class="literal">&#8594; java -jar spring-cloud-dataflow-shell-1.0.0.BUILD-SNAPSHOT.jar</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Register custom &#8220;batch-job&#8221; module
</p><p><code class="literal">xd:&gt;module upload --name simple-batch --type job --file &lt;CUSTOM_JAR_FILE_LOCATION&gt;</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Register
custom &#8220;batch-job&#8221; as task application
</p><p><code class="literal">dataflow:&gt;app register --name simple-batch --type task --uri &lt;MAVEN_URI_COORDINATES&gt;</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create a job with custom batch-job module
</p><p><code class="literal">xd:&gt;job create batchtest --definition &#8220;simple-batch&#8221;</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Create a task with custom batch-job application
</p><p><code class="literal">dataflow:&gt;task create batchtest --definition &#8220;simple-batch&#8221;</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Deploy job
</p><p><code class="literal">xd:&gt;job deploy batchtest</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>NA</p></td></tr><tr><td style="border-right: 0.5pt solid ; border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Launch job
</p><p><code class="literal">xd:&gt;job launch batchtest</code></p></td><td style="border-bottom: 0.5pt solid ; " align="left" valign="top"><p>Launch task
</p><p><code class="literal">dataflow:&gt;task launch batchtest</code></p></td></tr><tr><td style="border-right: 0.5pt solid ; " align="left" valign="top"><p>Review results in the <code class="literal">xd-singlenode</code> server console as well as Jobs tab in UI
(executions sub-tab should include all step details)</p></td><td style="" align="left" valign="top"><p>Review results by tailing the <code class="literal">batchtest/stdout_log</code> application logs as well as Task tab in UI (executions sub-tab should include all step details)</p></td></tr></tbody></table></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="appendix.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="appendix.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="building.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;IX.&nbsp;Appendices&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Appendix&nbsp;B.&nbsp;Building</td></tr></table></div></body></html>