<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>35.&nbsp;Stream applications with multiple binder configurations</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Cloud Data Flow for Apache YARN"><link rel="up" href="streams.html" title="Part&nbsp;V.&nbsp;Streams"><link rel="prev" href="spring-cloud-dataflow-stream-advanced.html" title="34.&nbsp;Directed Graphs in a Stream"><link rel="next" href="spring-cloud-task.html" title="Part&nbsp;VI.&nbsp;Tasks"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">35.&nbsp;Stream applications with multiple binder configurations</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="spring-cloud-dataflow-stream-advanced.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;V.&nbsp;Streams</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="spring-cloud-task.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="spring-cloud-dataflow-stream-multi-binder" href="#spring-cloud-dataflow-stream-multi-binder"></a>35.&nbsp;Stream applications with multiple binder configurations</h2></div></div></div><p>In some cases, a stream can have its applications bound to multiple spring cloud stream binders when they are required to connect to different messaging
middleware configurations. In those cases, it is important to make sure the applications are configured appropriately with their binder
configurations. For example, let&#8217;s consider the following stream:</p><pre class="screen">http | transform --expression=payload.toUpperCase() | log</pre><p>and in this stream, each application connects to messaging middleware in the following way:</p><pre class="screen">Http source sends events to RabbitMQ (rabbit1)
Transform processor receives events from RabbitMQ (rabbit1) and sends the processed events into Kafka (kafka1)
Log sink receives events from Kafka (kafka1)</pre><p>Here, <code class="literal">rabbit1</code> and <code class="literal">kafka1</code> are the binder names given in the spring cloud stream application properties.
Based on this setup, the applications will have the following binder(s) in their classpath with the appropriate configuration:</p><pre class="screen">Http - Rabbit binder
Transform - Both Kafka and Rabbit binders
Log - Kafka binder</pre><p>The spring-cloud-stream <code class="literal">binder</code> configuration properties can be set within the applications themselves.
If not, they can be passed via <code class="literal">deployment</code> properties when the stream is deployed.</p><p>For example,</p><pre class="screen">dataflow:&gt;stream create --definition "http | transform --expression=payload.toUpperCase() | log" --name mystream</pre><pre class="screen">dataflow:&gt;stream deploy mystream --properties "app.http.spring.cloud.stream.bindings.output.binder=rabbit1,app.transform.spring.cloud.stream.bindings.input.binder=rabbit1,
app.transform.spring.cloud.stream.bindings.output.binder=kafka1,app.log.spring.cloud.stream.bindings.input.binder=kafka1"</pre><p>One can override any of the binder configuration properties by specifying them via deployment properties.</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="spring-cloud-dataflow-stream-advanced.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="streams.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="spring-cloud-task.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">34.&nbsp;Directed Graphs in a Stream&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;VI.&nbsp;Tasks</td></tr></table></div></body></html>