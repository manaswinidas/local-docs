<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>51.&nbsp;Logging</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Cloud Data Flow for Apache YARN"><link rel="up" href="howto.html" title="Part&nbsp;VIII.&nbsp;&#8216;How-to&#8217; guides"><link rel="prev" href="_configure_maven_properties.html" title="50.&nbsp;Configure Maven Properties"><link rel="next" href="faqs.html" title="52.&nbsp;Frequently asked questions"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">51.&nbsp;Logging</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="_configure_maven_properties.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;VIII.&nbsp;&#8216;How-to&#8217; guides</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="faqs.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="_logging" href="#_logging"></a>51.&nbsp;Logging</h2></div></div></div><p>Spring Cloud Data Flow is built upon several Spring projects, but ultimately the dataflow-server is a
Spring Boot app, so the logging techniques that apply to any <a class="link" href="http://docs.spring.io/spring-boot/docs/current/reference/html/howto-logging.html#howto-logging" target="_top">Spring Boot</a>
application are applicable here as well.</p><p>While troubleshooting, following are the two primary areas where enabling the DEBUG logs could be
useful.</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_deployment_logs" href="#_deployment_logs"></a>51.1&nbsp;Deployment Logs</h2></div></div></div><p>Spring Cloud Data Flow builds upon <a class="link" href="https://github.com/spring-cloud/spring-cloud-deployer" target="_top">Spring Cloud Deployer</a> SPI
and the platform specific dataflow-server uses the respective <a class="link" href="https://github.com/spring-cloud?utf8=%E2%9C%93&amp;q=spring-cloud-deployer" target="_top">SPI implementations</a>.
Specifically, if we were to troubleshoot deployment specific issues; such as the network errors, it&#8217;d
be useful to enable the DEBUG logs at the underlying deployer and the libraries used by it.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">For instance, if you&#8217;d like to enable DEBUG logs for the <a class="link" href="https://github.com/spring-cloud/spring-cloud-deployer-local" target="_top">local-deployer</a>,
you&#8217;d be starting the server with following.</p><pre class="programlisting">$ java -jar &lt;dataflow-server&gt;.jar --logging.level.org.springframework.cloud.deployer.spi.local=DEBUG</pre><p class="simpara">(<span class="emphasis"><em>where, <code class="literal">org.springframework.cloud.deployer.spi.local</code> is the global package for everything local-deployer
related</em></span>)</p></li><li class="listitem"><p class="simpara">For instance, if you&#8217;d like to enable DEBUG logs for the <a class="link" href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry" target="_top">cloudfoundry-deployer</a>,
you&#8217;d be setting the following environment variable and upon restaging the dataflow-server, we will
see more logs around request, response and the elaborate stack traces (<span class="emphasis"><em>upon failures</em></span>). The cloudfoundry-deployer
uses <a class="link" href="https://github.com/cloudfoundry/cf-java-client" target="_top">cf-java-client</a>, so we will have to enable DEBUG
logs for this library.</p><pre class="programlisting">$ cf <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">set</span>-env dataflow-server JAVA_OPTS <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">'-Dlogging.level.cloudfoundry-client=DEBUG'</span>
$ cf restage dataflow-server</pre><p class="simpara">(<span class="emphasis"><em>where, <code class="literal">cloudfoundry-client</code> is the global package for everything <code class="literal">cf-java-client</code> related</em></span>)</p></li><li class="listitem"><p class="simpara">If there&#8217;s a need to review Reactor logs, which is used by the <code class="literal">cf-java-client</code>, then the following
would be helpful.</p><pre class="programlisting">$ cf <span xmlns:d="http://docbook.org/ns/docbook" class="hl-keyword">set</span>-env dataflow-server JAVA_OPTS <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">'-Dlogging.level.cloudfoundry-client=DEBUG -Dlogging.level.reactor.ipc.netty=DEBUG'</span>
$ cf restage dataflow-server</pre><p class="simpara">(<span class="emphasis"><em>where, <code class="literal">reactor.ipc.netty</code> is the global package for everything <code class="literal">reactor-netty</code> related</em></span>)</p></li></ol></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Similar to the <code class="literal">local-deployer</code> and <code class="literal">cloudfoundry-deployer</code> options as discussed above, there
are equivalent settings available for Apache YARN, Apache Mesos and Kubernetes variants, too. Check out the
respective <a class="link" href="https://github.com/spring-cloud?utf8=%E2%9C%93&amp;q=spring-cloud-deployer" target="_top">SPI implementations</a> to
find out more details about the packages to configure for logging.</p></td></tr></table></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="_application_logs" href="#_application_logs"></a>51.2&nbsp;Application Logs</h2></div></div></div><p>The streaming applications in Spring Cloud Data Flow are Spring Boot applications and they can be
independently setup with logging configurations.</p><p>For instance, if you&#8217;d have to troubleshoot the <code class="literal">header</code> and <code class="literal">payload</code> specifics that are being passed
around source, processor and sink channels, you&#8217;d be deploying the stream with the following
options.</p><pre class="programlisting">dataflow:&gt;stream create foo --definition <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"http --logging.level.org.springframework.integration=DEBUG | transform --logging.level.org.springframework.integration=DEBUG | log --logging.level.org.springframework.integration=DEBUG"</span> --deploy</pre><p>(<span class="emphasis"><em>where, <code class="literal">org.springframework.integration</code> is the global package for everything Spring Integration related,
which is responsible for messaging channels</em></span>)</p><p>These properties can also be specified via <code class="literal">deployment</code> properties when deploying the stream.</p><pre class="programlisting">dataflow:&gt;stream deploy foo --properties <span xmlns:d="http://docbook.org/ns/docbook" class="hl-string">"app.*.logging.level.org.springframework.integration=DEBUG"</span></pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="_configure_maven_properties.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="howto.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="faqs.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">50.&nbsp;Configure Maven Properties&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;52.&nbsp;Frequently asked questions</td></tr></table></div></body></html>