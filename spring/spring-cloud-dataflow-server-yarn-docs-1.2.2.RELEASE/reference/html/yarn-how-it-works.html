<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>18.&nbsp;How YARN Deployment Works</title><link rel="stylesheet" type="text/css" href="css/manual-multipage.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="index.html" title="Spring Cloud Data Flow for Apache YARN"><link rel="up" href="_spring_cloud_data_flow_runtime.html" title="Part&nbsp;IV.&nbsp;Spring Cloud Data Flow Runtime"><link rel="prev" href="yarn-configure-settings.html" title="17.&nbsp;Configuring Runtime Settings and Environment"><link rel="next" href="yarn-troubleshooting.html" title="19.&nbsp;Troubleshooting"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">18.&nbsp;How YARN Deployment Works</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="yarn-configure-settings.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Cloud Data Flow Runtime</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="yarn-troubleshooting.html">Next</a></td></tr></table><hr></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a name="yarn-how-it-works" href="#yarn-how-it-works"></a>18.&nbsp;How YARN Deployment Works</h2></div></div></div><p>When YARN application is deployed into a YARN cluster it consists of
two parts, <span class="emphasis"><em>Application Master</em></span> and <span class="emphasis"><em>Containers</em></span>. Application master
is a control program responsible of handling applications lifecycle
and allocation of containers. Containers are then where a real heavy
lifting is done. In case of a stream there is always minimum of 3
containers, one for application master, one for sink and one for
source. When running tasks there is always one application master and
one container running a particular task.</p><p>Needed application files are pushed into hdfs automatically when
needed. After stream and task is used once hdfs directory structure
would like like shown above.</p><pre class="programlisting">/dataflow/apps
/dataflow/apps/stream
/dataflow/apps/stream/app
/dataflow/apps/stream/app/application.properties
/dataflow/apps/stream/app/servers.yml
/dataflow/apps/stream/app/spring-cloud-deployer-yarn-appdeployerappmaster-1.0.0.BUILD-SNAPSHOT.jar
/dataflow/apps/task
/dataflow/apps/task/app
/dataflow/apps/task/app/application.properties
/dataflow/apps/task/app/servers.yml
/dataflow/apps/task/app/spring-cloud-deployer-yarn-tasklauncherappmaster-1.0.0.BUILD-SNAPSHOT.jar</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="images/note.png"></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p><code class="literal">/dataflow/apps</code> can deleted in case application version is changed or
configuration related to <code class="literal">servers.yml</code> is modified. Once created these
files are not overridden.</p></td></tr></table></div><p>Application artifacts are cached under <code class="literal">/dataflow/artifacts/cache</code>
directory.</p><pre class="programlisting">/dataflow/artifacts
/dataflow/artifacts/cache
/dataflow/artifacts/cache/hdfs-sink-rabbit-1.0.0.RC1.jar
/dataflow/artifacts/cache/time-source-rabbit-1.0.0.RC1.jar
/dataflow/artifacts/cache/timestamp-task-1.0.0.RC1.jar</pre><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Important"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Important]" src="images/important.png"></td><th align="left">Important</th></tr><tr><td align="left" valign="top"><p>Artifact caching is happening on two levels, firstly on a local
disk where server is running, and secondly in a hdfs cache directory.
If working with snapshots or own development, it may be required to wipe
out <code class="literal">/dataflow/artifacts/cache</code> directory and do a server restart.</p></td></tr></table></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="yarn-configure-settings.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="_spring_cloud_data_flow_runtime.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="yarn-troubleshooting.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">17.&nbsp;Configuring Runtime Settings and Environment&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;19.&nbsp;Troubleshooting</td></tr></table></div></body></html>