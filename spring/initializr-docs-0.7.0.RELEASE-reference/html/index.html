<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<meta name="author" content="Stéphane Nicoll, Dave Syer">
<title>Spring Initializr Reference Guide</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Initializr Reference Guide</h1>
<div class="details">
<span id="author" class="author">Stéphane Nicoll</span><br>
<span id="author2" class="author">Dave Syer</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#initializr-documentation">Spring Initializr Documentation</a>
<ul class="sectlevel1">
<li><a href="#initializr-documentation-about">1. About the documentation</a></li>
<li><a href="#initializr-documentation-getting-help">2. Getting help</a></li>
</ul>
</li>
<li><a href="#user-guide">User Guide</a>
<ul class="sectlevel1">
<li><a href="#getting-started">3. Getting Started</a>
<ul class="sectlevel2">
<li><a href="#getting-started-advanced-options">3.1. Advanced options</a></li>
<li><a href="#getting-started-dependencies">3.2. Dependencies</a></li>
<li><a href="#getting-started-tuning-defaults">3.3. Tuning default values</a></li>
</ul>
</li>
<li><a href="#command-line">4. Command line support</a></li>
<li><a href="#ide">5. IDEs support</a></li>
<li><a href="#spring-boot-cli">6. Spring Boot CLI support</a></li>
</ul>
</li>
<li><a href="#configuration-guide">Configuration Guide</a>
<ul class="sectlevel1">
<li><a href="#create-instance">7. Creating your own instance</a>
<ul class="sectlevel2">
<li><a href="#create-instance-basic-settings">7.1. Configuring basic settings</a></li>
<li><a href="#create-instance-boot-versions">7.2. Configuring available Spring Boot versions</a></li>
<li><a href="#create-instance-types">7.3. Configuring available project types</a></li>
<li><a href="#create-instance-dependencies">7.4. Configuring dependencies</a>
<ul class="sectlevel3">
<li><a href="#dependencies-version-range">7.4.1. Availability (version range)</a></li>
<li><a href="#dependencies-repository">7.4.2. Repository</a></li>
</ul>
</li>
<li><a href="#create-instance-boms">7.5. Configuring Bill of Materials</a>
<ul class="sectlevel3">
<li><a href="#dependencies-mappings">7.5.1. Map coordinates according to the Spring Boot version</a></li>
<li><a href="#dependencies-alias">7.5.2. Aliases</a></li>
<li><a href="#dependencies-facet">7.5.3. Facets</a></li>
<li><a href="#create-instance-dependencies-link">7.5.4. Links</a></li>
<li><a href="#create-instance-dependencies-search">7.5.5. Improve search results</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration-howto">8. &#8216;How-to&#8217; guides</a>
<ul class="sectlevel2">
<li><a href="#howto-add-a-new-dependency">8.1. Add a new dependency</a></li>
<li><a href="#howto-override-a-version">8.2. Override the version of a dependency</a></li>
<li><a href="#howto-link-boot-version">8.3. Link a Boot version to a version of your dependency</a></li>
<li><a href="#howto-add-snapshot-repository">8.4. Configure a snapshot repository</a></li>
<li><a href="#howto-dependency-starter-flag">8.5. Make sure a regular dependency brings the base starter</a></li>
<li><a href="#howto-group-share-settings">8.6. Share common dependency settings in a group</a></li>
</ul>
</li>
<li><a href="#create-instance-advanced-config">9. Advanced configuration</a>
<ul class="sectlevel2">
<li><a href="#create-instance-advanced-config-caching">9.1. Caching configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide">API Guide</a>
<ul class="sectlevel1">
<li><a href="#metadata-format">10. Metadata Format</a>
<ul class="sectlevel2">
<li><a href="#content">10.1. Content</a>
<ul class="sectlevel3">
<li><a href="#project-dependencies">10.1.1. Project dependencies</a></li>
<li><a href="#project-types">10.1.2. Project types</a></li>
<li><a href="#packaging">10.1.3. Packaging</a></li>
<li><a href="#java-version">10.1.4. Java version</a></li>
<li><a href="#languages">10.1.5. Languages</a></li>
<li><a href="#boot-version">10.1.6. Boot version</a></li>
</ul>
</li>
<li><a href="#defaults">10.2. Defaults</a></li>
</ul>
</li>
<li><a href="#using-the-stubs">11. Using the Stubs</a>
<ul class="sectlevel2">
<li><a href="#using-wiremock-with-spring-boot">11.1. Using WireMock with Spring Boot</a>
<ul class="sectlevel3">
<li><a href="#loading-stubs-from-the-classpath">11.1.1. Loading Stubs from the Classpath</a></li>
<li><a href="#using-the-stub-runner">11.1.2. Using the Stub Runner</a></li>
</ul>
</li>
<li><a href="#names-and-paths-of-stubs">11.2. Names and Paths of Stubs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<h1 id="initializr-documentation" class="sect0"><a class="anchor" href="#initializr-documentation"></a>Spring Initializr Documentation</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section provides a brief overview of the Spring Initializr reference documentation:
think of it as map for the rest of the document. Some sections are targeted to a specific
audience so this reference guide is not meant to be read in a linear fashion.</p>
</div>
</div>
</div>
<div class="paragraph">
<p>Spring Initializr provides a simple web UI to configure the project to generate and
endpoints that you can use via plain HTTP: you can see our default instance at
<a href="https://start.spring.io" class="bare">start.spring.io</a>.  The service allows you to customize the project to generate: the
build system and its coordinates, the language and version, the packaging and finally the
dependencies to add to the project. The latter is a core concept: based on the chosen
Spring Boot version, a set of dependencies can be chosen, usually Spring Boot starters,
that will have a concrete impact on your application. More details in the
<a href="#user-guide">User Guide</a> section.</p>
</div>
<div class="paragraph">
<p>You can easily create your own instance of the Initializr, by using the jars as libraries
in your own app. There is minimal code involved and the service has a very rich
configuration structure, allowing you to define not only the values of various project
attributes but also the list of dependencies and the constraints to apply to them. If that
sounds interesting, then <a href="#configuration-guide">Configuration Guide</a> has all the
details you need. You might only want to modify an existing instance of the Initializr,
e.g. to add a new dependency type, or update the version of an existing
one. For those and other simple and common use cases check out
<a href="#configuration-howto">&#8216;How-to&#8217; guides</a>.</p>
</div>
<div class="paragraph">
<p>The Initializr also provides an extensible API to generate quickstart projects, and to
inspect the metadata used to generate projects, for instance to list the available
dependencies and versions. The API can be used standalone or embedded in other tools
(e.g. it is used in Spring Tool Suite, and in the IntelliJ IDEA and Netbeans plugins for
Spring Boot). These features are covered in <a href="#api-guide">API Guide</a>.</p>
</div>
<div class="sect1">
<h2 id="initializr-documentation-about"><a class="anchor" href="#initializr-documentation-about"></a>1. About the documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Spring Initializr reference guide is available as
<a href="http://docs.spring.io/initializr/docs/0.7.0.RELEASE/reference/html">html</a>. The
latest copy is available at <a href="http://docs.spring.io/initializr/docs/current/reference/html" class="bare">docs.spring.io/initializr/docs/current/reference/html</a>.</p>
</div>
<div class="paragraph">
<p>Copies of this document may be made for your own use and for
distribution to others, provided that you do not charge any fee for such copies and
further provided that each copy contains this Copyright Notice, whether distributed
in print or electronically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="initializr-documentation-getting-help"><a class="anchor" href="#initializr-documentation-getting-help"></a>2. Getting help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having trouble with Spring Initializr, We&#8217;d like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question on <a href="https://gitter.im/spring-io/initializr">Gitter</a>.</p>
</li>
<li>
<p>Report bugs with Spring Initializr at <a href="https://github.com/spring-io/initializr/issues" class="bare">github.com/spring-io/initializr/issues</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All of Spring Initializr is open source, including the documentation! If you
find problems with the docs; or if you just want to improve them, please
<a href="https://github.com/spring-io/initializr/tree/v0.7.0.RELEASE">get involved</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="user-guide" class="sect0"><a class="anchor" href="#user-guide"></a>User Guide</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>If you&#8217;re wondering how to use <a href="https://start.spring.io" class="bare">start.spring.io</a> or what features are available,
this section is for you! You&#8217;ll find the various way you can interact with the service and
get a better insight at what you can do with it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="anchor" href="#getting-started"></a>3. Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Let&#8217;s create a first project and discover the various options that you can use to tune it.
Go to <a href="https://start.spring.io" class="bare">start.spring.io</a>, change the <code>Group</code> field from "com.example" to "org.acme"
and put the focus in the <code>Dependencies</code> field on the right hand side. If you type "web",
you will see a list of matching choices with that simple criteria. Use the mouse or the
arrow keys and <code>Enter</code> to select the "Web" starter.</p>
</div>
<div class="paragraph">
<p>Your browser should now be in this state:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/web-selected.png" alt="Browser" width="1200" height="720">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Boot version above probably doesn&#8217;t match the one you have. As we will
see later, start.spring.io is continuously updated as new Spring Boot versions are
published and the service uses the latest version by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Click on <code>Generate Project</code>, this downloads a zip file containing a Maven project with
the following structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>mvnw
mvnw.cmd
pom.xml
src
├── main
│   ├── java
│   │   └── org
│   │       └── acme
│   │           └── DemoApplication.java
│   └── resources
│       ├── application.properties
│       ├── static
│       └── templates
└── test
    └── java
        └── org
            └── acme
                └── DemoApplicationTests.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>A typical project generated by Spring Initializr contains a Spring Boot application
(<code>DemoApplication</code>), a test and an empty configuration. If you run the <code>main</code> method
of <code>DemoApplication</code>, you&#8217;ll see an "empty" spring boot app starting on localhost:8080.</p>
</div>
<div class="paragraph">
<p>Because Spring Initializr has detected it is a web application, a <code>static</code> and <code>templates</code>
directories have been created to hold your static resources and ui templates.</p>
</div>
<div class="paragraph">
<p>Also, a Maven wrapper is automatically included so that you don&#8217;t have to install Maven to
run this project (you can build it with <code>./mvnw install</code>). If you prefer, you can select
Gradle instead in the first drop down list at the top of the screen. This will generate a
Gradle-based project instead that also contains a wrapper if you don&#8217;t have Gradle
installed (build it with <code>./gradlew build</code>).</p>
</div>
<div class="sect2">
<h3 id="getting-started-advanced-options"><a class="anchor" href="#getting-started-advanced-options"></a>3.1. Advanced options</h3>
<div class="paragraph">
<p>Next to the <code>Generate Project</code> you&#8217;ll find a "Switch to the full version" link. If you
click on that, you&#8217;ll see all the available options. Let&#8217;s browse through them quickly:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Group</strong>: project coordinates (id of the project&#8217;s group, as referred by the <code>groupId</code>
attribute in Apache Maven). Also infers the root package name to use.</p>
</li>
<li>
<p><strong>Artifact</strong>: project coordinates (id of the artifact, as referred by the <code>artifactId</code>
attribute in Apache Maven). Also infers the name of the project</p>
</li>
<li>
<p><strong>Name</strong>: display name of the project that also determines the name of your Spring Boot
application. For instance, if the name of your project is <code>my-app</code>, the generated project
will have a <code>MyAppApplication</code> class</p>
</li>
<li>
<p><strong>Description</strong>: description of the project</p>
</li>
<li>
<p><strong>Package Name</strong>: root package of the project. If not specified, the value of the <strong>Group</strong>
attribute is used</p>
</li>
<li>
<p><strong>Packaging</strong>: project packaging (as referred by the concept of the same name in Apache
Maven). start.spring.io can generate jar or war projects</p>
</li>
<li>
<p><strong>Java Version</strong>: the Java version to use</p>
</li>
<li>
<p><strong>Language</strong>: the programming language to use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you keep on scrolling, you&#8217;ll discover all the dependencies that you can find using the
search box on the right. You&#8217;ll probably notice that some dependencies are greyed out in
the UI, meaning that they aren&#8217;t available because they require a specific Spring Boot
version. We&#8217;ll tackle that in the next section.</p>
</div>
</div>
<div class="sect2">
<h3 id="getting-started-dependencies"><a class="anchor" href="#getting-started-dependencies"></a>3.2. Dependencies</h3>
<div class="paragraph">
<p>The UI allows you to select the Spring Boot version you want to use. You may want to be
conservative and keep the default which corresponds at all times to the latest stable
release. Or you may want to chose a milestone or snapshot of the next major
version. Either way, you&#8217;ll notice that certain dependencies become available and others
aren&#8217;t anymore when you change the version.</p>
</div>
<div class="paragraph">
<p>If you are searching for a dependency that you know to be available and you get no result,
it&#8217;s worth looking in the advanced section if that dependency is available in the Spring
Boot version that is currently selected.</p>
</div>
<div class="paragraph">
<p>You may find it is not the case with a message that looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>requires Spring Boot &gt;=1.0.0.RELEASE and &lt;1.5.0.RC1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Concretely, this defines a "version range" that states the dependency is deprecated and is
no longer available as of Spring Boot 1.5. You may want to check the release notes of the
related project to understand what your migration path can be. Alternatively, the message
could be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>requires Spring Boot &gt;=2.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>That version range means the dependency is not available with the current Spring Boot
generation. Obviously, if you select Spring Boot 2.0 (or later if available), you&#8217;ll be
able to select that dependency.</p>
</div>
</div>
<div class="sect2">
<h3 id="getting-started-tuning-defaults"><a class="anchor" href="#getting-started-tuning-defaults"></a>3.3. Tuning default values</h3>
<div class="paragraph">
<p>The Initializr service is configured to offer default values so that you can generate a
new project with minimum fuss. Maybe you are a Kotlin fan? Or a Gradle fan? Currently
start.spring.io defaults to Java and Maven but it also allows you to tune these defaults
easily.</p>
</div>
<div class="paragraph">
<p>You can share or bookmark URLs that will automatically customize form inputs. For
instance, the following URL changes the default to use Kotlin and Gradle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>https://start.spring.io/#!language=kotlin&amp;type=gradle-project</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following attributes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Programming language: <code>language</code> (<code>java</code>, <code>groovy</code> or <code>kotlin</code>)</p>
</li>
<li>
<p>Java version: <code>javaVersion</code> (<code>1.8</code>, <code>11</code>)</p>
</li>
<li>
<p>Project type: <code>type</code> (<code>maven-project</code>, <code>gradle-project</code>)</p>
</li>
<li>
<p>Packaging: <code>packaging</code> (<code>jar</code>, <code>war</code>)</p>
</li>
<li>
<p>Group: <code>groupId</code></p>
</li>
<li>
<p>Artifact: <code>artifactId</code></p>
</li>
<li>
<p>Name: <code>name</code></p>
</li>
<li>
<p>Description: <code>description</code></p>
</li>
<li>
<p>Package Name: <code>packageName</code></p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The same default rules will apply if a property is overridden. For instance, if the
Group is customized, it will automatically customize the root package as well.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Boot version and the list of dependencies cannot be customized that way
as they evolve quite frequently.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="command-line"><a class="anchor" href="#command-line"></a>4. Command line support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also generate a project in a shell using <code>cURL</code> or <code>HTTPie</code>. To discover the
available options of a particular instance, simply "curl it", i.e. if you have <code>curl</code>
installed invoke <code>curl start.spring.io</code> on the command-line (or alternatively
<code>http start.spring.io</code> if you prefer to use <code>HTTPie</code>).</p>
</div>
<div class="paragraph">
<p>The result is a textual representation of the capabilities of the service that are split
in three sections:</p>
</div>
<div class="paragraph">
<p>First, a table that describes the available project&#8217;s types. On the default instance,
you&#8217;ll find the <code>maven-project</code> and <code>gradle-project</code> we&#8217;ve discussed above but you&#8217;ll
also be able to generate only a build script rather than an entire project.</p>
</div>
<div class="paragraph">
<p>Then, a table that describes the available parameters. For the most part, these are the
same options as the ones available in the web UI. There are, however, a few additional
ones:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>applicationName</code> can be used to define the name of the application, disabling the
algorithm that infer it based on the <code>name</code> parameter</p>
</li>
<li>
<p><code>baseDir</code> can be used to create a base directory in the archive so that you can extract
the generated zip without creating a directory for it first</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Finally, the list of dependencies are defined. Each entry provides the identifier that
you&#8217;ll have to use if you want to select the dependency, a description and the Spring Boot
version range, if any.</p>
</div>
<div class="paragraph">
<p>Alongside the capabilities of the service, you&#8217;ll also find a few examples that help you
understand how you can generate a project. These are obviously tailored to the client that
you are using.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s assume that you want to generate a "my-project.zip" project based on Spring Boot
<code>1.5.2.RELEASE</code>, using the <code>web</code> and <code>devtools</code> dependencies (remember, those two ids are
displayed in the capabilities of the service):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl https://start.spring.io/starter.zip -d dependencies=web,devtools \
           -d bootVersion=1.5.2.RELEASE -o my-project.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you extract <code>my-project.zip</code>, you&#8217;ll notice a few differences compared to what happens
with the web UI:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The project will be extracted in the current directory (the web UI adds a base directory
automatically with the same name as the one of the project)</p>
</li>
<li>
<p>The name of the project is not <code>my-project</code> (the <code>-o</code> parameter has no impact on the
name of the project)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The exact same project can be generated using the <code>http</code> command as well:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ http https://start.spring.io/starter.zip dependencies==web,devtools \
           bootVersion==1.5.1.RELEASE -d</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>HTTPie</code> reads the same hint as the browser so it will store a <code>demo.zip</code> file in
the current directory, with the same differences discussed above.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ide"><a class="anchor" href="#ide"></a>5. IDEs support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Initializr is also integrated in all major Java IDEs and allows you to create and
import a new project without having to leave the IDE for the command-line or the web UI.</p>
</div>
<div class="paragraph">
<p>The following IDEs have dedicated support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Eclipse/STS</p>
</li>
<li>
<p>IntelliJ IDEA (Ultimate Edition)</p>
</li>
<li>
<p>NetBeans (using the <a href="http://plugins.netbeans.org/plugin/67888/nb-springboot">NB SpringBoot plugin</a>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Refer to the documentation of your favorite IDE for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-boot-cli"><a class="anchor" href="#spring-boot-cli"></a>6. Spring Boot CLI support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>spring</code> command line tool defines an <code>init</code> command that allows you to create a
project using Spring Initializr.</p>
</div>
<div class="paragraph">
<p>Check <a href="http://docs.spring.io/spring-boot/docs/2.1.2.RELEASE/reference/htmlsingle/#cli-init">the documentation for more details</a>.</p>
</div>
</div>
</div>
<h1 id="configuration-guide" class="sect0"><a class="anchor" href="#configuration-guide"></a>Configuration Guide</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes how you can create your own instance of the service and tune it for
your needs, and also how you can configure an existing instance. You&#8217;ll also find some
advanced tips to make sure the available options are consistent with the chosen Spring
Boot generation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-instance"><a class="anchor" href="#create-instance"></a>7. Creating your own instance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Initializr is split across three main modules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>initializr-generator</code>: standalone project generation library that can be reused in
many environments (including embedded in your own project)</p>
</li>
<li>
<p><code>initializr-web</code>: API endpoints and web interface</p>
</li>
<li>
<p><code>initializr-actuator</code>: optional module to provide statistics and metrics on project
generation</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because it contains several auto-configurations, creating your own instance is quite easy,
actually you could get started using Spring Initializr itself to generate a starting point!</p>
</div>
<div class="paragraph">
<p>Create a new project with the <code>web</code> dependency and add the following dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.spring.initializr&lt;/groupId&gt;
    &lt;artifactId&gt;initializr-web&lt;/artifactId&gt;
    &lt;version&gt;0.7.0.RELEASE&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you are using Gradle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">implementation("io.spring.initializr:initializr-web:0.7.0.RELEASE")</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Spring Initializr releases are not available on Maven Central so you will need to
configure the build to add an extra repository at <code><a href="https://repo.spring.io/release" class="bare">repo.spring.io/release</a></code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you start the application, you&#8217;ll see the familiar interface but none of the drop down
lists have values (except the one for the Spring Boot version, we will
<a href="#create-instance-boot-versions">come back to that later</a>). In the rest of this section,
we will configure those basic settings.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Most of the settings are configured via <code>application.properties</code> using the <code>initializr</code>
namespace. Because the configuration is highly hierarchical, we recommend using the yaml
format that is more readable for such structure. If you agree, go ahead and rename
<code>application.properties</code> to <code>application.yml</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="create-instance-basic-settings"><a class="anchor" href="#create-instance-basic-settings"></a>7.1. Configuring basic settings</h3>
<div class="paragraph">
<p>Most of the drop-down lists are configured via a simple list-based structure where each
entry has an <code>id</code>, a <code>name</code> and whether that entry is the default or not. If no <code>name</code> is
provided, the <code>id</code> is used instead.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s configure the languages and the Java versions we want to support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  javaVersions:
    - id: 9
      default: false
    - id: 1.8
      default: true
  languages:
    - name: Java
      id: java
      default: true
    - name: Kotlin
      id: kotlin
      default: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you click on the "Switch to the full version" link, the two drop down lists now offer
the options and default values defined above.</p>
</div>
<div class="paragraph">
<p>Spring Initializr supports <code>java</code>, <code>groovy</code> and <code>kotlin</code> and additional languages can be
added in your own customization.</p>
</div>
<div class="paragraph">
<p>The available packagings are also configurable that way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  packagings:
    - name: Jar
      id: jar
      default: true
    - name: War
      id: war
      default: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>These two packaging types are the only one explicitly supported at the moment.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-instance-boot-versions"><a class="anchor" href="#create-instance-boot-versions"></a>7.2. Configuring available Spring Boot versions</h3>
<div class="paragraph">
<p>If you look at <a href="http://projects.spring.io/spring-boot">the project home page for Spring
Boot</a>, the latest versions are displayed. And you&#8217;ve probably noticed that they match the
drop down list that you automatically get with a default instance of the Initializr. The
reason for that is that Spring Initializr calls an API on spring.io to retrieve the
latest versions automatically. This makes sure that you always get the latest available
versions.</p>
</div>
<div class="paragraph">
<p>If you are behind a proxy, or need to customize the <code>RestTemplate</code> that is used behind the
scenes, you can define a <code>RestTemplateCustomizer</code> bean in your configuration. For more
details, <a href="http://docs.spring.io/spring-boot/docs/2.1.2.RELEASE/reference/htmlsingle/#boot-features-restclient-customization">check the
documentation</a>.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t want the version to be upgraded automatically, you need to override the
<code>InitializrMetadataProvider</code> bean to provide your own metadata for the service. For
instance, you could swap to an implementation that always returns the contents of static
<code>application.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public InitializrMetadataProvider initializrMetadataProvider(
        InitializrProperties properties) {
    InitializrMetadata metadata = InitializrMetadataBuilder
            .fromInitializrProperties(properties).build();
    return new SimpleInitializrMetadataProvider(metadata);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The thing to remember is that, by default, you don&#8217;t have to worry about upgrading your
instance when a new Spring Boot version is released. However, you may need to
<a href="#create-instance-advanced-config-caching">configure caching</a> to avoid requesting that
service too often.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-instance-types"><a class="anchor" href="#create-instance-types"></a>7.3. Configuring available project types</h3>
<div class="paragraph">
<p>The available project types mostly define the structure of the generated project and its
build system. Once a project type is selected, the related action is invoked to generate
the project.</p>
</div>
<div class="paragraph">
<p>By default, Spring Initializr exposes the following resources (all accessed via HTTP GET):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>/pom.xml</code> generate a Maven <code>pom.xml</code></p>
</li>
<li>
<p><code>/build.gradle</code> generate a Gradle build</p>
</li>
<li>
<p><code>/starter.zip</code> generate a complete project structure archived in a zip</p>
</li>
<li>
<p><code>/starter.tgz</code> generate a complete project structure archived in a tgz</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each type also defines one or more <strong>tags</strong> that provides additional metadata entries to
qualify the entry. The following standard tags exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>build</code>: the name of the build system to use (e.g. <code>maven</code>, <code>gradle</code>)</p>
</li>
<li>
<p><code>format</code>: the format of the project (e.g. <code>project</code> for a full project, <code>build</code> for just
a build file).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the HTML UI filters all the available types to only display the ones that have
a <code>format</code> tag with value <code>project</code>.</p>
</div>
<div class="paragraph">
<p>You can of course implement additional endpoints that generate whatever project structure
you need but, for now, we&#8217;ll simply configure our instance to generate a Gradle or a Maven
project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  types:
    - name: Maven Project
      id: maven-project
      description: Generate a Maven based project archive
      tags:
        build: maven
        format: project
      default: true
      action: /starter.zip
    - name: Gradle Project
      id: gradle-project
      description: Generate a Gradle based project archive
      tags:
        build: gradle
        format: project
      default: false
      action: /starter.zip</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you intend to build a custom client against your service, you can add as many
tags as you want, and process them in the client in a way that makes sense for your users.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For instance, the spring boot CLI uses them as a shortcut to the full type id. So rather
than having to create a Gradle project as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ spring init --type=gradle-project my-project.zip</pre>
</div>
</div>
<div class="paragraph">
<p>You can simply define a more convenient build parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ spring init --build=gradle my-project.zip</pre>
</div>
</div>
<div class="paragraph">
<p>With that configuration, you should be able to generate your first project,
congratulations! Let&#8217;s now add dependencies so that you can start searching for them.</p>
</div>
</div>
<div class="sect2">
<h3 id="create-instance-dependencies"><a class="anchor" href="#create-instance-dependencies"></a>7.4. Configuring dependencies</h3>
<div class="paragraph">
<p>The most basic <code>dependency</code> is composed of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>An <code>id</code> used in clients to refer to it</p>
</li>
<li>
<p>The full maven coordinates of the dependency (<code>groupId</code> and <code>artifactId</code>)</p>
</li>
<li>
<p>A display <code>name</code> (used in the UI and the search results)</p>
</li>
<li>
<p>A <code>description</code> can (and should) be added to provide more information about the
dependency</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Spring Initializr automatically considers that a dependency without maven coordinates
defines an official Spring Boot starter. In such a case, the <code>id</code> is used to infer the
<code>artifactId</code>.</p>
</div>
<div class="paragraph">
<p>For instance, the following configures the <code>spring-boot-starter-web</code> Starter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Web
      content:
        - name: Web
          id: web
          description: Full-stack web development with Tomcat and Spring MVC</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each dependency is contained in a <em>group</em> that gathers dependencies sharing a common
surface area or any other form of grouping. In the example above, a <code>Web</code> group holds our
unique dependency. A group can also provide default values for various settings, see the
<a href="#howto-group-share-settings">dedicated how-to</a> for more details.</p>
</div>
<div class="paragraph">
<p>In our <code>spring-boot-starter-web</code> example above, the dependency is <em>managed</em> by Spring
Boot so there is no need to provide a <code>version</code> attribute for it. You&#8217;ll surely need to
define additional dependencies that are not provided by Spring Boot and we strongly
recommend you to use a <a href="#create-instance-boms">Bill Of Materials (or BOM)</a>.</p>
</div>
<div class="paragraph">
<p>If no BOM is available you can specify a version directly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Tech
      content:
        - name: Acme
          id: acme
          groupId: com.example.acme
          artifactId: acme
          version: 1.2.0.RELEASE
          description: A solid description for this dependency</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you add this configuration and search for "acme" (or "solid"), you&#8217;ll find this extra
entry; generating a maven project with it should add the following to the pom:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;com.example.acme&lt;/groupId&gt;
    &lt;artifactId&gt;acme&lt;/artifactId&gt;
    &lt;version&gt;1.2.0.RELEASE&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The rest of this section will detail the other configuration options.</p>
</div>
<div class="sect3">
<h4 id="dependencies-version-range"><a class="anchor" href="#dependencies-version-range"></a>7.4.1. Availability (version range)</h4>
<div class="paragraph">
<p>By default, a dependency is available regardless of the Spring Boot version you have
selected. If you need to restrict a dependency to a certain Spring Boot generation you
can add a <code>versionRange</code> attribute to its definition. A version range is a range of
versions of Spring Boot which are valid in combination with it. The versions are <strong>not</strong>
applied to the dependency itself, but rather used to filter out the dependency, or modify
it, when different versions of Spring Boot are selected for the generated project.</p>
</div>
<div class="paragraph">
<p>A typical version is composed of four parts: a major revision, a minor revision, a patch
revision and a qualifier. Qualifiers are ordered as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>M</code> for milestones (e.g. <code>2.0.0.M1</code> is the first milestone of the upcoming 2.0.0
release): can be seen as "beta" release</p>
</li>
<li>
<p><code>RC</code> for release candidates (e.g. <code>2.0.0.RC2</code> is the second release candidate of
upcoming 2.0.0 release)</p>
</li>
<li>
<p><code>RELEASE</code> for general availability (e.g. <code>2.0.0.RELEASE</code> is 2.0.0 proper)</p>
</li>
<li>
<p><code>BUILD-SNAPSHOT</code> for development build (<code>2.1.0.BUILD-SNAPSHOT</code> represents the latest
available development build of the upcoming 2.1.0 release).</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
snapshots are in a bit special in that scheme as they always represents the "latest
state" of a release. <code>M1</code> represents the most oldest version for a given major, minor and
patch revisions.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A version range has a lower and an upper bound, and if the bound is inclusive it is
denoted as a square bracket (<code>[</code> or <code>]</code>), otherwise it is exclusive and denoted by a
parenthesis (<code>(</code> or <code>)</code>). For instance <code>[1.1.6.RELEASE,1.3.0.M1)</code> means from all versions
from <code>1.1.6.RELEASE</code> up to but not including <code>1.3.0.M1</code> (concretely no including the
<code>1.3.x</code> line and after).</p>
</div>
<div class="paragraph">
<p>A version range can be a single value, e.g. <code>1.2.0.RELEASE</code>, which is short for "this
version or greater". It is an inclusive lower bound with an implied infinite upper bound.</p>
</div>
<div class="paragraph">
<p>If you need to specify "the latest release" in a given line, you can use a <code>x</code> rather than
an hard-coded version. For instance, <code>1.4.x.BUILD-SNAPSHOT</code> is the latest snapshot build
of the 1.4.x line. For instance, if you want to restrict a dependency from <code>1.1.0.RELEASE</code>
to the latest stable release of the 1.3.x line, you&#8217;d use <code>[1.1.0.RELEASE,1.3.x.RELEASE]</code>.</p>
</div>
<div class="paragraph">
<p>Snapshots are naturally ordered higher than released versions, so if you are looking to
match a dependency to only the latest snapshots of Spring Boot, you could use a version
range of <code>1.5.x.BUILD-SNAPSHOT</code> (assuming 1.5 was the latest).</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Remember to quote the values of a version range in YAML configuration files (with
double quotes "").
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See below in the section on <a href="#howto-link-boot-version">linking versions</a> for more examples
and idioms.</p>
</div>
</div>
<div class="sect3">
<h4 id="dependencies-repository"><a class="anchor" href="#dependencies-repository"></a>7.4.2. Repository</h4>
<div class="paragraph">
<p>If the dependency is not available on Maven Central (or whatever default repository that
is configured on your end), you can also add a reference to a repository. A repository is
declared at the top level (under <code>env</code>) and given an id via the key in the configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  env:
    repositories:
      my-api-repo-1:
        name: repo1
        url: http://example.com/repo1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once defined, the repository can then be referred back to in a dependency</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Other
      content:
        - name: Foo
          groupId: org.acme
          artifactId: foo
          version: 1.3.5
          repository: my-api-repo-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>It is usually preferable to have a BOM for every dependency, and attach the repository to
the BOM instead.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The snapshots and milestones repositories on <code>repo.spring.io</code> are automatically
available with the <code>spring-snapshots</code> and <code>spring-milestones</code> identifiers respectively.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="create-instance-boms"><a class="anchor" href="#create-instance-boms"></a>7.5. Configuring Bill of Materials</h3>
<div class="paragraph">
<p>A Bill of Materials (BOM) is a special <code>pom.xml</code>, deployed to a Maven repository, and used
to control dependency management for a set of related artifacts. In the Spring Boot
ecosystem we usually use the suffix <code>-dependencies</code> on the artifact id of a BOM. In other
projects we see <code>-bom</code>. It is recommended that all dependencies are included in a BOM of
some sort, since they provide nice high level features for users of the dependency. It is
also important that 2 BOMs used in a project do not contain conflicting versions for the
same dependency, so the best practice is to look at the existing BOMs in the Initializr
before you add a new one, and make sure that you aren&#8217;t adding a conflict.</p>
</div>
<div class="paragraph">
<p>In the Initializr a BOM is declared at the <code>env</code> level, and given an id through the
configuration key. Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  env:
    boms:
      my-api-bom:
        groupId: org.acme
        artifactId: my-api-dependencies
        version: 1.0.0.RELEASE
        repositories: my-api-repo-1</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a BOM requires a special, non-default repository, then it can be referred to here,
instead of having to explicitly list the repository again for each dependency. A
dependency, or a dependency group, can declare that it requires the use of one or more
BOMs by referring to the id:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Other
      content:
        - name: My API
          id : my-api
          groupId: org.acme
          artifactId: my-api
          bom: my-api-bom</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="dependencies-mappings"><a class="anchor" href="#dependencies-mappings"></a>7.5.1. Map coordinates according to the Spring Boot version</h4>
<div class="paragraph">
<p>In addition to a Spring Boot version range for the dependency or a BOM, you can configure
the version relationships at a finer grained level using version mappings. A dependency or
BOM has a list of "mappings", each of which consists of a version range, and a set of one
or more dependency properties to override for those versions of Spring Boot. You can use a
mapping to switch the version of a dependency, or (better) the BOM, or to change its
artifact id (if the project changed its packaging) for instance.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a BOM with mappings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  env:
    boms:
      cloud-bom:
        groupId: com.example.foo
        artifactId: acme-foo-dependencies
        mappings:
          - versionRange: "[1.2.3.RELEASE,1.3.0.RELEASE)"
            groupId: com.example.bar
            artifactId: acme-foo-bom
            version: Arcturus.SR6
          - versionRange: "[1.3.0.RELEASE,1.4.0.RELEASE)"
            version: Botein.SR7
          - versionRange: "[1.4.0.RELEASE,1.5.x.RELEASE)"
            version: Castor.SR6
          - versionRange: "[1.5.0.RELEASE,1.5.x.BUILD-SNAPSHOT)"
            version: Diadem.RC1
            repositories: spring-milestones
          - versionRange: "1.5.x.BUILD-SNAPSHOT"
            version: Diadem.BUILD-SNAPSHOT
            repositories: spring-snapshots,spring-milestones</code></pre>
</div>
</div>
<div class="paragraph">
<p>The primary use case here is to map Spring Boot versions to the preferred or supported
versions of the Foo project. You can also see that for the milestone and snapshot BOMs,
additional repositories are declared because those artifacts are not in the default
repository. Initially the BOM was identified as <code>com.example.bar:acme-foo-bom</code> and renamed
as of <code>Botein</code> to <code>com.example.foo:acme-foo-dependencies</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
We also use the <code>x</code> trick in version ranges to avoid updating the range every time
a new Spring Boot 1.5 bug fix release is available
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See below in the section on <a href="#howto-link-boot-version">linking versions</a> for more examples.</p>
</div>
</div>
<div class="sect3">
<h4 id="dependencies-alias"><a class="anchor" href="#dependencies-alias"></a>7.5.2. Aliases</h4>
<div class="paragraph">
<p>A dependency has an id (e.g. "web-services"), but it could be necessary to provide a new
id and still be able to serve request from client using the now deprecated id. To do so,
an alias can be defined for ths dependency;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Other
      content:
        - name: Web Services
          id: web-services
          aliases:
            - ws</code></pre>
</div>
</div>
<div class="paragraph">
<p>The same project can now be generated with <code>dependencies=ws</code> or
<code>dependencies=web-services</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="dependencies-facet"><a class="anchor" href="#dependencies-facet"></a>7.5.3. Facets</h4>
<div class="paragraph">
<p>A "facet" is a label on a dependency which is used to drive a code modification in the
generated project. In the standard Initializr generator, there is only one facet that is
actually used (<code>web</code>), but custom installations might choose to use it for their own
purposes. The <code>web</code> facet is used to drive the inclusion of a dependency with id <code>web</code>
(defaulting to <code>spring-boot-starter-web</code> if such dependency is not present) when any other
dependency with that facet is included.</p>
</div>
<div class="paragraph">
<p>The value of the "facets" property of a dependency is a list of strings.</p>
</div>
</div>
<div class="sect3">
<h4 id="create-instance-dependencies-link"><a class="anchor" href="#create-instance-dependencies-link"></a>7.5.4. Links</h4>
<div class="paragraph">
<p>Links can be used to provide descriptive and hyperlink data to guide to user on how to
learn more about a dependency. A dependency has a "links" property which is a list of
<code>Link</code>. Each link has a <code>rel</code> label to identify it, an <code>href</code> and an optional (but
recommended) <code>description</code>.</p>
</div>
<div class="paragraph">
<p>The following <code>rel</code> value are currently officially supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>guide</code>: the link points to a guide describing how to use the related dependency. It
can be a tutorial, a how-to or typically a guide available on <a href="https://spring.io/guides" class="bare">spring.io/guides</a></p>
</li>
<li>
<p>reference: the link points to a section of a developer guide typically or any page that
documents how to use the dependency</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The url can be templated if its actual value can change according to the environment. An
URL parameter is specified with curly braces, something like
<code><a href="https://example.com/doc/{bootVersion}/section" class="bare">example.com/doc/{bootVersion}/section</a></code> defines a <code>bootVersion</code> parameter.</p>
</div>
<div class="paragraph">
<p>The following attributes are currently supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>bootVersion</code>: the Spring Boot version that is currently active</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Here is an example that adds two links to the <code>acme</code> dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Tech
      content:
        - name: Acme
          id: acme
          groupId: com.example.acme
          artifactId: acme
          version: 1.2.0.RELEASE
          description: A solid description for this dependency
          links:
            - rel: guide
              href: https://com.example/guides/acme/
              description: Getting started with Acme
            - rel: reference
              href: http://docs.example.com/acme/html</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="create-instance-dependencies-search"><a class="anchor" href="#create-instance-dependencies-search"></a>7.5.5. Improve search results</h4>
<div class="paragraph">
<p>Each dependency can have a <code>weight</code> (a number &gt;=0) and also <code>keywords</code> (list of string)
that are used to prioritize them in the search feature in the web UI. If you type one of
the keywords into the "Dependencies" box in the UI, those dependencies will be listed
below, in order of decreasing weight, if they have one (unweighted dependencies come
last).</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-howto"><a class="anchor" href="#configuration-howto"></a>8. &#8216;How-to&#8217; guides</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides answers to some common &#8216;how do I do that&#8230;&#8203;&#8217; type of questions
that often arise when configuring Spring Initializr.</p>
</div>
<div class="sect2">
<h3 id="howto-add-a-new-dependency"><a class="anchor" href="#howto-add-a-new-dependency"></a>8.1. Add a new dependency</h3>
<div class="paragraph">
<p>To add a new dependency, first identify the Maven co-ordinates of the dependency you want
to add (<code>groupId:artifactId:version</code>) and then check which versions of Spring Boot it works
with. If there are multiple versions that work with different versions of Spring Boot,
then that&#8217;s fine too.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If there is a published BOM that manages the version of you dependency, then add that
first, in the <code>env</code> section (see <a href="#create-instance-boms">Configuring Bill of Materials</a>).</p>
</li>
<li>
<p>Then configure the dependency, fitting it into an existing group if you can, otherwise
creating a new group.</p>
</li>
<li>
<p>If there is a BOM then omit the version.</p>
</li>
<li>
<p>If there is a Spring Boot version range (or min or max) that you need for this
dependency, add that as a <a href="#howto-link-boot-version">linked version</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="howto-override-a-version"><a class="anchor" href="#howto-override-a-version"></a>8.2. Override the version of a dependency</h3>
<div class="paragraph">
<p>Sometimes it happens that the BOM that normally manages your dependency version is in
conflict with the newest version. Or maybe this is the case for only a range of Spring
Boot versions. Or maybe there just is no BOM, or it&#8217;s not worth creating one for just one
dependency. In these cases you can specify the version manually for a dependency either
at the top level, or in a
<a href="#howto-link-boot-version">version mapping</a>. At the top level it looks like this (just
a <code>version</code> property in a dependency):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Tech
      content:
        - name: Acme
          id: acme
          groupId: com.example.acme
          artifactId: acme
          version: 1.2.0.RELEASE
          description: A solid description for this dependency</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="howto-link-boot-version"><a class="anchor" href="#howto-link-boot-version"></a>8.3. Link a Boot version to a version of your dependency</h3>
<div class="paragraph">
<p>If your dependency requires a specific version of Spring Boot, ot different versions of
Spring Boot require different versions of your dependency there are a couple of mechanisms
to configure that.</p>
</div>
<div class="paragraph">
<p>The simplest is to put a <code>versionRange</code> in the dependency declaration. This is a range of
versions of Spring Boot, not of your dependency. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Stuff
      content:
        - name: Foo
          id: foo
          ...
          versionRange: 1.2.0.M1
        - name: Bar
          id: bar
          ...
          versionRange: "[1.5.0.RC1,2.0.0.M1)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <code>Foo</code> is available for Spring Boot 1.2.0 (or any milestone of 1.2.0) or
greater, and <code>Bar</code> is available for Spring Boot 1.5.0 up to, but not including 2.0.0.</p>
</div>
<div class="paragraph">
<p>If different versions of your dependency work with different versions of Spring Boot,
that&#8217;s when you need the <code>mappings</code> property. A mapping is a combination of a
<code>versionRange</code> and some or all of the other properties of the dependency, overriding
the values defined at the top level. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Stuff
      content:
        - name: Foo
          id: foo
          groupId: org.acme.foo
          artifactId: foo-spring-boot-starter
          versionRange: 1.3.0.RELEASE
          bom: cloud-task-bom
          mappings:
            - versionRange: "[1.3.0.RELEASE,1.3.x.RELEASE]"
              artifactId: foo-starter
            - versionRange: "1.4.0.RELEASE"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, The artifact of <code>foo</code> was changed to <code>foo-spring-boot-starter</code> as of the
version that is compatible with Spring Boot 1.4. This mapping instruct that if Spring Boot
1.3.x is selected, the artifact Id should be set to <code>foo-starter</code>.</p>
</div>
<div class="paragraph">
<p>A mapping can also be applied to a BOM declaration. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  env:
    boms:
      my-api-bom:
        groupId: org.acme
        artifactId: my-api-bom
        additionalBoms: ['my-api-dependencies-bom']
        mappings:
          - versionRange: "[1.0.0.RELEASE,1.1.6.RELEASE)"
            version: 1.0.0.RELEASE
            repositories: my-api-repo-1
          - versionRange: "1.2.1.RELEASE"
            version: 2.0.0.RELEASE
            repositories: my-api-repo-2</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example Spring Boot versions up to 1.1.6 select version 1.0.0 of the BOM, and set
a different repository. Spring Boot versions 1.2.1 and above select 2.0.0 of the BOM and
yet another repository.</p>
</div>
</div>
<div class="sect2">
<h3 id="howto-add-snapshot-repository"><a class="anchor" href="#howto-add-snapshot-repository"></a>8.4. Configure a snapshot repository</h3>
<div class="paragraph">
<p>A dependency, or a BOM, might require the use of a specific repository, if the default one
(usually Maven Central) does not contain the artifacts. Normally, the best place to
declare that is in the BOM configuration, but if there isn&#8217;t a BOM then you can put it in
the dependency itself. You can also use a Spring Boot <a href="#You can declare a
repository">version mapping</a> to override the default repository for a dependency or BOM.</p>
</div>
</div>
<div class="sect2">
<h3 id="howto-dependency-starter-flag"><a class="anchor" href="#howto-dependency-starter-flag"></a>8.5. Make sure a regular dependency brings the base starter</h3>
<div class="paragraph">
<p>If a dependency does not stand on its own (and specifically if it does not depend on an
existing Spring Boot starter) you can flag it as a "non starter":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Stuff
      content:
        - name: Lib
          id: lib
          groupId: com.acme
          artifactId: lib
          starter:false</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a project is generated that only has dependencies with this flag set, then the base
Spring Boot starter is added as well.</p>
</div>
</div>
<div class="sect2">
<h3 id="howto-group-share-settings"><a class="anchor" href="#howto-group-share-settings"></a>8.6. Share common dependency settings in a group</h3>
<div class="paragraph">
<p>A dependency group is a hint for user interface implementations, to group things together
for users when they are selecting dependencies. It is also a convenient way to share
settings between dependencies because every dependency inherits all the settings. The most
common settings in a group are the <code>groupId</code>, <code>versionRange</code> and <code>bom</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">initializr:
  dependencies:
    - name: Stuff
      bom: stuff-bom
      versionRange: "[1.3.0.RELEASE,2.0.0.M1)"
      content:
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>These dependencies, by default, will be available only for Spring Boot versions 1.3 up to
2.0 (excluded) and will bring in the <code>stuff-bom</code> BOM.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-instance-advanced-config"><a class="anchor" href="#create-instance-advanced-config"></a>9. Advanced configuration</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="create-instance-advanced-config-caching"><a class="anchor" href="#create-instance-advanced-config-caching"></a>9.1. Caching configuration</h3>
<div class="paragraph">
<p>If you use the service, you&#8217;ll notice that the logs have lots of entries with the message
<code>Fetching boot metadata from <a href="https://spring.io/project_metadata/spring-boot" class="bare">spring.io/project_metadata/spring-boot</a></code>. To avoid
checking for the latest Spring Boot versions too often, you should enable caching on your
service. Spring Initializr has some auto-configuration to apply the proper caches if you
are willing to use a JCache (JSR-107) implementation.</p>
</div>
<div class="paragraph">
<p>Add the <code>javax.cache:cache-api</code> and your favorite JCache implementation and simply enable
caching by adding <code>@EnableCaching</code> to your <code>@SpringBootApplication</code>. For instance, you
could use <code>ehcache</code> by adding the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;javax.cache&lt;/groupId&gt;
    &lt;artifactId&gt;cache-api&lt;/artifactId&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.ehcache&lt;/groupId&gt;
    &lt;artifactId&gt;ehcache&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you are using Gradle:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">implementation("javax.cache:cache-api")
implementation("org.ehcache:ehcache")</code></pre>
</div>
</div>
<div class="paragraph">
<p>You&#8217;ll notice that the log entry is much more rare. If you do not want to use JSR-107, you
should configure the cache yourselves. Here are the caches used by the application (each
one will require some configuration to get it working):</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Cache configuration</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">cache name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializr.metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache the full metadata of the service. When the metadata expires, it is fully resolved
again (including a check on spring.io for the latest Spring Boot versions). Adapt the
expiration settings accordingly.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializr.dependency-metadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache dependency-specific metadata.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>initializr.project-resources</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Cache resources that are used to generate projects.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<h1 id="api-guide" class="sect0"><a class="anchor" href="#api-guide"></a>API Guide</h1>
<div class="sect1">
<h2 id="metadata-format"><a class="anchor" href="#metadata-format"></a>10. Metadata Format</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes the hal/json structure of the metadata exposed by the
initializr. Such metadata can be used by third party clients to provide a list of
options and default settings that can be used to request the creation of a project.</p>
</div>
<div class="paragraph">
<p>A third-party client is advised to set a <code>User-Agent</code> header for <strong>each</strong> request
sent to the service. A good structure for a user agent is <code>clientId/clientVersion</code>
(i.e. <code>foo/1.2.0</code> for the "foo" client and version <code>1.2.0</code>).</p>
</div>
<div class="sect2">
<h3 id="content"><a class="anchor" href="#content"></a>10.1. Content</h3>
<div class="paragraph">
<p>Any third party client can retrieve the capabilities of the service by issuing a
<code>GET</code> on the root URL using the following <code>Accept</code> header:
<code>application/vnd.initializr.v2.1+json</code>. Please note that the metadata may evolve in a
non backward compatible way in the future so adding this header ensures the service
returns the metadata format you expect.</p>
</div>
<div class="paragraph">
<p>This is an example output for a service running at <code><a href="https://start.spring.io" class="bare">start.spring.io</a></code>:</p>
</div>
<div class="listingblock">
<div class="title">request</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET / HTTP/1.1
Accept: application/vnd.initializr.v2.1+json
Host: start.spring.io</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">response</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 4874
ETag: "7884ff1cd4c266dedd7fb74f3c0defcf"
Content-Type: application/vnd.initializr.v2.1+json
Cache-Control: max-age=604800

{
  "_links" : {
    "maven-build" : {
      "href" : "http://start.spring.io/pom.xml?type=maven-build{&amp;dependencies,packaging,javaVersion,language,bootVersion,groupId,artifactId,version,name,description,packageName}",
      "templated" : true
    },
    "maven-project" : {
      "href" : "http://start.spring.io/starter.zip?type=maven-project{&amp;dependencies,packaging,javaVersion,language,bootVersion,groupId,artifactId,version,name,description,packageName}",
      "templated" : true
    },
    "gradle-build" : {
      "href" : "http://start.spring.io/build.gradle?type=gradle-build{&amp;dependencies,packaging,javaVersion,language,bootVersion,groupId,artifactId,version,name,description,packageName}",
      "templated" : true
    },
    "gradle-project" : {
      "href" : "http://start.spring.io/starter.zip?type=gradle-project{&amp;dependencies,packaging,javaVersion,language,bootVersion,groupId,artifactId,version,name,description,packageName}",
      "templated" : true
    },
    "dependencies" : {
      "href" : "http://start.spring.io/dependencies{?bootVersion}",
      "templated" : true
    }
  },
  "dependencies" : {
    "type" : "hierarchical-multi-select",
    "values" : [ {
      "name" : "Core",
      "values" : [ {
        "id" : "web",
        "name" : "Web",
        "description" : "Web dependency description",
        "_links" : {
          "guide" : {
            "href" : "https://example.com/guide",
            "title" : "Building a RESTful Web Service"
          },
          "reference" : {
            "href" : "https://example.com/doc"
          }
        }
      }, {
        "id" : "security",
        "name" : "Security"
      }, {
        "id" : "data-jpa",
        "name" : "Data JPA"
      } ]
    }, {
      "name" : "Other",
      "values" : [ {
        "id" : "org.acme:foo",
        "name" : "Foo",
        "_links" : {
          "guide" : [ {
            "href" : "https://example.com/guide1"
          }, {
            "href" : "https://example.com/guide2",
            "title" : "Some guide for foo"
          } ],
          "reference" : {
            "href" : "https://example.com/{bootVersion}/doc",
            "templated" : true
          }
        }
      }, {
        "id" : "org.acme:bar",
        "name" : "Bar"
      }, {
        "id" : "org.acme:biz",
        "name" : "Biz",
        "versionRange" : "2.2.0.BUILD-SNAPSHOT"
      }, {
        "id" : "org.acme:bur",
        "name" : "Bur",
        "versionRange" : "[2.1.4.RELEASE,2.2.0.BUILD-SNAPSHOT)"
      }, {
        "id" : "my-api",
        "name" : "My API"
      } ]
    } ]
  },
  "type" : {
    "type" : "action",
    "default" : "maven-project",
    "values" : [ {
      "id" : "maven-build",
      "name" : "Maven POM",
      "action" : "/pom.xml",
      "tags" : {
        "build" : "maven",
        "format" : "build"
      }
    }, {
      "id" : "maven-project",
      "name" : "Maven Project",
      "action" : "/starter.zip",
      "tags" : {
        "build" : "maven",
        "format" : "project"
      }
    }, {
      "id" : "gradle-build",
      "name" : "Gradle Config",
      "action" : "/build.gradle",
      "tags" : {
        "build" : "gradle",
        "format" : "build"
      }
    }, {
      "id" : "gradle-project",
      "name" : "Gradle Project",
      "action" : "/starter.zip",
      "tags" : {
        "build" : "gradle",
        "format" : "project"
      }
    } ]
  },
  "packaging" : {
    "type" : "single-select",
    "default" : "jar",
    "values" : [ {
      "id" : "jar",
      "name" : "Jar"
    }, {
      "id" : "war",
      "name" : "War"
    } ]
  },
  "javaVersion" : {
    "type" : "single-select",
    "default" : "1.8",
    "values" : [ {
      "id" : "1.6",
      "name" : "1.6"
    }, {
      "id" : "1.7",
      "name" : "1.7"
    }, {
      "id" : "1.8",
      "name" : "1.8"
    } ]
  },
  "language" : {
    "type" : "single-select",
    "default" : "java",
    "values" : [ {
      "id" : "groovy",
      "name" : "Groovy"
    }, {
      "id" : "java",
      "name" : "Java"
    }, {
      "id" : "kotlin",
      "name" : "Kotlin"
    } ]
  },
  "bootVersion" : {
    "type" : "single-select",
    "default" : "2.1.4.RELEASE",
    "values" : [ {
      "id" : "2.2.0.BUILD-SNAPSHOT",
      "name" : "Latest SNAPSHOT"
    }, {
      "id" : "2.1.4.RELEASE",
      "name" : "2.1.4"
    }, {
      "id" : "1.5.17.RELEASE",
      "name" : "1.5.17"
    } ]
  },
  "groupId" : {
    "type" : "text",
    "default" : "com.example"
  },
  "artifactId" : {
    "type" : "text",
    "default" : "demo"
  },
  "version" : {
    "type" : "text",
    "default" : "0.0.1-SNAPSHOT"
  },
  "name" : {
    "type" : "text",
    "default" : "demo"
  },
  "description" : {
    "type" : "text",
    "default" : "Demo project for Spring Boot"
  },
  "packageName" : {
    "type" : "text",
    "default" : "com.example.demo"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The current capabilities are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Project dependencies: these are the <em>starters</em> really or actually any dependency
that we might want to add to the project.</p>
</li>
<li>
<p>Project types: these define the action that can be invoked on this service and a
description of what it would produce (for instance a zip holding a pre-configured
Maven project). Each type may have one more tags that further define what it
generates.</p>
</li>
<li>
<p>Packaging: the kind of projects to generate. This merely gives a hint to the
component responsible to generate the project (for instance, generate an executable
<em>jar</em> project).</p>
</li>
<li>
<p>Java version: the supported java versions</p>
</li>
<li>
<p>Language: the language to use (e.g. Java)</p>
</li>
<li>
<p>Boot version: the Spring Boot version to use</p>
</li>
<li>
<p>Additional basic information such as: <code>groupId</code>, <code>artifactId</code>,  <code>version</code>, <code>name</code>,
<code>description</code> and <code>packageName</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each top-level attribute (i.e. capability) has a standard format:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <code>type</code> attribute that defines the semantic of the attribute (see below).</p>
</li>
<li>
<p>A <code>default</code> attribute that defines either the default value or the reference to
the default value.</p>
</li>
<li>
<p>A <code>values</code> attribute that defines the set of acceptable values (if any). This can
be hierarchical (with <code>values</code> being held in <code>values</code>). Each item in a <code>values</code> array
can have an <code>id</code>, <code>name</code> and <code>description</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following attribute <code>type</code> are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>text</code>: defines a simple text value with no option.</p>
</li>
<li>
<p><code>single-select</code>: defines a simple value to be chosen amongst the specified options.</p>
</li>
<li>
<p><code>hierarchical-multi-select</code>: defines a hierarchical set of values (values in
values) with the ability to select multiple values.</p>
</li>
<li>
<p><code>action</code>: a special type that defines the attribute defining the action to use.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each action is defined as a HAL-compliant URL. For instance, the <code>maven-project</code> type
templated URL is defined as follows:</p>
</div>
<div class="listingblock">
<div class="title">Type link example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "href" : "http://start.spring.io/starter.zip?type=maven-project{&amp;dependencies,packaging,javaVersion,language,bootVersion,groupId,artifactId,version,name,description,packageName}",
  "templated" : true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use Spring HATEOAS and the <code>UriTemplate</code> helper in particular to generate an
URI from template variables. Note that the variables match the name of top-level
attribute in the metadata document. If you can&#8217;t parse such URI, the <code>action</code>
attribute of each type gives you the root action to invoke on the server. This
requires more manual handling on your end.</p>
</div>
<div class="sect3">
<h4 id="project-dependencies"><a class="anchor" href="#project-dependencies"></a>10.1.1. Project dependencies</h4>
<div class="paragraph">
<p>A dependency is usually the coordinates of a <em>starter</em> module but it can be just a regular
dependency. A typical dependency structure looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "Display name",
  "id": "org.acme.project:project-starter-foo",
  "description": "What starter foo does"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name is used as a display name to be shown in whatever UI used by the remote
client. The id can be anything, really as the actual dependency definition is
defined through configuration. If no id is defined, a default one is built using the
<code>groupId</code> and <code>artifactId</code> of the dependency. Note in particular that the version is
<strong>never</strong> used as part of an automatic id.</p>
</div>
<div class="paragraph">
<p>Each dependency belongs to a group. The idea of the group is to gather similar
dependencies and order them. Here is a value containing the <code>core</code> group to
illustrates the feature:</p>
</div>
<div class="listingblock">
<div class="title">Dependency group example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "name" : "Core",
  "values" : [ {
    "id" : "web",
    "name" : "Web",
    "description" : "Web dependency description",
    "_links" : {
      "guide" : {
        "href" : "https://example.com/guide",
        "title" : "Building a RESTful Web Service"
      },
      "reference" : {
        "href" : "https://example.com/doc"
      }
    }
  }, {
    "id" : "security",
    "name" : "Security"
  }, {
    "id" : "data-jpa",
    "name" : "Data JPA"
  } ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each dependency can have <em>links</em> (in a HAL-compliant format). Links are grouped by
"relations" that provide a semantic to the link. A link can also have a <em>title</em> and
its URI can be templated. At the moment, the only valid parameter is <code>bootVersion</code>.</p>
</div>
<div class="paragraph">
<p>The official relations are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>guide</code>: link to an how-to or guide that explain how to get started</p>
</li>
<li>
<p><code>reference</code>: link to a section of a reference guide (documentation)</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="project-types"><a class="anchor" href="#project-types"></a>10.1.2. Project types</h4>
<div class="paragraph">
<p>The <code>type</code> element defines what kind of project can be generated and how. For
instance, if the service exposes the capability to generate a Maven project, this
would look like this:</p>
</div>
<div class="listingblock">
<div class="title">Project type example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "id" : "maven-build",
  "name" : "Maven POM",
  "action" : "/pom.xml",
  "tags" : {
    "build" : "maven",
    "format" : "build"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should not rely on the output format depending that information. Always use the
response headers that define a <code>Content-Type</code> and also a <code>Content-Disposition</code>
header.</p>
</div>
<div class="paragraph">
<p>Note that each id has a related HAL-compliant link that can be used to generate a
proper URI based on template variables. The top-level <code>type</code> has, as any other
attribute, a <code>default</code> attribute that is a hint to select what the service consider
to be a good default.</p>
</div>
<div class="paragraph">
<p>The <code>action</code> attribute defines the endpoint the client should contact to actually
generate a project of that type if you can&#8217;t use the HAL-compliant url.</p>
</div>
<div class="paragraph">
<p>The <code>tags</code> object is used to categorize the project type and give <em>hints</em> to 3rd
party client. For instance, the <em>build</em> tag defines the build system the project is
going to use and the <em>format</em> tag defines the format of the generated content (i.e.
here a complete project vs. a build file. Note that the <code>Content-type</code> header of the
reply provides additional metadata).</p>
</div>
</div>
<div class="sect3">
<h4 id="packaging"><a class="anchor" href="#packaging"></a>10.1.3. Packaging</h4>
<div class="paragraph">
<p>The <code>packaging</code> element defines the kind of project that should be generated.</p>
</div>
<div class="listingblock">
<div class="title">Packaging example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "id" : "jar",
  "name" : "Jar"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The obvious values for this element are <code>jar</code> and <code>war</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="java-version"><a class="anchor" href="#java-version"></a>10.1.4. Java version</h4>
<div class="paragraph">
<p>The <code>javaVersion</code> element provides a list of possible java versions for the project:</p>
</div>
<div class="listingblock">
<div class="title">Java example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "id" : "1.6",
  "name" : "1.6"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="languages"><a class="anchor" href="#languages"></a>10.1.5. Languages</h4>
<div class="paragraph">
<p>The <code>language</code> element provides a list of possible languages for the project:</p>
</div>
<div class="listingblock">
<div class="title">Language example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "id" : "groovy",
  "name" : "Groovy"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="boot-version"><a class="anchor" href="#boot-version"></a>10.1.6. Boot version</h4>
<div class="paragraph">
<p>The <code>bootVersion</code> element provides the list of available boot versions</p>
</div>
<div class="listingblock">
<div class="title">Spring Boot version example</div>
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-json hljs" data-lang="json">{
  "id" : "2.2.0.BUILD-SNAPSHOT",
  "name" : "Latest SNAPSHOT"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="defaults"><a class="anchor" href="#defaults"></a>10.2. Defaults</h3>
<div class="paragraph">
<p>Each top-level element has a <code>default</code> attribute that should be used as a hint to
provide the default value in the relevant UI component.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-the-stubs"><a class="anchor" href="#using-the-stubs"></a>11. Using the Stubs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Initializr project publishes
<a href="https://github.com/tomakehurst/wiremock">WireMock</a> stubs for all the JSON responses
that are tested in the project. If you are writing a client for the Initializr
service, you can use these stubs to test your own code. You can consume them with the
raw Wiremock APIs, or via some features of
<a href="https://github.com/spring-cloud/spring-cloud-contract">Spring Cloud Contract</a>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
WireMock is an embedded web server that analyses incoming requests and chooses stub
responses based on matching some rules (e.g. a specific header value). So if you send
it a request which matches one of its stubs, it will send you a response as if it was
a real Initializr service, and you can use that to do full stack integration testing
of your client.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="using-wiremock-with-spring-boot"><a class="anchor" href="#using-wiremock-with-spring-boot"></a>11.1. Using WireMock with Spring Boot</h3>
<div class="sect3">
<h4 id="loading-stubs-from-the-classpath"><a class="anchor" href="#loading-stubs-from-the-classpath"></a>11.1.1. Loading Stubs from the Classpath</h4>
<div class="paragraph">
<p>A convenient way to consume the stubs in your project is to add a test dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.spring.initializr&lt;/groupId&gt;
    &lt;artifactId&gt;initializr-web&lt;/artifactId&gt;
    &lt;classifier&gt;stubs&lt;/classifier&gt;
    &lt;version&gt;{project-version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and then pull the stubs from the classpath. In a Spring Boot application, using
Spring Cloud Contract, you can start a WireMock server and register all the stubs
with it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest
@AutoConfigureWireMock(port = 0,
    stubs="classpath:META-INF/io.spring.initializr/initializr-web/0.7.0.RELEASE")
public class ClientApplicationTests {

    @Value("${wiremock.server.port}")
    private int port;

    ...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Wiremock features come with Spring Cloud Contract Wiremock:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-contract-wiremock&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
This dependency is managed by the <code>spring-cloud-contract-dependencies</code> BOM.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="using-the-stub-runner"><a class="anchor" href="#using-the-stub-runner"></a>11.1.2. Using the Stub Runner</h4>
<div class="paragraph">
<p>Alternatively you can configure the stub runner to look for the artifact, using a
different Spring Cloud Contract dependency:
<code>spring-cloud-starter-contract-stub-runner</code>. The example below will automatically
download, if necessary, the defined version of the initializr stubs (so you don&#8217;t need the
stubs declared as a dependency):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
    &lt;artifactId&gt;spring-cloud-starter-contract-stubrunner&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The test should use <code>@AutoConfigureStubRunner</code> instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@RunWith(SpringRunner.class)
@SpringBootTest(webEnvironment = WebEnvironment.NONE)
@AutoConfigureStubRunner(
    ids = "io.spring.initializr:initializr-web:0.7.0.RELEASE",
    repositoryRoot = "https://repo.spring.io/snapshot")
public class ClientApplicationTests {

    @Autowired
    private StubFinder stubFinder;


    ...

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is an example of a test that retrieves the metadata of the service. The assertions
do not matter much here but it illustrates how you could integrate that in the test suite
of a custom client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Unresolved directive in using-the-stubs.adoc - include::../../test/java/io/spring/initializr/stub/ClientApplicationTests.java[tag=test]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you have a server that returns the stub of the JSON metadata
(<code>metadataWithCurrentAcceptHeader.json</code>) when you send it a header
<code>Accept:application/vnd.initializr.v2.1+json</code> (as recommended).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="names-and-paths-of-stubs"><a class="anchor" href="#names-and-paths-of-stubs"></a>11.2. Names and Paths of Stubs</h3>
<div class="paragraph">
<p>The stubs are laid out in a jar file in a form (under "**/mappings") that can be consumed
by WireMock just by setting its file source. The names of the individual stubs are the
same as the method names of the test cases that generated them in the Initializr
project. So for example there is a test case "metadataWithV2AcceptHeader" in
<code>MainControllerIntegrationTests</code> that makes assertions about the response when the accept
header is <code>application/vnd.initializr.v2.1+json</code>. The response is recorded in the stub,
and it will match in WireMock if the same headers and request parameters that were used in
the Initializr test case and used in the client. The method name usually summarizes what
those values are.</p>
</div>
<div class="paragraph">
<p>The stub runner, and the <code>@AutoConfigureWireMock</code> in the examples above loads all the
stubs into WireMock, so you don&#8217;t necessarily need to know the names of the stubs. You can
also register stubs one by one, though, in which case it would help to scan the stubs jar
and compare the file names with the test methods. For instance, if you look in the stubs
jar, you will see a file called <code>metadataWithV2AcceptHeader.json</code> and, in the
initializr-web project, a test method called <code>metadataWithV2AcceptHeader</code> which generated
it.</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-01-30 16:34:28 GMT
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>