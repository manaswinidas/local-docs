<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2019-04-03 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="author" content="Stephane Nicoll" />
    <meta name="Date-Creation-yyyymmdd" content="20140506" />
    <meta name="Date-Revision-yyyymmdd" content="20190403" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Spring Boot Maven Plugin &#x2013; Usage</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
                  </head>
        <body class="topBarDisabled">
          
        
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>Spring Boot Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2019-04-03
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.5.20.RELEASE
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <i class="none"></i>
        Goals</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                              <li class="nav-header">Examples</li>
                              
      <li>
  
                          <a href="examples/repackage-classifier.html" title="Custom repackage classifier">
          <i class="none"></i>
        Custom repackage classifier</a>
            </li>
                
      <li>
  
                          <a href="examples/repackage-disable-attach.html" title="Local repackaged artifact">
          <i class="none"></i>
        Local repackaged artifact</a>
            </li>
                
      <li>
  
                          <a href="examples/exclude-dependency.html" title="Exclude a dependency">
          <i class="none"></i>
        Exclude a dependency</a>
            </li>
                
      <li>
  
                          <a href="examples/run-debug.html" title="Debug the application">
          <i class="none"></i>
        Debug the application</a>
            </li>
                
      <li>
  
                          <a href="examples/it-random-port.html" title="Random port for integration tests">
          <i class="none"></i>
        Random port for integration tests</a>
            </li>
                
      <li>
  
                          <a href="examples/it-skip.html" title="Skip integration tests">
          <i class="none"></i>
        Skip integration tests</a>
            </li>
                
      <li>
  
                          <a href="examples/run-profiles.html" title="Specify active profiles">
          <i class="none"></i>
        Specify active profiles</a>
            </li>
                
      <li>
  
                          <a href="examples/build-info.html" title="Generate build information">
          <i class="none"></i>
        Generate build information</a>
            </li>
                
      <li>
  
                          <a href="examples/custom-layout.html" title="Custom layout">
          <i class="none"></i>
        Custom layout</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                        
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                  
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2><a name="Usage"></a>Usage</h2>
<p>The plugin provides several goals to work with a Spring Boot application:</p>
<ul>
<li><tt>repackage</tt>: create a jar or war file that is auto-executable. It can replace the regular artifact or can be attached to the build lifecycle with a separate <b>classifier</b>.</li>
<li><tt>run</tt>: run your Spring Boot application with several options to pass parameters to it.</li>
<li><tt>start</tt> and <tt>stop</tt>: integrate your Spring Boot application to the <tt>integration-test</tt> phase so that the application starts before it.</li>
<li><tt>build-info</tt>: generate a build information that can be used by the Actuator.</li></ul>
<p>Each goal is further described below.</p>
<div class="section">
<h3><a name="Repackaging_an_application"></a>Repackaging an application</h3>
<p>In order to repackage your application, you simply need to add a reference to the plugin in your <tt>pom.xml</tt>:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>The example above repackages a jar or war that is built during the package phase of the Maven lifecycle, including any <tt>provided</tt> dependencies that are defined in the project. If some of these dependencies need to be excluded, you can use one of the exclude options, see <a href="./examples/exclude-dependency.html">Exclude a dependency</a> for more details. Please note that the <tt>outputFileNameMapping</tt> feature of the <tt>maven-war-plugin</tt> is currently not supported.</p>
<p>Devtools is automatically excluded by default (you can control that using the <tt>excludeDevtools</tt> property). In order to make that work with <tt>war</tt> packaging, the `spring-boot-devtools` dependency must be set as <tt>optional</tt> or with the <tt>provided</tt> scope.</p>
<p>The original (i.e. non executable) artifact is renamed to <tt>.original</tt> by default but it is also possible to keep the original artifact using a custom classifier.</p>
<p>The plugin rewrites your manifest, and in particular it manages the <b>Main-Class</b> and <b>Start-Class</b> entries, so if the defaults don't work you have to configure those there (not in the jar plugin). The <b>Main-Class</b> in the manifest is actually controlled by the <b>layout</b> property of the boot plugin, e.g.</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;mainClass&gt;${start-class}&lt;/mainClass&gt;
        &lt;layout&gt;ZIP&lt;/layout&gt;
      &lt;/configuration&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;goals&gt;
            &lt;goal&gt;repackage&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>The <tt>layout</tt> property defaults to a guess based on the archive type (<tt>jar</tt> or <tt>war</tt>). The following layouts are available:</p>
<ul>
<li><tt>JAR</tt>: regular executable JAR layout.</li>
<li><tt>WAR</tt>: executable WAR layout. <tt>provided</tt> dependencies are placed in <tt>WEB-INF/lib-provided</tt> to avoid any clash when the <tt>war</tt> is deployed in a servlet container.</li>
<li><tt>ZIP</tt> (alias to <tt>DIR</tt>): similar to the <tt>JAR</tt> layout using <tt>PropertiesLauncher</tt>.</li>
<li><tt>MODULE</tt>: Bundle dependencies (excluding those with <tt>provided</tt> scope) and project resources. Does not bundle a bootstrap loader.</li>
<li><tt>NONE</tt>: Bundle all dependencies and project resources. Does not bundle a bootstrap loader.</li></ul>
<p>For more detailed examples of how to configure this goal see:</p>
<ul>
<li><a href="./examples/repackage-classifier.html">Custom repackage classifier</a></li>
<li><a href="./examples/exclude-dependency.html">Exclude a dependency</a></li></ul></div>
<div class="section">
<h3><a name="Running_the_application"></a>Running the application</h3>
<p>The plugin includes a run goal which can be used to launch your application from the command line:</p>
<div>
<pre>mvn spring-boot:run</pre></div>
<p>By default the application is executed directly from the Maven JVM. If you need to run in a forked process you can use the 'fork' option. Forking will also occur if the 'jvmArguments' or 'agent' options are specified, or if devtools is present.</p>
<p>If you need to specify some JVM arguments (i.e. for debugging purposes), you can use the <tt>jvmArguments</tt> parameter, see <a href="./examples/run-debug.html">Debug the application</a> for more details. As a convenience, the profiles to enable are handled by a specific property (<tt>profiles</tt>), see <a href="./examples/run-profiles.html">Specify active profiles</a>.</p>
<p>Spring Boot 1.3 has introduced <tt>devtools</tt>, a module to improve the development-time experience when working on Spring Boot applications. To enable it, just add the following dependency to your project:</p>
<div>
<pre>&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
    &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre></div>
<p>When <tt>devtools</tt> is running, it detects change when you recompile your application and automatically refreshes it. This works for not only resources but code as well. It also provides a LiveReload server so that it can automatically trigger a browser refresh whenever things change.</p>
<p>Devtools can also be configured to only refresh the browser whenever a static resource has changed (and ignore any change in the code). Just include the following property in your project:</p>
<div>
<pre>spring.devtools.remote.restart.enabled=false</pre></div>
<p>Prior to <tt>devtools</tt>, the plugin supported hot refreshing of resources by default which has now be disabled in favour of the solution described above. You can restore it at any time by configuring your project:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
      &lt;configuration&gt;
        &lt;addResources&gt;true&lt;/addResources&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>When <tt>addResources</tt> is enabled, any <b>src/main/resources</b> folder will be added to the application classpath when you run the application and any duplicate found in <b>target/classes</b> will be removed. This allows hot refreshing of resources which can be very useful when developing web applications. For example, you can work on HTML, CSS or JavaScript files and see your changes immediately without recompiling your application. It is also a helpful way of allowing your front end developers to work without needing to download and install a Java IDE.</p>
<p>Note that a side effect of using this feature is that filtering of resources at build time will not work.</p>
<p>In order to be consistent with the <tt>repackage</tt> goal, the <tt>run</tt> goal builds the classpath in such a way that any dependency that is excluded in the plugin's configuration gets excluded from the classpath as well. See <a href="./examples/exclude-dependency.html">Exclude a dependency</a> for more details.</p>
<p>Sometimes it is useful to include test dependencies when running the application. For example, if you want to run your application in a test mode that uses stub classes. If you wish to do this, you can set the <tt>useTestClasspath</tt> parameter to true. Note that this is only applied when you run an application: the <tt>repackage</tt> goal will not add test dependencies to the resulting JAR/WAR.</p></div>
<div class="section">
<h3><a name="Working_with_integration_tests"></a>Working with integration tests</h3>
<p>While you may start your Spring Boot application very easily from your test (or test suite) itself, it may be desirable to handle that in the build itself. To make sure that the lifecycle of you Spring Boot application is properly managed <i>around</i> your integration tests, you can use the <tt>start</tt> and <tt>stop</tt> goals as described below:</p>
<div>
<pre>&lt;build&gt;
  ...
  &lt;plugins&gt;
    ...
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
    ...
  &lt;/plugins&gt;
  ...
&lt;/build&gt;</pre></div>
<p>Such setup can now use the <a class="externalLink" href="https://maven.apache.org/surefire/maven-failsafe-plugin/">failsafe-plugin</a> to run your integration tests as you would expect.</p>
<p>You could also configure a more advanced setup to skip the integration tests when a specific property has been set:</p>
<div>
<pre>&lt;properties&gt;
  &lt;it.skip&gt;false&lt;/it.skip&gt;
&lt;/properties&gt;
&lt;build&gt;
  &lt;plugins&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
      &lt;artifactId&gt;maven-failsafe-plugin&lt;/artifactId&gt;
      &lt;configuration&gt;
        &lt;skip&gt;${it.skip}&lt;/skip&gt;
      &lt;/configuration&gt;
    &lt;/plugin&gt;
    &lt;plugin&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
      &lt;version&gt;1.5.20.RELEASE&lt;/version&gt;
      &lt;executions&gt;
        &lt;execution&gt;
          &lt;id&gt;pre-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;start&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
        &lt;execution&gt;
          &lt;id&gt;post-integration-test&lt;/id&gt;
          &lt;goals&gt;
            &lt;goal&gt;stop&lt;/goal&gt;
          &lt;/goals&gt;
          &lt;configuration&gt;
            &lt;skip&gt;${it.skip}&lt;/skip&gt;
          &lt;/configuration&gt;
        &lt;/execution&gt;
      &lt;/executions&gt;
    &lt;/plugin&gt;
  &lt;/plugins&gt;
&lt;/build&gt;</pre></div>
<p>If you run <tt>mvn verify -Dit.skip=true</tt> your integration tests will be skipped altogether.</p>
<p>For more detailed examples of how to configure this goal see:</p>
<ul>
<li><a href="./examples/it-random-port.html">Random port for integration tests</a></li></ul></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                    2019
                        <a href="https://www.spring.io">Pivotal Software, Inc.</a>.
            All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>
