<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Mark Pollack, Ilayaperumal Gopinathan, Janne Valkealahti, Gunnar Hillert, Sabby Anandan, Vinicius Carvalho, Jay Bryant">
<title>Spring Cloud Skipper Reference Guide</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<!-- Generate a nice TOC -->
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.tocify/1.9.0/javascripts/jquery.tocify.min.js"></script>
<!-- We do not need the tocify CSS because the asciidoc CSS already provides most of what we neeed -->

<style>
.tocify-header {
    font-style: italic;
}

.tocify-subheader {
    font-style: normal;
}

.tocify ul {
    margin: 0;
 }

.tocify-focus {
    color: #7a2518;
    background-color: rgba(0, 0, 0, 0.1);
}

.tocify-focus > a {
    color: #7a2518;
}
</style>

<script type="text/javascript">
    $(function () {
        // Add a new container for the tocify toc into the existing toc so we can re-use its
        // styling
        $("#toc").append("<div id='generated-toc'></div>");
        $("#generated-toc").tocify({
            extendPage: false,
            context: "#content",
            highlightOnScroll: false,
            hideEffect: "slideUp",
            // Use the IDs that asciidoc already provides so that TOC links and intra-document
            // links are the same. Anything else might confuse users when they create bookmarks.
            hashGenerator: function(text, element) {
                return $(element).attr("id");
            },
            // Smooth scrolling doesn't work properly if we use the asciidoc IDs
            smoothScroll: false,
            // Set to 'none' to use the tocify classes
            theme: "none",
            // Handle book (may contain h1) and article (only h2 deeper)
            selectors: $( "#content" ).has( "h1" ).size() > 0 ? "h1,h2,h3,h4,h5" : "h2,h3,h4,h5",
            ignoreSelector: ".discrete"
        });

        // Switch between static asciidoc toc and dynamic tocify toc based on browser size
        // This is set to match the media selectors in the asciidoc CSS
        // Without this, we keep the dynamic toc even if it is moved from the side to preamble
        // position which will cause odd scrolling behavior
        var handleTocOnResize = function() {
            if ($(document).width() < 768) {
                $("#generated-toc").hide();
                $(".sectlevel0").show();
                $(".sectlevel1").show();
            }
            else {
                $("#generated-toc").show();
                $(".sectlevel0").hide();
                $(".sectlevel1").hide();
            }
        }

        $(window).resize(handleTocOnResize);
        handleTocOnResize();
    });
</script>
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Cloud Skipper Reference Guide</h1>
<div class="details">
<span id="author" class="author">Mark Pollack</span><br>
<span id="author2" class="author">Ilayaperumal Gopinathan</span><br>
<span id="author3" class="author">Janne Valkealahti</span><br>
<span id="author4" class="author">Gunnar Hillert</span><br>
<span id="author5" class="author">Sabby Anandan</span><br>
<span id="author6" class="author">Vinicius Carvalho</span><br>
<span id="author7" class="author">Jay Bryant</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#preface">Preface</a>
<ul class="sectlevel1">
<li><a href="#skipper-documentation-about">1. About the Documentation</a></li>
<li><a href="#skipper-documentation-getting-help">2. Getting Help</a></li>
</ul>
</li>
<li><a href="#overview">Spring Cloud Skipper Overview</a>
<ul class="sectlevel1">
<li><a href="#_features">3. Features</a></li>
<li><a href="#_concepts">4. Concepts</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting Started</a>
<ul class="sectlevel1">
<li><a href="#getting-started-system-requirements">5. System Requirements</a></li>
<li><a href="#getting-started-installing-skipper">6. Installing Skipper</a></li>
<li><a href="#three-second-tour">7. A Three-second Tour</a></li>
</ul>
</li>
<li><a href="#three-minute-tour">Three minute Tour</a>
<ul class="sectlevel1">
<li><a href="#tour-local">8. Local Machine</a></li>
<li><a href="#tour-cloud-foundry">9. Cloud Foundry</a></li>
<li><a href="#tour-kubernetes">10. Kuberenetes</a></li>
<li><a href="#tour-cf-manifest">11. CF manifest based deployments</a></li>
</ul>
</li>
<li><a href="#three-hour-tour">Using Skipper</a>
<ul class="sectlevel1">
<li><a href="#using-shell">12. Skipper Shell</a>
<ul class="sectlevel2">
<li><a href="#_shell_modes">12.1. Shell Modes</a></li>
</ul>
</li>
<li><a href="#using-platforms">13. Platforms</a></li>
<li><a href="#using-packages">14. Packages</a>
<ul class="sectlevel2">
<li><a href="#using-package-format">14.1. Package Format</a>
<ul class="sectlevel3">
<li><a href="#_single_application">14.1.1. Single Application</a></li>
<li><a href="#using-package-format-multiple-apps">14.1.2. Multiple Applications</a></li>
</ul>
</li>
<li><a href="#using-package-metadata">14.2. Package Metadata</a></li>
<li><a href="#package-templates">14.3. Package Templates</a>
<ul class="sectlevel3">
<li><a href="#package-templates-scdep">14.3.1. Spring Cloud Deployer</a></li>
<li><a href="#package-templates-cf">14.3.2. Cloud Foundry</a></li>
<li><a href="#package-templates-resources">14.3.3. Resources</a>
<ul class="sectlevel4">
<li><a href="#_http_resources">HTTP Resources</a></li>
<li><a href="#_docker_resources">Docker Resources</a></li>
<li><a href="#_maven_resources">Maven Resources</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#using-package-values">14.4. Package Values</a></li>
<li><a href="#using-package-upload">14.5. Package Upload</a></li>
<li><a href="#using-package-create">14.6. Creating Your Own Package</a></li>
</ul>
</li>
<li><a href="#using-repositories">15. Repositories</a></li>
</ul>
</li>
<li><a href="#skipper-installation">Installation</a>
<ul class="sectlevel1">
<li><a href="#skipper-installation-local">16. Installing on a Local Platform</a>
<ul class="sectlevel2">
<li><a href="#_local_platform_configuration">16.1. Local Platform configuration</a></li>
</ul>
</li>
<li><a href="#skipper-installation-cloudfoundry">17. Installing on Cloud Foundry</a>
<ul class="sectlevel2">
<li><a href="#_cloud_foundry_configuration">17.1. Cloud Foundry Configuration</a></li>
<li><a href="#_database_connection_pool">17.2. Database Connection Pool</a></li>
<li><a href="#skipper-installation-cloudfoundry-maximum-disk-quota-configuration">17.3. Maximum Disk Quota</a></li>
<li><a href="#configuration-cloudfoundry-managing-disk-utilization">17.4. Managing Disk Use</a></li>
</ul>
</li>
<li><a href="#skipper-installation-kubernetes">18. Installing on Kubernetes</a>
<ul class="sectlevel2">
<li><a href="#skipper-kubernetes-configuration">18.1. Kuberenetes configuration</a></li>
</ul>
</li>
<li><a href="#skipper-database-configuration">19. Database configuration</a></li>
</ul>
</li>
<li><a href="#configuration-security">Security</a>
<ul class="sectlevel1">
<li><a href="#configuration-security-enabling-https">20. Enabling HTTPS</a>
<ul class="sectlevel2">
<li><a href="#configuration-security-self-signed-certificates">20.1. Using Self-Signed Certificates</a></li>
<li><a href="#configuration-security-self-signed-certificates-shell">20.2. Self-Signed Certificates and the Shell</a>
<ul class="sectlevel3">
<li><a href="#configuration-security-add-self-signed-certificate-jvm-truststore">20.2.1. Add the Self-signed Certificate to the JVM Truststore</a></li>
<li><a href="#configuration-security-skip-certificate-validation">20.2.2. Skip Certificate Validation</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration-security-oauth2">21. OAuth 2.0 Security</a>
<ul class="sectlevel2">
<li><a href="#configuration-security-oauth2-authorization">21.1. OAuth REST Endpoint Authorization</a>
<ul class="sectlevel3">
<li><a href="#configuration-security-oauth2-authorization-user-roles">21.1.1. Users and Roles</a></li>
</ul>
</li>
<li><a href="#configuration-security-oauth2-shell">21.2. OAuth Authentication Using the Spring Cloud Skipper Shell</a></li>
<li><a href="#_oauth2_authentication_examples">21.3. OAuth2 Authentication Examples</a>
<ul class="sectlevel3">
<li><a href="#skipper-security-local-oauth2-server">21.3.1. Local OAuth2 Server</a></li>
<li><a href="#skipper-security-authentication-using-uaa">21.3.2. Authentication Using UAA</a></li>
<li><a href="#skipper-security-authentication-using-github">21.3.3. Authentication using GitHub</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#skipper-commands-reference">Skipper Commands</a>
<ul class="sectlevel1">
<li><a href="#skipper-commands-package">22. Package Commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-package-search">22.1. Search</a></li>
<li><a href="#skipper-commands-package-upload">22.2. Upload</a></li>
<li><a href="#skipper-commands-package-install">22.3. Install</a></li>
<li><a href="#skipper-commands-package-delete">22.4. Delete</a></li>
</ul>
</li>
<li><a href="#skipper-commands-release">23. Release Commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-release-list">23.1. List</a></li>
<li><a href="#skipper-commands-release-status">23.2. Status</a></li>
<li><a href="#skipper-commands-release-upgrade">23.3. Upgrade</a></li>
<li><a href="#skipper-commands-release-rollback">23.4. Rollback</a></li>
<li><a href="#skipper-commands-release-history">23.5. History</a></li>
<li><a href="#skipper-commands-release-delete">23.6. Delete</a></li>
<li><a href="#skipper-commands-release-cancel">23.7. Cancel</a></li>
</ul>
</li>
<li><a href="#skipper-commands-manifest">24. Manifest Commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-manifest-get">24.1. Get</a></li>
</ul>
</li>
<li><a href="#skipper-commands-platform">25. Platform commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-platform-list">25.1. List</a></li>
</ul>
</li>
<li><a href="#skipper-commands-repository">26. Repository Commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-repo-list">26.1. List</a></li>
</ul>
</li>
<li><a href="#skipper-commands-config">27. Skipper Server Commands</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-config-config">27.1. Config</a></li>
<li><a href="#skipper-commands-config-info">27.2. Info</a></li>
</ul>
</li>
<li><a href="#skipper-commands-generic-usage">28. Generic Usage</a>
<ul class="sectlevel2">
<li><a href="#skipper-commands-generic-usage-timeout-expression">28.1. Timeout Expression</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#architecture">Architecture</a></li>
<li><a href="#api-guide">REST API Guide</a>
<ul class="sectlevel1">
<li><a href="#api-guide-overview">29. Overview</a>
<ul class="sectlevel2">
<li><a href="#api-guide-overview-http-verbs">29.1. HTTP Verbs</a></li>
<li><a href="#api-guide-overview-http-status-codes">29.2. HTTP Status Codes</a></li>
<li><a href="#api-guide-overview-headers">29.3. Headers</a></li>
<li><a href="#api-guide-overview-errors">29.4. Errors</a></li>
<li><a href="#api-guide-overview-hypermedia">29.5. Hypermedia</a></li>
</ul>
</li>
<li><a href="#api-guide-resources">30. Resources</a>
<ul class="sectlevel2">
<li><a href="#api-guide-resources-index">30.1. Index</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-index-access">30.1.1. Accessing the Index</a>
<ul class="sectlevel4">
<li><a href="#_request_structure">Request Structure</a></li>
<li><a href="#_example_request">Example Request</a></li>
<li><a href="#_example_response">Example Response</a></li>
<li><a href="#api-guide-resources-index-links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-about">30.2. Server</a>
<ul class="sectlevel3">
<li><a href="#_server_info">30.2.1. Server info</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_2">Request structure</a></li>
<li><a href="#_example_request_2">Example request</a></li>
<li><a href="#_response_structure">Response structure</a></li>
<li><a href="#_response_fields">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_platforms">30.3. Platforms</a>
<ul class="sectlevel3">
<li><a href="#_find_all">30.3.1. Find All</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_3">Request structure</a></li>
<li><a href="#_example_request_3">Example request</a></li>
<li><a href="#_response_structure_2">Response structure</a></li>
<li><a href="#_response_fields_2">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-packages-metadata">30.4. Packages</a>
<ul class="sectlevel3">
<li><a href="#resources-package-search">30.4.1. Search</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_4">Request structure</a></li>
<li><a href="#_example_request_4">Example request</a></li>
<li><a href="#_response_structure_3">Response structure</a></li>
<li><a href="#_response_fields_3">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-search-summary">30.4.2. Search summary</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_5">Request structure</a></li>
<li><a href="#_example_request_5">Example request</a></li>
<li><a href="#_response_structure_4">Response structure</a></li>
<li><a href="#_response_fields_4">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-search-details">30.4.3. Search with details</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_6">Request structure</a></li>
<li><a href="#_example_request_6">Example request</a></li>
<li><a href="#_response_structure_5">Response structure</a></li>
<li><a href="#_response_fields_5">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-search-find-by-name">30.4.4. Search by Package Name</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_7">Request structure</a></li>
<li><a href="#_example_request_7">Example request</a></li>
<li><a href="#_response_structure_6">Response structure</a></li>
<li><a href="#_response_fields_6">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-search-findbyname-ignore-case">30.4.5. Search by Package Name, Ignoring Case</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_8">Request structure</a></li>
<li><a href="#_example_request_8">Example request</a></li>
<li><a href="#_response_structure_7">Response structure</a></li>
<li><a href="#_response_fields_7">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-package">30.5. Package</a>
<ul class="sectlevel3">
<li><a href="#resources-package-upload">30.5.1. Upload</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_9">Request structure</a></li>
<li><a href="#_example_request_9">Example request</a></li>
<li><a href="#_response_structure_8">Response structure</a></li>
<li><a href="#_response_fields_8">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-install">30.5.2. Install</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_10">Request structure</a></li>
<li><a href="#_example_request_10">Example request</a></li>
<li><a href="#_response_structure_9">Response structure</a></li>
<li><a href="#_response_fields_9">Response fields</a></li>
</ul>
</li>
<li><a href="#resources-package-install-id">30.5.3. Install with ID</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_11">Request structure</a></li>
<li><a href="#_example_request_11">Example request</a></li>
<li><a href="#_response_structure_10">Response structure</a></li>
<li><a href="#_response_fields_10">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#repositories">30.6. Repositories</a>
<ul class="sectlevel3">
<li><a href="#_find_all_2">30.6.1. Find All</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_12">Request structure</a></li>
<li><a href="#_example_request_12">Example request</a></li>
<li><a href="#_response_structure_11">Response structure</a></li>
<li><a href="#_response_fields_11">Response fields</a></li>
</ul>
</li>
<li><a href="#_find_by_name">30.6.2. Find By Name</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_13">Request structure</a></li>
<li><a href="#_example_request_13">Example request</a></li>
<li><a href="#_response_structure_12">Response structure</a></li>
<li><a href="#_response_fields_12">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-releases">30.7. Releases</a>
<ul class="sectlevel3">
<li><a href="#resources-release-find-all">30.7.1. Find all</a>
<ul class="sectlevel4">
<li><a href="#_request_structure_14">Request structure</a></li>
<li><a href="#_example_request_14">Example request</a></li>
<li><a href="#_response_structure_13">Response structure</a></li>
<li><a href="#_response_fields_13">Response fields</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-release">30.8. Release</a>
<ul class="sectlevel3">
<li><a href="#resources-release-list">30.8.1. List</a>
<ul class="sectlevel4">
<li><a href="#_list_latest">List latest</a></li>
<li><a href="#_list_latest_by_name">List latest by name</a></li>
</ul>
</li>
<li><a href="#resources-release-status">30.8.2. Status</a>
<ul class="sectlevel4">
<li><a href="#_get_the_status_of_a_release">Get the status of a release</a></li>
<li><a href="#_status_by_version">Status by version</a></li>
</ul>
</li>
<li><a href="#resources-release-upgrade">30.8.3. Upgrade</a>
<ul class="sectlevel4">
<li><a href="#_upgrade_a_release">Upgrade a release</a></li>
</ul>
</li>
<li><a href="#resources-release-rollback">30.8.4. Rollback</a>
<ul class="sectlevel4">
<li><a href="#_rollback_release_using_uri_variables">Rollback release using uri variables</a></li>
<li><a href="#resources-release-rollback-request">Rollback release using request object</a></li>
</ul>
</li>
<li><a href="#resources-release-manifest">30.8.5. Manifest</a>
<ul class="sectlevel4">
<li><a href="#_get_manifest">Get manifest</a></li>
<li><a href="#_get_manifest_by_version">Get manifest by version</a></li>
</ul>
</li>
<li><a href="#resources-release-delete">30.8.6. Delete</a>
<ul class="sectlevel4">
<li><a href="#_delete_a_release">Delete a release</a></li>
<li><a href="#_delete_a_release_and_uninstall_package">Delete a release and uninstall package</a></li>
</ul>
</li>
<li><a href="#resources-release-cancel">30.8.7. Cancel</a>
<ul class="sectlevel4">
<li><a href="#_cancel_a_release">Cancel a release</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendix">Appendices</a>
<ul class="sectlevel1">
<li><a href="#building">Appendix A: Building</a>
<ul class="sectlevel2">
<li><a href="#_documentation">A.1. Documentation</a></li>
<li><a href="#_custom_server_build">A.2. Custom Server Build</a></li>
<li><a href="#_importing_into_eclipse">A.3. Importing into eclipse</a></li>
</ul>
</li>
<li><a href="#contributing">Appendix B: Contributing</a>
<ul class="sectlevel2">
<li><a href="#_sign_the_contributor_license_agreement">B.1. Sign the Contributor License Agreement</a></li>
<li><a href="#_code_conventions_and_housekeeping">B.2. Code Conventions and Housekeeping</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Version 2.0.2.RELEASE</p>
</div>
<div class="paragraph">
<p>&#169; 2012-2019 Pivotal Software, Inc.</p>
</div>
<div class="paragraph">
<p><em>Copies of this document may be made for your own use and for distribution to
others, provided that you do not charge any fee for such copies and further
provided that each copy contains this Copyright Notice, whether distributed in
print or electronically.</em></p>
</div>
</div>
</div>
<h1 id="preface" class="sect0"><a class="anchor" href="#preface"></a>Preface</h1>
<div class="sect1">
<h2 id="skipper-documentation-about"><a class="anchor" href="#skipper-documentation-about"></a>1. About the Documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The documentation for this release is available in <a href="https://docs.spring.io/spring-cloud-skipper/docs/2.0.2.RELEASE/reference/htmlsingle">HTML</a>.</p>
</div>
<div class="paragraph">
<p>The latest copy of the Spring Cloud Skipper reference guide can be found <a href="https://docs.spring.io/spring-cloud-skipper/docs/current-SNAPSHOT/reference/htmlsingle/">here</a>.</p>
</div>
<div class="paragraph">
<p>Copies of this document may be made for your own use and for
distribution to others, provided that you do not charge any fee for such copies and
further provided that each copy contains this Copyright Notice, whether distributed in
print or electronically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-documentation-getting-help"><a class="anchor" href="#skipper-documentation-getting-help"></a>2. Getting Help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you are having trouble with Spring Cloud Skipper, we would like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question. We monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-skipper"><code>spring-cloud-skipper</code></a>.</p>
</li>
<li>
<p>Reach out to us on <a href="https://gitter.im/spring-cloud/spring-cloud-skipper">gitter</a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Skipper at <a href="https://github.com/spring-cloud/spring-cloud-skipper/issues" class="bare">github.com/spring-cloud/spring-cloud-skipper/issues</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All of Spring Cloud Skipper is open source, including the documentation! If you find problems
with the docs or if you want to improve them, please <a href="https://github.com/spring-cloud/spring-cloud-skipper">get involved</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="overview" class="sect0"><a class="anchor" href="#overview"></a>Spring Cloud Skipper Overview</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Skipper is a lightweight tool that lets you discover Spring Boot applications and manage their lifecycle on multiple Cloud Platforms.
You can use Skipper standalone or integrate it with Continuous Integration pipelines to help implement the practice of Continuous Deployment.</p>
</div>
<div class="paragraph">
<p>Skipper consists of a server application that exposes an HTTP API.
A shell application provides easy-to-use <a href="#skipper-commands-reference">commands</a> to interact with the server.
The server uses a relational database to store state.
Documentation to call the HTTP API is available in the <a href="#api-guide">REST API Guide</a>.</p>
</div>
<div class="paragraph">
<p>Applications in Skipper are bundled as packages that contain a templated configuration file and a default set of values that are used to fill in the template.
You can override these defaults when installing or upgrading a package.
Skipper provides a means to orchestrate the upgrade/rollback procedure of applications between different versions, taking the minimal set of actions to bring the system to the desired state.</p>
</div>
<div class="paragraph">
<p>Skipper&#8217;s design is influenced by a large number of projects in the Kubernetes ecosystem that perform resource templating and/or orchestration, hence the nautically inspired project name Skipper.
In particular, <a href="https://github.com/kubernetes/helm">Helm</a>'s approach to present the user with a familiar <code>apt-get</code> or <code>brew</code> like installation experience was a big influence.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_features"><a class="anchor" href="#_features"></a>3. Features</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main features are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Define multiple platform accounts where Spring Boot applications can be deployed.
Supported platforms are Local, Cloud Foundry, and Kubernetes.</p>
</li>
<li>
<p>Substitute variables in Mustache-templated files that describe how to deploy applications to a platform.</p>
</li>
<li>
<p>Search Package Repositories for existing applications.</p>
</li>
<li>
<p>Upgrade/Rollback a package based on a simple workflow.</p>
</li>
<li>
<p>Store the history of resolved template files (AKA 'application manifests') that represent the final description of what has been deployed to a platform for a specific release.</p>
</li>
<li>
<p>Use a standalone interactive shell or an HTTP API.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concepts"><a class="anchor" href="#_concepts"></a>4. Concepts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The main concepts are <strong>Platforms</strong>, <strong>Packages</strong>, <strong>Repositories</strong>, <strong>Releases</strong>, and <strong>Release Workflows</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Platforms</strong> are where your apps run. Skipper 1.0 supports deploying applications to platforms by using the <a href="https://github.com/spring-cloud/spring-cloud-deployer">Spring Cloud Deployer</a> family of libraries.
Doing so lets Skipper deploy Spring Boot applications to Cloud Foundry, Kubernetes, and your local machine.
You can configure a single Skipper server to deploy to multiple platforms, with each platform identified
by a unique name.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The Spring Cloud Deployer libraries for Apache YARN, Apache Mesos, Redhat Openshift, and Hashicorp Nomad were not
bundled with Skipper in 1.0.  <a href="https://github.com/donovanmuller">Donovan Muller</a> has provided support for Redhat Openshift.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Packages</strong> define the basic recipe for describing what to install on a platform.
A package can define a single application or it can define a group of applications.
It contains descriptive metadata, the location of the Spring Boot uber jar, and default application or deployment
properties.
The location of the uber jar can be a Maven repository, docker registry, file location, or HTTP location.
A package is a collection of YAML files that are zipped up into a file with a naming convention of <code>name-version.zip</code> (for example: <code>myapp-1.0.3.zip</code>).</p>
</div>
<div class="paragraph">
<p><strong>Repositories</strong> are where package metadata and zip files are hosted. Repositories can either be 'local' or 'remote'.
A remote repository is one that is only accessible over HTTP.
Any arbitrary web app that serves up files off a file system can be used to host a remote repository as long as certain directory and file naming conventions are followed.
A local repository is managed by the Skipper server and backed by a relational database.
Skipper lets you search for packages that are hosted in repositories.</p>
</div>
<div class="paragraph">
<p><strong>Releases</strong> are created in Skipper after you install, upgrade, or rollback a package.
A release has a unique name that you provide to perform release operations such as upgrading, rolling back, and deleting.
The release contains the fully resolved template files, also known as <strong>application manifests</strong>, that represent the final description of what has been deployed to the platform.
You can also get the status and application manifest for a specific release.</p>
</div>
<div class="paragraph">
<p><strong>Release Workflows</strong> are the steps taken to upgrade or rollback an application from one version to another.
In Skipper terms, it is how we go from one Release to another on a Platform.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An upgrade may keep the same version but update application properties.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="getting-started" class="sect0"><a class="anchor" href="#getting-started"></a>Getting Started</h1>
<div class="openblock partintro">
<div class="content">
This section describes the minimal steps to install Skipper on your local machine in addition to using Skipper to installing a sample application.
It is the &#8220;three-second tour&#8221;.
After completing this section, you can move on to the <a href="#three-minute-tour">Three minute Tour</a>.
When you are ready to dive deeper, head on over to the &#8220;three-hour tour&#8221; section, <a href="#three-hour-tour">Using Skipper</a>.
(Well, it is not really three hours&#8230;&#8203;.)
</div>
</div>
<div class="sect1">
<h2 id="getting-started-system-requirements"><a class="anchor" href="#getting-started-system-requirements"></a>5. System Requirements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Skipper server is a Spring Boot application.
Both the server and the shell are based on Java 8.
The server uses an RDBMS to store state.
An embedded H2 database is used if you do not provide a Data Source configuration through Spring Boot configuration properties.
Supported databases are H2, HSQLDB, MySQL, Oracle, Postgresql, DB2, and SqlServer.
Schemas are created on server startup</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-installing-skipper"><a class="anchor" href="#getting-started-installing-skipper"></a>6. Installing Skipper</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers installing Skipper on your <strong>local machine</strong>, as it is the easiest way to get started.
The section <a href="#skipper-installation">Installation</a> discusses installing on Cloud Foundry and Kubernetes.
It also shows additional options for installing on your local machine.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Download the Skipper server and shell apps by using the following commands in a terminal session:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">wget http://repo.spring.io/release/org/springframework/cloud/spring-cloud-skipper-server/2.0.2.RELEASE/spring-cloud-skipper-server-2.0.2.RELEASE.jar

wget http://repo.spring.io/release/org/springframework/cloud/spring-cloud-skipper-shell/2.0.2.RELEASE/spring-cloud-skipper-shell-2.0.2.RELEASE.jar</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Launch the server and shell apps by using the following commands in a terminal session:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-skipper-server-2.0.2.RELEASE.jar


java -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The default port that the server listens on is 7577.  That is <code>SKPR</code> on a telephone keypad.  :)</p>
</div>
<div class="paragraph">
<p>There is also a docker image hosted on <a href="https://hub.docker.com/r/springcloud/spring-cloud-skipper-server/">dockerhub</a></p>
</div>
<div class="paragraph">
<p><strong>Now install some apps!</strong></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="three-second-tour"><a class="anchor" href="#three-second-tour"></a>7. A Three-second Tour</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The default configuration of Skipper deploys apps to the local machine.
The default configuration also has one local repository, named <code>local</code>, where you can upload packages.
You can get a list of the package repositories by using the command <code>repo list</code>, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;repo list
╔════════════╤═══════════════════════════════════════════════════════════╤═════╤═════╗
║    Name    │                            URL                            │Local│Order║
╠════════════╪═══════════════════════════════════════════════════════════╪═════╪═════╣
║local       │https://10.55.13.45:7577                                    │true │1    ║
╚════════════╧═══════════════════════════════════════════════════════════╧═════╧═════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Search for the available packages using the <code>package search</code> or its alias <code>package list</code> command.
The following example shows the <code>package search</code> command and typical output for it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the Maven-based Hello World application by using the <code>package install</code> command.
Since this application picks a random port for the HTTP server by default, we specify the Spring Boot property <code>server.port</code>, prefixed with <code>spec.applicationProperties</code>.
The prefix is due to the internal format of the <a href="#package-templates">template file</a>.
The following example shows the whole command with its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --release-name helloworld-local --package-name helloworld --package-version 1.0.0 --properties spec.applicationProperties.server.port=8099
Released helloworld-local. Now at version v1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ curl http://localhost:8099/greeting
Hello World!</pre>
</div>
</div>
<div class="paragraph">
<p>The release name, <code>helloworld-local</code>, is used for subsequent commands, such as <code>release status</code>, <code>release upgrade</code> or <code>release delete</code>.</p>
</div>
<div class="paragraph">
<p>To see the status of the release, use the <code>release status</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworld-local
╔═══════════════╤═════════════════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Fri Oct 27 16:17:53 IST 2017                                                         ║
║Status         │DEPLOYED                                                                             ║
║Platform Status│All applications have been successfully deployed.                                    ║
║               │[helloworld-local.helloworld-v1], State = [helloworld-local.helloworld-v1-0=deployed]║
╚═══════════════╧═════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can upgrade the release.
The <code>1.0.1</code> package refers to a newly released application that changed the default value of the greeting to be in <code>Portuguese</code>.
The following example shows a typical <code>release upgrade</code> command with its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworld-local --package-name helloworld --package-version 1.0.1  --properties spec.applicationProperties.server.port=8100
helloworld-local has been upgraded.  Now at version v2.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example command deploys the new version of the application, waits until it is healthy, and then destroys the old version of the application.
You can then see the status of the application by using the <code>release status</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworld-local
╔═══════════════╤═════════════════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Fri Oct 27 16:20:07 IST 2017                                                         ║
║Status         │DEPLOYED                                                                             ║
║Platform Status│All applications have been successfully deployed.                                    ║
║               │[helloworld-local.helloworld-v2], State = [helloworld-local.helloworld-v2-0=deployed]║
╚═══════════════╧═════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint at the new port and see that the application has been updated, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ curl http://localhost:8100/greeting
Olá Mundo!</pre>
</div>
</div>
<div class="paragraph">
<p>To delete the release, use the <code>delete</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release delete --release-name helloworld-local
helloworld-local has been deleted.</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This example, where the upgrade changed only a property of the application, is not realistic.
A more realistic example is the case where code has changed so that the updated application behaves differently.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also deploy the other packages named <code>helloworld-docker</code> to the local machine.</p>
</div>
<div class="paragraph">
<p>The examples in this section have shown the most basic operations.
Other interesting commands such as <code>manifest get</code>, <code>release rollback</code>, <code>release list</code>, and <code>release history</code> are covered in the <a href="#three-minute-tour">Three minute Tour</a>.</p>
</div>
</div>
</div>
<h1 id="three-minute-tour" class="sect0"><a class="anchor" href="#three-minute-tour"></a>Three minute Tour</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Picking up from where the <a href="#three-second-tour">A Three-second Tour</a> left off, this section walks through the additional commands and other features of Skipper.
Each section walks through the same set of operations, but for a different platform:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#tour-local">Local Machine</a></p>
</li>
<li>
<p><a href="#tour-cloud-foundry">Cloud Foundry</a></p>
</li>
<li>
<p><a href="#tour-kubernetes">Kuberenetes</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tour-local"><a class="anchor" href="#tour-local"></a>8. Local Machine</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Start up the server and shell as in the <a href="#three-second-tour">three-second tour</a>.</p>
</div>
<div class="paragraph">
<p>Now you can install and then update the Hello World application.
Start by running the <code>package install</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --release-name helloworldlocal --package-name helloworld --package-version 1.0.0 --properties spec.applicationProperties.server.port=8099
Released helloworldlocal. Now at version v1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl http://localhost:8099/greeting
Hello World!
$ curl http://localhost:8099/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use a YAML file to update the release.
This application contains a Spring Boot <code>@ConfigurationProperty</code>, named <code>helloworld.greeting</code>, so we set that along with a standard Spring Boot property: <code>endpoints.sensitive=false</code>.
We also bump the memory up to 2G, make the Boot actuator endpoint not sensitive, and set the port to 8100.</p>
</div>
<div class="paragraph">
<p>The <code>helloworld-upgrade-local.yml</code> file contains the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spec:
  applicationProperties:
    server.port: 8100
    endpoints.sensitive: false
    helloworld.greeting: yo
  deploymentProperties:
    spring.cloud.deployer.memory: 2048m</pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>release upgrade</code> command, with its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldlocal --package-name helloworld --package-version 1.0.1 --file /home/mpollack/helloworld-upgrade-local.yml
helloworldlocal has been upgraded.  Now at version v2.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--package-version 1.0.1</code> command line option is also used to upgrade to a newer version of the package.</p>
</div>
<div class="paragraph">
<p>The current upgrade strategy is simple: If the new app is healthy, the old app is removed.
There is no rolling upgrade option. All new apps are deployed and checked for health. Then any previous versions are removed.
More flexible upgrade strategies are planned in a future release of Skipper.</p>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and the <code>about</code> endpoint, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl http://localhost:8100/greeting
yo
$ curl http://localhost:8100/about
Hello World v1.0.1.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also view the endpoints in your browser.</p>
</div>
<div class="paragraph">
<p>The <code>list</code> command shows you the current <code>DEPLOYED</code> and <code>DELETED</code> releases for every release name.
In this case there, is just one entry, as you can see with the <code>release list</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release list
╔═══════════════╤═══════╤═════════════╤════════╤══════════╤═════════╤═════════╤════════════════════════════════════════════════════╗
║     Name      │Version│Last updated │ Status │ Package  │ Package │Platform │                  Platform Status                   ║
║               │       │             │        │   Name   │ Version │  Name   │                                                    ║
╠═══════════════╪═══════╪═════════════╪════════╪══════════╪═════════╪═════════╪════════════════════════════════════════════════════╣
║helloworldlocal│2      │Fri Oct 27   │DEPLOYED│helloworld│1.0.1    │default  │[helloworldlocal.helloworld-v2], State =            ║
║               │       │16:39:03 IST │        │          │         │         │[helloworldlocal.helloworld-v2-0=deployed]          ║
║               │       │2017         │        │          │         │         │                                                    ║
╚═══════════════╧═══════╧═════════════╧════════╧══════════╧═════════╧═════════╧════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get the full history of the release by using the <code>history</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldlocal
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Fri Oct 27 16:39:03 IST 2017│DEPLOYED│helloworld  │1.0.1          │Upgrade complete║
║1      │Fri Oct 27 16:37:59 IST 2017│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see what changed, you can look at the Skipper manifest for each release by using the <code>manifest get</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get --release-name helloworldlocal --release-version 2

---
# Source: helloworld.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: helloworld
  type: demo
spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld:1.0.1.RELEASE
  applicationProperties:
    server.port: 8100
    endpoints.sensitive: false
    helloworld.greeting: yo
  deploymentProperties:
    spring.cloud.deployer.memory: 2048m
    spring.cloud.deployer.count: 1</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>manifest get</code> command and its output for version 1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get --release-name helloworldlocal --release-version 1

---
# Source: helloworld.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: helloworld
  type: demo
spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld:1.0.0.RELEASE
  applicationProperties:
    server.port: 8099
  deploymentProperties:</code></pre>
</div>
</div>
<div class="paragraph">
<p>(A <code>manifest diff</code> command is coming in a future release.)</p>
</div>
<div class="paragraph">
<p>Now we can use the <code>rollback</code> command to deploy an older version of the application.
Since we have the manifest for that version, we have all we need to redeploy an earlier release, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release rollback --release-name helloworldlocal --release-version 1
helloworldlocal has been rolled back.  Now at version v3.</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The history now shows a new <code>v3</code> version, even though it is identical in terms of app behavior to the <code>v1</code> version.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>release history</code> command shows all the versions that have been deployed, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldlocal
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║3      │Fri Oct 27 16:42:47 IST 2017│DEPLOYED│helloworld  │1.0.0          │Upgrade complete║
║2      │Fri Oct 27 16:39:03 IST 2017│DELETED │helloworld  │1.0.1          │Delete complete ║
║1      │Fri Oct 27 16:37:59 IST 2017│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and see the output of each endpoint, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl http://localhost:8099/greeting
Hello World!
$ curl http://localhost:8099/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tour-cloud-foundry"><a class="anchor" href="#tour-cloud-foundry"></a>9. Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, follow the instructions in the section <a href="#skipper-installation-cloudfoundry">Installing on Cloud Foundry</a> to deploy the Skipper Server to Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>When you start the Skipper shell, by default, it tries to look for the Skipper server on the same (local) machine.
To specify the Skipper server that is running on Cloud Foundry, provide the <code>serverUrl</code> when launching the shell or use the <code>config</code> command after the shell has started.
The following example provides the <code>serverUrl</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar --spring.cloud.skipper.client.serverUri=https://mlp-skipper.cfapps.io/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example uses <code>config</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:&gt;skipper config --uri https://mlp-skipper.cfapps.io/api
Successfully targeted https://mlp-skipper.cfapps.io/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>repo list</code> command shows the <code>experimental</code> and <code>local</code> repositories, since they are configured by default.
The <code>local</code> repository is where you can upload new packages.
The <code>experimental</code> repository has a few "hello world" applications to help get you started.
The following example shows the <code>repo list</code> command and the output of our example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;repo list
╔════════════╤═══════════════════════════════════════════════════════════╤═════╤═════╗
║    Name    │                            URL                            │Local│Order║
╠════════════╪═══════════════════════════════════════════════════════════╪═════╪═════╣
║experimental│https://skipper-repository.cfapps.io/repository/experimental│false│0    ║
║local       │https://d4d6d1b6-c7e5-4226-69ec-01d4:7577                   │true │1    ║
╚════════════╧═══════════════════════════════════════════════════════════╧═════╧═════╝</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Above example assumes that <code>experimental</code> repository has been added to the server configuration. More about
working with repositories can be found from <a href="#using-repositories">Repositories</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows the <code>package search</code> command and the output of our example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The command <code>platform list</code> shows the platforms with which the server has been configured, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">╔════╤════════════╤═════════════════════════════════════════════════════════════════════════╗
║Name│    Type    │                               Description                               ║
╠════╪════════════╪═════════════════════════════════════════════════════════════════════════╣
║pws │cloudfoundry│org = [scdf-ci], space = [space-mark], url = [https://api.run.pivotal.io]║
╚════╧════════════╧═════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, there is only one Cloud Foundry platform.</p>
</div>
<div class="paragraph">
<p>Now we can install the Hello World app (specifically, the maven based artifact).
The following example shows the <code>package install</code> command (with its output) that we use to install the <code>Hello World</code> application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --release-name helloworldpcf --package-name helloworld --package-version 1.0.0 --platform-name pws --properties spec.deploymentProperties.spring.cloud.deployer.cloudfoundry.route=helloworldpcf.cfapps.io
Released helloworldpcf. Now at version v1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>spring.cloud.deployer.cloudfoundry.route=helloworldpcf.cfapps.io</code> deployment property is set so that, when different versions of this application are deployed, they have the same HTTP route.</p>
</div>
<div class="paragraph">
<p>Because the default value of that shell option is <code>default`he `--platform-name pws</code>, we used the command option.
When installing Skipper, you can register a platform under the name <code>default</code>, but it is a best practice to specify the target platform name.</p>
</div>
<div class="paragraph">
<p>You can monitor the progress of the deployment by using the <code>release status</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldpcf
╔═══════════════╤════════════════════════════════════════════════╗
║Last Deployed  │Thu Jan 18 13:18:44 EST 2018                    ║
║Status         │DEPLOYED                                        ║
║Platform Status│The applications are being deployed.            ║
║               │[helloworldpcf-helloworld-v1], State = [partial]║
╚═══════════════╧════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eventually, the Platform Status says, <code>All applications have been successfully deployed.</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>DEPLOYED</code> status in the preceding example indicates that Skipper has told the platform to deploy.
Skipper does not keep track of the intermediate states 'deploying' or 'deleting'.
The platform status provides finer-grained status information.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>cf apps</code> command now has a new listing for this deployed application, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-mark as mpollack@gopivotal.com...
OK

name                          requested state   instances   memory   disk   urls
helloworldpcf-helloworld-v1   started           1/1         1G       1G     helloworldpcf.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and the <code>about</code> endpoint, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://helloworldpcf.cfapps.io/greeting
Hello World!
$ curl https://helloworldpcf.cfapps.io/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the application is based on the <code>&lt;release-name&gt;-&lt;package-name&gt;-v&lt;incrementing-counter&gt;</code> convention.</p>
</div>
<div class="paragraph">
<p>Also note that we specified a route for this application that is different than the application&#8217;s name.
The deployment property <code>spring.cloud.deployer.cloudfoundry.route</code> is set to something that does not change across the deployment of different versions of this application&#8201;&#8212;&#8201;in this case, <code>helloworldpcf.cfapps.io</code>.</p>
</div>
<div class="paragraph">
<p>The package provides a means to template the application version, application properties, and deployment properties that are used to deploy the application to Cloud Foundry.
The <code>manifest get</code> command shows the final YAML file which is passed off to the Spring Cloud Deployer Library, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get --release-name helloworldpcf

---
# Source: helloworld.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: helloworld
  type: demo
spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld:1.0.0.RELEASE
  applicationProperties:
  deploymentProperties:
    spring.cloud.deployer.cloudfoundry.route: helloworldpcf.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>The manifest format is inspired by the Kubernetes Resource file format.
By looking at the manifest, you can see which Maven artifact was used and which properties were set before the final push to Cloud Foundry.
A future release of Skipper will use the metadata values to support searching for releases based on those values.</p>
</div>
<div class="paragraph">
<p>Since it is somewhat awkward to specify multiple flattened-out YAML values for the <code>--properties</code> argument in the shell, you can also specify the location of a YAML file when installing or upgrading.
In the next example, we use a YAML file, named <code>helloworld-upgrade.yml</code>, to update the release.
This application contains a Spring Boot <code>@ConfigurationProperty</code> named <code>helloworld.greeting</code>, so we set that, along with a standard Spring Boot property: <code>endpoints.sensitive=false</code>.
We also bump the memory up to 2G from the default 1G.
The contents of the <code>helloworld-upgrade.yml</code> file follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">spec:
  applicationProperties:
    endpoints.sensitive: false
    helloworld.greeting: yo
  deploymentProperties:
    spring.cloud.deployer.cloudfoundry.route: helloworldpcf.cfapps.io
    spring.cloud.deployer.memory: 2048m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can run the <code>release upgrade</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldpcf --package-name helloworld --package-version 1.0.0 --file /home/mpollack/helloworld-upgrade.yml
helloworldpcf has been upgraded.  Now at version v2.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example starts another instance of the hello world application, and Skipper determines when it can stop the instance of the previous instance.
If you do not specify <code>--package-version</code>, it picks the latest version of the <code>helloworld</code> package.
You do not need to specify the <code>--platform-name</code>, as it is always where the current application was deployed.</p>
</div>
<div class="paragraph">
<p>The following example shows the <code>cf apps</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-mark as mpollack@gopivotal.com...
OK

name                          requested state   instances   memory   disk   urls
helloworldpcf-helloworld-v1   started           1/1         1G       1G     helloworldpcf.cfapps.io
helloworldpcf-helloworld-v2   stopped           0/1         2G       1G     helloworldpcf.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>cf routes</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf routes
Getting routes for org scdf-ci / space space-mark as mpollack@gopivotal.com ...

space        host                          domain      port   path   type   apps                                                      service
space-mark   helloworldpcf                 cfapps.io                        helloworldpcf-helloworld-v1,helloworldpcf-helloworld-v2</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, Skipper is checking the health of the new application.
The default health checks whether the HTTP port of the application is open.
There is a customization in Skipper that influences the way the health check is performed.
The <code>spring.cloud.skipper.server.strategies.healthcheck.timeoutInMillis</code> property is the maximum time the upgrade process waits for a healthy app.
The default value is 5 minutes.
Skipper fails the deployment if it is not healthy within that time.
The <code>spring.cloud.skipper.server.strategies.healthcheck.sleepInMillis</code> property is how long to sleep between health checks.</p>
</div>
<div class="paragraph">
<p>The current upgrade strategy is very simple: If the new app is healthy, the old app is removed.
There is not a rolling upgrade option, all new apps are deployed, checked for health, and then previous versions removed.
More flexible upgrade strategies are planned in a future release.</p>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and the <code>about</code> endpoint, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://helloworldpcf.cfapps.io/greeting
yo
$ curl https://helloworldpcf.cfapps.io/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>release list</code> command shows the current <code>DEPLOYED</code> and <code>DELETED</code> releases for every release name.
In the following example from the sample application, there is only one entry, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">╔═════════════╤═══════╤══════════════════╤════════╤═══════════╤═══════════╤══════════╤════════════════════════════════════════╗
║    Name     │Version│   Last updated   │ Status │  Package  │  Package  │ Platform │         Platform Status                ║
║             │       │                  │        │   Name    │  Version  │   Name   │                                        ║
╠═════════════╪═══════╪══════════════════╪════════╪═══════════╪═══════════╪══════════╪════════════════════════════════════════╣
║helloworldpcf│2      │Thu Jan 18        │DEPLOYED│helloworld │1.0.0      │pws       │[helloworldpcf-helloworld-v2], State =  ║
║             │       │13:26:50 EST 2018 │        │           │           │          │[helloworldpcf-helloworld-v2-0=deployed]║
╚═════════════╧═══════╧══════════════════╧════════╧═══════════╧═══════════╧══════════╧════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get the full history of the release byusing the <code>release history</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldpcf
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Thu Jan 18 13:26:50 EST 2018│DEPLOYED│helloworld  │1.0.0          │Upgrade complete║
║1      │Thu Jan 18 13:18:44 EST 2018│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>A more typical upgrade process is not to change application properties but to change the version of the application because the code has changed.
In the following example, we now upgrade the release to use a new Maven artifact, version 1.0.1, which also corresponds to version 1.0.1 of the <code>helloworld</code> Skipper package.
In this case, we do not add any additional properties other than the route.
The following example shows the <code>release upgrade</code> command (with its update) to deploy version 1.0.1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldpcf --package-name helloworld --package-version 1.0.1 --properties spec.deploymentProperties.spring.cloud.deployer.cloudfoundry.route=helloworldpcf.cfapps.io
helloworldpcf has been upgraded.  Now at version v3.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the current release&#8217;s property values, such as using 2G or the greeting being <code>yo</code> are not carried over.
A future release will introduce a <code>--reuse-properties</code> command that will carry the current release properties over to the next release to be made.
You can monitor the status of the upgrade by using the <code>status</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldpcf
╔═══════════════╤════════════════════════════════════════════════╗
║Last Deployed  │Thu Jan 18 13:49:42 EST 2018                    ║
║Status         │UNKNOWN                                         ║
║Platform Status│The applications are being deployed.            ║
║               │[helloworldpcf-helloworld-v3], State = [partial]║
╚═══════════════╧════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now a <code>curl</code> command shows the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">curl https://helloworldpcf.cfapps.io/greeting
Olá Mundo!
$ curl https://helloworldpcf.cfapps.io/about
Hello World v1.0.1.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>Our release history is now as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldpcf
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║3      │Thu Jan 18 13:49:42 EST 2018│DEPLOYED│helloworld  │1.0.1          │Upgrade complete║
║2      │Thu Jan 18 13:26:50 EST 2018│DELETED │helloworld  │1.0.0          │Delete complete ║
║1      │Thu Jan 18 13:18:44 EST 2018│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we use the <code>rollback</code> command to deploy an older version of the application.
Since we have the manifest for that version, we have all we need to redeploy an earlier release.
The following example shows the <code>release rollback</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release rollback --release-name helloworldpcf --release-version 2
helloworldpcf has been rolled back.  Now at version v4.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The history now shows a new <code>v4</code> version, even though it is identical in terms of app behavior to the <code>v2</code> version, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldpcf
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║4      │Thu Jan 18 13:51:43 EST 2018│DEPLOYED│helloworld  │1.0.0          │Upgrade complete║
║3      │Thu Jan 18 13:49:42 EST 2018│DELETED │helloworld  │1.0.1          │Delete complete ║
║2      │Thu Jan 18 13:26:50 EST 2018│DELETED │helloworld  │1.0.0          │Delete complete ║
║1      │Thu Jan 18 13:18:44 EST 2018│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>curl</code> commands shows the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://helloworldpcf.cfapps.io/greeting
yo
$ curl https://helloworldpcf.cfapps.io/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tour-kubernetes"><a class="anchor" href="#tour-kubernetes"></a>10. Kuberenetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this example, we run the Skipper server on the local machine and deploy to minikube, which also runs on the local machine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The upgrade approach in 1.02 does not correctly handle the routing of HTTP traffic between versions, so the following representation may not be exactly accurate.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The Spring Cloud Deployer for Kubernetes creates a service, a replication controller, and a pod for the app (or, optionally, a deployment).
This is not an issue for apps that communicate over Messaging middleware and will be addressed in a future release.</p>
</div>
<div class="paragraph">
<p>Start the Skipper server with the <code>--spring.config.additional-location=skipper.yml</code> option. The YAML content follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spring:
  cloud:
    skipper:
      server:
        platform:
          kubernetes:
            accounts:
              minikube:
                namespace: default</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>repo list</code> command shows the <code>experimental</code> and <code>local</code> repositories, since they are configured by default, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;repo list
╔════════════╤═══════════════════════════════════════════════════════════╤═════╤═════╗
║    Name    │                            URL                            │Local│Order║
╠════════════╪═══════════════════════════════════════════════════════════╪═════╪═════╣
║experimental│https://skipper-repository.cfapps.io/repository/experimental│false│0    ║
║local       │https://d4d6d1b6-c7e5-4226-69ec-01d4:7577                   │true │1    ║
╚════════════╧═══════════════════════════════════════════════════════════╧═════╧═════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>package search</code> command shows the Name, the Version, and the Description, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>platform list</code> command shows which platforms the server has been configured with&#8201;&#8212;&#8201;in this case, one Kubernetes namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;platform list
╔════════╤══════════╤══════════════════════════════════════════════════════════════════════════════════════╗
║  Name  │   Type   │                                     Description                                      ║
╠════════╪══════════╪══════════════════════════════════════════════════════════════════════════════════════╣
║minikube│kubernetes│master url = [https://192.168.99.100:8443/], namespace = [default], api version = [v1]║
╚════════╧══════════╧══════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can install the Hello World app (specifically, the Docker-based artifact), as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --release-name helloworldk8s --package-name helloworld-docker --package-version 1.0.0 --platform-name minikube --properties spec.deploymentProperties.spring.cloud.deployer.kubernetes.createNodePort=32123
Released helloworldk8s. Now at version v1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>We use the <code>--platform-name minikube</code> command option, because the default value of that shell option is <code>default</code>.
You can register a platform under the <code>default</code> name when installing Skipper, but it is a best practice to specify the target platform name.</p>
</div>
<div class="paragraph">
<p>You can monitor the process by using the <code>release status</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldk8s
╔═══════════════╤══════════════════════════════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Wed Oct 25 17:34:24 EDT 2017                                                                      ║
║Status         │DEPLOYED                                                                                          ║
║Platform Status│The applications are being deployed.                                                              ║
║               │[helloworldk8s-helloworld-docker-v1], State = [helloworldk8s-helloworld-docker-v1-cch68=deploying]║
╚═══════════════╧══════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eventually, the Platform Status says, <code>All applications have been successfully deployed.</code></p>
</div>
<div class="paragraph">
<p>Note that the <code>DEPLOYED</code> status in the preceding example indicates that Skipper has told the platform to deploy.
Skipper does not keep track of the intermediate states ('deploying' or 'deleting').</p>
</div>
<div class="paragraph">
<p>A <code>kubectl pods</code> command now shows a new listing for this deployed application, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ kubectl get pods
NAME                                       READY     STATUS    RESTARTS   AGE
helloworldk8s-helloworld-docker-v1-g8j39   0/1       Running   0          37s

$ kubectl get service
NAME                                 CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
helloworldk8s-helloworld-docker-v1   10.0.0.202   &lt;nodes&gt;       8080:32123/TCP   41s
kubernetes                           10.0.0.1     &lt;none&gt;        443/TCP          57m</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get the URL of this app on minikube, use the <code>minikube service</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ minikube service --url helloworldk8s-helloworld-docker-v1
https://192.168.99.100:32123</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and the <code>about</code> endpoint, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://192.168.99.100:32123/greeting
Hello World!
$ curl https://192.168.99.100:32123/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The name of the application is based on the following convention: <code>&lt;release-name&gt;-&lt;package-name&gt;-v&lt;incrementing-counter&gt;</code>.
Future releases will change this convention to correctly handle routing.</p>
</div>
<div class="paragraph">
<p>The package provides a means to template the application version, application properties, and deployment properties that are used to deploy the application to Kubernetes.
The <code>manifest get</code> command shows the final YAML file, which is passed off to the Spring Cloud Deployer Library, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get --release-name helloworldk8s

---
# Source: template.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: helloworld-docker
spec:
  resource: docker:springcloud/spring-cloud-skipper-samples-helloworld:1.0.0.RELEASE
  applicationProperties:
  deploymentProperties:
    spring.cloud.deployer.kubernetes.createNodePort: 32123</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format of the is inspired by the Kubernetes Resource file format.
By looking at the manifest, you can see which Docker images were used and which properties were set before the final push to Kubernetes.
A future release of Skipper will use the metadata values to support searching for releases based on those values.</p>
</div>
<div class="paragraph">
<p>Since it is somewhat awkward to specify multiple flattened out YAML values for the <code>--properties</code> argument in the shell, you can also specify the location of a YAML file when installing or upgrading.
We use a YAML file when we update the release.
This application contains a Spring Boot
<code>@ConfigurationProperty</code> named <code>helloworld.greeting</code>, so we set that, along with a standard Spring Boot property: <code>endpoints.sensitive=false</code>.  We also bump the memory down to 768m from the default 1G.
The following listing shows all the settings:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">spec:
  applicationProperties:
    endpoints.sensitive: false
    helloworld.greeting: yo
  deploymentProperties:
    spring.cloud.deployer.kubernetes.createNodePort: 32124
    spring.cloud.deployer.memory: 768m</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>release upgrade</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldk8s --package-name helloworld-docker --package-version 1.0.0 --file /home/mpollack/helloworld-upgrade-k8s.yml
helloworldk8s has been upgraded.  Now at version v2.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding command starts another instance of the hello world application.
If you do not specify <code>--package-version</code>, it picks the latest version of the <code>helloworld-docker</code> package.
You do not need to specify the <code>--platform-name</code> as it is always where the current application was deployed.</p>
</div>
<div class="paragraph">
<p>The following example shows the <code>kubectl get all</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ kubectl get all
NAME                                          READY     STATUS    RESTARTS   AGE
po/helloworldk8s-helloworld-docker-v1-g8j39   1/1       Running   0          2m
po/helloworldk8s-helloworld-docker-v2-jz85l   0/1       Running   0          50s

NAME                                    DESIRED   CURRENT   READY     AGE
rc/helloworldk8s-helloworld-docker-v1   1         1         1         2m
rc/helloworldk8s-helloworld-docker-v2   1         1         0         50s

NAME                                     CLUSTER-IP   EXTERNAL-IP   PORT(S)          AGE
svc/helloworldk8s-helloworld-docker-v1   10.0.0.202   &lt;nodes&gt;       8080:32123/TCP   2m
svc/helloworldk8s-helloworld-docker-v2   10.0.0.154   &lt;nodes&gt;       8080:32124/TCP   51s
svc/kubernetes                           10.0.0.1     &lt;none&gt;        443/TCP          59m</code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, Skipper is looking to see if the health endpoint of the Boot application is OK.
The <code>spring.cloud.skipper.server.strategies.healthcheck.timeoutInMillis</code> property sets the maximum time the upgrade process waits for a healthy app.
The default value is 5 minutes.
Skipper fails the deployment if it is not healthy within that time.
The <code>spring.cloud.skipper.server.strategies.healthcheck.sleepInMillis</code> property sets how long to sleep between health checks.</p>
</div>
<div class="paragraph">
<p>The current upgrade strategy is simple: If the new app is healthy, the old app is removed.
There is not a rolling upgrade option. All new apps are deployed and checked for health. Then any previous versions are removed.
Future releases will have more flexible upgrade strategies, along with the introduction of the <a href="https://projects.spring.io/spring-statemachine/">Spring Cloud State Machine</a> project to orchestrate the update process.</p>
</div>
<div class="paragraph">
<p>You can now curl the <code>greeting</code> endpoint and the <code>about</code> endpoint, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://192.168.99.100:32124/greeting
yo
$ curl https://192.168.99.100:32124/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>release list</code> command shows the current <code>DEPLOYED</code> and <code>DELETED</code> release for every release name.
In the following example, there is only one entry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release list
╔═════════════╤═══════╤════════════════════════════╤════════╤═════════════════╤═══════════════╤═════════════╤═══════════════╗
║    Name     │Version│        Last updated        │ Status │  Package Name   │Package Version│Platform Name│Platform Status║
╠═════════════╪═══════╪════════════════════════════╪════════╪═════════════════╪═══════════════╪═════════════╪═══════════════╣
║helloworldk8s│2      │Wed Oct 25 17:36:16 EDT 2017│DEPLOYED│helloworld-docker│1.0.0          │minikube     │               ║
╚═════════════╧═══════╧════════════════════════════╧════════╧═════════════════╧═══════════════╧═════════════╧═══════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get the full history of the release using the <code>history</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>skipper:&gt;release history --release-name helloworldk8s
╔═══════╤════════════════════════════╤════════╤═════════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │  Package Name   │Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪═════════════════╪═══════════════╪════════════════╣
║2      │Wed Oct 25 17:36:16 EDT 2017│DEPLOYED│helloworld-docker│1.0.0          │Upgrade complete║
║1      │Wed Oct 25 17:34:24 EDT 2017│DELETED │helloworld-docker│1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧═════════════════╧═══════════════╧════════════════╝</pre>
</div>
</div>
<div class="paragraph">
<p>A more typical upgrade process is not to change application properties but to change the version of the application because the code has changed.
We can now upgrade the release to use a new Docker artifact, version 1.0.1, which also corresponds to version 1.0.1 of the <code>helloworld</code> Skipper package.
In the following example, we do not add any additional properties other than <code>NodePort</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldk8s --package-name helloworld-docker --package-version 1.0.1 --properties spec.deploymentProperties.spring.cloud.deployer.kubernetes.createNodePort=32125
Released helloworldk8s. Now at version v3.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the the current release&#8217;s property values, such as using 2G RAM or the greeting being <code>yo</code>, are not carried over.
A future release will introduce a <code>--reuse-properties</code> command option that will carry the current release properties over to the next release to be made.
You can monitor the status of the upgrade by using the <code>status</code> command, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldk8s
╔═══════════════╤══════════════════════════════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Wed Oct 25 17:41:33 EDT 2017                                                                      ║
║Status         │DEPLOYED                                                                                          ║
║Platform Status│All applications have been successfully deployed.                                                 ║
║               │[helloworldk8s-helloworld-docker-v3], State = [helloworldk8s-helloworld-docker-v3-sb59j=deployed] ║
╚═══════════════╧══════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>A <code>curl</code> command shows the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://192.168.99.100:32125/greeting
Olá Mundo!

$ curl https://192.168.99.100:32125/about
Hello World v1.0.1.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows the <code>release history</code> command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldk8s
╔═══════╤════════════════════════════╤════════╤═════════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │  Package Name   │Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪═════════════════╪═══════════════╪════════════════╣
║3      │Wed Oct 25 17:41:33 EDT 2017│DEPLOYED│helloworld-docker│1.0.1          │Upgrade complete║
║2      │Wed Oct 25 17:36:16 EDT 2017│DELETED │helloworld-docker│1.0.0          │Delete complete ║
║1      │Wed Oct 25 17:34:24 EDT 2017│DELETED │helloworld-docker│1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧═════════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we use the <code>rollback</code> command to deploy an older version of the application.
Since we have the manifest for that version, we have all we need to redeploy an earlier release.
The following example shows the rollback command and its output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release rollback --release-name helloworldk8s --release-version 2
helloworldk8s has been rolled back.  Now at version v4.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The history now shows a new <code>v4</code> version, even though it is identical to the <code>v2</code> version, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldk8s
╔═══════╤════════════════════════════╤════════╤═════════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │  Package Name   │Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪═════════════════╪═══════════════╪════════════════╣
║4      │Wed Oct 25 17:44:25 EDT 2017│DEPLOYED│helloworld-docker│1.0.0          │Upgrade complete║
║3      │Wed Oct 25 17:41:33 EDT 2017│DELETED │helloworld-docker│1.0.1          │Delete complete ║
║2      │Wed Oct 25 17:36:16 EDT 2017│DELETED │helloworld-docker│1.0.0          │Delete complete ║
║1      │Wed Oct 25 17:34:24 EDT 2017│DELETED │helloworld-docker│1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧═════════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>curl</code> commands now shows the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ curl https://192.168.99.100:32124/greeting
yo
$ curl https://192.168.99.100:32124/about
Hello World v1.0.0.RELEASE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="tour-cf-manifest"><a class="anchor" href="#tour-cf-manifest"></a>11. CF manifest based deployments</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Following examples cover the scenarios of managing CF manifest based packages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;platform list
╔═══════╤════════════╤══════════════════════════════════════════════════════════════════════════╗
║ Name  │    Type    │                               Description                                ║
╠═══════╪════════════╪══════════════════════════════════════════════════════════════════════════╣
║cf-dev │cloudfoundry│org = [scdf-ci], space = [space-ilaya], url = [https://api.run.pivotal.io]║
╚═══════╧════════════╧══════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upload the log application packages available in the test directory under <code>spring-cloud-skipper-server-core</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --repo-name local --path spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/log/logcf-1.0.0.zip
Package uploaded successfully:[logcf:1.0.0]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --repo-name local --path spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/log/logcf-1.0.1.zip
Package uploaded successfully:[logcf:1.0.1]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║logcf            │1.0.0  │The log sink uses the application logger to output the data for inspection.     ║
║logcf            │1.0.1  │The log sink uses the application logger to output the data for inspection.     ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the <code>logcf</code> package with the version <code>1.0.0</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install logcf --release-name a1 --platform-name cf-dev --package-version 1.0.0
Released a1. Now at version v1.

skipper:&gt;release list
╔════╤═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════╤═══════════════════════════════════╗
║Name│Version│        Last updated        │ Status │Package Name│Package Version│Platform Name│          Platform Status          ║
╠════╪═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════╪═══════════════════════════════════╣
║a1  │1      │Thu Aug 09 12:29:02 IST 2018│DEPLOYED│logcf       │1.0.0          │cf-dev       │[a1-v1], State = [a1-v1-0=deployed]║
╚════╧═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════╧═══════════════════════════════════╝

skipper:&gt;release history a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║1      │Thu Aug 09 12:29:02 IST 2018│DEPLOYED│logcf       │1.0.0          │Install complete║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝

skipper:&gt;manifest get a1
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "maven://org.springframework.cloud.stream.app:log-sink-rabbit"
  "version": "1.3.0.RELEASE"
  "manifest":
    "memory": "1024"
    "disk-quota": "2048"
    "instances": "1"
    "services":
    - "rabbit"
    "timeout": "180"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name    requested state   instances   memory   disk   urls
a1-v1   started           1/1         1G       2G     a1-v1.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upgrade the <code>logcf</code> package with the version <code>1.0.1</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --package-name logcf --package-version 1.0.1 --release-name a1
a1 has been upgraded.  Now at version v2.

skipper:&gt;release list
╔════╤═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════╤═══════════════════════════════════╗
║Name│Version│        Last updated        │ Status │Package Name│Package Version│Platform Name│          Platform Status          ║
╠════╪═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════╪═══════════════════════════════════╣
║a1  │2      │Thu Aug 09 12:33:44 IST 2018│DEPLOYED│logcf       │1.0.1          │cf-dev       │[a1-v2], State = [a1-v2-0=deployed]║
╚════╧═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════╧═══════════════════════════════════╝

skipper:&gt;release history a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Thu Aug 09 12:33:44 IST 2018│DEPLOYED│logcf       │1.0.1          │Upgrade complete║
║1      │Thu Aug 09 12:29:02 IST 2018│DELETED │logcf       │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝

skipper:&gt;manifest get a1
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "maven://org.springframework.cloud.stream.app:log-sink-rabbit"
  "version": "1.3.1.RELEASE"
  "manifest":
    "memory": "1024"
    "disk-quota": "2048"
    "instances": "1"
    "services":
    - "rabbit"
    "timeout": "180"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name    requested state   instances   memory   disk   urls
a1-v2   started           1/1         1G       2G     a1-v2.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Rollback the <code>logcf</code> package with the version <code>1.0.1</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release rollback a1
a1 has been rolled back.  Now at version v3.

skipper:&gt;release list
╔════╤═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════╤═══════════════╗
║Name│Version│        Last updated        │ Status │Package Name│Package Version│Platform Name│Platform Status║
╠════╪═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════╪═══════════════╣
║a1  │3      │Thu Aug 09 12:39:17 IST 2018│DEPLOYED│logcf       │1.0.0          │cf-dev       │               ║
╚════╧═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════╧═══════════════╝

skipper:&gt;release history a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│   Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════════╣
║3      │Thu Aug 09 12:39:17 IST 2018│DEPLOYED│logcf       │1.0.0          │Rollback complete║
║2      │Thu Aug 09 12:33:44 IST 2018│DELETED │logcf       │1.0.1          │Delete complete  ║
║1      │Thu Aug 09 12:29:02 IST 2018│DELETED │logcf       │1.0.0          │Delete complete  ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════════╝

skipper:&gt;manifest get a1
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "maven://org.springframework.cloud.stream.app:log-sink-rabbit"
  "version": "1.3.0.RELEASE"
  "manifest":
    "memory": "1024"
    "disk-quota": "2048"
    "instances": "1"
    "services":
    - "rabbit"
    "timeout": "180"


$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name    requested state   instances   memory   disk   urls
a1-v3   started           1/1         1G       2G     a1-v3.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upgrade the <code>logcf</code> package into the latest <code>1.0.1</code> version and also update the manifest&#8217;s memory to <code>2G</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --package-name logcf --release-name a1 --properties "spec.manifest.memory=2G"
a1 has been upgraded.  Now at version v4.

skipper:&gt;release list
╔════╤═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════╤═══════════════════════════════════╗
║Name│Version│        Last updated        │ Status │Package Name│Package Version│Platform Name│          Platform Status          ║
╠════╪═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════╪═══════════════════════════════════╣
║a1  │4      │Thu Aug 09 12:49:49 IST 2018│DEPLOYED│logcf       │1.0.1          │cf-dev       │[a1-v4], State = [a1-v4-0=deployed]║
╚════╧═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════╧═══════════════════════════════════╝

skipper:&gt;release history a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║4      │Thu Aug 09 12:49:49 IST 2018│DEPLOYED│logcf       │1.0.1          │Upgrade complete║
║3      │Thu Aug 09 12:39:17 IST 2018│DELETED │logcf       │1.0.0          │Delete complete ║
║2      │Thu Aug 09 12:33:44 IST 2018│DELETED │logcf       │1.0.1          │Delete complete ║
║1      │Thu Aug 09 12:29:02 IST 2018│DELETED │logcf       │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝

skipper:&gt;manifest get a1
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "maven://org.springframework.cloud.stream.app:log-sink-rabbit"
  "version": "1.3.1.RELEASE"
  "manifest":
    "memory": "2G"
    "disk-quota": "2048"
    "instances": "1"
    "services":
    - "rabbit"
    "timeout": "180"

$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name    requested state   instances   memory   disk   urls
a1-v4   started           1/1         2G       2G     a1-v4.cfapps.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>Delete the release</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release delete a1
a1 has been deleted.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how Skipper helps managing any application that can be deployed into CF using manifest
In this case, we have a couple of python packages that print the greeting messages.</p>
</div>
<div class="paragraph">
<p>Upload the python packages from the <code>spring-cloud-skipper-server-core</code> test directory</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --path spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/python/python-printer-1.0.0.zip
Package uploaded successfully:[python-printer:1.0.0]

skipper:&gt;package upload --path spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/python/python-printer-1.0.1.zip
Package uploaded successfully:[python-printer:1.0.1]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Install the python package</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --package-name python-printer --package-version 1.0.0 --release-name printer --platform-name cf-dev
Released printer. Now at version v1.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get printer
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "https://github.com/ilayaperumalg/sandbox/raw/master/python/1.0.0/hello.py-1.0.0.zip"
  "version": "1.0.0"
  "manifest":
    "memory": "1024"
    "disk-quota": "1024"
    "instances": "1"
    "health-check-type": "process"
    "buildpack": "python_buildpack"
    "timeout": "180"
    "command": "python hello.py"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name         requested state   instances   memory   disk   urls
printer-v1   started           1/1         1G       1G     printer-v1.cfapps.io</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf logs printer-v1
Retrieving logs for app printer-v1 in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...

   2018-08-09T13:33:36.55+0530 [APP/PROC/WEB/0] OUT Hello!
   2018-08-09T13:33:41.55+0530 [APP/PROC/WEB/0] OUT Hello!</code></pre>
</div>
</div>
<div class="paragraph">
<p>Upgrade the python package with the version <code>1.0.1</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade printer --package-name python-printer --package-version 1.0.1
printer has been upgraded.  Now at version v2.

skipper:&gt;manifest get printer
"apiVersion": "skipper.spring.io/v1"
"kind": "CloudFoundryApplication"
"spec":
  "resource": "https://github.com/ilayaperumalg/sandbox/raw/master/python/1.0.1/hello.py-1.0.1.zip"
  "version": "1.0.1"
  "manifest":
    "memory": "1024"
    "disk-quota": "1024"
    "instances": "1"
    "health-check-type": "process"
    "buildpack": "python_buildpack"
    "timeout": "180"
    "command": "python vanakkam.py"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf apps
Getting apps in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...
OK

name         requested state   instances   memory   disk   urls
printer-v2   started           1/1         1G       1G     printer-v2.cfapps.io</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">$ cf logs printer-v2
Retrieving logs for app printer-v2 in org scdf-ci / space space-ilaya as igopinathan@pivotal.io...

   2018-08-09T13:36:13.39+0530 [APP/PROC/WEB/0] OUT Vanakkam!
   2018-08-09T13:36:18.40+0530 [APP/PROC/WEB/0] OUT Vanakkam!</code></pre>
</div>
</div>
</div>
</div>
<h1 id="three-hour-tour" class="sect0"><a class="anchor" href="#three-hour-tour"></a>Using Skipper</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section is the "'three-hour tour'" of Skipper.
It describes how to configure and use the main feature set of Skipper in detail.
We will cover the shell, platforms, packages, and repositories.</p>
</div>
<div class="paragraph">
<p>Feel free to reach out on <a href="https://gitter.im/spring-cloud/spring-cloud-skipper">Gitter</a> for help and ask questions on <a href="https://stackoverflow.com/questions/tagged/spring-cloud-skipper">Stack Overflow</a>.
Issues can be filed on <a href="https://github.com/spring-cloud/spring-cloud-skipper/issues">Github issues</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-shell"><a class="anchor" href="#using-shell"></a>12. Skipper Shell</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shell is based on the <a href="https://projects.spring.io/spring-shell/">Spring Shell project</a>.
Two of the shell&#8217;s best features are tab-completion and colorization of commands.
Use the 'help' command or the <code>--help</code> argument when starting the shell to get help information.
The output of using the <code>--help</code> argument follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">Skipper Options:

  --spring.cloud.skipper.client.serverUri=&lt;uri&gt;                        Address of the Skipper Server [default: http://localhost:7577].
  --spring.cloud.skipper.client.username=&lt;USER&gt;                        Username of the Skipper Server [no default].
  --spring.cloud.skipper.client.password=&lt;PASSWORD&gt;                    Password of the Skipper Server [no default].
  --spring.cloud.skipper.client.credentials-provider-command=&lt;COMMAND&gt; Executes an external command which must return an OAuth Access Token [no default].
  --spring.cloud.skipper.client.skip-ssl-validation=&lt;true|false&gt;       Accept any SSL certificate (even self-signed) [default: no].

  --spring.shell.historySize=&lt;SIZE&gt;                 Default size of the shell log file [default: 3000].
  --spring.shell.commandFile=&lt;FILE&gt;                 Skipper Shell executes commands read from the file(s) and then exits.

  --help                                            This message.</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_shell_modes"><a class="anchor" href="#_shell_modes"></a>12.1. Shell Modes</h3>
<div class="paragraph">
<p>The shell can be started in either interactive or non-interactive mode.
In the case of the non-interactive mode, command line arguments are executed as Skipper commands, and then the shell exits.
If there are any arguments that do not have the prefix <code>spring.cloud.skipper.client</code>, they are considered as skipper commands to execute.</p>
</div>
<div class="paragraph">
<p>Consider the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar --spring.cloud.skipper.client.serverUri=http://localhost:9123/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example brings up the interactive shell and connects to <code><a href="http://localhost:9123/api" class="bare">localhost:9123/api</a></code>.
Now consider the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar --spring.cloud.skipper.client.serverUri=http://localhost:9123/api search</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding command connects to <code><a href="http://localhost:9123/api" class="bare">localhost:9123/api</a></code>, executes the <code>search</code> command, and then exits.</p>
</div>
<div class="paragraph">
<p>A more common use case would be to update a package from within a CI job&#8201;&#8212;&#8201;for example, in a Jenkins Stage, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">stage ('Build') {
    steps {
        checkout([
            $class: 'GitSCM',
            branches: [
                [name: "*/master"]
            ],
            userRemoteConfigs: [
                [url: "https://github.com/markpollack/skipper-samples.git"]
            ]
        ])
        sh '''
            VERSION="1.0.0.M1-$(date +%Y%m%d_%H%M%S)-VERSION"
            mvn org.codehaus.mojo:versions-maven-plugin:2.3:set -DnewVersion="${VERSION}"
            mvn install
            java -jar /home/mpollack/software/skipper.jar upgrade --package-name helloworld --release-name helloworld-jenkins --properties version=${VERSION}
        '''
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-platforms"><a class="anchor" href="#using-platforms"></a>13. Platforms</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper supports deploying to multiple platforms.
The platforms included are Local, Cloud Foundry, and Kubernetes.
For each platform, you can configure multiple accounts.
Each <code>account name</code> must be globally unique across all platforms.</p>
</div>
<div class="paragraph">
<p>Usually, different <code>accounts</code> correspond to different orgs or spaces for Cloud Foundry and to different namespaces for a single Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Platforms are defined by using Spring Boot&#8217;s <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html">Externalized Configuration</a> feature.
To simplify the getting started experience, if a local platform account is not defined in your configuration, Skipper creates a <code>local</code> deployer implementation named <code>default</code>.</p>
</div>
<div class="paragraph">
<p>You can make use of the <a href="https://cloud.spring.io/spring-cloud-static/spring-cloud-config/1.3.3.RELEASE/multi/multi__spring_cloud_config_server.html#_encryption_and_decryption">Encryption and Decryption</a> features of Spring Cloud Config as one way to secure credentials.</p>
</div>
<div class="paragraph">
<p>Distinct from where Skipper deploys the application, you can also run the Skipper server itself on a platform.
Installation on other platforms is covered in the <a href="#skipper-installation">Installation</a> section.</p>
</div>
<div class="paragraph">
<p>The following example YAML file shows configuration of all three platforms:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spring:
  cloud:
    skipper:
      server:
        platform:
          local:
            accounts:
              localDevDebug:
                javaOpts: "-Xdebug"
          cloudfoundry:
            accounts:
              cf-dev:
                connection:
                  url: https://api.run.pivotal.io
                  org: scdf-ci
                  space: space-mark
                  domain: cfapps.io
                  username: &lt;your-username&gt;
                  password: &lt;your-password&gt;
                  skipSslValidation: false
                deployment:
                  deleteRoutes: false
          kubernetes:
            accounts:
              minikube:
                namespace: default</pre>
</div>
</div>
<div class="paragraph">
<p>The properties available for each platform can be found in the following classes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/spring-cloud/spring-cloud-deployer-local/blob/master/spring-cloud-deployer-local/src/main/java/org/springframework/cloud/deployer/spi/local/LocalDeployerProperties.java">LocalDeployerProperties</a>.</p>
</li>
<li>
<p><a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry/blob/master/src/main/java/org/springframework/cloud/deployer/spi/cloudfoundry/CloudFoundryDeploymentProperties.java">CloudFoundryDeploymentProperties</a> for <code>deployment:</code> and <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry/blob/master/src/main/java/org/springframework/cloud/deployer/spi/cloudfoundry/CloudFoundryConnectionProperties.java">CloudFoundryConnectionProperties</a> for the <code>connection:</code>.</p>
</li>
<li>
<p><a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes/blob/master/src/main/java/org/springframework/cloud/deployer/spi/kubernetes/KubernetesDeployerProperties.java">KubernetesDeployerProperties</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-packages"><a class="anchor" href="#using-packages"></a>14. Packages</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Packages contain all the necessary information to install your application or group of applications.
The approach to describing the applications is to use a YAML file that provides all the necessary information to help
facilitate searching for your application hosted in a Package Registry and to install your application to a
platform.</p>
</div>
<div class="paragraph">
<p>To make it easy to customize a package, the YAML files are templated.
The final version of the YAML file, with all values substituted, is known as the release <code>manifest</code>.
Skipper currently understands how to deploy applications based off a YAML file that contains the information needed for
a <em>Spring Cloud Deployer</em> or <em>Cloud Foundry</em> implementation to deploy an application.
It describes where to find the application (an HTTP, Maven or Docker location), application properties (think Spring
Boot <code>@ConfigurationProperties</code>), and deployment properties (such as how much memory to use).</p>
</div>
<div class="sect2">
<h3 id="using-package-format"><a class="anchor" href="#using-package-format"></a>14.1. Package Format</h3>
<div class="paragraph">
<p>A package is a collection of YAML files that are zipped up into a file with the following naming convention:
<code>[PackageName]-[PackageVersion].zip</code> (for example: <code>mypackage-1.0.0.zip</code>).</p>
</div>
<div class="paragraph">
<p>A package can define a single application or a group of applications.</p>
</div>
<div class="sect3">
<h4 id="_single_application"><a class="anchor" href="#_single_application"></a>14.1.1. Single Application</h4>
<div class="paragraph">
<p>The single application package file, <code>mypackage-1.0.0.zip</code>, when unzipped, should have the following directory
structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mypackage-1.0.0
├── package.yml
├── templates
│   └── template.yml
└── values.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>package.yml</code> file contains metadata about the package and is used to support Skipper&#8217;s search functionality.
The <code>template.yml</code> file contains placeholders for values that are specified in the <code>values.yml</code> file.
When installing a package, placeholder values can also be specified, and they would override the values in the
<code>values.yml</code> file.
The templating engine that Skipper uses is <a href="https://github.com/samskivert/jmustache">JMustache</a>.
The YAML files can have either <code>.yml</code> or <code>.yaml</code> extensions.</p>
</div>
<div class="paragraph">
<p>The  <a href="https://github.com/markpollack/skipper-sample-repository/blob/master/src/main/resources/static/repository/experimental/helloworld/helloworld-1.0.0.zip">helloworld-1.0.0.zip</a> or <a href="https://github.com/markpollack/skipper-sample-repository/blob/master/src/main/resources/static/repository/experimental/helloworld-docker/helloworld-docker-1.0.0.zip">helloworld-docker-1.0.0.zip</a> files are good examples to use as a basis to create your own package "'by hand'".</p>
</div>
<div class="paragraph">
<p>The source code for the <code>helloworld</code> sample can be found <a href="https://github.com/markpollack/skipper-samples">here</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="using-package-format-multiple-apps"><a class="anchor" href="#using-package-format-multiple-apps"></a>14.1.2. Multiple Applications</h4>
<div class="paragraph">
<p>A package can contain a group of applications bundled in it.
In those cases, the structure of the package would resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mypackagegroup-1.0.0
├── package.yml
├── packages
│   ├── app1
│   │   ├── package.yml
│   │   ├── templates
│   │   │   └── log.yml
│   │   └── values.yml
│   └── app2
│       ├── package.yml
│       ├── templates
│       │   └── time.yml
│       └── values.yml
└── values.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, the <code>mypackagegroup</code> still has its own <code>package.yml</code> and <code>values.yml</code> to specify the package
metadata and the values to override. All the applications inside the <code>mypackagegroup</code>  are considered to be
sub-packages and follow a package structure similar to the individual packages. These sub packages need to be specified
inside the <code>packages</code> directory of the root package, <code>mypackagegroup</code>.</p>
</div>
<div class="paragraph">
<p>The  <a href="https://github.com/spring-cloud/spring-cloud-skipper/blob/master/spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/ticktock/ticktock-1.0.0.zip">ticktock-1.0.0.zip</a>
file is a good example to use as a basis for creating your own package 'by-hand'.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Packages with template kind <em>CloudFoundryApplication</em> currently doesn&#8217;t support multiple applications format.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-package-metadata"><a class="anchor" href="#using-package-metadata"></a>14.2. Package Metadata</h3>
<div class="paragraph">
<p>The <code>package.yml</code> file specifies the package metadata.
A sample package metadata would resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># Required Fields
apiVersion: skipper.spring.io/v1
kind: SkipperPackageMetadata
name: mypackage
version: 1.0.0

# Optional Fields
packageSourceUrl: https://github.com/some-mypackage-project/v1.0.0.RELEASE
packageHomeUrl: https://some-mypackage-project/
tags: skipper, mypackage, sample
maintainer: https://github.com/maintainer
description: This is a mypackage sample.</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Required Fields:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>apiVersion</code>: The Package Index spec version this file is based on.</p>
</li>
<li>
<p><code>kinds</code>: What type of package system is being used.</p>
</li>
<li>
<p><code>name</code>: The name of the package.</p>
</li>
<li>
<p><code>version</code>: The version of the package.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently only supported <em>kind</em> is <strong>SkipperPackageMetadata</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Optional Fields:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>packageSourceUrl</code>: The location of the source code for this package.</p>
</li>
<li>
<p><code>packageHomeUrl</code>: The home page of the package.</p>
</li>
<li>
<p><code>tags</code>:  A comma-separated list of tags to be used for searching.</p>
</li>
<li>
<p><code>maintainer</code>: Who maintains this package.</p>
</li>
<li>
<p><code>description</code>: Free-form text describing the functionality of the package&#8201;&#8212;&#8201;generally shown in search results.</p>
</li>
<li>
<p><code>sha256</code>: The hash of the package binary (not yet enforced).</p>
</li>
<li>
<p><code>iconUrl</code>: The URL for an icon to show for this package.</p>
</li>
<li>
<p><code>origin</code>: Free-form text describing the origin of this package&#8201;&#8212;&#8201;for example, your company name.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, the package search functionality is only a wildcard match against the name of the package.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A Package Repository exposes an <code>index.yml</code> file that contains multiple metadata documents and that uses the standard three dash notation <code>---</code> to separate the documents&#8201;&#8212;&#8201;for example, <a href="https://skipper-repository.cfapps.io/repository/experimental/index.yml">index.yml</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="package-templates"><a class="anchor" href="#package-templates"></a>14.3. Package Templates</h3>
<div class="paragraph">
<p>Currently, two type of applications are supported. One having <code>SpringCloudDeployerApplication</code> kind, which means the
applications can be deployed into the target platforms only by using their corresponding Spring Cloud Deployer
implementations (CF, Kubernetes Deployer, and so on). Other is having <code>CloudFoundryApplication</code> kind, which means the
applications are directly deployed into <em>Cloud Foundry</em> using its manifest support.</p>
</div>
<div class="sect3">
<h4 id="package-templates-scdep"><a class="anchor" href="#package-templates-scdep"></a>14.3.1. Spring Cloud Deployer</h4>
<div class="paragraph">
<p>The <code>template.yml</code> file has a package structure similar to that of the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mypackage-1.0.0
├── package.yml
├── templates
│   └── template.yml
└── values.yml</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Actual template file name doesn&#8217;t matter and you can have multiple template files. These just need to be inside of a
<code>templates</code> directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># template.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: mypackage
  type: sample
spec:
  resource: maven://org.mysample:mypackage
  resourceMetadata:  maven://org.mysample:mypackage:jar:metadata:{{spec.version}}
  version: {{spec.version}}
  applicationProperties:
    {{#spec.applicationProperties.entrySet}}
    {{key}}: {{value}}
    {{/spec.applicationProperties.entrySet}}
  deploymentProperties:
    {{#spec.deploymentProperties.entrySet}}
    {{key}}: {{value}}
    {{/spec.deploymentProperties.entrySet}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>apiVersion</code>, <code>kind</code>, and <code>spec.resource</code> are required.</p>
</div>
<div class="paragraph">
<p>The <code>spec.resource</code> and <code>spec.version</code> define where the application executable is located. The <code>spec.resourceMetadata</code>
field defines where a <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/configuration-metadata.html">Spring Boot Configuration metadata</a>
jar is located that contains the configuration properties of the application. This is either a Spring Boot uber jar
hosted under a HTTP endpoint or a Maven or Docker repository. The template placeholder <code>{{spec.version}}</code> exists so that
the version of a specific application can be easily upgraded without having to create a new package .zip file.</p>
</div>
<div class="paragraph">
<p>The <code>resource</code> is based on <code>http://</code> or <code>maven://</code> or <code>docker:</code>. The format for specifying a <code>resource</code> follows documented
types in <a href="#package-templates-resources">Resources</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="package-templates-cf"><a class="anchor" href="#package-templates-cf"></a>14.3.2. Cloud Foundry</h4>
<div class="paragraph">
<p>The <code>template.yml</code> file has a package structure similar to that of the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">mypackage-1.0.0
├── package.yml
├── templates
│   └── template.yml
└── values.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>template.yml</code> commonly has content similar to the following:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Actual template file name doesn&#8217;t matter and you can have multiple template files. These just need to be inside of a
<code>templates</code> directory.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># template.yml
apiVersion: skipper.spring.io/v1
kind: CloudFoundryApplication
spec:
  resource: maven://org.mysample:mypackage
  version: {{spec.version}}
  manifest:
    {{#spec.manifest.entrySet}}
    {{key}}: {{value}}
    {{/spec.manifest.entrySet}}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where values could for example be something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># values.yml
spec:
  version: 1.0.0
  manifest:
    memory: 1024
    disk-quota: 1024</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible values of a <code>spec.manifest</code> are:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 28.5714%;">
<col style="width: 28.5714%;">
<col style="width: 42.8572%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Key</th>
<th class="tableblock halign-left valign-top">Value</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>buildpack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>buildpack</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>command</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>command</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String or Integer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>memory</em> attribute as is if type is Integer, String is converted using same format in a CF, like <code>1024M</code> or <code>2G</code>. <code>1024</code> and <code>1024M</code> are equivalent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>disk-quota</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String or Integer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>disk_quota</em> attribute as is if type is Integer, String is converted using same format in a CF, like <code>1024M</code> or <code>2G</code>. <code>1024</code> and <code>1024M</code> are equivalent.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timeout</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Integer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>timeout</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Integer)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>instances</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>no-hostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Boolean)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>no-hostname</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>no-route</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Boolean)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>no-route</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>random-route</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Boolean)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>random-route</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>health-check-type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>health-check-type</em> having possible values of <code>port</code>, <code>process</code> or <code>http</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>health-check-http-endpoint</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>health-check-http-endpoint</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stack</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>stack</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>services</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(List&lt;String&gt;)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>services</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>domains</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(List&lt;String&gt;)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>domains</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hosts</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(List&lt;String&gt;)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>hosts</em> attribute as is.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>env</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Map&lt;String,Object&gt;)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>env</em> attribute as is.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Remember that when a value is given from a command-line, replacement happens as is defined in a template. Using a template
format <code>{{#spec.manifest.entrySet}}</code> shown above, <em>List</em> would be given in format <code>spec.manifest.services=[service1, service2]</code>
and <em>Map</em> would be given in format <code>spec.manifest.env={key1: value1, key2: value2}</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>resource</code> is based on <code>http://</code> or <code>maven://</code> or <code>docker:</code>. The format for specifying a <code>resource</code> follows documented
types in <a href="#package-templates-resources">Resources</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="package-templates-resources"><a class="anchor" href="#package-templates-resources"></a>14.3.3. Resources</h4>
<div class="paragraph">
<p>This section contains resource types currently supported.</p>
</div>
<div class="sect4">
<h5 id="_http_resources"><a class="anchor" href="#_http_resources"></a>HTTP Resources</h5>
<div class="paragraph">
<p>The following example shows a typical spec for HTTP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  resource: https://example.com/app/hello-world
  version: 1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is a naming convention that must be followed for HTTP-based resources so that Skipper can assemble a full URL from the <code>resource</code> and <code>version</code> field and also parse the version number given the URL.
The preceding <code>spec</code> references a URL at <code><a href="https://example.com/app/hello-world-1.0.0.RELEASE.jar" class="bare">example.com/app/hello-world-1.0.0.RELEASE.jar</a></code>.
The <code>resource</code> and <code>version</code> fields should not have any numbers after the <code>-</code> character.</p>
</div>
</div>
<div class="sect4">
<h5 id="_docker_resources"><a class="anchor" href="#_docker_resources"></a>Docker Resources</h5>
<div class="paragraph">
<p>The following example shows a typical spec for Docker:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  resource: docker:springcloud/spring-cloud-skipper-samples-helloworld
  version: 1.0.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>The mapping to docker registry names follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  resource: docker:&lt;user&gt;/&lt;repo&gt;
  version: &lt;tag&gt;</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_maven_resources"><a class="anchor" href="#_maven_resources"></a>Maven Resources</h5>
<div class="paragraph">
<p>The following example shows a typical spec for Maven:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld:1.0.0.RELEASE
  version: 1.0.0.RELEASE</pre>
</div>
</div>
<div class="paragraph">
<p>The mapping to Maven artifact names follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spec:
  resource: maven://&lt;maven-group-name&gt;:&lt;maven-artifact-name&gt;
  version:&lt;maven-version&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is only one setting to specify with Maven repositories to search.
This setting applies across all platform accounts.
By default, the following configuration is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">maven:
  remoteRepositories:
    springRepo: https://repo.spring.io/libs-snapshot</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can specify other entries and also specify proxy properties.
This is currently best documented <a href="https://docs.spring.io/spring-cloud-dataflow/docs/current/reference/htmlsingle/#local-configuration-maven">here</a>.
Essentially, this needs to be set as a property in your launch properties or <code>manifest.yml</code> (when pushing to PCF), as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># manifest.yml
...
env:
    SPRING_APPLICATION_JSON: '{"maven": { "remote-repositories": { "springRepo": { "url": "https://repo.spring.io/libs-snapshot"} } } }'
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The metadata section is used to help search for applications after they have been installed.
This feature will be made available in a future release.</p>
</div>
<div class="paragraph">
<p>The <code>spec</code> contains the resource specification and the properties for the package.</p>
</div>
<div class="paragraph">
<p>The <code>resource</code> represents the resource URI to download the application from.
This would typically be a Maven co-ordinate or a Docker image URL.</p>
</div>
<div class="paragraph">
<p>The <code>SpringCloudDeployerApplication</code> kind of application can have <code>applicationProperties</code> and <code>deploymentProperties</code>
as the configuration properties.</p>
</div>
<div class="paragraph">
<p>The application properties correspond to the properties for the application itself.</p>
</div>
<div class="paragraph">
<p>The deployment properties correspond to the properties for the deployment operation performed by Spring Cloud Deployer
implementations.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>name</code> of the template file can be anything, as all the files under <code>templates</code> directory are loaded to apply the
template configurations.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-package-values"><a class="anchor" href="#using-package-values"></a>14.4. Package Values</h3>
<div class="paragraph">
<p>The <code>values.yml</code> file contains the default values for any of the keys specified in the template files.</p>
</div>
<div class="paragraph">
<p>For instance, in a package that defines one application, the format is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">version: 1.0.0.RELEASE
spec:
  applicationProperties:
    server.port: 9090</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the package defines multiple applications, provide the name of the package in the top-level YML section to scope the
<code>spec</code> section. Consider the example of a multiple application package with the following layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-text hljs" data-lang="text">ticktock-1.0.0/
├── packages
│   ├── log
│   │   ├── package.yml
│   │   └── values.yml
│   └── time
│       ├── package.yml
│       └── values.yml
├── package.yml
└── values.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>The top-level <code>values.yml</code> file might resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">#values.yml

hello: world

time:
  appVersion: 1.3.0.M1
  deployment:
    applicationProperties:
      log.level: WARN
      trigger.fixed-delay: 1
log:
  deployment:
    count: 2
    applicationProperties:
      log.level: WARN
      log.name: skipperlogger</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding <code>values.yml</code> file sets <code>hello</code> as a variable available to be used as a placeholder in the
<code>packages\log\values.yml</code> file and the <code>packages\time\values.yml</code>. However, the YML section under <code>time:</code> is applied
only to the <code>packages\time\values.yml</code> file and the YML section under <code>log:</code> is applied only to the
<code>packages\log\values.yml</code> file.</p>
</div>
</div>
<div class="sect2">
<h3 id="using-package-upload"><a class="anchor" href="#using-package-upload"></a>14.5. Package Upload</h3>
<div class="paragraph">
<p>After creating the package in the structure shown in the previous section, we can compress it in a zip file with the following naming scheme:
[PackageName]-[PackageVersion].zip (for example, mypackage-1.0.0.zip).</p>
</div>
<div class="paragraph">
<p>For instance, the package directory would resemble the following before compression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mypackage-1.0.0
├── package.yml
├── templates
│   └── template.yml
└── values.yml</pre>
</div>
</div>
<div class="paragraph">
<p>The zip file can be uploaded into one of the local repositories of the Skipper server.
By default, the Skipper server has a local repository with the name, <code>local</code>.</p>
</div>
<div class="paragraph">
<p>By using the Skipper shell, we can upload the package zip file into the Skipper server&#8217;s local repository, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --path /path-to-package/mypackage-1.0.0.zip
Package uploaded successfully:[mypackage:1.0.0]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>--repo-name</code> is set, the <code>upload</code> command uses <code>local</code> as the repository to upload.</p>
</div>
<div class="paragraph">
<p>We can then use the <code>package list</code> or <code>package search</code> command to see that our package has been uploaded, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package list
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║mypackage        │1.0.0  │This is a mypackage sample                                                      ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-package-create"><a class="anchor" href="#using-package-create"></a>14.6. Creating Your Own Package</h3>
<div class="paragraph">
<p>In this section, we create a package that can be deployed by using Spring Cloud Deployer implementations.</p>
</div>
<div class="paragraph">
<p>For this package, we are going to create a simple package and upload it to our local machine.</p>
</div>
<div class="paragraph">
<p>To get started creating your own package, create a folder following a naming convention of <code>[package-name]-[package-version]</code>. In our case, the folder name is <code>demo-1.0.0</code>.
In this directory, create empty files named <code>values.yml</code> and <code>package.yml</code> and create a <code>templates</code> directory.
In the <code>templates</code> directory, create an empty file named <code>template.yml</code>.</p>
</div>
<div class="paragraph">
<p>Go into the <code>package.yml</code> where we are going to specify the package metadata. For this app, we fill only the minimum values possible, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># package.yml

apiVersion: skipper.spring.io/v1
kind: SkipperPackageMetadata
name: demo
version: 1.0.0
description: Greets the world!</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Ensure that your <code>name</code> and <code>version</code> matches the <code>name</code> and <code>version</code> in your folder name, or you get an error.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, open up your <code>templates/template.yml</code> file.
Here, we are going to specify the actual information about your package and, most importantly, set default values.
In the <code>template.yml</code>, copy the template for the kind <code>SpringCloudDeployerApplication</code> from the preceding sample.
Your resulting <code>template.yml</code> file should resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># templates/template.yml

apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: demo
spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld
  version: {{version}}
  applicationProperties:
    {{#spec.applicationProperties.entrySet}}
    {{key}}: {{value}}
    {{/spec.applicationProperties.entrySet}}
  deploymentProperties:
    {{#spec.deploymentProperties.entrySet}}
    {{key}}: {{value}}
    {{/spec.deploymentProperties.entrySet}}</pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example file specifies that our application name is <code>demo</code> and finds our package in Maven.
Now we can specify the <code>version</code>, <code>applicationProperties</code>, and <code>deploymentProperties</code> in our <code>values.yml</code>, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># values.yml

# This is a YAML-formatted file.
# Declare variables to be passed into your templates
version: 1.0.0.RELEASE
spec:
  applicationProperties:
    server.port: 8100</pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example sets the <code>version</code> to <code>1.0.0.RELEASE</code> and also sets the <code>server.port=8100</code> as one of the application properties.
When the Skipper Package reader resolves these values by merging the <code>values.yml</code> against the template, the resolved values resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># hypothetical template.yml

apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: demo
spec:
  resource: maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld
  version: 1.0.0.RELEASE
  applicationProperties:
    server.port: 8100
  deploymentProperties:</pre>
</div>
</div>
<div class="paragraph">
<p>The reason to use <code>values.yml</code> instead of entering the values directly is that it lets you overwrite the values at run time by using the <code>--file</code> or <code>--properties</code> flags.</p>
</div>
<div class="paragraph">
<p>We have finished making our file.
Now we have to zip it up.
The easiest way to do is by using the <code>zip -r</code> command on the command line, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ zip -r demo-1.0.0.zip demo-1.0.0/
  adding: demo-1.0.0/ (stored 0%)
  adding: demo-1.0.0/package.yml (deflated 14%)
  adding: demo-1.0.0/templates/ (stored 0%)
  adding: demo-1.0.0/templates/template.yml (deflated 55%)
  adding: demo-1.0.0/values.yml (deflated 4%)</pre>
</div>
</div>
<div class="paragraph">
<p>Armed with our zipped file and the path to it, we can head to Skipper and use the <code>upload</code> command, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>skipper:&gt;package upload --path /Users/path-to-your-zip/demo-1.0.0.zip
Package uploaded successfully:[demo:1.0.0]</pre>
</div>
</div>
<div class="paragraph">
<p>Now you can search for it as shown previously and then install it, as follows</p>
</div>
<div class="listingblock">
<div class="content">
<pre>skipper:&gt;package install --package-name demo --package-version 1.0.0 --release-name demo
Released demo. Now at version v1.</pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations! You have now created, packaged, uploaded, and installed your own Skipper package!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using-repositories"><a class="anchor" href="#using-repositories"></a>15. Repositories</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Repositories store package metadata and host package .zip files.
Repositores can be local or remote, were local means backed by Skipper&#8217;s relational database and remote means a filesystem exposed over HTTP.</p>
</div>
<div class="paragraph">
<p>When registering a remote registry (for example, the <code>experimental</code> one that is currently not defined by default in addition to one named local`), use the following format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spring
  cloud:
    skipper:
      server:
        package-repositories:
          experimental:
            url: https://skipper-repository.cfapps.io/repository/experimental
            description: Experimental Skipper Repository
            repoOrder: 0
          local:
            url: http://${spring.cloud.client.hostname}:7577
            local: true
            description: Default local database backed repository
            repoOrder: 1</pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For Skipper 2.x, <code>spring.cloud.skipper.server.package-repositories</code> structure has been changed from a list to a map where key is the repository name. Having a map format makes it easier to define and override configuration values.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>repoOrder</code> determines which repository serves up a package if one with the same name is registered in two or more repositories.</p>
</div>
<div class="paragraph">
<p>The directory structure assumed for a remote repository is the registered <code>url</code> value followed by the package name and then the zip file name (for example, <code><a href="https://skipper-repository.cfapps.io/repository/experimental/helloworld/helloworld-1.0.0.zip" class="bare">skipper-repository.cfapps.io/repository/experimental/helloworld/helloworld-1.0.0.zip</a></code> for the package <code>helloworld</code> with a version of <code>1.0.0</code>).
A file named <code>index.yml</code> is expected to be directly under the registered <code>url</code>&#8201;&#8212;&#8201;for example, <a href="https://skipper-repository.cfapps.io/repository/experimental/index.yml" class="bare">skipper-repository.cfapps.io/repository/experimental/index.yml</a>.
This file contains the package metadata for all the packages hosted by the repository.</p>
</div>
<div class="paragraph">
<p>It is up to you to update the <code>index.yml</code> file "'by hand'" for remote repositories.</p>
</div>
<div class="paragraph">
<p>'Local' repositories are backed by Skipper&#8217;s database.
In the Skipper 1.0 release, they do not expose the index.yml or the .zip files under a filesystem-like URL structure as with remote repositories.
This feature will be provided in the next version.
However, you can upload packages to a local repository and do not need to maintain an index file.
See the &#8220;<a href="#skipper-commands-reference">Skipper Commands</a>&#8221; section for information on creating local repositories.</p>
</div>
<div class="paragraph">
<p>A good example that shows using a Spring Boot web application with static resources to host a Repository can be found <a href="https://github.com/markpollack/skipper-sample-repository">here</a>.
This application is currently running under <a href="https://skipper-repository.cfapps.io/repository/experimental" class="bare">skipper-repository.cfapps.io/repository/experimental</a>.</p>
</div>
</div>
</div>
<h1 id="skipper-installation" class="sect0"><a class="anchor" href="#skipper-installation"></a>Installation</h1>
<div class="sect1">
<h2 id="skipper-installation-local"><a class="anchor" href="#skipper-installation-local"></a>16. Installing on a Local Platform</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_local_platform_configuration"><a class="anchor" href="#_local_platform_configuration"></a>16.1. Local Platform configuration</h3>
<div class="paragraph">
<p>The following example YAML file configures two local deployer accounts, named <code>localDev</code> and <code>localDevDebug</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>spring:
  cloud:
    skipper:
      server:
        platform:
          local:
            accounts:
              localDev:
                shutdownTimeout: 60
                javaOpts: "-Dtest=foo"
              localDevDebug:
                javaOpts: "-Xdebug"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The key-value pairs that follow the name of the account are <code>javaCmd</code>, <code>workingDirectoriesRoot</code>, <code>deleteFilesOnExit</code>, <code>envVarsToInherit</code>, <code>shutdownTimeout</code>, <code>javaOpts</code>, and <code>useSpringApplicationJson</code>.
More information can be found in the JavaDocs for <a href="https://github.com/spring-cloud/spring-cloud-deployer-local/blob/master/spring-cloud-deployer-local/src/main/java/org/springframework/cloud/deployer/spi/local/LocalDeployerProperties.java">LocalDeployerProperties</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-installation-cloudfoundry"><a class="anchor" href="#skipper-installation-cloudfoundry"></a>17. Installing on Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains an example YAML file that configures two Cloud Foundry accounts, named <code>cf-dev</code> and <code>cf-qa</code>.
This is useful on Cloud Foundry if you use the Spring Cloud Config Server to manage Skipper&#8217;s configuration properties.</p>
</div>
<div class="sect2">
<h3 id="_cloud_foundry_configuration"><a class="anchor" href="#_cloud_foundry_configuration"></a>17.1. Cloud Foundry Configuration</h3>
<div class="paragraph">
<p>You can modify the following sample YML snippet to fit your needs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">spring:
  cloud:
    skipper:
      server:
        platform:
          cloudfoundry:
            accounts:
              cf-dev:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrg
                  space: mySpace
                  domain: cfapps.io
                  username: cf-dev@example.com
                  password: drowssap
                  skipSslValidation: false
                deployment:
                  memory: 2048m
                  disk: 2048m
                  services: rabbit
                  deleteRoutes: false
              cf-qa:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrgQA
                  space: mySpaceQA
                  domain: cfapps.io
                  username: cf-qa@example.com
                  password: drowssap
                  skipSslValidation: true
                deployment:
                  memory: 1024m
                  disk: 1024m
                  services: rabbitQA
                  deleteRoutes: false</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>deleteRoutes</code> deployment setting is <code>false</code> so that &#8220;v2&#8221; of an application has the same route as &#8220;v1&#8221;.
Otherwise, undeploying &#8220;v1&#8221; removes the route.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also run the Skipper server locally and deploy to Cloud Foundry.
In this case, it is more convenient to specify the configuration in a <code>skipper.yml</code> file and start the server with the <code>--spring.config.additional-location=skipper.yml</code> option.</p>
</div>
<div class="paragraph">
<p>If you use <code>cf push</code> to deploy Skipper, a Cloud Foundry manifest is more appropriate to use.
You can modify the following sample manifest.yml to fit your needs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-yml hljs" data-lang="yml">applications:
- name: mlp-skipper
  host: mlp-skipper
  memory: 1G
  disk_quota: 1G
  timeout: 180
  instances: 1
  buildpack: java_buildpack
  path: spring-cloud-skipper-server.jar
env:
    SPRING_APPLICATION_NAME: mlp-skipper
    JBP_CONFIG_SPRING_AUTO_RECONFIGURATION: '{enabled: false}'
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_URL: https://api.run.pivotal.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_ORG: myOrgQA
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_SPACE: mySpaceQA
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_DOMAIN: cfapps.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_USERNAME: cf-qa@example.com
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_PASSWORD: drowssap
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_CONNECTION_SKIP_SSL_VALIDATION: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_DEPLOYMENT_DELETE_ROUTES: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_DEPLOYMENT_SERVICES: rabbitmq
services:
- mysqlboost</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the preceding manifest, we bound the application to the <code>mysqlboost</code> service.
If you do not specify a service, the server uses an embedded database.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of Skipper 2.0, you must disable Spring Auto-reconfiguration and set the profile to <code>cloud</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must set <code>SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_DEPLOYMENT_DELETE_ROUTES: false</code> so that &#8220;v2&#8221; of an application has the same route as &#8220;v1&#8221;.
Otherwise, undeploying &#8220;v1&#8221; removes the route.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You must set <code>SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[pws]_DEPLOYMENT_SERVICES</code> property that binds the specified services to each of the deployed applications.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can find information on the deployment properties that you can configure in <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry/blob/master/src/main/java/org/springframework/cloud/deployer/spi/cloudfoundry/CloudFoundryDeploymentProperties.java">CloudFoundryDeploymentProperties</a>.</p>
</div>
<div class="paragraph">
<p>When starting the Skipper shell on your local machine, it tries to connect to the Server at the default location of <code><a href="http://localhost:7577/api" class="bare">localhost:7577/api</a></code>.
Use the shell&#8217;s <code>--spring.cloud.skipper.client.serverUri</code> command line option to specify the location of the server.
You can alternatively use the <code>config</code> interactive shell command to set the server location, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">server-unknown:&gt;skipper config --uri https://mlp-skipper.cfapps.io/api
Successfully targeted https://mlp-skipper.cfapps.io/api
skipper:&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_database_connection_pool"><a class="anchor" href="#_database_connection_pool"></a>17.2. Database Connection Pool</h3>
<div class="paragraph">
<p>As of Skipper 2.0, the Spring Cloud Connector library is no longer used to create the DataSource.
The library  <a href="https://github.com/pivotal-cf/java-cfenv">java-cfenv</a> is now used which allows you to set <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-connect-to-production-database">Spring Boot properties</a> to configure the connection pool.</p>
</div>
</div>
<div class="sect2">
<h3 id="skipper-installation-cloudfoundry-maximum-disk-quota-configuration"><a class="anchor" href="#skipper-installation-cloudfoundry-maximum-disk-quota-configuration"></a>17.3. Maximum Disk Quota</h3>
<div class="paragraph">
<p>By default, every application in Cloud Foundry starts with 1G disk quota and this can be adjusted to a default maximum of
2G. The default maximum can also be overridden up to 10G by using Pivotal Cloud Foundry&#8217;s (PCF) Ops Manager GUI.</p>
</div>
<div class="paragraph">
<p>This configuration is relevant for Spring Cloud Skipper because every deployment is composed of applications
(typically Spring Boot uber-jar&#8217;s), and those applications are resolved from a remote maven repository. After resolution,
the application artifacts are downloaded to the local Maven Repository for caching and reuse. With this happening in the background,
the default disk quota (1G) can fill up rapidly, especially when we experiment with streams that
are made up of unique applications. In order to overcome this disk limitation and depending
on your scaling requirements, you may want to change the default maximum from 2G to 10G. Let&#8217;s review the
steps to change the default maximum disk quota allocation.</p>
</div>
<div class="paragraph">
<p>From PCF&#8217;s Ops Manager, select the &#8220;Pivotal Elastic Runtime&#8221; tile and navigate to the &#8220;Application Developer Controls&#8221; tab.
Change the &#8220;Maximum Disk Quota per App (MB)&#8221; setting from 2048 (2G) to 10240 (10G). Save the disk quota update and click
&#8220;Apply Changes&#8221; to complete the configuration override.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-managing-disk-utilization"><a class="anchor" href="#configuration-cloudfoundry-managing-disk-utilization"></a>17.4. Managing Disk Use</h3>
<div class="paragraph">
<p>Even when configuring Skipper to use 10G of space, there is the possibility of exhausting
the available space on the local disk.
If you deploy the Skipper by using the default <code>port</code> health check type, you must explicitly monitor the disk space on the server in order to avoid running out space.
If you deploy the server by using the <code>http</code> health check type (see the next example), the server is restarted if there is low disk space.
This is due to Spring Boot&#8217;s <a href="https://github.com/spring-projects/spring-boot/blob/v1.5.14.RELEASE/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/DiskSpaceHealthIndicator.java">Disk Space Health Indicator</a>.
You can <a href="https://docs.spring.io/spring-boot/docs/1.5.14.RELEASE/reference/htmlsingle/#common-application-properties">configure</a> the settings of the Disk Space Health Indicator by using the properties that have the <code>management.health.diskspace</code> prefix.</p>
</div>
<div class="paragraph">
<p>For version 1.7, we are investigating the use of <a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">Volume Services</a> for the server to store <code>.jar</code> artifacts before pushing them to Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>The following example shows how to deploy the <code>http</code> health check type to an endpoint called <code>/management/health</code>:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>---
  ...
  health-check-type: http
  health-check-http-endpoint: /management/health</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-installation-kubernetes"><a class="anchor" href="#skipper-installation-kubernetes"></a>18. Installing on Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A docker image, named <code>springcloud/spring-cloud-skipper-server</code>, is available for Skipper server in dockerhub.
You can use this image to run the Skipper server in Kubernetes.</p>
</div>
<div class="sect2">
<h3 id="skipper-kubernetes-configuration"><a class="anchor" href="#skipper-kubernetes-configuration"></a>18.1. Kuberenetes configuration</h3>
<div class="paragraph">
<p>The following example YAML file configures two accounts, named <code>k8s-dev</code> and <code>k8sqa</code>, on a Kubernetes cluster.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>spring:
  cloud:
    skipper:
      server:
        platform:
          kubernetes:
            accounts:
              k8s-dev:
                namespace: devNamespace
                cpu: 4
              k8s-qa:
                namespace: qaNamespace
                memory: 1024m</code></pre>
</div>
</div>
<div class="paragraph">
<p>The accounts correspond to different namespaces.
We are investigating how to support connecting to different Kubernetes clusters.</p>
</div>
<div class="paragraph">
<p>You can find more information on the deployment properties that you can configure in <a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes/blob/master/src/main/java/org/springframework/cloud/deployer/spi/kubernetes/KubernetesDeployerProperties.java">KubernetesDeployerProperties</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-database-configuration"><a class="anchor" href="#skipper-database-configuration"></a>19. Database configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Skipper uses a relational database to store metadata.
We use <a href="https://flywaydb.org/">Flyway</a> to bootstrap and then migrate the database as the product evolves.
We currently provide schemas for the following databases: H2, HSQLDB, MySQL, PostgreSQL, Microsoft SQL Server, Oracle 12, and IBM DB2.</p>
</div>
<div class="paragraph">
<p>The JDBC drivers for MySQL (through the MariaDB driver), HSQLDB, PostgreSQL, and SQL Server, along the embedded H2 database, are bundled with the server jar.
If you  use any other database, the corresponding JDBC driver jar needs to be on the classpath of the server.
If not specified, the server starts with the embedded in-memory H2 database.</p>
</div>
<div class="paragraph">
<p>The database properties can be passed as environment variables or command-line arguments to the Server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Make sure that you configure the correct <code>flyway.schemas</code> for DB2 and SQL Server. Otherwise, Flyway tries to create its <code>schema_version</code> table on the default schema for a connection, which could be different than the schema with which your credentials are associated.
See the <a href="https://flywaydb.org/documentation/">Flyway documentation</a> for more options.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following listings show some examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>export spring_datasource_url=jdbc:postgresql://localhost:5432/mydb
export spring_datasource_username=myuser
export spring_datasource_password=mypass
export spring_datasource_driver-class-name="org.postgresql.Driver"</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>MySQL</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:mysql:&lt;db-info&gt; \
    --spring.datasource.username=&lt;user&gt; \
    --spring.datasource.password=&lt;password&gt; \
    --spring.datasource.driver-class-name=org.mariadb.jdbc.Driver &amp;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>PostgreSQL</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:postgresql:&lt;db-info&gt; \
    --spring.datasource.username=&lt;user&gt; \
    --spring.datasource.password=&lt;password&gt; \
    --spring.datasource.driver-class-name=org.postgresql.Driver &amp;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>HSQLDB</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:hsqldb:mem:&lt;db-info&gt; \
    --spring.datasource.username=sa \
    --spring.datasource.password= \
    --spring.datasource.driver-class-name=org.hsqldb.jdbc.JDBCDriver &amp;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Microsoft SQL Server</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:sqlserver://&lt;db-info&gt;;database=&lt;database-name&gt; \
    --spring.datasource.username=&lt;user&gt; \
    --spring.datasource.password=&lt;password&gt; \
    --flyway.schemas=&lt;database-name&gt; \
    --spring.datasource.driver-class-name=com.microsoft.sqlserver.jdbc.SQLServerDriver &amp;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Oracle</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:oracle:thin:&lt;user&gt;/&lt;password&gt;@&lt;db-address&gt;/&lt;service-id&gt; \
    --spring.datasource.username=&lt;user&gt; \
    --spring.datasource.password=&lt;password&gt; \
    --spring.datasource.driver-class-name=oracle.jdbc.driver.OracleDriver &amp;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>IBM DB2</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>java -jar spring-cloud-skipper-server-{project-version}.jar \
    --spring.datasource.url=jdbc:db2:thin://&lt;db-info&gt;/&lt;db-name&gt; \
    --spring.datasource.username=&lt;user&gt; \
    --spring.datasource.password=&lt;password&gt; \
    --flyway.schemas=&lt;db-name&gt; \
    --spring.datasource.driver-class-name=com.ibm.db2.jcc.DB2Driver &amp;</pre>
</div>
</div>
</div>
</div>
<h1 id="configuration-security" class="sect0"><a class="anchor" href="#configuration-security"></a>Security</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>By default, the Spring Cloud Skipper server is unsecured and runs on an unencrypted HTTP connection.
You can secure your REST endpoints by enabling HTTPS and requiring clients to authenticate using
<a href="https://oauth.net/2/">OAuth 2.0</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the REST endpoints (administration, management and health) do not require authenticated access.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-security-enabling-https"><a class="anchor" href="#configuration-security-enabling-https"></a>20. Enabling HTTPS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, the REST endpoints use plain HTTP as a transport.
You can switch to HTTPS by adding a certificate to your configuration, as shown in the following <code>skipper.yml</code> example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">server:
  port: 8443                                         <i class="conum" data-value="1"></i><b>(1)</b>
  ssl:
    key-alias: yourKeyAlias                          <i class="conum" data-value="2"></i><b>(2)</b>
    key-store: path/to/keystore                      <i class="conum" data-value="3"></i><b>(3)</b>
    key-store-password: yourKeyStorePassword         <i class="conum" data-value="4"></i><b>(4)</b>
    key-password: yourKeyPassword                    <i class="conum" data-value="5"></i><b>(5)</b>
    trust-store: path/to/trust-store                 <i class="conum" data-value="6"></i><b>(6)</b>
    trust-store-password: yourTrustStorePassword     <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the default port is <code>7577</code>, you may choose to change the port to a more common HTTPs-typical port.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The alias (or name) under which the key is stored in the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The path to the keystore file. Classpath resources may also be specified, by using the classpath prefix: <code>classpath:path/to/keystore</code></td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The password of the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The password of the key.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The path to the truststore file. Classpath resources may also be specified, by using the classpath prefix: <code>classpath:path/to/trust-store</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The password of the trust store.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can reference the YAML file using the following parameter: <code>--spring.config.additional-location=skipper.yml</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If HTTPS is enabled, it completely replaces HTTP as the protocol over which the REST endpoints interact.
Plain HTTP requests then fail. Therefore, you must make sure that you configure the Skipper shell accordingly.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="configuration-security-self-signed-certificates"><a class="anchor" href="#configuration-security-self-signed-certificates"></a>20.1. Using Self-Signed Certificates</h3>
<div class="paragraph">
<p>For testing purposes or during development, it might be convenient to create self-signed certificates.
To get started, run the following command to create a certificate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -genkey -alias skipper -keyalg RSA -keystore skipper.keystore \
          -validity 3650 -storetype JKS \
          -dname "CN=localhost, OU=Spring, O=Pivotal, L=Holualoa, ST=HI, C=US"  <i class="conum" data-value="1"></i><b>(1)</b>
          -keypass skipper -storepass skipper</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CN</code> is the only important parameter here. It should match the domain you are trying to access, e.g. <code>localhost</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then add the following to your <code>skipper.yml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">server:
  port: 8443
  ssl:
    enabled: true
    key-alias: skipper
    key-store: "/your/path/to/skipper.keystore"
    key-store-type: jks
    key-store-password: skipper
    key-password: skipper</code></pre>
</div>
</div>
<div class="paragraph">
<p>That is all you need for the Skipper Server.
Once you start the server, you should be able to access it at <a href="https://localhost:8443/">https://localhost:8443/</a>.
As this is a self-signed certificate, you should hit a warning in your browser. You need to ignore that.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-security-self-signed-certificates-shell"><a class="anchor" href="#configuration-security-self-signed-certificates-shell"></a>20.2. Self-Signed Certificates and the Shell</h3>
<div class="paragraph">
<p>By default, self-signed certificates are an issue for the shell.
Additional steps are necessary to make the shell work with self-signed certificates.
Two options are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#configuration-security-add-self-signed-certificate-jvm-truststore">Add the self-signed certificate to the JVM truststore</a></p>
</li>
<li>
<p><a href="#configuration-security-skip-certificate-validation">Skip certificate validation</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="configuration-security-add-self-signed-certificate-jvm-truststore"><a class="anchor" href="#configuration-security-add-self-signed-certificate-jvm-truststore"></a>20.2.1. Add the Self-signed Certificate to the JVM Truststore</h4>
<div class="paragraph">
<p>In order to use the JVM truststore option, we need to
export the previously created certificate from the keystore:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -export -alias skipper -keystore skipper.keystore -file skipper_cert -storepass skipper</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we need to create a truststore which the Shell uses:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -importcert -keystore skipper.truststore -alias skipper -storepass skipper -file skipper_cert -noprompt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now you can launch the Skipper shell by using the following JVM arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -Djavax.net.ssl.trustStorePassword=skipper \
       -Djavax.net.ssl.trustStore=/path/to/skipper.truststore \
       -Djavax.net.ssl.trustStoreType=jks \
       -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you run into trouble establishing a connection over SSL, you can enable additional logging by setting the <code>javax.net.debug</code> JVM argument to <code>ssl</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Remember to target the Skipper server with a config command similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:&gt;skipper config --uri https://localhost:8443/api</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-skip-certificate-validation"><a class="anchor" href="#configuration-security-skip-certificate-validation"></a>20.2.2. Skip Certificate Validation</h4>
<div class="paragraph">
<p>Alternatively, you can bypass the certification validation by providing the following optional command-line parameter: <code>--spring.cloud.skipper.client.skip-ssl-validation=true</code>.</p>
</div>
<div class="paragraph">
<p>When you set this command-line parameter, the shell accepts any (self-signed) SSL certificate.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
If possible, you should avoid using this option.
Disabling the trust manager defeats the purpose of SSL and makes your site vulnerable to man-in-the-middle attacks.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-security-oauth2"><a class="anchor" href="#configuration-security-oauth2"></a>21. OAuth 2.0 Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://oauth.net/2/">OAuth 2.0</a> lets you integrate Spring Cloud Skipper into Single Sign-on (SSO) environments.
You can use the following OAuth2 Grant Types:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Password: Used by the shell (and the REST integration), so you can login with a username and a password</p>
</li>
<li>
<p>Client Credentials: Retrieve an Access Token directly from your OAuth provider and pass it to the Skipper server in the <code>Authorization</code> HTTP header.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The REST endpoints can be accessed in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Basic Authentication: Uses the <em>Password Grant Type</em> to authenticate with your OAuth2 service.</p>
</li>
<li>
<p>Access Token: Uses the <em>Client Credentials Grant Type</em></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you set up authentication, we strongly recommended enabling HTTPS as well, especially in production environments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can turn on OAuth2 authentication by setting environment variables or by adding the following block to <code>skipper.yml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">security:
  oauth2:
    client:
      client-id: myclient                                             <i class="conum" data-value="1"></i><b>(1)</b>
      client-secret: mysecret
      access-token-uri: http://127.0.0.1:9999/oauth/token
      user-authorization-uri: http://127.0.0.1:9999/oauth/authorize
    resource:
      user-info-uri: http://127.0.0.1:9999/me</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Providing the Client ID in the OAuth Configuration Section activates OAuth2 security.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can verify that basic authentication is working properly by using <code>curl</code>, as follows:</p>
</div>
<div class="paragraph">
<p><code>$ curl -u myusername:mypassword <a href="http://localhost:7577/" class="bare">localhost:7577/</a></code></p>
</div>
<div class="paragraph">
<p>As a result, you should see a list of available REST endpoints.</p>
</div>
<div class="paragraph">
<p>Besides Basic Authentication, you can also provide an Access Token to access the REST API.
To make that happen, retrieve an OAuth2 Access Token from your OAuth2 provider and then pass that Access Token to the REST API by using the <code>Authorization</code> HTTP header, as follows:</p>
</div>
<div class="paragraph">
<p><code>$ curl -H "Authorization: Bearer &lt;ACCESS_TOKEN&gt;" <a href="http://localhost:7577/" class="bare">localhost:7577/</a></code></p>
</div>
<div class="sect2">
<h3 id="configuration-security-oauth2-authorization"><a class="anchor" href="#configuration-security-oauth2-authorization"></a>21.1. OAuth REST Endpoint Authorization</h3>
<div class="paragraph">
<p>Spring Cloud Skipper supports the following roles:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>VIEW</strong>: For anything that relates to retrieving state.</p>
</li>
<li>
<p><strong>CREATE</strong>: For anything that involves creating, deleting, or mutating the state of the system.</p>
</li>
<li>
<p><strong>MANAGE</strong>: For boot management endpoints.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rules regarding which REST endpoints require which roles are specified in the <code>application.yml</code> of the <code>spring-cloud-skipper-server-core</code> module.</p>
</div>
<div class="paragraph">
<p>Nonetheless, you can override those, if desired.
The configuration takes the form of a YAML <strong>list</strong> (as some rules may have precedence over others).
Consequently, you need to copy/paste the whole list and tailor it to your needs (as there is no way to merge lists).
Always refer to your version of <code>application.yml</code>, as the snippet reproduced below may be outdated.
The default rules are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">            # About

            - GET /api/about                      =&gt; hasRole('ROLE_VIEW')

            # AppDeployerDatas

            - GET /api/appDeployerDatas           =&gt; hasRole('ROLE_VIEW')

            # Deployers

            - GET /api/deployers                  =&gt; hasRole('ROLE_VIEW')

            ## Releases

            - GET /api/releases                   =&gt; hasRole('ROLE_VIEW')

            # Status

            - GET /api/release/status/**         =&gt; hasRole('ROLE_VIEW')

            # Manifest

            - GET /api/release/manifest/**       =&gt; hasRole('ROLE_VIEW')

            # Upgrade

            - POST /api/release/upgrade          =&gt; hasRole('ROLE_CREATE')

            # Rollback

            - POST /api/release/rollback/**      =&gt; hasRole('ROLE_CREATE')

            # Delete

            - DELETE /api/release/**             =&gt; hasRole('ROLE_CREATE')

            # History

            - GET /api/release/history/**           =&gt; hasRole('ROLE_VIEW')

            # List

            - GET /api/release/list                         =&gt; hasRole('ROLE_VIEW')
            - GET /api/release/list/**                      =&gt; hasRole('ROLE_VIEW')

            # Packages

            - GET /api/packages                    =&gt; hasRole('ROLE_VIEW')

            # Upload

            - POST /api/package/upload             =&gt; hasRole('ROLE_CREATE')

            # Install

            - POST /api/package/install             =&gt; hasRole('ROLE_CREATE')
            - POST /api/package/install/**          =&gt; hasRole('ROLE_CREATE')

            # Delete

            - DELETE /api/package/**                =&gt; hasRole('ROLE_CREATE')

            # PackageMetaData

            - GET /api/packageMetadata              =&gt; hasRole('ROLE_VIEW')
            - GET /api/packageMetadata/**           =&gt; hasRole('ROLE_VIEW')

            # Repositories

            - GET /api/repositories                 =&gt; hasRole('ROLE_VIEW')
            - GET /api/repositories/**              =&gt; hasRole('ROLE_VIEW')

            # Boot Endpoints

            - GET  /actuator/**                     =&gt; hasRole('ROLE_MANAGE')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format of each line is as follows:</p>
</div>
<div class="paragraph">
<p><code>HTTP_METHOD URL_PATTERN '&#8658;' SECURITY_ATTRIBUTE</code></p>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP_METHOD is one http method, capital case.</p>
</li>
<li>
<p>URL_PATTERN is an Ant-style URL pattern.</p>
</li>
<li>
<p>SECURITY_ATTRIBUTE is a SpEL expression (see <a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#el-access" class="bare">docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#el-access</a>)</p>
</li>
<li>
<p>Each of those parts is separated by one or several white space characters (spaces, tabs, and others).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Be mindful that the above is indeed a YAML list, not a map (thus the use of '-' dashes at the start of each line) that lives under the <code>spring.cloud.skipper.security.authorization.rules</code> key.</p>
</div>
<div class="sect3">
<h4 id="configuration-security-oauth2-authorization-user-roles"><a class="anchor" href="#configuration-security-oauth2-authorization-user-roles"></a>21.1.1. Users and Roles</h4>
<div class="paragraph">
<p>Spring Cloud Skipper does not make any assumptions of how roles are assigned to users.
Due to the fact that the determination of security roles is very environment-specific, Spring Cloud Data Skipper, by default, assigns <em>all roles</em> to authenticated OAuth2 users by using the <code>DefaultAuthoritiesExtractor</code> class.</p>
</div>
<div class="paragraph">
<p>You can customize that behavior by providing your own Spring bean definition that extends Spring Security OAuth&#8217;s <code>AuthoritiesExtractor</code> interface.
In that case, the custom bean definition takes precedence over the default one provided by Spring Cloud Skipper.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-security-oauth2-shell"><a class="anchor" href="#configuration-security-oauth2-shell"></a>21.2. OAuth Authentication Using the Spring Cloud Skipper Shell</h3>
<div class="paragraph">
<p>If your OAuth2 provider supports the Password Grant Type, you can start the
Skipper shell with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-skipper-shell-2.0.2.RELEASE.jar \
  --spring.cloud.skipper.client.serverUrl=http://localhost:7577 \
  --spring.cloud.skipper.client.username=my_username \
  --spring.cloud.skipper.client.password=my_password</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When authentication for Spring Cloud Skipper is enabled, the underlying OAuth2 provider <strong>must</strong> support the Password OAuth2 Grant Type if you want to use the hell.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From within the Skipper shell, you can also provide credentials by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:&gt; skipper config --uri https://localhost:7577/api --username my_username --password my_password</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once successfully targeted, you should see the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">Successfully targeted http://localhost:7577/api
skipper:&gt;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_oauth2_authentication_examples"><a class="anchor" href="#_oauth2_authentication_examples"></a>21.3. OAuth2 Authentication Examples</h3>
<div class="paragraph">
<p>This section provides examples of some common security arrangements for Skipper:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-security-local-oauth2-server">Local OAuth2 Server</a></p>
</li>
<li>
<p><a href="#skipper-security-authentication-using-uaa">Authentication Using UAA</a></p>
</li>
<li>
<p><a href="#skipper-security-authentication-using-github">Authentication using GitHub</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="skipper-security-local-oauth2-server"><a class="anchor" href="#skipper-security-local-oauth2-server"></a>21.3.1. Local OAuth2 Server</h4>
<div class="paragraph">
<p>With <a href="https://projects.spring.io/spring-security-oauth/">Spring Security OAuth</a>, you
can create your own OAuth2 Server by using the following annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@EnableResourceServer</code></p>
</li>
<li>
<p><code>@EnableAuthorizationServer</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find a working example application at <a href="https://github.com/ghillert/oauth-test-server/">https://github.com/ghillert/oauth-test-server/</a>.</p>
</div>
<div class="paragraph">
<p>To do so, clone the project, build it, and start it.
Then configure Spring Cloud Skipper with the respective Client ID and Client Secret.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Use this option only for development or demo purposes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="skipper-security-authentication-using-uaa"><a class="anchor" href="#skipper-security-authentication-using-uaa"></a>21.3.2. Authentication Using UAA</h4>
<div class="paragraph">
<p>If you need to set up a production-ready OAuth provider, you may want to consider
using the CloudFoundry User Account and Authentication (UAA) Server. While it is used by
Cloud Foundry, it can also be used stand-alone. For more information see
<a href="https://github.com/cloudfoundry/uaa" class="bare">github.com/cloudfoundry/uaa</a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="skipper-security-authentication-using-github"><a class="anchor" href="#skipper-security-authentication-using-github"></a>21.3.3. Authentication using GitHub</h4>
<div class="paragraph">
<p>If you would like to use an existing OAuth2 provider, here is an example for GitHub.
First, you need to register a new application under your GitHub account at: <a href="https://github.com/settings/developers">https://github.com/settings/developers</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
For the Authorization callback URL, enter Spring Cloud Skippers&#8217;s Login URL&#8201;&#8212;&#8201;for example, <code><a href="http://localhost:9393/login" class="bare">localhost:9393/login</a></code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configure Spring Cloud Skipper with the GitHub Client ID and Secret, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">security:
  oauth2:
    client:
      client-id: your-github-client-id
      client-secret: your-github-client-secret
      access-token-uri: https://github.com/login/oauth/access_token
      user-authorization-uri: https://github.com/login/oauth/authorize
    resource:
      user-info-uri: https://api.github.com/user</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
GitHub does not support the OAuth2 password grant type.
As a result, you cannot use the Spring Cloud Skipper shell in conjunction with GitHub.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<h1 id="skipper-commands-reference" class="sect0"><a class="anchor" href="#skipper-commands-reference"></a>Skipper Commands</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Skipper commands fit into the following categories:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-commands-package">Package Commands</a></p>
</li>
<li>
<p><a href="#skipper-commands-release">Release Commands</a></p>
</li>
<li>
<p><a href="#skipper-commands-manifest">Manifest Commands</a></p>
</li>
<li>
<p><a href="#skipper-commands-platform">Platform commands</a></p>
</li>
<li>
<p><a href="#skipper-commands-repository">Repository Commands</a></p>
</li>
<li>
<p><a href="#skipper-commands-config">Skipper Server Commands</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
More details about commands can be found from <a href="#skipper-commands-generic-usage">Generic Usage</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-package"><a class="anchor" href="#skipper-commands-package"></a>22. Package Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s package commands include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-commands-package-search">Search</a></p>
</li>
<li>
<p><a href="#skipper-commands-package-upload">Upload</a></p>
</li>
<li>
<p><a href="#skipper-commands-package-install">Install</a></p>
</li>
<li>
<p><a href="#skipper-commands-package-delete">Delete</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="skipper-commands-package-search"><a class="anchor" href="#skipper-commands-package-search"></a>22.1. Search</h3>
<div class="paragraph">
<p>This command searches existing packages.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>package search - Search for packages.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>package search [[<strong>--name</strong>] string]  [<strong>--details</strong>]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--name  string</dt>
<dd>
<p>wildcard expression to search for the package name<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--details  boolean</dt>
<dd>
<p>to set for more detailed package metadata<br>
<strong>[Optional, default = false]</strong><br></p>
</dd>
</dl>
</div>
</dd>
<dt class="hdlist1">ALSO KNOWN AS</dt>
<dd>
<p>package list</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The  <code>search</code> or its alias <code>list</code> command shows all the packages available to be installed by the Skipper server, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package list
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld       │1.0.0  │The app has two endpoints, /about and /greeting in English.  Maven resource.    ║
║helloworld       │1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Maven resource. ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>search</code> command can use <code>--name</code> option to search for the package name containing the given option value, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search --name helloworld-
╔═════════════════╤═══════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name       │Version│                                  Description                                   ║
╠═════════════════╪═══════╪════════════════════════════════════════════════════════════════════════════════╣
║helloworld-docker│1.0.0  │The app has two endpoints, /about and /greeting in English.  Docker resource.   ║
║helloworld-docker│1.0.1  │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
╚═════════════════╧═══════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>To search for more details of the packages, the <code>--details</code> option can be used, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package search --name helloworld- --details
╔════════════════╤═════════════════════════════════════════════════════════════════════════════╗
║      Name      │                                    Value                                    ║
╠════════════════╪═════════════════════════════════════════════════════════════════════════════╣
║apiVersion      │v1                                                                           ║
║origin          │A sample repository for using Skipper                                        ║
║repositoryId    │1                                                                            ║
║kind            │skipper                                                                      ║
║name            │helloworld-docker                                                            ║
║version         │1.0.0                                                                        ║
║packageSourceUrl│https://github.com/markpollack/skipper-sample-repository                     ║
║packageHomeUrl  │https://github.com/markpollack/skipper-sample-repository                     ║
║tags            │web, demo, docker, helloworld                                                ║
║maintainer      │https://github.com/markpollack                                               ║
║description     │The app has two endpoints, /about and /greeting in English.  Docker resource.║
║sha256          │                                                                             ║
║iconUrl         │                                                                             ║
╚════════════════╧═════════════════════════════════════════════════════════════════════════════╝

╔════════════════╤════════════════════════════════════════════════════════════════════════════════╗
║      Name      │                                     Value                                      ║
╠════════════════╪════════════════════════════════════════════════════════════════════════════════╣
║apiVersion      │v1                                                                              ║
║origin          │A sample repository for using Skipper                                           ║
║repositoryId    │1                                                                               ║
║kind            │skipper                                                                         ║
║name            │helloworld-docker                                                               ║
║version         │1.0.1                                                                           ║
║packageSourceUrl│https://github.com/markpollack/skipper-sample-repository                        ║
║packageHomeUrl  │https://github.com/markpollack/skipper-sample-repository                        ║
║tags            │web, demo, docker, helloworld                                                   ║
║maintainer      │https://github.com/markpollack                                                  ║
║description     │The app has two endpoints, /about and /greeting in Portuguese.  Docker resource.║
║sha256          │                                                                                ║
║iconUrl         │                                                                                ║
╚════════════════╧════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-package-upload"><a class="anchor" href="#skipper-commands-package-upload"></a>22.2. Upload</h3>
<div class="paragraph">
<p>This command uploads a package .zip file, as shown (with output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>package upload - Upload a package.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>package upload [<strong>--path</strong>] string  [[<strong>--repo-name</strong>] string]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--path  string</dt>
<dd>
<p>the package to be uploaded<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--repo-name  string</dt>
<dd>
<p>the local repository name to upload to<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --path /path-to-package/mypackage-1.0.0.zip
Package uploaded successfully:[mypackage:1.0.0]</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>--repo-name</code> is set, the <code>upload</code> command uses <code>local</code> as the repository to upload.</p>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-package-install"><a class="anchor" href="#skipper-commands-package-install"></a>22.3. Install</h3>
<div class="paragraph">
<p>This command installs a package, as shown (with output) in the following example:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>package install - Install a package.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>package install [<strong>--package-name</strong>] string  [[<strong>--package-version</strong>] string]  [[<strong>--file</strong>] file]  [[<strong>--properties</strong>] string]  [<strong>--release-name</strong>] string  [[<strong>--platform-name</strong>] string]</p>
<div class="dlist">
<dl>
<dt class="hdlist1">OPTIONS</dt>
<dt class="hdlist1">--package-name  string</dt>
<dd>
<p>name of the package to install<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--package-version  string</dt>
<dd>
<p>version of the package to install, if not specified latest version will be used<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--file  file</dt>
<dd>
<p>specify values in a YAML file<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--properties  string</dt>
<dd>
<p>the comma separated set of properties to override during install<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>the release name to use<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--platform-name  string</dt>
<dd>
<p>the platform name to use<br>
<strong>[Optional, default = default]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --release-name helloworldlocal --package-name helloworld --package-version 1.0.0 --properties spec.applicationProperties.server.port=8099
Released helloworldlocal. Now at version v1.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>package-version</code> is specified, then the latest package version by the given <code>package-name</code> is considered.</p>
</div>
<div class="paragraph">
<p>If no <code>platform-name</code> is specified, the platform name, <code>default</code>, is used.</p>
</div>
<div class="paragraph">
<p>The properties can either be provided through comma separated YAML string by using the <code>--properties</code> option or through a YAML
file by using the <code>--file</code> option.</p>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-package-delete"><a class="anchor" href="#skipper-commands-package-delete"></a>22.4. Delete</h3>
<div class="paragraph">
<p>This command deletes a package.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>package delete - Delete a package.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>package delete [<strong>--package-name</strong>] string</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--package-name  string</dt>
<dd>
<p>the package name to be deleted<br>
<strong>[Mandatory]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>You can only delete a package that is in a local (database backed) repository, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package delete --package-name helloworld
Can not delete package [helloworld], associated repository [experimental] is remote.</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-release"><a class="anchor" href="#skipper-commands-release"></a>23. Release Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s release commands include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-commands-release-list">List</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-status">Status</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-upgrade">Upgrade</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-rollback">Rollback</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-history">History</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-delete">Delete</a></p>
</li>
<li>
<p><a href="#skipper-commands-release-cancel">Cancel</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-list"><a class="anchor" href="#skipper-commands-release-list"></a>23.1. List</h3>
<div class="paragraph">
<p>This command lists the latest deployed or failed release.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release list - List the latest version of releases with status of deployed or failed.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release list</strong> [[<strong>--release-name</strong>] string]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>wildcard expression to search by release name<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Listing the latest deployed or failed release, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release list
╔═══════════════╤═══════╤═════════════════════════╤════════╤═══════════╤══════════════╤════════════╤══════════════════════════════════════════════════════════════════════════════╗
║     Name      │Version│      Last updated       │ Status │  Package  │   Package    │  Platform  │                               Platform Status                                ║
║               │       │                         │        │   Name    │   Version    │    Name    │                                                                              ║
╠═══════════════╪═══════╪═════════════════════════╪════════╪═══════════╪══════════════╪════════════╪══════════════════════════════════════════════════════════════════════════════╣
║helloworldlocal│3      │Mon Oct 30 17:57:41 IST  │DEPLOYED│helloworld │1.0.0         │default     │[helloworldlocal.helloworld-v3], State =                                      ║
║               │       │2017                     │        │           │              │            │[helloworldlocal.helloworld-v3-0=deployed]                                    ║
╚═══════════════╧═══════╧═════════════════════════╧════════╧═══════════╧══════════════╧════════════╧══════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-status"><a class="anchor" href="#skipper-commands-release-status"></a>23.2. Status</h3>
<div class="paragraph">
<p>This command shows a release status.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release status - Status for a last known release version.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release status</strong> [<strong>--release-name</strong>] string  [[<strong>--release-version</strong>] integer]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>release name<br>
<strong>[Mandatory]</strong><br>
<strong>[may not be null]</strong><br></p>
</dd>
<dt class="hdlist1">--release-version  integer</dt>
<dd>
<p>the specific release version.<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Shows the <code>status</code> of a specific release and version, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldlocal
╔═══════════════╤═══════════════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Mon Oct 30 17:53:50 IST 2017                                                       ║
║Status         │DEPLOYED                                                                           ║
║Platform Status│All applications have been successfully deployed.                                  ║
║               │[helloworldlocal.helloworld-v2], State = [helloworldlocal.helloworld-v2-0=deployed]║
╚═══════════════╧═══════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>--release-version</code> specified, the latest release version is used.
The following example shows the command with the <code>--release-version</code> option:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release status --release-name helloworldlocal --release-version 1
╔═══════════════╤════════════════════════════════════════════════════════════════════════╗
║Last Deployed  │Mon Oct 30 17:52:57 IST 2017                                            ║
║Status         │DELETED                                                                 ║
║Platform Status│The applications are known to the system, but is not currently deployed.║
║               │[helloworldlocal.helloworld-v1], State = [unknown]                      ║
╚═══════════════╧════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-upgrade"><a class="anchor" href="#skipper-commands-release-upgrade"></a>23.3. Upgrade</h3>
<div class="paragraph">
<p>This command upgrades a package.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release upgrade - Upgrade a release.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release upgrade</strong> [<strong>--release-name</strong>] string  [<strong>--package-name</strong>] string  [[<strong>--package-version</strong>] string]  [[<strong>--file</strong>] file]  [[<strong>--properties</strong>] string]  [[<strong>--timeout-expression</strong>] string]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>The name of the release to upgrade<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--package-name  string</dt>
<dd>
<p>the name of the package to use for the upgrade<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--package-version  string</dt>
<dd>
<p>the version of the package to use for the upgrade, if not specified latest version will be used<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--file  file</dt>
<dd>
<p>specify values in a YAML file<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--properties  string</dt>
<dd>
<p>the comma separated set of properties to override during upgrade<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--timeout-expression  string</dt>
<dd>
<p>the expression for upgrade timeout<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
<div class="literalblock">
<div class="content">
<pre>--force	force upgrade
	[Optional, default = false]</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>--app-names  string
	application names to force upgrade. If no specific list is provided, all the apps in the packages are force upgraded
	[Optional, default = &lt;none&gt;]</pre>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Upgrades a package, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldlocal --package-name helloworld --package-version 1.0.0 --properties spec.applicationProperties.server.port=9090
helloworldpcf has been upgraded.  Now at version v2.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The manifest for this release would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">"apiVersion": "skipper.spring.io/v1"
"kind": "SpringCloudDeployerApplication"
"metadata":
  "name": "helloworld"
  "type": "demo"
"spec":
  "resource": "maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld"
  "version": "1.0.0.RELEASE"
  "applicationProperties":
    "server.port": "9090"
  "deploymentProperties": !!null "null"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>package-version</code> is specified, the latest package version by the given <code>--package-name</code> option is considered.
The properties can either be provided through comma separated YAML string by using the <code>--properties</code> option or through a YAML
file by using the <code>--file</code> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
An upgrade can be done by overriding the package version or by keeping the existing package version but overriding the properties.
When overriding the package version, it needs to accompany with the corresponding properties as the existing properties are not carried over.
In a future release, we plan to introduce a <code>--reuse-properties</code> command that will carry the current release properties over to the next release to be made.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For instance, if the package version is not changed but only other properties are changed, the manifest would add the new properties with the existing properties of the same package version.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldlocal --package-name helloworld --package-version 1.0.0 --properties spec.applicationProperties.log.level=DEBUG
helloworldpcf has been upgraded.  Now at version v3.</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">"apiVersion": "skipper.spring.io/v1"
"kind": "SpringCloudDeployerApplication"
"metadata":
  "name": "helloworld"
  "type": "demo"
"spec":
  "resource": "maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld"
  "version": "1.0.0.RELEASE"
  "applicationProperties":
    "server.port": "9090"
    "log.level": "DEBUG"
  "deploymentProperties": !!null "null"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Instead, if the upgrade is performed with a new package version as follows,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name helloworldlocal --package-name helloworld --package-version 1.0.1
helloworldpcf has been upgraded.  Now at version v3.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since the package version is changed, the manifest wouldn&#8217;t carry the properties from the existing release.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get helloworldlocal
"apiVersion": "skipper.spring.io/v1"
"kind": "SpringCloudDeployerApplication"
"metadata":
  "name": "helloworld"
  "type": "demo"
"spec":
  "resource": "maven://org.springframework.cloud.samples:spring-cloud-skipper-samples-helloworld"
  "version": "1.0.1.RELEASE"
  "applicationProperties": !!null "null"
  "deploymentProperties": !!null "null"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When performing an update on a package that contains nested packages, use the name of the package as a prefix in the property string or as the first level in the YAML document.
For example, the <code>ticktock</code> package that contains a <code>time</code> and a <code>log</code> application, a command to upgrade the <code>log</code> application would be as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name ticktockskipper --package-name ticktock --file /home/mpollack/log-level-change.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>log-level-change.yml</code> contains the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">log:
  version: 1.1.1.RELEASE
  spec:
    applicationProperties:
      server.port: 9999
      endpoints.sensitive: false
      log.level: ERROR</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since it is a common use-case to change only the version of the application, the packages can list the version as a top-level property in the <code>values.yml</code> file.
For example, in the test package <code>ticktock</code> (located <a href="https://github.com/spring-cloud/spring-cloud-skipper/blob/master/spring-cloud-skipper-server-core/src/test/resources/repositories/sources/test/ticktock/ticktock-1.0.0/packages/log/values.yml">here</a>), <code>values.yml</code> contains the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">version: 1.1.0.RELEASE
spec:
  applicationProperties:
    log.level: DEBUG
  deploymentProperties:
    memory: 1024m</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then use the <code>--properties</code> option in the <code>upgrade</code> command, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name ticktockskipper --package-name ticktock --properties log.version=1.1.1.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>--timeout-expression</code> to alter <em>timeout</em> setting used to wait healthy applications
when server is in state to do that. Global setting to override is
<code>spring.cloud.skipper.server.strategies.healthcheck.timeoutInMillis</code> mentioned earlier. More about
expression itself, see <a href="#skipper-commands-generic-usage-timeout-expression">Timeout Expression</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name ticktockskipper --package-name ticktock --timeout-expression=30s</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>--force</code> option is used to deploy new instances of currently deployed applications.
In other words, Skipper will upgrade the application again even if the manifest is unchanged.
This behavior is needed in the case when configuration information is obtained by the application itself at startup time, for example from <a href="https://cloud.spring.io/spring-cloud-config/">Spring Cloud Config Server</a>.
You can specify which applications for force upgrade by using the option <code>--app-names</code>.
If you do not specify any application names, all the applications will be force upgraded.
You can specify <code>--force</code> and <code>--app-names</code> options together with <code>--properties</code> or <code>--file</code> options.</p>
</div>
<div class="paragraph">
<p>Following example describes <code>force</code> upgrade:</p>
</div>
<div class="paragraph">
<p>First, install the package <code>ticktock</code> that has <code>time</code> and <code>log</code> apps.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package upload --repo-name local --path spring-cloud-skipper-server-core/src/test/resources/repositories/binaries/test/ticktock/ticktock-1.0.0.zip
Package uploaded successfully:[ticktock:1.0.0]

skipper:&gt;package install --package-name ticktock --release-name a1
Released a1. Now at version v1.

skipper:&gt;release list
╔════╤═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════╤═════════════════════════════════════════════╗
║Name│Version│        Last updated        │ Status │Package Name│Package Version│Platform Name│               Platform Status               ║
╠════╪═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════╪═════════════════════════════════════════════╣
║a1  │1      │Thu Sep 13 08:34:50 IST 2018│DEPLOYED│ticktock    │1.0.0          │default      │[a1.log-v1], State = [a1.log-v1-0=deployed]  ║
║    │       │                            │        │            │               │             │[a1.time-v1], State = [a1.time-v1-0=deployed]║
╚════╧═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════╧═════════════════════════════════════════════╝

skipper:&gt;release history --release-name a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║1      │Thu Sep 13 08:34:50 IST 2018│DEPLOYED│ticktock    │1.0.0          │Install complete║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, perform the upgrade even though there are no explicit differences between the <code>latest</code> and the <code>current</code> package.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name a1 --package-name ticktock
Package to upgrade has no difference than existing deployed/deleted package. Not upgrading.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the upgrade needs to be forced for all the apps of <code>ticktock</code> (for both <code>time</code> and <code>log</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name a1 --package-name ticktock --force
a1 has been upgraded.  Now at version v2.
skipper:&gt;release history --release-name a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│      Description       ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════════════╣
║2      │Thu Sep 13 08:35:53 IST 2018│UNKNOWN │ticktock    │1.0.0          │Upgrade install underway║
║1      │Thu Sep 13 08:34:50 IST 2018│DEPLOYED│ticktock    │1.0.0          │Install complete        ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════════════╝

skipper:&gt;release history --release-name a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Thu Sep 13 08:35:53 IST 2018│DEPLOYED│ticktock    │1.0.0          │Upgrade complete║
║1      │Thu Sep 13 08:34:50 IST 2018│DELETED │ticktock    │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the <code>force</code> upgrade needs to be done for a specific list of applications, then <code>--app-names</code> option can be used.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release upgrade --release-name a1 --package-name ticktock --force --app-names log
a1 has been upgraded.  Now at version v3.
skipper:&gt;release history a1
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║3      │Thu Sep 13 08:36:51 IST 2018│DEPLOYED│ticktock    │1.0.0          │Upgrade complete║
║2      │Thu Sep 13 08:35:53 IST 2018│DELETED │ticktock    │1.0.0          │Delete complete ║
║1      │Thu Sep 13 08:34:50 IST 2018│DELETED │ticktock    │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-rollback"><a class="anchor" href="#skipper-commands-release-rollback"></a>23.4. Rollback</h3>
<div class="paragraph">
<p>This command rolls back the release.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release rollback - Rollback the release to a previous or a specific release.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release rollback</strong> [<strong>--release-name</strong>] string  [[<strong>--release-version</strong>] int]  [[<strong>--timeout-expression</strong>] string]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>the name of the release to rollback<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--release-version  int</dt>
<dd>
<p>the specific release version to rollback to. Not specifying the value rolls back to the previous release.<br>
<strong>[Optional, default = 0]</strong><br></p>
</dd>
<dt class="hdlist1">--timeout-expression  string</dt>
<dd>
<p>the expression for rollback timeout<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Rolls back the release to a specific version, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release rollback --release-name helloworldlocal --release-version 1
helloworldlocal has been rolled back.  Now at version v3.</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no <code>--release-version</code> is specified, then the rollback version is the previous stable release (either in <code>DELETED</code> or
<code>DEPLOYED</code> status).</p>
</div>
<div class="paragraph">
<p>You can use <code>--timeout-expression</code> to alter <em>timeout</em> setting used to wait healthy applications
when server is in state to do that. Global setting to override is
<code>spring.cloud.skipper.server.strategies.healthcheck.timeoutInMillis</code> mentioned earlier. More about
expression itself, see <a href="#skipper-commands-generic-usage-timeout-expression">Timeout Expression</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-history"><a class="anchor" href="#skipper-commands-release-history"></a>23.5. History</h3>
<div class="paragraph">
<p>This command shows the history of a specific release.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release history - List the history of versions for a given release.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release history</strong> [<strong>--release-name</strong>] string</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>wildcard expression to search by release name<br>
<strong>[Mandatory]</strong><br>
*[may not be null]<br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Showing the history of a specific release, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release history --release-name helloworldlocal
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║3      │Mon Oct 30 17:57:41 IST 2017│DEPLOYED│helloworld  │1.0.0          │Upgrade complete║
║2      │Mon Oct 30 17:53:50 IST 2017│DELETED │helloworld  │1.0.0          │Delete complete ║
║1      │Mon Oct 30 17:52:57 IST 2017│DELETED │helloworld  │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-delete"><a class="anchor" href="#skipper-commands-release-delete"></a>23.6. Delete</h3>
<div class="paragraph">
<p>This command deletes a specific release&#8217;s latest deployed revision.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release delete - Delete the release.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release delete</strong> [<strong>--release-name</strong>] string  [<strong>--delete-package</strong>]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>the name of the release to delete<br>
<strong>[Mandatory]</strong><br></p>
</dd>
<dt class="hdlist1">--delete-package	delete the release package</dt>
<dd>
<p><strong>[Optional, default = false]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Deleting a specific release&#8217;s latest deployed revision, undeploying the application or applications, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;release delete --release-name helloworldlocal
helloworldlocal has been deleted.</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-release-cancel"><a class="anchor" href="#skipper-commands-release-cancel"></a>23.7. Cancel</h3>
<div class="paragraph">
<p>This command attempts cancellation of existing release operation.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>release cancel - Request a cancellation of current release operation.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p><strong>release cancel</strong> [<strong>--release-name</strong>] string</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>the name of the release to cancel<br>
<strong>[Mandatory]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>This command can be used to attempt a cancel for a running release operation if it supports it and
release is currently in state where any type of cancellation can be attempted. For example during
an upgrade server will delete old applications if new applications are detected healtly. Before
state is transitioned to deleting old applications, it is possible to request cancellation of whole
upgrade procedure.</p>
</div>
<div class="paragraph">
<p>One other use case is that if new applications are failed and server will timeout waiting healtly
applications, it&#8217;s convenient to cancel operation without waiting full timeout to happen.</p>
</div>
<div class="paragraph">
<p>Here is an example how cancellation is attempted when upgraded applications fail:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;package install --package-name testapp --package-version 1.0.0 --release-name mytestapp
Released mytestapp. Now at version v1.

skipper:&gt;release history --release-name mytestapp
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║1      │Thu May 17 11:18:07 BST 2018│DEPLOYED│testapp     │1.0.0          │Install complete║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝

skipper:&gt;release upgrade --package-name testapp --package-version 1.1.0 --release-name mytestapp
mytestapp has been upgraded.  Now at version v2.

skipper:&gt;release history --release-name mytestapp
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│      Description       ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════════════╣
║2      │Thu May 17 11:18:52 BST 2018│UNKNOWN │testapp     │1.1.0          │Upgrade install underway║
║1      │Thu May 17 11:18:07 BST 2018│DEPLOYED│testapp     │1.0.0          │Install complete        ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════════════╝

skipper:&gt;release status --release-name mytestapp
╔═══════════════╤═══════════════════════════════════════════════════════════════╗
║Last Deployed  │Thu May 17 11:18:52 BST 2018                                   ║
║Status         │UNKNOWN                                                        ║
║Platform Status│All apps have failed deployment.                               ║
║               │[mytestapp.testapp-v2], State = [mytestapp.testapp-v2-0=failed]║
╚═══════════════╧═══════════════════════════════════════════════════════════════╝

skipper:&gt;release cancel --release-name mytestapp
Cancel request for release mytestapp sent

skipper:&gt;release history --release-name mytestapp
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤═════════════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│       Description       ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪═════════════════════════╣
║2      │Thu May 17 11:18:52 BST 2018│FAILED  │testapp     │1.1.0          │Cancelled after 39563 ms.║
║1      │Thu May 17 11:18:07 BST 2018│DEPLOYED│testapp     │1.0.0          │Install complete         ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧═════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-manifest"><a class="anchor" href="#skipper-commands-manifest"></a>24. Manifest Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s manifest has only one command: <code>get</code>.</p>
</div>
<div class="sect2">
<h3 id="skipper-commands-manifest-get"><a class="anchor" href="#skipper-commands-manifest-get"></a>24.1. Get</h3>
<div class="paragraph">
<p>Thsi command shows a manifest.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>manifest get - Get the manifest for a release</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>manifest get [<strong>--release-name</strong>] string  [[<strong>--release-version</strong>] integer]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--release-name  string</dt>
<dd>
<p>release name<br>
<strong>[Mandatory]</strong><br>
<strong>[may not be null]</strong><br></p>
</dd>
<dt class="hdlist1">--release-version  integer</dt>
<dd>
<p>specific release version.<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>manifest get</code> command shows the manifest used for a specific release, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;manifest get --release-name helloworldk8s

---
# Source: template.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: helloworld-docker
spec:
  resource: docker:springcloud/spring-cloud-skipper-samples-helloworld:1.0.0.RELEASE
  applicationProperties:
  deploymentProperties:
    spring.cloud.deployer.kubernetes.createNodePort: 32123</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-platform"><a class="anchor" href="#skipper-commands-platform"></a>25. Platform commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s platform has only one command: <code>list</code>.</p>
</div>
<div class="sect2">
<h3 id="skipper-commands-platform-list"><a class="anchor" href="#skipper-commands-platform-list"></a>25.1. List</h3>
<div class="paragraph">
<p>This command lists platforms.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>platform list - List platforms</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>platform list</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>The <code>platform list</code> command shows the list all the available deployment platform accounts, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>skipper:&gt;platform list
╔════════╤════════════╤══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║  Name  │    Type    │                                                                         Description                                                                          ║
╠════════╪════════════╪══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║default │local       │ShutdownTimeout = [30], EnvVarsToInherit = [TMP,LANG,LANGUAGE,LC_.*,PATH], JavaCmd =                                                                          ║
║        │            │[/Library/Java/JavaVirtualMachines/jdk1.8.0_131.jdk/Contents/Home/jre/bin/java], WorkingDirectoriesRoot = [/var/folders/t3/qf1wkpwj4lgd9gjccwk0wr7h0000gp/T], ║
║        │            │DeleteFilesOnExit = [true]                                                                                                                                    ║
║cf-dev  │cloudfoundry│org = [scdf-ci], space = [ilaya-space], url = [https://api.run.pivotal.io]                                                                                    ║
║minikube│kubernetes  │master url = [https://192.168.99.101:8443/], namespace = [default], api version = [v1]                                                                        ║
╚════════╧════════════╧══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-repository"><a class="anchor" href="#skipper-commands-repository"></a>26. Repository Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s repository commands include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-commands-repo-list">List</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="skipper-commands-repo-list"><a class="anchor" href="#skipper-commands-repo-list"></a>26.1. List</h3>
<div class="paragraph">
<p>This command list repositories.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>repo list - List package repositories</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>repo list</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>List repositories as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">skipper:&gt;repo list
╔════════════╤═══════════════════════════════════════════════════════════╤═════╤═════╗
║    Name    │                            URL                            │Local│Order║
╠════════════╪═══════════════════════════════════════════════════════════╪═════╪═════╣
║experimental│https://skipper-repository.cfapps.io/repository/experimental│false│0    ║
║local       │https://10.55.13.45:7577                                    │true │1    ║
╚════════════╧═══════════════════════════════════════════════════════════╧═════╧═════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a repository is local, it is backed by Skipper&#8217;s database and you can upload packages to the repository.
If it is not local, it is a remote repository and you can only read packages.
The packages in a remote repository are updated outside of Skipper&#8217;s control.
The 1.0 release only polls the remote repository for contents upon server startup.
Follow issue <a href="https://github.com/spring-cloud/spring-cloud-skipper/issues/262">GH-262</a> for more on adding support for dynamic updating of remote repository metadata.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-config"><a class="anchor" href="#skipper-commands-config"></a>27. Skipper Server Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Skipper&#8217;s package commands include the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#skipper-commands-config-config">Config</a></p>
</li>
<li>
<p><a href="#skipper-commands-config-info">Info</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="skipper-commands-config-config"><a class="anchor" href="#skipper-commands-config-config"></a>27.1. Config</h3>
<div class="paragraph">
<p>This command configures the shell to reference the HTTP API endpoint of the Skipper Server.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>skipper config - Configure the Spring Cloud Skipper REST server to use.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>skipper config [[<strong>--uri</strong>] string]  [[<strong>--username</strong>] string]  [[<strong>--password</strong>] string]  [[<strong>--credentials-provider-command</strong>] string]  [<strong>--skip-ssl-validation</strong>]</p>
</dd>
<dt class="hdlist1">OPTIONS</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">--uri  string</dt>
<dd>
<p>the location of the Spring Cloud Skipper REST endpoint<br>
<strong>[Optional, default = <a href="http://localhost:7577/api" class="bare">localhost:7577/api</a>]</strong><br></p>
</dd>
<dt class="hdlist1">--username  string</dt>
<dd>
<p>the username for authenticated access to the Admin REST endpoint<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--password  string</dt>
<dd>
<p>the password for authenticated access to the Admin REST endpoint (valid only with a username)<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--credentials-provider-command  string</dt>
<dd>
<p>a command to run that outputs the HTTP credentials used for authentication<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
<dt class="hdlist1">--skip-ssl-validation </dt>
<dd>
<p>accept any SSL certificate (even self-signed)<br>
<strong>[Optional, default = &lt;none&gt;]</strong><br></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Configures shell as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:&gt;skipper config --uri https://localhost:8443/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>When using OAuth, you can use the username and password options.</p>
</div>
<div class="paragraph">
<p>From within the Skipper Shell you can also provide credentials, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:&gt; skipper config --uri https://localhost:7577/api --username my_username --password my_password</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="#configuration-security">Security</a> section for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="skipper-commands-config-info"><a class="anchor" href="#skipper-commands-config-info"></a>27.2. Info</h3>
<div class="paragraph">
<p>This command shows server info.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">NAME</dt>
<dd>
<p>skipper info - Show the Skipper server being used.</p>
</dd>
<dt class="hdlist1">SYNOPSYS</dt>
<dd>
<p>skipper info</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Show which server version is being used, as shown (with output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">skipper:>info
Spring Cloud Skipper Server v1.0.0.2.0.2.RELEASE</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="skipper-commands-generic-usage"><a class="anchor" href="#skipper-commands-generic-usage"></a>28. Generic Usage</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section contains generic notes about commands.</p>
</div>
<div class="sect2">
<h3 id="skipper-commands-generic-usage-timeout-expression"><a class="anchor" href="#skipper-commands-generic-usage-timeout-expression"></a>28.1. Timeout Expression</h3>
<div class="ulist">
<ul>
<li>
<p>A regular long representation (using milliseconds as the default unit)</p>
</li>
<li>
<p>The standard ISO-8601 format <a href="https://docs.oracle.com/javase/8/docs/api//java/time/Duration.html#parse-java.lang.CharSequence-">used by</a>
<em>java.util.Duration</em></p>
</li>
<li>
<p>A more readable format where the value and the unit are coupled (e.g. 10s means 10 seconds)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To specify a session timeout of 30 seconds, 30, PT30S and 30s are all equivalent. A read timeout
of 500ms can be specified in any of the following form: 500, PT0.5S and 500ms.</p>
</div>
<div class="paragraph">
<p>You can also use any of the supported unit. These are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ns for nanoseconds</p>
</li>
<li>
<p>ms for milliseconds</p>
</li>
<li>
<p>s for seconds</p>
</li>
<li>
<p>m for minutes</p>
</li>
<li>
<p>h for hours</p>
</li>
<li>
<p>d for days</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<h1 id="architecture" class="sect0"><a class="anchor" href="#architecture"></a>Architecture</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Skipper uses a basic client-server architecture.
The server exposes a REST API that is used by the interactive shell.
You can browse the API using familiar HTTP client tools.
The server persists Package Metadata and Release state in a relational database.</p>
</div>
<div class="paragraph">
<p>Platforms are defined by using the following property prefix: <code>spring.cloud.skipper.server.platform</code>.
For each of the supported platforms (<code>cloudfoundry</code>, 'kubernetes&#8217; and local), you can define multiple accounts.
Each account maps onto an instance of a Spring Cloud Deployer implementation that is responsible for deploying the applications.
The <a href="#skipper-installation">Installation</a> shows more details, but it is important to note that the Skipper server is not tied to a deploying to a single platform.
Wherever Skipper is running, it can be configured to deploy to any platform.
For example, if Skipper is deployed on Cloud Foundry, you can still register accounts for Kubernetes and deploy apps to Kubernetes from Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>The release workflow is currently a hard-coded workflow managed by the
<a href="https://projects.spring.io/spring-statemachine/">Spring Cloud State Machine</a> project.
The state of the State Machine is persisted in a relational database.</p>
</div>
</div>
</div>
<h1 id="api-guide" class="sect0"><a class="anchor" href="#api-guide"></a>REST API Guide</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section covers the Spring Cloud Skipper REST API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-overview"><a class="anchor" href="#api-guide-overview"></a>29. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Skipper provides a REST API that lets you access all aspects of the server.
The Spring Cloud Skipper shell is a first-class consumer of the API.</p>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-verbs"><a class="anchor" href="#api-guide-overview-http-verbs"></a>29.1. HTTP Verbs</h3>
<div class="paragraph">
<p>Spring Cloud Skipper tries to adhere as closely as possible to standard HTTP and REST conventions in its use of HTTP verbs.
The following table shows each verb and how Skipper uses it:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Verb</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to retrieve a resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to create a new resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to update an existing resource, including partial updates.
Also used for resources that imply the concept of <code>restarts</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to delete an existing resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-status-codes"><a class="anchor" href="#api-guide-overview-http-status-codes"></a>29.2. HTTP Status Codes</h3>
<div class="paragraph">
<p>Skipper adheres as closely as possible to standard HTTP and REST conventions in its use of HTTP status codes.
The following table shows each status and its meaning in Skipper:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200 OK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request completed successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>201 Created</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A new resource has been created successfully.
The resource&#8217;s URI is available from the response&#8217;s <code>Location</code> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>204 No Content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An update to an existing resource has been applied successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>400 Bad Request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was malformed. The response body includes an error that provides further information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>404 Not Found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested resource does not exist.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-headers"><a class="anchor" href="#api-guide-overview-headers"></a>29.3. Headers</h3>
<div class="paragraph">
<p>Every response has the following header(s):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>Content-Type</code> of the payload (for example <code>application/hal+json</code>).</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-errors"><a class="anchor" href="#api-guide-overview-errors"></a>29.4. Errors</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP error that occurred (for example, <code>Bad Request</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A description of the cause of the error.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to which the request was made.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP status code (for example <code>400</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time, in milliseconds, at which the error occurred.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-hypermedia"><a class="anchor" href="#api-guide-overview-hypermedia"></a>29.5. Hypermedia</h3>
<div class="paragraph">
<p>Spring Cloud Skipper uses hypermedia.
As a result, resources include links to other resources in their responses.
More specifically, responses are in <a href="http://stateless.co/hal_specification.html">Hypertext Application from resource to resource Language (HAL)</a> format.
Links can be found beneath the <code>_links</code> key.
Consumers of the API should not create URIs themselves.
Instead they should use the links in the resources to navigate.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-resources"><a class="anchor" href="#api-guide-resources"></a>30. Resources</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="api-guide-resources-index"><a class="anchor" href="#api-guide-resources-index"></a>30.1. Index</h3>
<div class="paragraph">
<p>The index provides the entry point into Spring Cloud Skipper&#8217;s REST API.</p>
</div>
<div class="sect3">
<h4 id="api-guide-resources-index-access"><a class="anchor" href="#api-guide-resources-index-access"></a>30.1.1. Accessing the Index</h4>
<div class="paragraph">
<p>You can use a <code>GET</code> request to access the index.</p>
</div>
<div class="sect4">
<h5 id="_request_structure"><a class="anchor" href="#_request_structure"></a>Request Structure</h5>
<div class="paragraph">
<p>The following</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request"><a class="anchor" href="#_example_request"></a>Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_response"><a class="anchor" href="#_example_response"></a>Example Response</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 1366

{
  "_links" : {
    "jpaRepositoryTransitions" : {
      "href" : "http://localhost:7577/api/jpaRepositoryTransitions"
    },
    "deployers" : {
      "href" : "http://localhost:7577/api/deployers{?page,size,sort}",
      "templated" : true
    },
    "jpaRepositoryActions" : {
      "href" : "http://localhost:7577/api/jpaRepositoryActions"
    },
    "jpaRepositoryStateMachines" : {
      "href" : "http://localhost:7577/api/jpaRepositoryStateMachines"
    },
    "jpaRepositoryGuards" : {
      "href" : "http://localhost:7577/api/jpaRepositoryGuards"
    },
    "releases" : {
      "href" : "http://localhost:7577/api/releases{?page,size,sort}",
      "templated" : true
    },
    "jpaRepositoryStates" : {
      "href" : "http://localhost:7577/api/jpaRepositoryStates"
    },
    "repositories" : {
      "href" : "http://localhost:7577/api/repositories{?page,size,sort}",
      "templated" : true
    },
    "packageMetadata" : {
      "href" : "http://localhost:7577/api/packageMetadata{?page,size,sort,projection}",
      "templated" : true
    },
    "about" : {
      "href" : "http://localhost:7577/api/about"
    },
    "release" : {
      "href" : "http://localhost:7577/api/release"
    },
    "package" : {
      "href" : "http://localhost:7577/api/package"
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-links"><a class="anchor" href="#api-guide-resources-index-links"></a>Links</h5>
<div class="paragraph">
<p>The links are the main element of the index, as they allow you to traverse the API and execute the desired functionality.
The following table dsecribes the links:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repositories</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the 'package repository' repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deployers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the deployer repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>packageMetadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the package metadata repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>releases</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the release repository.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>profile</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entrypoint to provide ALPS metadata that defines simple descriptions of application-level semantics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>about</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides meta information about the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>release</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the release resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>package</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the package resource.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-about"><a class="anchor" href="#resources-about"></a>30.2. Server</h3>
<div class="paragraph">
<p>The Server resource exposes build and version information of the server.</p>
</div>
<div class="sect3">
<h4 id="_server_info"><a class="anchor" href="#_server_info"></a>30.2.1. Server info</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns meta information for Spring Cloud Skipper, including the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Server name&#8201;&#8212;&#8201;typically <code>spring-cloud-skipper-server</code></p>
</li>
<li>
<p>Version of the server&#8201;&#8212;&#8201;for example, <code>2.0.2.RELEASE</code></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_request_structure_2"><a class="anchor" href="#_request_structure_2"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/about HTTP/1.1
Accept: application/json
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_2"><a class="anchor" href="#_example_request_2"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/about' -i \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure"><a class="anchor" href="#_response_structure"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 260
Content-Type: application/json;charset=UTF-8

{
  "versionInfo" : {
    "server" : {
      "name" : "Spring Cloud Skipper Server",
      "version" : "fake-server-version"
    },
    "shell" : {
      "name" : "Spring Cloud Skipper Shell",
      "version" : "fake-shell-version"
    }
  },
  "links" : [ ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields"><a class="anchor" href="#_response_fields"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionInfo.server.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Skipper Server dependency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionInfo.server.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Skipper Server dependency version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionInfo.shell.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Skipper Shell dependency.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>versionInfo.shell.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spring Cloud Skipper Shell dependency version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_platforms"><a class="anchor" href="#_platforms"></a>30.3. Platforms</h3>
<div class="paragraph">
<p>The Platforms (or Platform Deployer) resource is exported from the Spring Data Repository <code>DeployerRepository</code> and exposed by Spring Data REST.</p>
</div>
<div class="sect3">
<h4 id="_find_all"><a class="anchor" href="#_find_all"></a>30.3.1. Find All</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a paginated list for all the Spring Cloud Skipper platform deployers.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_3"><a class="anchor" href="#_request_structure_3"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/deployers?page=0&amp;size=10 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_3"><a class="anchor" href="#_example_request_3"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/deployers?page=0&amp;size=10' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_2"><a class="anchor" href="#_response_structure_2"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 6498

{
  "_embedded" : {
    "deployers" : [ {
      "name" : "default",
      "type" : "local",
      "description" : "ShutdownTimeout = [30], EnvVarsToInherit = [TMP,LANG,LANGUAGE,LC_.*,PATH,SPRING_APPLICATION_JSON], JavaCmd = [/opt/jdk1.8.0_201/jre/bin/java], WorkingDirectoriesRoot = [/tmp], DeleteFilesOnExit = [true]",
      "options" : [ {
        "id" : "spring.cloud.deployer.local.java-opts",
        "name" : "java-opts",
        "type" : "java.lang.String",
        "description" : "The Java Options to pass to the JVM, e.g -Dtest=foo",
        "shortDescription" : "The Java Options to pass to the JVM, e.g -Dtest=foo",
        "defaultValue" : null,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.use-spring-application-json",
        "name" : "use-spring-application-json",
        "type" : "java.lang.Boolean",
        "description" : "Flag to indicate whether application properties are passed as command line args or in a SPRING_APPLICATION_JSON environment variable. Default value is {@code true}.",
        "shortDescription" : "Flag to indicate whether application properties are passed as command line args or in a SPRING_APPLICATION_JSON environment variable.",
        "defaultValue" : true,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.delete-files-on-exit",
        "name" : "delete-files-on-exit",
        "type" : "java.lang.Boolean",
        "description" : "Whether to delete created files and directories on JVM exit.",
        "shortDescription" : "Whether to delete created files and directories on JVM exit.",
        "defaultValue" : true,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.env-vars-to-inherit",
        "name" : "env-vars-to-inherit",
        "type" : "java.lang.String[]",
        "description" : "Array of regular expression patterns for environment variables that should be passed to launched applications.",
        "shortDescription" : "Array of regular expression patterns for environment variables that should be passed to launched applications.",
        "defaultValue" : null,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.java-cmd",
        "name" : "java-cmd",
        "type" : "java.lang.String",
        "description" : "The command to run java.",
        "shortDescription" : "The command to run java.",
        "defaultValue" : null,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.shutdown-timeout",
        "name" : "shutdown-timeout",
        "type" : "java.lang.Integer",
        "description" : "Maximum number of seconds to wait for application shutdown. via the {@code /shutdown} endpoint. A timeout value of 0 specifies an infinite timeout. Default is 30 seconds.",
        "shortDescription" : "Maximum number of seconds to wait for application shutdown. via the {@code /shutdown} endpoint.",
        "defaultValue" : 30,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.maximum-concurrent-tasks",
        "name" : "maximum-concurrent-tasks",
        "type" : "java.lang.Integer",
        "description" : "The maximum concurrent tasks allowed for this platform instance.",
        "shortDescription" : "The maximum concurrent tasks allowed for this platform instance.",
        "defaultValue" : 20,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.port-range.high",
        "name" : "high",
        "type" : "java.lang.Integer",
        "description" : "Upper bound for computing applications's random port.",
        "shortDescription" : "Upper bound for computing applications's random port.",
        "defaultValue" : 61000,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      }, {
        "id" : "spring.cloud.deployer.local.port-range.low",
        "name" : "low",
        "type" : "java.lang.Integer",
        "description" : "Lower bound for computing applications's random port.",
        "shortDescription" : "Lower bound for computing applications's random port.",
        "defaultValue" : 20000,
        "hints" : {
          "keyHints" : [ ],
          "keyProviders" : [ ],
          "valueHints" : [ ],
          "valueProviders" : [ ]
        },
        "deprecation" : null,
        "deprecated" : false
      } ],
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/deployers/8d3a9a13-c2e6-45fb-bd9f-03823a5f163a"
        },
        "deployer" : {
          "href" : "http://localhost:7577/api/deployers/8d3a9a13-c2e6-45fb-bd9f-03823a5f163a"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/deployers{&amp;sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile/deployers"
    },
    "search" : {
      "href" : "http://localhost:7577/api/deployers/search"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_2"><a class="anchor" href="#_response_fields_2"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the page being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalElements</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total elements available for pagination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalPages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total amount of pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number of the page returned (zero-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array containing Deployer objects</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the deployer</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of the deployer (e.g. 'local')</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description providing some deployer properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array containing Deployer deployment properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property id</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property type</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].shortDescription</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property short description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].defaultValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Varies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property default value</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].hints</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Object containing deployment property hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].hints.keyHints</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property key hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].hints.keyProviders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property key hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].hints.valueHints</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property key hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].hints.valueProviders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployment property key hints</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].deprecation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.deployers[].options[].deprecated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-packages-metadata"><a class="anchor" href="#resources-packages-metadata"></a>30.4. Packages</h3>
<div class="paragraph">
<p>The Packages resource is exported from the Spring Data Repository <code>PackageMetadata</code> and exposed by Spring Data REST.</p>
</div>
<div class="sect3">
<h4 id="resources-package-search"><a class="anchor" href="#resources-package-search"></a>30.4.1. Search</h4>
<div class="paragraph">
<p>A <code>GET</code> request will return a paginated list for all Spring Cloud Skipper package metadata.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_4"><a class="anchor" href="#_request_structure_4"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/packageMetadata?page=0&amp;size=10 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_4"><a class="anchor" href="#_example_request_4"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/packageMetadata?page=0&amp;size=10' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_3"><a class="anchor" href="#_response_structure_3"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 4657

{
  "_embedded" : {
    "packageMetadata" : [ {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/3"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/3{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/3"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/4"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/4{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/4"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/5"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/5{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/5"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/6"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/6{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/6"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/packageMetadata{&amp;sort,projection}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile/packageMetadata"
    },
    "search" : {
      "href" : "http://localhost:7577/api/packageMetadata/search"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 4,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_3"><a class="anchor" href="#_response_fields_3"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the page being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalElements</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total elements available for pagination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalPages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total amount of pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number of the page returned (zero-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains a collection of Package Metadata items</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-search-summary"><a class="anchor" href="#resources-package-search-summary"></a>30.4.2. Search summary</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns the list of available package metadata with the summary information of each package.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_5"><a class="anchor" href="#_request_structure_5"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/packageMetadata?projection=summary HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_5"><a class="anchor" href="#_example_request_5"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/packageMetadata?projection=summary' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_4"><a class="anchor" href="#_response_structure_4"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 2296

{
  "_embedded" : {
    "packageMetadata" : [ {
      "version" : "1.0.0",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "repositoryName" : "local",
      "iconUrl" : null,
      "name" : "log",
      "id" : "3",
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/3"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/3{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/3"
        }
      }
    }, {
      "version" : "1.0.0",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "repositoryName" : "local",
      "iconUrl" : null,
      "name" : "log",
      "id" : "4",
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/4"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/4{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/4"
        }
      }
    }, {
      "version" : "1.0.0",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "repositoryName" : "local",
      "iconUrl" : null,
      "name" : "log",
      "id" : "5",
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/5"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/5{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/5"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/packageMetadata{?page,size,sort,projection}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile/packageMetadata"
    },
    "search" : {
      "href" : "http://localhost:7577/api/packageMetadata/search"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 3,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_4"><a class="anchor" href="#_response_fields_4"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the page being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalElements</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total elements available for pagination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalPages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total amount of pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number of the page returned (zero-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Identifier of the package metadata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[]._links.self.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">self link</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[]._links.packageMetadata.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">link to full package metadata</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[]._links.install.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">link to install the package</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-search-details"><a class="anchor" href="#resources-package-search-details"></a>30.4.3. Search with details</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns the details of a package using the <code>id</code> of the package.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_6"><a class="anchor" href="#_request_structure_6"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/packageMetadata/3 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_6"><a class="anchor" href="#_example_request_6"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/packageMetadata/3' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_5"><a class="anchor" href="#_response_structure_5"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
ETag: "0"
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 931

{
  "apiVersion" : "skipper.spring.io/v1",
  "origin" : null,
  "repositoryId" : 2,
  "repositoryName" : "local",
  "kind" : "SkipperPackageMetadata",
  "name" : "log",
  "displayName" : null,
  "version" : "1.0.0",
  "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
  "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
  "tags" : "logging, sink",
  "maintainer" : "https://github.com/sobychacko",
  "description" : "The log sink uses the application logger to output the data for inspection.",
  "sha256" : null,
  "iconUrl" : null,
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/packageMetadata/3"
    },
    "packageMetadata" : {
      "href" : "http://localhost:7577/api/packageMetadata/3{?projection}",
      "templated" : true
    },
    "install" : {
      "href" : "http://localhost:7577/api/package/install/3"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_5"><a class="anchor" href="#_response_fields_5"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-search-find-by-name"><a class="anchor" href="#resources-package-search-find-by-name"></a>30.4.4. Search by Package Name</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a list of all the Spring Cloud Skipper package metadata for the given package name.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_7"><a class="anchor" href="#_request_structure_7"></a>Request structure</h5>
<div class="paragraph">
<p>getPackageMetadataSearchFindByName</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/packageMetadata/search/findByName?name=log HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_7"><a class="anchor" href="#_example_request_7"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/packageMetadata/search/findByName?name=log' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_6"><a class="anchor" href="#_response_structure_6"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 5404

{
  "_embedded" : {
    "packageMetadata" : [ {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/3"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/3{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/3"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/4"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/4{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/4"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/5"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/5{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/5"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/6"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/6{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/6"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/7"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/7{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/7"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/packageMetadata/search/findByName?name=log"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_6"><a class="anchor" href="#_response_fields_6"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-search-findbyname-ignore-case"><a class="anchor" href="#resources-package-search-findbyname-ignore-case"></a>30.4.5. Search by Package Name, Ignoring Case</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a list for all Spring Cloud Skipper package metadata by the given package name ignoring case.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_8"><a class="anchor" href="#_request_structure_8"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/packageMetadata/search/findByNameContainingIgnoreCase?name=LO HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_8"><a class="anchor" href="#_example_request_8"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/packageMetadata/search/findByNameContainingIgnoreCase?name=LO' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_7"><a class="anchor" href="#_response_structure_7"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2288
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "packageMetadata" : [ {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/3"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/3{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/3"
        }
      }
    }, {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : 2,
      "repositoryName" : "local",
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/packageMetadata/4"
        },
        "packageMetadata" : {
          "href" : "http://localhost:7577/api/packageMetadata/4{?projection}",
          "templated" : true
        },
        "install" : {
          "href" : "http://localhost:7577/api/package/install/4"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/packageMetadata/search/findByNameContainingIgnoreCase?name=LO"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_7"><a class="anchor" href="#_response_fields_7"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.packageMetadata[].iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-package"><a class="anchor" href="#resources-package"></a>30.5. Package</h3>
<div class="paragraph">
<p>The Package resource maps onto the PackageController for uploading and installing packages.</p>
</div>
<div class="sect3">
<h4 id="resources-package-upload"><a class="anchor" href="#resources-package-upload"></a>30.5.1. Upload</h4>
<div class="paragraph">
<p>The <code>upload</code> link uploads a package into a the <code>local</code> database backed repository.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_9"><a class="anchor" href="#_request_structure_9"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/package/upload HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_9"><a class="anchor" href="#_example_request_9"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/package/upload' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_8"><a class="anchor" href="#_response_structure_8"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 821
Content-Type: application/json;charset=UTF-8

{
  "apiVersion" : "skipper.spring.io/v1",
  "origin" : null,
  "repositoryId" : null,
  "repositoryName" : null,
  "kind" : "SkipperPackageMetadata",
  "name" : "log",
  "displayName" : null,
  "version" : "1.0.0",
  "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
  "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
  "tags" : "logging, sink",
  "maintainer" : "https://github.com/sobychacko",
  "description" : "The log sink uses the application logger to output the data for inspection.",
  "sha256" : null,
  "iconUrl" : null,
  "links" : [ {
    "rel" : "install",
    "href" : "http://localhost:7577/api/package/install",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_8"><a class="anchor" href="#_response_fields_8"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository nane this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The display name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-install"><a class="anchor" href="#resources-package-install"></a>30.5.2. Install</h4>
<div class="paragraph">
<p>The <code>install</code> link can install a package (identified by the <code>InstallRequest</code>) into the target platform.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_10"><a class="anchor" href="#_request_structure_10"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/package/install HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_10"><a class="anchor" href="#_example_request_10"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/package/install' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_9"><a class="anchor" href="#_response_structure_9"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 2732
Content-Type: application/json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_9"><a class="anchor" href="#_response_fields_9"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="resources-package-install-id"><a class="anchor" href="#resources-package-install-id"></a>30.5.3. Install with ID</h4>
<div class="paragraph">
<p>The <code>install</code> link can install a package identified by its ID into the target platform.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_11"><a class="anchor" href="#_request_structure_11"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/package/install/1 HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_11"><a class="anchor" href="#_example_request_11"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/package/install/1' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_10"><a class="anchor" href="#_response_structure_10"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 2741
Content-Type: application/json;charset=UTF-8

{
  "name" : "myLogRelease2",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_10"><a class="anchor" href="#_response_fields_10"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="repositories"><a class="anchor" href="#repositories"></a>30.6. Repositories</h3>
<div class="paragraph">
<p>The Repositories resource is exported from the Spring Data Repository <code>RepositoryRepository</code> (yes, it&#8217;s a funny name) and exposed by Spring Data REST.</p>
</div>
<div class="sect3">
<h4 id="_find_all_2"><a class="anchor" href="#_find_all_2"></a>30.6.1. Find All</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a paginated list for all Spring Cloud Skipper repositories.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_12"><a class="anchor" href="#_request_structure_12"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/repositories?page=0&amp;size=10 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_12"><a class="anchor" href="#_example_request_12"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/repositories?page=0&amp;size=10' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_11"><a class="anchor" href="#_response_structure_11"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 1321

{
  "_embedded" : {
    "repositories" : [ {
      "name" : "test",
      "url" : "classpath:/repositories/binaries/test",
      "sourceUrl" : null,
      "local" : false,
      "description" : "test repository with a few packages",
      "repoOrder" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/repositories/1"
        },
        "repository" : {
          "href" : "http://localhost:7577/api/repositories/1"
        }
      }
    }, {
      "name" : "local",
      "url" : "http://localhost:7577",
      "sourceUrl" : null,
      "local" : true,
      "description" : "Default local database backed repository",
      "repoOrder" : null,
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/repositories/2"
        },
        "repository" : {
          "href" : "http://localhost:7577/api/repositories/2"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/repositories{&amp;sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile/repositories"
    },
    "search" : {
      "href" : "http://localhost:7577/api/repositories/search"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_11"><a class="anchor" href="#_response_fields_11"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the page being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalElements</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total elements available for pagination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalPages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total amount of pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number of the page returned (zero-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Contains a collection of Repositories</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].sourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source Url of the repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].local</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the repo local?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.repositories[].repoOrder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order of the Repository</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_find_by_name"><a class="anchor" href="#_find_by_name"></a>30.6.2. Find By Name</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a single Spring Cloud Skipper repositories.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_13"><a class="anchor" href="#_request_structure_13"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/repositories/search/findByName?name=local HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_13"><a class="anchor" href="#_example_request_13"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/repositories/search/findByName?name=local' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_12"><a class="anchor" href="#_response_structure_12"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
ETag: "0"
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 366

{
  "name" : "local",
  "url" : "http://localhost:7577",
  "sourceUrl" : null,
  "local" : true,
  "description" : "Default local database backed repository",
  "repoOrder" : null,
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/repositories/2"
    },
    "repository" : {
      "href" : "http://localhost:7577/api/repositories/2"
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_12"><a class="anchor" href="#_response_fields_12"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>url</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>local</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Is the repo local?</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>repoOrder</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order of the Repository</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source URL of the repository</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-releases"><a class="anchor" href="#resources-releases"></a>30.7. Releases</h3>
<div class="paragraph">
<p>The <code>release</code> resource is exported from the Spring Data Repository <code>ReleaseRepository</code> and exposed by Spring Data REST.</p>
</div>
<div class="sect3">
<h4 id="resources-release-find-all"><a class="anchor" href="#resources-release-find-all"></a>30.7.1. Find all</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns a paginated list for all Spring Cloud Skipper releases.</p>
</div>
<div class="sect4">
<h5 id="_request_structure_14"><a class="anchor" href="#_request_structure_14"></a>Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/releases?page=0&amp;size=10 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_example_request_14"><a class="anchor" href="#_example_request_14"></a>Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/releases?page=0&amp;size=10' -i</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_structure_13"><a class="anchor" href="#_response_structure_13"></a>Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 3354
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "releases" : [ {
      "name" : "test",
      "version" : 1,
      "info" : {
        "status" : {
          "statusCode" : "DELETED",
          "platformStatus" : null
        },
        "firstDeployed" : null,
        "lastDeployed" : null,
        "deleted" : null,
        "description" : null
      },
      "pkg" : {
        "metadata" : {
          "apiVersion" : "skipper.spring.io/v1",
          "origin" : null,
          "repositoryId" : null,
          "repositoryName" : null,
          "kind" : "SkipperPackageMetadata",
          "name" : "log",
          "displayName" : null,
          "version" : "1.0.0",
          "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
          "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
          "tags" : "logging, sink",
          "maintainer" : "https://github.com/sobychacko",
          "description" : "The log sink uses the application logger to output the data for inspection.",
          "sha256" : null,
          "iconUrl" : null
        },
        "templates" : [ {
          "name" : "log.yml",
          "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
        } ],
        "dependencies" : [ ],
        "configValues" : {
          "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
        },
        "fileHolders" : [ ]
      },
      "configValues" : {
        "raw" : "config2: value2\nconfig1: value1\n"
      },
      "manifest" : {
        "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
      },
      "platformName" : "default",
      "_links" : {
        "self" : {
          "href" : "http://localhost:7577/api/releases/8"
        },
        "release" : {
          "href" : "http://localhost:7577/api/releases/8"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:7577/api/releases{&amp;sort}",
      "templated" : true
    },
    "profile" : {
      "href" : "http://localhost:7577/api/profile/releases"
    },
    "search" : {
      "href" : "http://localhost:7577/api/releases/search"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_response_fields_13"><a class="anchor" href="#_response_fields_13"></a>Response fields</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pagination properties</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the page being returned</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalElements</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total elements available for pagination</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.totalPages</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Total amount of pages</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page.number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page number of the page returned (zero-based)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-release"><a class="anchor" href="#resources-release"></a>30.8. Release</h3>
<div class="paragraph">
<p>The Release resource maps onto the ReleaseController for managing the lifecycle of a release.</p>
</div>
<div class="sect3">
<h4 id="resources-release-list"><a class="anchor" href="#resources-release-list"></a>30.8.1. List</h4>
<div class="sect4">
<h5 id="_list_latest"><a class="anchor" href="#_list_latest"></a>List latest</h5>
<div class="paragraph">
<p>The <code>list</code> link can list the latest version of releases with status of deployed or failed.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_15"><a class="anchor" href="#_request_structure_15"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/list HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_15"><a class="anchor" href="#_example_request_15"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/list' -i</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_14"><a class="anchor" href="#_response_structure_14"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2913
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "releases" : [ {
      "name" : "test",
      "version" : 1,
      "info" : {
        "status" : {
          "statusCode" : "DELETED",
          "platformStatus" : null
        },
        "firstDeployed" : null,
        "lastDeployed" : null,
        "deleted" : null,
        "description" : null
      },
      "pkg" : {
        "metadata" : {
          "apiVersion" : "skipper.spring.io/v1",
          "origin" : null,
          "repositoryId" : null,
          "repositoryName" : null,
          "kind" : "SkipperPackageMetadata",
          "name" : "log",
          "displayName" : null,
          "version" : "1.0.0",
          "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
          "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
          "tags" : "logging, sink",
          "maintainer" : "https://github.com/sobychacko",
          "description" : "The log sink uses the application logger to output the data for inspection.",
          "sha256" : null,
          "iconUrl" : null
        },
        "templates" : [ {
          "name" : "log.yml",
          "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
        } ],
        "dependencies" : [ ],
        "configValues" : {
          "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
        },
        "fileHolders" : [ ]
      },
      "configValues" : {
        "raw" : "config2: value2\nconfig1: value1\n"
      },
      "manifest" : {
        "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
      },
      "platformName" : "default",
      "_links" : {
        "status" : {
          "href" : "http://localhost:7577/api/release/status/{name}",
          "templated" : true
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_14"><a class="anchor" href="#_response_fields_14"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_list_latest_by_name"><a class="anchor" href="#_list_latest_by_name"></a>List latest by name</h5>
<div class="paragraph">
<p>The <code>list</code> link can list the latest version of releases with status of deployed or failed by the
given release name.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_16"><a class="anchor" href="#_request_structure_16"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/list/test HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_16"><a class="anchor" href="#_example_request_16"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/list/test' -i</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_15"><a class="anchor" href="#_response_structure_15"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2913
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "releases" : [ {
      "name" : "test",
      "version" : 1,
      "info" : {
        "status" : {
          "statusCode" : "DELETED",
          "platformStatus" : null
        },
        "firstDeployed" : null,
        "lastDeployed" : null,
        "deleted" : null,
        "description" : null
      },
      "pkg" : {
        "metadata" : {
          "apiVersion" : "skipper.spring.io/v1",
          "origin" : null,
          "repositoryId" : null,
          "repositoryName" : null,
          "kind" : "SkipperPackageMetadata",
          "name" : "log",
          "displayName" : null,
          "version" : "1.0.0",
          "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
          "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
          "tags" : "logging, sink",
          "maintainer" : "https://github.com/sobychacko",
          "description" : "The log sink uses the application logger to output the data for inspection.",
          "sha256" : null,
          "iconUrl" : null
        },
        "templates" : [ {
          "name" : "log.yml",
          "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
        } ],
        "dependencies" : [ ],
        "configValues" : {
          "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
        },
        "fileHolders" : [ ]
      },
      "configValues" : {
        "raw" : "config2: value2\nconfig1: value1\n"
      },
      "manifest" : {
        "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
      },
      "platformName" : "default",
      "_links" : {
        "status" : {
          "href" : "http://localhost:7577/api/release/status/{name}",
          "templated" : true
        }
      }
    } ]
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_15"><a class="anchor" href="#_response_fields_15"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_embedded.releases[].platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-status"><a class="anchor" href="#resources-release-status"></a>30.8.2. Status</h4>
<div class="sect4">
<h5 id="_get_the_status_of_a_release"><a class="anchor" href="#_get_the_status_of_a_release"></a>Get the status of a release</h5>
<div class="paragraph">
<p>The <code>status</code> REST endpoint provides the status for the last known release version.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_17"><a class="anchor" href="#_request_structure_17"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/status/test HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_17"><a class="anchor" href="#_example_request_17"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/status/test' -i</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_16"><a class="anchor" href="#_response_structure_16"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 313

{
  "status" : {
    "statusCode" : "DELETED",
    "platformStatus" : null
  },
  "firstDeployed" : null,
  "lastDeployed" : null,
  "deleted" : null,
  "description" : null,
  "_links" : {
    "manifest" : {
      "href" : "http://localhost:7577/api/release/manifest/{name}",
      "templated" : true
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_16"><a class="anchor" href="#_response_fields_16"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_status_by_version"><a class="anchor" href="#_status_by_version"></a>Status by version</h5>
<div class="paragraph">
<p>The <code>status</code> REST endpoint can provide the status for a specific release version.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_18"><a class="anchor" href="#_request_structure_18"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/status/test/1 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_18"><a class="anchor" href="#_example_request_18"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/status/test/1' -i</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_17"><a class="anchor" href="#_response_structure_17"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 313

{
  "status" : {
    "statusCode" : "DELETED",
    "platformStatus" : null
  },
  "firstDeployed" : null,
  "lastDeployed" : null,
  "deleted" : null,
  "description" : null,
  "_links" : {
    "manifest" : {
      "href" : "http://localhost:7577/api/release/manifest/{name}",
      "templated" : true
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_17"><a class="anchor" href="#_response_fields_17"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-upgrade"><a class="anchor" href="#resources-release-upgrade"></a>30.8.3. Upgrade</h4>
<div class="sect4">
<h5 id="_upgrade_a_release"><a class="anchor" href="#_upgrade_a_release"></a>Upgrade a release</h5>
<div class="paragraph">
<p>The upgrade link upgrades an existing release with the configured package and config values from the <code>UpgradeRequest</code>.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_19"><a class="anchor" href="#_request_structure_19"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/release/upgrade HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_19"><a class="anchor" href="#_example_request_19"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/upgrade' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_18"><a class="anchor" href="#_response_structure_18"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 2732
Content-Type: application/json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_18"><a class="anchor" href="#_response_fields_18"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-rollback"><a class="anchor" href="#resources-release-rollback"></a>30.8.4. Rollback</h4>
<div class="sect4">
<h5 id="_rollback_release_using_uri_variables"><a class="anchor" href="#_rollback_release_using_uri_variables"></a>Rollback release using uri variables</h5>
<div class="paragraph">
<p>The rollback link rolls back the release to a previous or a specific release.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This part of the api is deprecated, please use
<a href="#resources-release-rollback-request">Rollback release using request object</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="_request_structure_20"><a class="anchor" href="#_request_structure_20"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/release/rollback/test/1 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_20"><a class="anchor" href="#_example_request_20"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/rollback/test/1' -i -X POST</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_19"><a class="anchor" href="#_response_structure_19"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 2650
Content-Type: application/hal+json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "_links" : {
    "status" : {
      "href" : "http://localhost:7577/api/release/status/{name}",
      "templated" : true
    }
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_19"><a class="anchor" href="#_response_fields_19"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="resources-release-rollback-request"><a class="anchor" href="#resources-release-rollback-request"></a>Rollback release using request object</h5>
<div class="paragraph">
<p>The rollback link rolls back the release to a previous or a specific release.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_21"><a class="anchor" href="#_request_structure_21"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/release/rollback HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_21"><a class="anchor" href="#_example_request_21"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/rollback' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_20"><a class="anchor" href="#_response_structure_20"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Length: 2732
Content-Type: application/json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_20"><a class="anchor" href="#_response_fields_20"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-manifest"><a class="anchor" href="#resources-release-manifest"></a>30.8.5. Manifest</h4>
<div class="sect4">
<h5 id="_get_manifest"><a class="anchor" href="#_get_manifest"></a>Get manifest</h5>
<div class="paragraph">
<p>The <code>manifest</code> REST endpoint returns the manifest for the last known release version.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_22"><a class="anchor" href="#_request_structure_22"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/manifest/test HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_22"><a class="anchor" href="#_example_request_22"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/manifest/test' -i \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_21"><a class="anchor" href="#_response_structure_21"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 718
Content-Type: application/json;charset=UTF-8

{
  "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_get_manifest_by_version"><a class="anchor" href="#_get_manifest_by_version"></a>Get manifest by version</h5>
<div class="paragraph">
<p>The <code>manifest</code> REST endpoint can return the manifest for a specific release version.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_23"><a class="anchor" href="#_request_structure_23"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /api/release/manifest/test/1 HTTP/1.1
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_23"><a class="anchor" href="#_example_request_23"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/manifest/test/1' -i</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_22"><a class="anchor" href="#_response_structure_22"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 636
Content-Type: application/hal+json;charset=UTF-8

{
  "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n",
  "_links" : {
    "status" : {
      "href" : "http://localhost:7577/api/release/status/{name}",
      "templated" : true
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-delete"><a class="anchor" href="#resources-release-delete"></a>30.8.6. Delete</h4>
<div class="sect4">
<h5 id="_delete_a_release"><a class="anchor" href="#_delete_a_release"></a>Delete a release</h5>
<div class="paragraph">
<p>You can use a <code>DELETE</code> request to delete an existing release.
The delete operation does not uninstall the uploaded packages corresponding to the release.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_24"><a class="anchor" href="#_request_structure_24"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /api/release/test HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_24"><a class="anchor" href="#_example_request_24"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/test' -i -X DELETE \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_23"><a class="anchor" href="#_response_structure_23"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2732
Content-Type: application/json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_21"><a class="anchor" href="#_response_fields_21"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_delete_a_release_and_uninstall_package"><a class="anchor" href="#_delete_a_release_and_uninstall_package"></a>Delete a release and uninstall package</h5>
<div class="paragraph">
<p>You can use a DELETE request to delete an existing release and uninstall the packages corresponding to the release, provided there are no other releases in active state use these packages.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_25"><a class="anchor" href="#_request_structure_25"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /api/release/test/package HTTP/1.1
Accept: application/json
Content-Type: application/json
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_25"><a class="anchor" href="#_example_request_25"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/test/package' -i -X DELETE \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_24"><a class="anchor" href="#_response_structure_24"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2732
Content-Type: application/json;charset=UTF-8

{
  "name" : "test",
  "version" : 1,
  "info" : {
    "status" : {
      "statusCode" : "DELETED",
      "platformStatus" : null
    },
    "firstDeployed" : null,
    "lastDeployed" : null,
    "deleted" : null,
    "description" : null
  },
  "pkg" : {
    "metadata" : {
      "apiVersion" : "skipper.spring.io/v1",
      "origin" : null,
      "repositoryId" : null,
      "repositoryName" : null,
      "kind" : "SkipperPackageMetadata",
      "name" : "log",
      "displayName" : null,
      "version" : "1.0.0",
      "packageSourceUrl" : "https://github.com/spring-cloud-stream-app-starters/log/tree/v1.2.0.RC1",
      "packageHomeUrl" : "https://cloud.spring.io/spring-cloud-stream-app-starters/",
      "tags" : "logging, sink",
      "maintainer" : "https://github.com/sobychacko",
      "description" : "The log sink uses the application logger to output the data for inspection.",
      "sha256" : null,
      "iconUrl" : null
    },
    "templates" : [ {
      "name" : "log.yml",
      "data" : "apiVersion: skipper.spring.io/v1\nkind: SpringCloudDeployerApplication\nmetadata:\n  name: log\n  type: sink\nspec:\n  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit\n  resourceMetadata: maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:{{version}}\n  version: {{version}}\n  applicationProperties:\n    server.port: 0\n    {{#spec.applicationProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.applicationProperties.entrySet}}\n  deploymentProperties:\n    {{#spec.deploymentProperties.entrySet}}\n    {{key}}: {{value}}\n    {{/spec.deploymentProperties.entrySet}}\n"
    } ],
    "dependencies" : [ ],
    "configValues" : {
      "raw" : "# Default values for {{name}}\n# This is a YAML-formatted file.\n# Declare variables to be passed into your templates\nversion: 1.2.0.RC1\n"
    },
    "fileHolders" : [ ]
  },
  "configValues" : {
    "raw" : "config2: value2\nconfig1: value1\n"
  },
  "manifest" : {
    "data" : "\"apiVersion\": \"skipper.spring.io/v1\"\n\"kind\": \"SpringCloudDeployerApplication\"\n\"metadata\":\n  \"name\": \"log\"\n  \"type\": \"sink\"\n\"spec\":\n  \"resource\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit\"\n  \"resourceMetadata\": \"maven://org.springframework.cloud.stream.app:log-sink-rabbit:jar:metadata:1.2.0.RC1\"\n  \"version\": \"1.2.0.RC1\"\n  \"applicationProperties\":\n    \"server.port\": \"0\"\n  \"deploymentProperties\": !!null \"null\"\n"
  },
  "platformName" : "default",
  "links" : [ {
    "rel" : "status",
    "href" : "http://localhost:7577/api/release/status/{name}",
    "hreflang" : null,
    "media" : null,
    "title" : null,
    "type" : null,
    "deprecation" : null
  } ]
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_22"><a class="anchor" href="#_response_fields_22"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.statusCode</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">StatusCode of the release&#8217;s status (UNKNOWN,DEPLOYED,DELETED,FAILED)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.status.platformStatus</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status from the underlying platform</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.firstDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of first deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.lastDeployed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of last deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.deleted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Date/Time of when the release was deleted</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>info.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Human-friendly 'log entry' about this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.apiVersion</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Package Index spec version this file is based on</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.origin</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates the origin of the repository (free form text)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository ID this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.repositoryName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The repository name this Package belongs to.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">What type of package system is being used</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.displayName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display name of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageSourceUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Location to source code for this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.packageHomeUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The home page of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.tags</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A comma separated list of tags to use for searching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.maintainer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Who is maintaining this package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Brief description of the package</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.sha256</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hash of package binary that will be downloaded using SHA256 hash algorithm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.metadata.iconUrl</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Url location of a icon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name is the path-like name of the template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.templates[].data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Data is the template as string data</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.dependencies</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The packages that this package depends upon</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pkg.fileHolders</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Array</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Miscellaneous files in a package, e.g. README, LICENSE, etc.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>configValues.raw</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The raw YAML string of configuration values</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest.data</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The manifest of the release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>platformName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Platform name of the release</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-release-cancel"><a class="anchor" href="#resources-release-cancel"></a>30.8.7. Cancel</h4>
<div class="sect4">
<h5 id="_cancel_a_release"><a class="anchor" href="#_cancel_a_release"></a>Cancel a release</h5>
<div class="paragraph">
<p>You can use a <code>POST</code> request to cancel an existing release operation.</p>
</div>
<div class="sect5">
<h6 id="_request_structure_26"><a class="anchor" href="#_request_structure_26"></a>Request structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /api/release/cancel HTTP/1.1
Accept: application/json
Content-Type: application/json;charset=UTF-8
Host: localhost:7577</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_example_request_26"><a class="anchor" href="#_example_request_26"></a>Example request</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:7577/api/release/cancel' -i -X POST \
    -H 'Accept: application/json' \
    -H 'Content-Type: application/json;charset=UTF-8'</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_structure_25"><a class="anchor" href="#_response_structure_25"></a>Response structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 23

{
  "accepted" : true
}</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_response_fields_23"><a class="anchor" href="#_response_fields_23"></a>Response fields</h6>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>accepted</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If cancel request was accepted</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="appendix" class="sect0"><a class="anchor" href="#appendix"></a>Appendices</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Having trouble with Spring Cloud Skipper, We&#8217;d like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question - we monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-skipper"><code>spring-cloud-skipper</code></a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Skipper at <a href="https://github.com/spring-cloud/spring-cloud-skipper/issues" class="bare">github.com/spring-cloud/spring-cloud-skipper/issues</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building"><a class="anchor" href="#building"></a>Appendix A: Building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build the source, you need to install JDK 1.8.</p>
</div>
<div class="paragraph">
<p>The build uses the Maven wrapper so that you do not have to install a specific version of Maven.</p>
</div>
<div class="paragraph">
<p>The main build command is</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw clean install</pre>
</div>
</div>
<div class="paragraph">
<p>To create the executables and avoid running the tests and generating JavaDocs, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw clean package -DskipTests -Dmaven.javadoc.skip=true</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also install Maven (&gt;=3.3.3) yourself and run the <code>mvn</code> command in place of <code>./mvnw</code> in the examples.
If you do so, you also might need to add <code>-P spring</code> if your local Maven settings do not contain repository declarations for spring pre-release artifacts.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You might need to increase the amount of memory available to Maven by setting a <code>MAVEN_OPTS</code> environment variable with a value like <code>-Xmx512m -XX:MaxPermSize=128m</code>.
We try to cover this in the <code>.mvn</code> configuration, so, if you find you have to increase memory to make a build succeed, please raise a ticket to get the settings added to source control.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_documentation"><a class="anchor" href="#_documentation"></a>A.1. Documentation</h3>
<div class="paragraph">
<p>To generate only the REST Docs documentation, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw test -pl spring-cloud-skipper-server-core -Dtest=*Documentation*</pre>
</div>
</div>
<div class="paragraph">
<p>To build the only the Asciidoctor documentation, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw package -DskipTests -Pfull -pl spring-cloud-skipper-docs</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_server_build"><a class="anchor" href="#_custom_server_build"></a>A.2. Custom Server Build</h3>
<div class="paragraph">
<p>This chapter contains instructions how to create a custom server
build and should cause exactly same packaged <em>uber-jar</em> compared to
one from a Skipper build itself.</p>
</div>
<div class="paragraph">
<p>It is required to follow same <em>Spring Boot</em> main class structure used in Skipper itself.
Example of it is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package com.example.customskipperserver;

import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.actuate.autoconfigure.ManagementWebSecurityAutoConfiguration;
import org.springframework.boot.autoconfigure.security.SecurityAutoConfiguration;
import org.springframework.boot.autoconfigure.session.SessionAutoConfiguration;
import org.springframework.cloud.deployer.spi.cloudfoundry.CloudFoundryDeployerAutoConfiguration;
import org.springframework.cloud.deployer.spi.kubernetes.KubernetesAutoConfiguration;
import org.springframework.cloud.deployer.spi.local.LocalDeployerAutoConfiguration;
import org.springframework.cloud.skipper.server.EnableSkipperServer;

@SpringBootApplication(exclude = {
                CloudFoundryDeployerAutoConfiguration.class,
                KubernetesAutoConfiguration.class,
                LocalDeployerAutoConfiguration.class,
                ManagementWebSecurityAutoConfiguration.class,
                SecurityAutoConfiguration.class,
                SessionAutoConfiguration.class
        })
@EnableSkipperServer
public class CustomSkipperServerApplication {

	public static void main(String[] args) {
		SpringApplication.run(CustomSkipperServerApplication.class, args);
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Working build file for <em>Maven</em> would look like something shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

	&lt;groupId&gt;com.example&lt;/groupId&gt;
	&lt;artifactId&gt;custom-skipper-server&lt;/artifactId&gt;
	&lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;
	&lt;packaging&gt;jar&lt;/packaging&gt;

	&lt;name&gt;custom-skipper-server&lt;/name&gt;
	&lt;description&gt;Demo project for Spring Boot&lt;/description&gt;

	&lt;parent&gt;
		&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
		&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
		&lt;version&gt;1.5.9.RELEASE&lt;/version&gt;
		&lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
	&lt;/parent&gt;

	&lt;properties&gt;
		&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
		&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
		&lt;java.version&gt;1.8&lt;/java.version&gt;
		&lt;spring-cloud.version&gt;Dalston.SR5&lt;/spring-cloud.version&gt;
		&lt;spring-cloud-skipper.version&gt;2.0.2.RELEASE&lt;/spring-cloud-skipper.version&gt;
		&lt;!--
			reactor and flyway are managed by boot so only clean way with maven is to
			change version properties. trying to import boms in dependencyManagement
			would not actually change versions.
		--&gt;
		&lt;reactor.version&gt;3.0.7.RELEASE&lt;/reactor.version&gt;
		&lt;flyway.version&gt;5.0.5&lt;/flyway.version&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
			&lt;artifactId&gt;spring-cloud-starter-skipper-server&lt;/artifactId&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
			&lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
	&lt;/dependencies&gt;

	&lt;dependencyManagement&gt;
		&lt;dependencies&gt;
			&lt;dependency&gt;
				&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
				&lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;
				&lt;version&gt;${spring-cloud.version}&lt;/version&gt;
				&lt;type&gt;pom&lt;/type&gt;
				&lt;scope&gt;import&lt;/scope&gt;
			&lt;/dependency&gt;
			&lt;dependency&gt;
				&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
				&lt;artifactId&gt;spring-cloud-skipper-dependencies&lt;/artifactId&gt;
				&lt;version&gt;${spring-cloud-skipper.version}&lt;/version&gt;
				&lt;type&gt;pom&lt;/type&gt;
				&lt;scope&gt;import&lt;/scope&gt;
			&lt;/dependency&gt;
		&lt;/dependencies&gt;
	&lt;/dependencyManagement&gt;


	&lt;build&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
				&lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;
&lt;/project&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Working build file for <em>Gradle</em> would look like something shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-groovy hljs" data-lang="groovy">buildscript {
	ext {
		springBootVersion = '1.5.9.RELEASE'
	}
	repositories {
		mavenCentral()
	}
	dependencies {
		classpath("org.springframework.boot:spring-boot-gradle-plugin:${springBootVersion}")
	}
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'org.springframework.boot'

group = 'com.example'
version = '0.0.1-SNAPSHOT'
sourceCompatibility = 1.8

repositories {
	mavenLocal()
	mavenCentral()
	maven { url "https://repo.springsource.org/libs-snapshot" }
	maven { url "https://repo.springsource.org/libs-release" }
	maven { url "https://repo.springsource.org/libs-milestone" }
}


ext {
	springCloudVersion = 'Dalston.SR5'
	springCloudSkipperVersion = '2.0.2.RELEASE'
	reactorVersion = 'Aluminium-SR3'
	reactorNettyVersion = '0.6.6.RELEASE'
	objenesisVersion = '2.1'
}

dependencies {
	compile('org.springframework.cloud:spring-cloud-starter-skipper-server')
	testCompile('org.springframework.boot:spring-boot-starter-test')
}

dependencyManagement {
	imports {
		mavenBom "org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}"
		mavenBom "org.springframework.cloud:spring-cloud-skipper-dependencies:${springCloudSkipperVersion}"
		mavenBom "io.projectreactor:reactor-bom:${reactorVersion}"
	}
	dependencies {
		// latest reactor bom is still using reactor-netty:0.6.3.RELEASE
		// so we need to change it here because cf java client use
		// dedicated netty version while they should have been using
		// reactor boms assuming reactor boms would be up-to-date
		dependency "io.projectreactor.ipc:reactor-netty:${reactorNettyVersion}"
		// this is unfortunate mess with objenesis as there's versions 2.1 and 2.6
		// in build path and nobody manages version and maven vs. gradle is different
		dependency "org.objenesis:objenesis:${objenesisVersion}"
	}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_importing_into_eclipse"><a class="anchor" href="#_importing_into_eclipse"></a>A.3. Importing into eclipse</h3>
<div class="paragraph">
<p>You can generate Eclipse project metadata by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw eclipse:eclipse</pre>
</div>
</div>
<div class="paragraph">
<p>In Eclipse, the generated projects can be imported by selecting <code>Import existing projects</code> from the <code>File</code> menu.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing"><a class="anchor" href="#contributing"></a>Appendix B: Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud is released under the non-restrictive Apache 2.0 license and follows a standard Github development process, using Github tracker for issues and merging pull requests into master.
If you want to contribute even something trivial, please do not hesitate, but please do follow the guidelines spelled out in this section.</p>
</div>
<div class="sect2">
<h3 id="_sign_the_contributor_license_agreement"><a class="anchor" href="#_sign_the_contributor_license_agreement"></a>B.1. Sign the Contributor License Agreement</h3>
<div class="paragraph">
<p>Before we accept a non-trivial patch or pull request, we need you to sign the <a href="https://cla.pivotal.io">contributor&#8217;s agreement</a>.
Signing the contributor&#8217;s agreement does not grant anyone commit rights to the main repository, but it does mean that we can accept your contributions.
You will get an author credit if we do.
Active contributors might be asked to join the core team and be given the ability to merge pull requests.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_conventions_and_housekeeping"><a class="anchor" href="#_code_conventions_and_housekeeping"></a>B.2. Code Conventions and Housekeeping</h3>
<div class="paragraph">
<p>None of these conventions is essential for a pull request, but they all help.
They can also be added after the original pull request but before a merge.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Spring Framework code format conventions.
Follow <a href="https://github.com/spring-cloud/spring-cloud-skipper#code-formatting-guidelines">these instructions</a> for setting up the eclipse formatter in eclipse or IntelliJ.
Note that checkstyle is enabled in the build.</p>
</li>
<li>
<p>Make sure all new <code>.java</code> files have a simple Javadoc class comment with at least an <code>@author</code> tag identifying you and preferably at least a paragraph on what the class is for.</p>
</li>
<li>
<p>Add the ASF license header comment to all new <code>.java</code> files.
To do so, copy from existing files in the project.</p>
</li>
<li>
<p>Add yourself as an <code>@author</code> to the <code>.java</code> files that you modify substantially (more than cosmetic changes).</p>
</li>
<li>
<p>Add some Javadocs and, if you change the namespace, some XSD doc elements.</p>
</li>
<li>
<p>A few unit tests would help a lot as well&#8201;&#8212;&#8201;someone has to do it, and your fellow developers appreciate it.</p>
</li>
<li>
<p>If no-one else is using your branch, please rebase it against the current master (or other target branch in the main project).</p>
</li>
<li>
<p>When writing a commit message, please follow <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">these conventions</a>.
If you are fixing an existing issue, please add <code>Fixes gh-XXXX</code> at the end of the commit message (where XXXX is the issue number).</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-05-10 08:31:17 UTC
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>