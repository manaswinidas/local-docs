<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Configuring and Running a Job</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700);
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #34302d; padding: 0; margin: 0; font-family: "Varela Round", sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #0b0a0a; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #548e2e; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #487a28; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Montserrat, sans-serif; font-weight: 400; font-style: normal; color: #34302d; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #867c74; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Monaco, Menlo, Consolas, "Courier New", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #34302d; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #34302d; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #34302d; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: Monaco, Menlo, Consolas, "Courier New", monospace; font-weight: normal; text-rendering: optimizeSpeed; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #6b625c; }

kbd { font-family: Monaco, Menlo, Consolas, "Courier New", monospace; display: inline-block; color: #34302d; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #191715; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Montserrat, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #0b0a0a; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f1f1f1; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d7d7d7; margin-bottom: 1.25em; padding: 1.25em; background: #f1f1f1; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #34302d; padding: 1.25em; }

#footer-text { color: #cbcfd2; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #34302d; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262321; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Varela Round", sans-serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Montserrat, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d7d7d7; margin-bottom: 1.25em; padding: 1.25em; background: #f1f1f1; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #0b0a0a; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: whitesmoke; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #dddddd; -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: whitesmoke; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #0b0a0a; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #34302d; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #3f6a22; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #34302d; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.admonitionblock { border-left: 4px solid #6db33f; background-color: #ebf1e7; padding: 1.2em 0; margin: 30px 0; width: auto; }

#toc a:hover { text-decoration: underline; }

.admonitionblock > table td.content { border-left: none; }

.js-download-widget-selector{display:inline;}.navbar{margin-bottom:0;}.item-slider-widget{display:inline-block;margin-left:15px;}.item-slider-widget .item--slider{height:32px;position:absolute;width:40px;border-radius:2px;margin-top:-4px;z-index:800;background:#68605a;background:-moz-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#68605a),color-stop(100%,#34302d),color-stop(100%,#020202));background:-webkit-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-o-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-ms-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:linear-gradient(to bottom,#68605a 0%,#34302d 100%,#020202 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#68605a',endColorstr='#020202',GradientType=0);cursor:pointer;transition:all 0.25s;-webkit-transition:all 0.25s;-moz-webkit-transition:all 0.25s;-ms--webkit-transition:all 0.25s;-o-webkit-transition:all 0.25s;}.item-slider-widget .item-slider--container{background-color:white;border:1px solid #999;padding:0 3px;}.item-slider-widget .item-slider--container .item{display:inline-block;color:#c3c3c3;font-family:"Montserrat",sans-serif;font-size:12px;line-height:12px;text-transform:uppercase;padding:7px 6px 5px;cursor:pointer;transition:color 0.25s;-webkit-transition:color 0.25s;-moz-webkit-transition:color 0.25s;-ms--webkit-transition:color 0.25s;-o-webkit-transition:color 0.25s;}.item-slider-widget .item-slider--container .item:hover{color:black;}.item-slider-widget .item-slider--container .item.js-active{z-index:801;position:relative;color:#f1f1f1;}

/* Styling for the toggle buttons */
/* Borrowed from http://jeremyworboys.com/writing/toggle-buttons-without-javascript */
/* Micro clearfix (http://nicolasgallagher.com/micro-clearfix-hack/) */
.cf:before,.cf:after{content:"";display:table}.cf:after{clear:both}.cf{zoom:1}

/* = Function = */

.docToggle-button input {
    display: none;
}
.docToggle-button label {
    background: #ccc;
    border: 1px solid #888;
    color: #666;
    padding: 5px 10px;
}
.docToggle-button label:hover {
    background-color: #ddd;
}
.docToggle-button label:active,
.docToggle-button input:focus + label {
    background-color: #aaa;
}
.docToggle-button input:checked + label {
    background-color: #b4b4b4;
}

.docToggle-button label {
    background-color: #f5f5f5;
    background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: linear-gradient(top, #ffffff, #e6e6e6);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0);
    border-color: #e6e6e6 #e6e6e6 #bfbfbf;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    border: 1px solid #cccccc;
    border-bottom-color: #b3b3b3;
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    color: #333333;
    cursor: pointer;
    display: inline-block;
    margin-bottom: 0;
    margin-left: -1px;
    padding: 4px 10px;
    font-size: 13px;
    line-height: 18px;
    text-align: center;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
    vertical-align: middle;
}
.docToggle-button label:hover {
    background-color: #e6e6e6;
    background-position: 0 -15px;
    color: #333333;
    text-decoration: none;
    -webkit-transition: background-position 0.1s linear;
    -moz-transition: background-position 0.1s linear;
    -ms-transition: background-position 0.1s linear;
    -o-transition: background-position 0.1s linear;
    transition: background-position 0.1s linear;
}
.docToggle-button label:active,
.docToggle-button input:focus + label {
    background-color: #d9d9d9;
    background-image: none;
    -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    outline: 0;
}

.docToggle-button input:checked + label {
    background: #404040;
    color: #ffffff;
    -webkit-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px  rgba(0, 0, 0, 0.05);
}
.docToggle-button:first-child label {
  -webkit-border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px;
  border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px;
  border-bottom-left-radius: 4px;
  margin-left: 0;
}
.docToggle-button:last-child label {
  -webkit-border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px;
  border-top-right-radius: 4px;
  -webkit-border-bottom-right-radius: 4px;
  -moz-border-radius-bottomright: 4px;
  border-bottom-right-radius: 4px;

  -webkit-border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px;
  border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px;
  border-bottom-left-radius: 4px;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<style>
  #tocbot a.toc-link.node-name--H1{ font-style: italic }
  @media screen{
    #tocbot > ul.toc-list{ margin-bottom: 0.5em; margin-left: 0.125em }
    #tocbot ul.sectlevel0, #tocbot a.toc-link.node-name--H1 + ul{
      padding-left: 0 }
    #tocbot a.toc-link{ height:100% }
    .is-collapsible{ max-height:3000px; overflow:hidden; }
    .is-collapsed{ max-height:0 }
    .is-active-link{ font-weight:700 }
  }
  @media print{
    #tocbot a.toc-link.node-name--H4{ display:none }
  }
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#configureJob">1. Configuring and Running a Job</a>
<ul class="sectlevel2">
<li><a href="#configuringAJob">1.1. Configuring a Job</a>
<ul class="sectlevel3">
<li><a href="#restartability">1.1.1. Restartability</a></li>
<li><a href="#interceptingJobExecution">1.1.2. Intercepting Job Execution</a></li>
<li><a href="#inheritingFromAParentJob">1.1.3. Inheriting from a Parent Job</a></li>
<li><a href="#jobparametersvalidator">1.1.4. JobParametersValidator</a></li>
</ul>
</li>
<li><a href="#javaConfig">1.2. Java Config</a></li>
<li><a href="#configuringJobRepository">1.3. Configuring a JobRepository</a>
<ul class="sectlevel3">
<li><a href="#txConfigForJobRepository">1.3.1. Transaction Configuration for the JobRepository</a></li>
<li><a href="#repositoryTablePrefix">1.3.2. Changing the Table Prefix</a></li>
<li><a href="#inMemoryRepository">1.3.3. In-Memory Repository</a></li>
<li><a href="#nonStandardDatabaseTypesInRepository">1.3.4. Non-standard Database Types in a Repository</a></li>
</ul>
</li>
<li><a href="#configuringJobLauncher">1.4. Configuring a JobLauncher</a></li>
<li><a href="#runningAJob">1.5. Running a Job</a>
<ul class="sectlevel3">
<li><a href="#runningJobsFromCommandLine">1.5.1. Running Jobs from the Command Line</a>
<ul class="sectlevel4">
<li><a href="#commandLineJobRunner">The CommandLineJobRunner</a></li>
<li><a href="#exitCodes">ExitCodes</a></li>
</ul>
</li>
<li><a href="#runningJobsFromWebContainer">1.5.2. Running Jobs from within a Web Container</a></li>
</ul>
</li>
<li><a href="#advancedMetaData">1.6. Advanced Meta-Data Usage</a>
<ul class="sectlevel3">
<li><a href="#queryingRepository">1.6.1. Querying the Repository</a></li>
<li><a href="#jobregistry">1.6.2. JobRegistry</a>
<ul class="sectlevel4">
<li><a href="#jobregistrybeanpostprocessor">JobRegistryBeanPostProcessor</a></li>
<li><a href="#automaticjobregistrar">AutomaticJobRegistrar</a></li>
</ul>
</li>
<li><a href="#JobOperator">1.6.3. JobOperator</a></li>
<li><a href="#JobParametersIncrementer">1.6.4. JobParametersIncrementer</a></li>
<li><a href="#stoppingAJob">1.6.5. Stopping a Job</a></li>
<li><a href="#aborting-a-job">1.6.6. Aborting a Job</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="configureJob"><a class="anchor" href="#configureJob"></a>1. Configuring and Running a Job</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
<div>
  <script type="text/javascript" src="jsfiles/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="jsfiles/js.cookie.js"></script>
  <script type="text/javascript" src="jsfiles/DocumentToggle.js"></script>
  <div class="docToggle-button">
    <input id="xmlButton" type="radio" name="docToggle" value="XML"><label for="xmlButton">XML</label>
    <input id="javaButton" type="radio" name="docToggle" value="Java" checked><label for="javaButton">Java</label>
    <!-- <input id="bothButton" type="radio" name="docToggle" value="Both" checked><label for="bothButton">Both</label> -->
  </div>
</div>
</p>
</div>
<div class="paragraph">
<p>In the <a href="domain.html#domainLanguageOfBatch">domain section</a> , the overall
  architecture design was discussed, using the following diagram as a
  guide:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/spring-batch-reference-model.png" alt="Figure 2.1: Batch Stereotypes">
</div>
<div class="title">Figure 1. Batch Stereotypes</div>
</div>
<div class="paragraph">
<p>While the <code>Job</code> object may seem like a simple
container for steps, there are many configuration options of which a
developer must be aware. Furthermore, there are many considerations for
how a <code>Job</code> will be run and how its meta-data will be
stored during that run. This chapter will explain the various configuration
options and runtime concerns of a <code>Job</code>.</p>
</div>
<div class="sect2">
<h3 id="configuringAJob"><a class="anchor" href="#configuringAJob"></a>1.1. Configuring a Job</h3>
<div class="paragraph javaContent">
<p>There are multiple implementations of the <a href="#configureJob"><code>Job</code></a> interface, however
builders abstract away the difference in configuration.</p>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> Job footballJob() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span>)
                     .start(playerLoad())
                     .next(gameLoad())
                     .next(playerSummarization())
                     .end()
                     .build();
}</code></pre>
</div>
</div>
<div class="paragraph javaContent">
<p>A <code>Job</code> (and typically any <code>Step</code> within it) requires a <code>JobRepository</code>.  The
configuration of the <code>JobRepository</code> is handled via the <a href="#javaConfig"><code>BatchConfigurer</code></a>.</p>
</div>
<div class="paragraph javaContent">
<p>The above example illustrates a <code>Job</code> that consists of three <code>Step</code> instances.  The job related
builders can also contain other elements that help with parallelisation (<code>Split</code>),
declarative flow control (<code>Decision</code>) and externalization of flow definitions (<code>Flow</code>).</p>
</div>
<div class="paragraph xmlContent">
<p>There are multiple implementations of the <a href="#configureJob"><code>Job</code></a> interface, however, the namespace
abstracts away the differences in configuration. It has only three
required dependencies: a name, a <code>JobRepository</code> , and
a list of <code>Step</code> instances.</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerload</span><span class="delimiter">&quot;</span></span>          <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>The examples here use a parent bean definition to create the steps;
see the section on <a href="step.html#configureStep">step configuration</a>
for more options declaring specific step details inline. The XML namespace
defaults to referencing a repository with an id of 'jobRepository', which
is a sensible default. However, this can be overridden explicitly:</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">job-repository</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">specialRepository</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerload</span><span class="delimiter">&quot;</span></span>          <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s3</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>In addition to steps a job configuration can contain other elements
    that help with parallelisation (<code>&lt;split&gt;</code>),
    declarative flow control (<code>&lt;decision&gt;</code>) and
    externalization of flow definitions
    (<code>&lt;flow/&gt;</code>).</p>
</div>
<div class="sect3">
<h4 id="restartability"><a class="anchor" href="#restartability"></a>1.1.1. Restartability</h4>
<div class="paragraph">
<p>One key issue when executing a batch job concerns the behavior of
a <code>Job</code> when it is restarted. The launching of a
<code>Job</code> is considered to be a 'restart' if a
<code>JobExecution</code> already exists for the particular
<code>JobInstance</code>. Ideally, all jobs should be able to
start up where they left off, but there are scenarios where this is not
possible. <em>It is entirely up to the developer to ensure that a new <code>JobInstance</code> is created in this scenario</em>. However, Spring Batch does provide some help. If a
<code>Job</code> should never be restarted, but should always
be run as part of a new <code>JobInstance</code>, then the
restartable property may be set to 'false':</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">restartable</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> Job footballJob() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span>)
                     .preventRestart()
                     ...
                     .build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To phrase it another way, setting restartable to false means "this
<code>Job</code> does not support being started again". Restarting a <code>Job</code> that is not
restartable will cause a <code>JobRestartException</code> to
be thrown:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">Job job = <span class="keyword">new</span> SimpleJob();
job.setRestartable(<span class="predefined-constant">false</span>);

JobParameters jobParameters = <span class="keyword">new</span> JobParameters();

JobExecution firstExecution = jobRepository.createJobExecution(job, jobParameters);
jobRepository.saveOrUpdate(firstExecution);

<span class="keyword">try</span> {
    jobRepository.createJobExecution(job, jobParameters);
    fail();
}
<span class="keyword">catch</span> (JobRestartException e) {
    <span class="comment">// expected</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This snippet of JUnit code shows how attempting to create a
<code>JobExecution</code> the first time for a non restartable
job will cause no issues. However, the second
attempt will throw a <code>JobRestartException</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="interceptingJobExecution"><a class="anchor" href="#interceptingJobExecution"></a>1.1.2. Intercepting Job Execution</h4>
<div class="paragraph">
<p>During the course of the execution of a
Job, it may be useful to be notified of various
events in its lifecycle so that custom code may be executed. The
<code>SimpleJob</code> allows for this by calling a
<code>JobListener</code> at the appropriate time:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">JobExecutionListener</span> {

    <span class="type">void</span> beforeJob(JobExecution jobExecution);

    <span class="type">void</span> afterJob(JobExecution jobExecution);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>JobListeners</code> can be added to a
<code>SimpleJob</code> via the listeners element on the
job:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerload</span><span class="delimiter">&quot;</span></span>          <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gameLoad</span><span class="delimiter">&quot;</span></span>            <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s2</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">next</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">playerSummarization</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">s3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;listeners&gt;</span>
        <span class="tag">&lt;listener</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sampleListener</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/listeners&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> Job footballJob() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span>)
                     .listener(sampleListener())
                     ...
                     .build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>It should be noted that <code>afterJob</code> will be
      called regardless of the success or failure of the
      Job. If success or failure needs to be determined
      it can be obtained from the <code>JobExecution</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">void</span> afterJob(JobExecution jobExecution){
    <span class="keyword">if</span>( jobExecution.getStatus() == BatchStatus.COMPLETED ){
        <span class="comment">//job success</span>
    }
    <span class="keyword">else</span> <span class="keyword">if</span>(jobExecution.getStatus() == BatchStatus.FAILED){
        <span class="comment">//job failure</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The annotations corresponding to this interface are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@BeforeJob</code></p>
</li>
<li>
<p><code>@AfterJob</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3 xmlContent">
<h4 id="inheritingFromAParentJob"><a class="anchor" href="#inheritingFromAParentJob"></a>1.1.3. Inheriting from a Parent Job</h4>
<div class="paragraph xmlContent">
<p>If a group of Jobs share similar, but not
      identical, configurations, then it may be helpful to define a "parent"
      <code>Job</code> from which the concrete
      Jobs may inherit properties. Similar to class
      inheritance in Java, the "child" <code>Job</code> will combine
      its elements and attributes with the parent&#8217;s.</p>
</div>
<div class="paragraph xmlContent">
<p>In the following example, "baseJob" is an abstract
      <code>Job</code> definition that defines only a list of
      listeners. The <code>Job</code> "job1" is a concrete
      definition that inherits the list of listeners from "baseJob" and merges
      it with its own list of listeners to produce a
      <code>Job</code> with two listeners and one
      <code>Step</code>, "step1".</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">baseJob</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">abstract</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;listeners&gt;</span>
        <span class="tag">&lt;listener</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">listenerOne</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;listeners&gt;</span>
<span class="tag">&lt;/job&gt;</span>

<span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">job1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">baseJob</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">standaloneStep</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

    <span class="tag">&lt;listeners</span> <span class="attribute-name">merge</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;listener</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">listenerTwo</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;listeners&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>Please see the section on <a href="step.html#inheritingFromParentStep">Inheriting from a Parent Step</a>
      for more detailed information.</p>
</div>
</div>
<div class="sect3">
<h4 id="jobparametersvalidator"><a class="anchor" href="#jobparametersvalidator"></a>1.1.4. JobParametersValidator</h4>
<div class="paragraph">
<p>A job declared in the XML namespace or using any subclass of
      <code>AbstractJob</code> can optionally declare a validator for the job parameters at
      runtime. This is useful when for instance you need to assert that a job
      is started with all its mandatory parameters. There is a
      <code>DefaultJobParametersValidator</code> that can be used to constrain combinations
      of simple mandatory and optional parameters, and for more complex
      constraints you can implement the interface yourself.</p>
</div>
<div class="paragraph xmlContent">
<p>The configuration of a validator is supported through the XML namespace through a child
      element of the job, e.g:</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">job1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">baseJob3</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">standaloneStep</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;validator</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">parametersValidator</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>The validator can be specified as a reference (as above) or as a
      nested bean definition in the beans namespace.</p>
</div>
<div class="paragraph javaContent">
<p>The configuration of a validator is supported through the java builders, e.g:</p>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> Job job1() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">job1</span><span class="delimiter">&quot;</span></span>)
                     .validator(parametersValidator())
                     ...
                     .build();
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="javaConfig"><a class="anchor" href="#javaConfig"></a>1.2. Java Config</h3>
<div class="paragraph">
<p>Spring 3 brought the ability to configure applications via java in addition to XML.
  	As of Spring Batch 2.2.0, batch jobs can be configured using the same
  	java config.  There are two components for the java based configuration:
  	the <code>@EnableBatchProcessing</code> annotation and two builders.</p>
</div>
<div class="paragraph">
<p>The <code>@EnableBatchProcessing</code> works similarly to the other
  	@Enable* annotations in the Spring family.  In this case,
  	<code>@EnableBatchProcessing</code> provides a base configuration for
  	building batch jobs.  Within this base configuration, an instance of
  	<code>StepScope</code> is created in addition to a number of beans made
  	available to be autowired:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>JobRepository</code> - bean name "jobRepository"</p>
</li>
<li>
<p><code>JobLauncher</code> - bean name "jobLauncher"</p>
</li>
<li>
<p><code>JobRegistry</code> - bean name "jobRegistry"</p>
</li>
<li>
<p><code>PlatformTransactionManager</code> - bean name "transactionManager"</p>
</li>
<li>
<p><code>JobBuilderFactory</code> - bean name "jobBuilders"</p>
</li>
<li>
<p><code>StepBuilderFactory</code> - bean name "stepBuilders"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The core interface for this configuration is the <code>BatchConfigurer</code>.
    The default implementation provides the beans mentioned above and requires a
    <code>DataSource</code> as a bean within the context to be provided.  This data
    source will be used by the JobRepository. You can customize any of these beans
    by creating a custom implementation of the <code>BatchConfigurer</code> interface.
    Typically, extending the <code>DefaultBatchConfigurer</code> (which is provided if a
    <code>BatchConfigurer</code> is not found) and overriding the required getter is sufficient.
    However, implementing your own from scratch may be required. The following
    example shows how to provide a custom transaction manager:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> BatchConfigurer batchConfigurer() {
        <span class="keyword">return</span> <span class="keyword">new</span> DefaultBatchConfigurer() {
                <span class="annotation">@Override</span>
                <span class="directive">public</span> PlatformTransactionManager getTransactionManager() {
                        <span class="keyword">return</span> <span class="keyword">new</span> MyTransactionManager();
                }
        };
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only one configuration class needs to have the
    	<code>@EnableBatchProcessing</code> annotation.  Once you have a class
    	annotated with it, you will have all of the above available.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>With the base configuration in place, a user can use the provided builder factories
	to configure a job.  Below is an example of a two step job configured via the
	<code>JobBuilderFactory</code> and the <code>StepBuilderFactory</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Configuration</span>
<span class="annotation">@EnableBatchProcessing</span>
<span class="annotation">@Import</span>(DataSourceConfiguration.class)
<span class="directive">public</span> <span class="type">class</span> <span class="class">AppConfig</span> {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> JobBuilderFactory jobs;

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> StepBuilderFactory steps;

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> Job job(<span class="annotation">@Qualifier</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>) Step step1, <span class="annotation">@Qualifier</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">step2</span><span class="delimiter">&quot;</span></span>) Step step2) {
        <span class="keyword">return</span> jobs.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">myJob</span><span class="delimiter">&quot;</span></span>).start(step1).next(step2).build();
    }

    <span class="annotation">@Bean</span>
    <span class="directive">protected</span> Step step1(ItemReader&lt;Person&gt; reader,
                         ItemProcessor&lt;Person, Person&gt; processor,
                         ItemWriter&lt;Person&gt; writer) {
        <span class="keyword">return</span> steps.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>)
            .&lt;Person, Person&gt; chunk(<span class="integer">10</span>)
            .reader(reader)
            .processor(processor)
            .writer(writer)
            .build();
    }

    <span class="annotation">@Bean</span>
    <span class="directive">protected</span> Step step2(Tasklet tasklet) {
        <span class="keyword">return</span> steps.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step2</span><span class="delimiter">&quot;</span></span>)
            .tasklet(tasklet)
            .build();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuringJobRepository"><a class="anchor" href="#configuringJobRepository"></a>1.3. Configuring a JobRepository</h3>
<div class="paragraph javaContent">
<p>When using <code>@EnableBatchProcessing</code>, a <code>JobRepository</code> is provided out of the box for you.
This section addresses configuring your own.</p>
</div>
<div class="paragraph">
<p>As described in earlier, the <a href="#configureJob"><code>JobRepository</code></a> is used for basic CRUD operations of the various persisted
    domain objects within Spring Batch, such as
    <code>JobExecution</code> and
    <code>StepExecution</code>. It is required by many of the major
    framework features, such as the <code>JobLauncher</code>,
    <code>Job</code>, and <code>Step</code>.</p>
</div>
<div class="paragraph xmlContent">
<p>The batch
    namespace abstracts away many of the implementation details of the
    <code>JobRepository</code> implementations and their
    collaborators. However, there are still a few configuration options
    available:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job-repository</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">data-source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">transaction-manager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">transactionManager</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">isolation-level-for-create</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SERIALIZABLE</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">table-prefix</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">BATCH_</span><span class="delimiter">&quot;</span></span>
        <span class="attribute-name">max-varchar-length</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>None of the configuration options listed above are required except
    the id. If they are not set, the defaults shown above will be used. They
    are shown above for awareness purposes. The
    <code>max-varchar-length</code> defaults to 2500, which is the
    length of the long <code>VARCHAR</code> columns in the <a href="schema-appendix.html#metaDataSchemaOverview">sample schema scripts</a></p>
</div>
<div class="paragraph javaContent">
<p>When using java configuration, a <code>JobRepository</code> is provided for you.  A JDBC based one is
provided out of the box if a <code>DataSource</code> is provided, the <code>Map</code> based one if not.  However
you can customize the configuration of the <code>JobRepository</code> via an implementation of the
<code>BatchConfigurer</code> interface.</p>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
<span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobRepository createJobRepository() <span class="directive">throws</span> <span class="exception">Exception</span> {
    JobRepositoryFactoryBean factory = <span class="keyword">new</span> JobRepositoryFactoryBean();
    factory.setDataSource(dataSource);
    factory.setTransactionManager(transactionManager);
    factory.setIsolationLevelForCreate(<span class="string"><span class="delimiter">&quot;</span><span class="content">ISOLATION_SERIALIZABLE</span><span class="delimiter">&quot;</span></span>);
    factory.setTablePrefix(<span class="string"><span class="delimiter">&quot;</span><span class="content">BATCH_</span><span class="delimiter">&quot;</span></span>);
    factory.setMaxVarCharLength(<span class="integer">1000</span>);
    <span class="keyword">return</span> factory.getObject();
}
...</code></pre>
</div>
</div>
<div class="paragraph javaContent">
<p>None of the configuration options listed above are required except
    the dataSource and transactionManager. If they are not set, the defaults shown above
    will be used. They are shown above for awareness purposes. The
    max varchar length defaults to 2500, which is the
    length of the long <code>VARCHAR</code> columns in the
    <a href="schema-appendix.html#metaDataSchemaOverview">sample schema scripts</a></p>
</div>
<div class="sect3">
<h4 id="txConfigForJobRepository"><a class="anchor" href="#txConfigForJobRepository"></a>1.3.1. Transaction Configuration for the JobRepository</h4>
<div class="paragraph">
<p>If the namespace or the provided <code>FactoryBean</code> is used, transactional advice will be
      automatically created around the repository. This is to ensure that the
      batch meta data, including state that is necessary for restarts after a
      failure, is persisted correctly. The behavior of the framework is not
      well defined if the repository methods are not transactional. The
      isolation level in the <code>create*</code> method attributes is
      specified separately to ensure that when jobs are launched, if two
      processes are trying to launch the same job at the same time, only one
      will succeed. The default isolation level for that method is
      SERIALIZABLE, which is quite aggressive: READ_COMMITTED would work just
      as well; READ_UNCOMMITTED would be fine if two processes are not likely
      to collide in this way. However, since a call to the
      <code>create*</code> method is quite short, it is unlikely
      that the SERIALIZED will cause problems, as long as the database
      platform supports it. However, this can be overridden:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job-repository</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">isolation-level-for-create</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">REPEATABLE_READ</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobRepository createJobRepository() <span class="directive">throws</span> <span class="exception">Exception</span> {
    JobRepositoryFactoryBean factory = <span class="keyword">new</span> JobRepositoryFactoryBean();
    factory.setDataSource(dataSource);
    factory.setTransactionManager(transactionManager);
    factory.setIsolationLevelForCreate(<span class="string"><span class="delimiter">&quot;</span><span class="content">ISOLATION_REPEATABLE_READ</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> factory.getObject();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the namespace or factory beans aren&#8217;t used then it is also
      essential to configure the transactional behavior of the repository
      using AOP:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;aop:config&gt;</span>
    <span class="tag">&lt;aop:advisor</span>
           <span class="attribute-name">pointcut</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">execution(* org.springframework.batch.core..*Repository+.*(..))</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;advice-ref</span><span class="error">=</span><span class="error">&quot;</span><span class="attribute-name">txAdvice</span><span class="error">&quot;</span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/aop:config&gt;</span>

<span class="tag">&lt;tx:advice</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">txAdvice</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">transaction-manager</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">transactionManager</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;tx:attributes&gt;</span>
        <span class="tag">&lt;tx:method</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/tx:attributes&gt;</span>
<span class="tag">&lt;/tx:advice&gt;</span></code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>This fragment can be used as is, with almost no changes. Remember
      also to include the appropriate namespace declarations and to make sure
      spring-tx and spring-aop (or the whole of spring) are on the
      classpath.</p>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> TransactionProxyFactoryBean baseProxy() {
        TransactionProxyFactoryBean transactionProxyFactoryBean = <span class="keyword">new</span> TransactionProxyFactoryBean();
        <span class="predefined-type">Properties</span> transactionAttributes = <span class="keyword">new</span> <span class="predefined-type">Properties</span>();
        transactionAttributes.setProperty(<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">PROPAGATION_REQUIRED</span><span class="delimiter">&quot;</span></span>);
        transactionProxyFactoryBean.setTransactionAttributes(transactionAttributes);
        transactionProxyFactoryBean.setTarget(jobRepository());
        transactionProxyFactoryBean.setTransactionManager(transactionManager());
        <span class="keyword">return</span> transactionProxyFactoryBean;
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="repositoryTablePrefix"><a class="anchor" href="#repositoryTablePrefix"></a>1.3.2. Changing the Table Prefix</h4>
<div class="paragraph">
<p>Another modifiable property of the
      <code>JobRepository</code> is the table prefix of the
      meta-data tables. By default they are all prefaced with BATCH_.
      BATCH_JOB_EXECUTION and BATCH_STEP_EXECUTION are two examples. However,
      there are potential reasons to modify this prefix. If the schema names
      needs to be prepended to the table names, or if more than one set of
      meta data tables is needed within the same schema, then the table prefix
      will need to be changed:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job-repository</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">table-prefix</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SYSTEM.TEST_</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobRepository createJobRepository() <span class="directive">throws</span> <span class="exception">Exception</span> {
    JobRepositoryFactoryBean factory = <span class="keyword">new</span> JobRepositoryFactoryBean();
    factory.setDataSource(dataSource);
    factory.setTransactionManager(transactionManager);
    factory.setTablePrefix(<span class="string"><span class="delimiter">&quot;</span><span class="content">SYSTEM.TEST_</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> factory.getObject();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Given the above changes, every query to the meta data tables will
      be prefixed with "SYSTEM.TEST_". BATCH_JOB_EXECUTION will be referred to
      as SYSTEM.TEST_JOB_EXECUTION.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only the table prefix is configurable. The table and column
        names are not.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="inMemoryRepository"><a class="anchor" href="#inMemoryRepository"></a>1.3.3. In-Memory Repository</h4>
<div class="paragraph">
<p>There are scenarios in which you may not want to persist your
      domain objects to the database. One reason may be speed; storing domain
      objects at each commit point takes extra time. Another reason may be
      that you just don&#8217;t need to persist status for a particular job. For
      this reason, Spring batch provides an in-memory Map version of the job
      repository:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.repository.support.MapJobRepositoryFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">transactionManager</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">transactionManager</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobRepository createJobRepository() <span class="directive">throws</span> <span class="exception">Exception</span> {
    JobRepositoryFactoryBean factory = <span class="keyword">new</span> JobRepositoryFactoryBean();
    factory.setDataSource(dataSource);
    factory.setTransactionManager(transactionManager);
    factory.setIsolationLevelForCreate(<span class="string"><span class="delimiter">&quot;</span><span class="content">ISOLATION_REPEATABLE_READ</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> factory.getObject();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the in-memory repository is volatile and so does not
      allow restart between JVM instances. It also cannot guarantee that two
      job instances with the same parameters are launched simultaneously, and
      is not suitable for use in a multi-threaded Job, or a locally
      partitioned <code>Step</code>. So use the database version of the repository wherever
      you need those features.</p>
</div>
<div class="paragraph">
<p>However it does require a transaction manager to be defined
      because there are rollback semantics within the repository, and because
      the business logic might still be transactional (e.g. RDBMS access). For
      testing purposes many people find the
      <code>ResourcelessTransactionManager</code> useful.</p>
</div>
</div>
<div class="sect3">
<h4 id="nonStandardDatabaseTypesInRepository"><a class="anchor" href="#nonStandardDatabaseTypesInRepository"></a>1.3.4. Non-standard Database Types in a Repository</h4>
<div class="paragraph">
<p>If you are using a database platform that is not in the list of
      supported platforms, you may be able to use one of the supported types,
      if the SQL variant is close enough. To do this you can use the raw
      <code>JobRepositoryFactoryBean</code> instead of the namespace
      shortcut and use it to set the database type to the closest
      match:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org...JobRepositoryFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">databaseType</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">db2</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobRepository createJobRepository() <span class="directive">throws</span> <span class="exception">Exception</span> {
    JobRepositoryFactoryBean factory = <span class="keyword">new</span> JobRepositoryFactoryBean();
    factory.setDataSource(dataSource);
    factory.setDatabaseType(<span class="string"><span class="delimiter">&quot;</span><span class="content">db2</span><span class="delimiter">&quot;</span></span>);
    factory.setTransactionManager(transactionManager);
    <span class="keyword">return</span> factory.getObject();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>(The <code>JobRepositoryFactoryBean</code> tries to
      auto-detect the database type from the <code>DataSource</code>
      if it is not specified.) The major differences between platforms are
      mainly accounted for by the strategy for incrementing primary keys, so
      often it might be necessary to override the
      <code>incrementerFactory</code> as well (using one of the standard
      implementations from the Spring Framework).</p>
</div>
<div class="paragraph">
<p>If even that doesn&#8217;t work, or you are not using an RDBMS, then the
      only option may be to implement the various <code>Dao</code>
      interfaces that the <code>SimpleJobRepository</code> depends
      on and wire one up manually in the normal Spring way.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuringJobLauncher"><a class="anchor" href="#configuringJobLauncher"></a>1.4. Configuring a JobLauncher</h3>
<div class="paragraph javaContent">
<p>When using <code>@EnableBatchProcessing</code>, a <code>JobRegistry</code> is provided out of the box for you.
This section addresses configuring your own.</p>
</div>
<div class="paragraph">
<p>The most basic implementation of the
    <code>JobLauncher</code> interface is the
    <code>SimpleJobLauncher</code>. Its only required dependency is
    a <code>JobRepository</code>, in order to obtain an
    execution:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.launch.support.SimpleJobLauncher</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
<span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">protected</span> JobLauncher createJobLauncher() <span class="directive">throws</span> <span class="exception">Exception</span> {
        SimpleJobLauncher jobLauncher = <span class="keyword">new</span> SimpleJobLauncher();
        jobLauncher.setJobRepository(jobRepository);
        jobLauncher.afterPropertiesSet();
        <span class="keyword">return</span> jobLauncher;
}
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a <a href="domain.html#domainLanguageOfBatch">JobExecution</a> is
    obtained, it is passed to the execute method of
    Job, ultimately returning the
    <code>JobExecution</code> to the caller:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/job-launcher-sequence-sync.png" alt="Job Launcher Sequence">
</div>
<div class="title">Figure 2. Job Launcher Sequence</div>
</div>
<div class="paragraph">
<p>The sequence is straightforward and works well when launched from a
    scheduler. However, issues arise when trying to launch from an HTTP
    request. In this scenario, the launching needs to be done asynchronously
    so that the <code>SimpleJobLauncher</code> returns immediately
    to its caller. This is because it is not good practice to keep an HTTP
    request open for the amount of time needed by long running processes such
    as batch. An example sequence is below:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/job-launcher-sequence-async.png" alt="Async Job Launcher Sequence">
</div>
<div class="title">Figure 3. Asynchronous Job Launcher Sequence</div>
</div>
<div class="paragraph">
<p>The <code>SimpleJobLauncher</code> can easily be
    configured to allow for this scenario by configuring a
    <code>TaskExecutor</code>:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.launch.support.SimpleJobLauncher</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">taskExecutor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.core.task.SimpleAsyncTaskExecutor</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> JobLauncher jobLauncher() {
        SimpleJobLauncher jobLauncher = <span class="keyword">new</span> SimpleJobLauncher();
        jobLauncher.setJobRepository(jobRepository());
        jobLauncher.setTaskExecutor(<span class="keyword">new</span> SimpleAsyncTaskExecutor());
        jobLauncher.afterPropertiesSet();
        <span class="keyword">return</span> jobLauncher;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any implementation of the spring <code>TaskExecutor</code>
    interface can be used to control how jobs are asynchronously
    executed.</p>
</div>
</div>
<div class="sect2">
<h3 id="runningAJob"><a class="anchor" href="#runningAJob"></a>1.5. Running a Job</h3>
<div class="paragraph">
<p>At a minimum, launching a batch job requires two things: the
    <code>Job</code> to be launched and a
    <code>JobLauncher</code>. Both can be contained within the same
    context or different contexts. For example, if launching a job from the
    command line, a new JVM will be instantiated for each Job, and thus every
    job will have its own <code>JobLauncher</code>. However, if
    running from within a web container within the scope of an
    <code>HttpRequest</code>, there will usually be one
    <code>JobLauncher</code>, configured for asynchronous job
    launching, that multiple requests will invoke to launch their jobs.</p>
</div>
<div class="sect3">
<h4 id="runningJobsFromCommandLine"><a class="anchor" href="#runningJobsFromCommandLine"></a>1.5.1. Running Jobs from the Command Line</h4>
<div class="paragraph">
<p>For users that want to run their jobs from an enterprise
      scheduler, the command line is the primary interface. This is because
      most schedulers (with the exception of Quartz unless using the
      NativeJob) work directly with operating system
      processes, primarily kicked off with shell scripts. There are many ways
      to launch a Java process besides a shell script, such as Perl, Ruby, or
      even 'build tools' such as ant or maven. However, because most people
      are familiar with shell scripts, this example will focus on them.</p>
</div>
<div class="sect4">
<h5 id="commandLineJobRunner"><a class="anchor" href="#commandLineJobRunner"></a>The CommandLineJobRunner</h5>
<div class="paragraph">
<p>Because the script launching the job must kick off a Java
        Virtual Machine, there needs to be a class with a main method to act
        as the primary entry point. Spring Batch provides an implementation
        that serves just this purpose:
        <code>CommandLineJobRunner</code>. It&#8217;s important to note
        that this is just one way to bootstrap your application, but there are
        many ways to launch a Java process, and this class should in no way be
        viewed as definitive. The <code>CommandLineJobRunner</code>
        performs four tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Load the appropriate
<code>ApplicationContext</code></p>
</li>
<li>
<p>Parse command line arguments into
<code>JobParameters</code></p>
</li>
<li>
<p>Locate the appropriate job based on arguments</p>
</li>
<li>
<p>Use the <code>JobLauncher</code> provided in the
application context to launch the job.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>All of these tasks are accomplished using only the arguments
        passed in. The following are required arguments:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. CommandLineJobRunner arguments</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobPath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The location of the XML file that will be used to
                create an <code>ApplicationContext</code>. This file
                should contain everything needed to run the complete
                Job</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the job to be run.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>These arguments must be passed in with the path first and the
        name second. All arguments after these are considered to be
        <code>JobParameters</code> and must be in the format of 'name=value':</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;bash$ java CommandLineJobRunner endOfDayJob.xml endOfDay schedule.date(date)=2007/05/05</code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code>&lt;bash$ java CommandLineJobRunner io.spring.EndOfDayJobConfiguration endOfDay schedule.date(date)=2007/05/05</code></pre>
</div>
</div>
<div class="paragraph xmlContent">
<p>In most cases you would want to use a manifest to declare your
        main class in a jar, but for simplicity, the class was used directly.
        This example is using the same 'EndOfDay' example from the <a href="domain.html#domainLanguageOfBatch">domainLanguageOfBatch</a>. The first argument is
        'endOfDayJob.xml', which is the Spring
        <code>ApplicationContext</code> containing the
        Job. The second argument, 'endOfDay' represents
        the job name. The final argument, 'schedule.date(date)=2007/05/05'
        will be converted into <code>JobParameters</code>. An
        example of the XML configuration is below:</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">endOfDay</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">parent</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">simpleStep</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/job&gt;</span>

<span class="comment">&lt;!-- Launcher details removed for clarity --&gt;</span>
<span class="tag">&lt;beans:bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span>
         <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.launch.support.SimpleJobLauncher</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph javaContent">
<p>In most cases you would want to use a manifest to declare your
        main class in a jar, but for simplicity, the class was used directly.
        This example is using the same 'EndOfDay' example from the <a href="domain.html#domainLanguageOfBatch">domainLanguageOfBatch</a>. The first argument is
        'io.spring.EndOfDayJobConfiguration', which is the fully qualified class name to
         the configuration class containing the
        Job. The second argument, 'endOfDay' represents
        the job name. The final argument, 'schedule.date(date)=2007/05/05'
        will be converted into JobParameters. An
        example of the java configuration is below:</p>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Configuration</span>
<span class="annotation">@EnableBatchProcessing</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">EndOfDayJobConfiguration</span> {

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> JobBuilderFactory jobBuilderFactory;

    <span class="annotation">@Autowired</span>
    <span class="directive">private</span> StepBuilderFactory stepBuilderFactory;

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> Job endOfDay() {
        <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">endOfDay</span><span class="delimiter">&quot;</span></span>)
                                    .start(step1())
                                    .build();
    }

    <span class="annotation">@Bean</span>
    <span class="directive">public</span> Step step1() {
        <span class="keyword">return</span> <span class="local-variable">this</span>.stepBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>)
                                    .tasklet((contribution, chunkContext) -&gt; <span class="predefined-constant">null</span>)
                                    .build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example is overly simplistic, since there are many more
        requirements to a run a batch job in Spring Batch in general, but it
        serves to show the two main requirements of the
        <code>CommandLineJobRunner</code>:
        <code>Job</code> and
        <code>JobLauncher</code></p>
</div>
</div>
<div class="sect4">
<h5 id="exitCodes"><a class="anchor" href="#exitCodes"></a>ExitCodes</h5>
<div class="paragraph">
<p>When launching a batch job from the command-line, an enterprise
        scheduler is often used. Most schedulers are fairly dumb and work only
        at the process level. This means that they only know about some
        operating system process such as a shell script that they&#8217;re invoking.
        In this scenario, the only way to communicate back to the scheduler
        about the success or failure of a job is through return codes. A
        return code is a number that is returned to a scheduler by the process
        that indicates the result of the run. In the simplest case: 0 is
        success and 1 is failure. However, there may be more complex
        scenarios: If job A returns 4 kick off job B, and if it returns 5 kick
        off job C. This type of behavior is configured at the scheduler level,
        but it is important that a processing framework such as Spring Batch
        provide a way to return a numeric representation of the 'Exit Code'
        for a particular batch job. In Spring Batch this is encapsulated
        within an <code>ExitStatus</code>, which is covered in more
        detail in Chapter 5. For the purposes of discussing exit codes, the
        only important thing to know is that an
        <code>ExitStatus</code> has an exit code property that is
        set by the framework (or the developer) and is returned as part of the
        <code>JobExecution</code> returned from the
        <code>JobLauncher</code>. The
        <code>CommandLineJobRunner</code> converts this string value
        to a number using the <code>ExitCodeMapper</code>
        interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">ExitCodeMapper</span> {

    <span class="directive">public</span> <span class="type">int</span> intValue(<span class="predefined-type">String</span> exitCode);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The essential contract of an
        <code>ExitCodeMapper</code> is that, given a string exit
        code, a number representation will be returned. The default
        implementation used by the job runner is the <code>SimpleJvmExitCodeMapper</code>
        that returns 0 for completion, 1 for generic errors, and 2 for any job
        runner errors such as not being able to find a
        <code>Job</code> in the provided context. If anything more
        complex than the 3 values above is needed, then a custom
        implementation of the <code>ExitCodeMapper</code> interface
        must be supplied. Because the
        <code>CommandLineJobRunner</code> is the class that creates
        an <code>ApplicationContext</code>, and thus cannot be
        'wired together', any values that need to be overwritten must be
        autowired. This means that if an implementation of
        <code>ExitCodeMapper</code> is found within the <code>BeanFactory</code>,
        it will be injected into the runner after the context is created. All
        that needs to be done to provide your own
        <code>ExitCodeMapper</code> is to declare the implementation
        as a root level bean and ensure that it is part of the
        <code>ApplicationContext</code> that is loaded by the
        runner.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="runningJobsFromWebContainer"><a class="anchor" href="#runningJobsFromWebContainer"></a>1.5.2. Running Jobs from within a Web Container</h4>
<div class="paragraph">
<p>Historically, offline processing such as batch jobs have been
      launched from the command-line, as described above. However, there are
      many cases where launching from an <code>HttpRequest</code> is
      a better option. Many such use cases include reporting, ad-hoc job
      running, and web application support. Because a batch job by definition
      is long running, the most important concern is ensuring to launch the
      job asynchronously:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/launch-from-request.png" alt="Async Job Launcher Sequence from web container">
</div>
<div class="title">Figure 4. Asynchronous Job Launcher Sequence From Web Container</div>
</div>
<div class="paragraph">
<p>The controller in this case is a Spring MVC controller. More
      information on Spring MVC can be found here: <a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc"><a href="https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc" class="bare">https://docs.spring.io/spring/docs/current/spring-framework-reference/web.html#mvc</a></a>.
      The controller launches a <code>Job</code> using a
      <code>JobLauncher</code> that has been configured to launch
      <a href="#runningJobsFromWebContainer">asynchronously</a>, which
      immediately returns a <code>JobExecution</code>. The
      <code>Job</code> will likely still be running, however, this
      nonblocking behaviour allows the controller to return immediately, which
      is required when handling an <code>HttpRequest</code>. An
      example is below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Controller</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">JobLauncherController</span> {

    <span class="annotation">@Autowired</span>
    JobLauncher jobLauncher;

    <span class="annotation">@Autowired</span>
    Job job;

    <span class="annotation">@RequestMapping</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/jobLauncher.html</span><span class="delimiter">&quot;</span></span>)
    <span class="directive">public</span> <span class="type">void</span> handle() <span class="directive">throws</span> <span class="exception">Exception</span>{
        jobLauncher.run(job, <span class="keyword">new</span> JobParameters());
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="advancedMetaData"><a class="anchor" href="#advancedMetaData"></a>1.6. Advanced Meta-Data Usage</h3>
<div class="paragraph">
<p>So far, both the <code>JobLauncher</code> and <code>JobRepository</code> interfaces have been
    discussed. Together, they represent simple launching of a job, and basic
    CRUD operations of batch domain objects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/job-repository.png" alt="Job Repository">
</div>
<div class="title">Figure 5. Job Repository</div>
</div>
<div class="paragraph">
<p>A <code>JobLauncher</code> uses the
    <code>JobRepository</code> to create new
    <code>JobExecution</code> objects and run them.
    <code>Job</code> and <code>Step</code> implementations
    later use the same <code>JobRepository</code> for basic updates
    of the same executions during the running of a Job.
    The basic operations suffice for simple scenarios, but in a large batch
    environment with hundreds of batch jobs and complex scheduling
    requirements, more advanced access of the meta data is required:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/job-repository-advanced.png" alt="Job Repository Advanced">
</div>
<div class="title">Figure 6. Advanced Job Repository Access</div>
</div>
<div class="paragraph">
<p>The <code>JobExplorer</code> and
    <code>JobOperator</code> interfaces, which will be discussed
    below, add additional functionality for querying and controlling the meta
    data.</p>
</div>
<div class="sect3">
<h4 id="queryingRepository"><a class="anchor" href="#queryingRepository"></a>1.6.1. Querying the Repository</h4>
<div class="paragraph">
<p>The most basic need before any advanced features is the ability to
      query the repository for existing executions. This functionality is
      provided by the <code>JobExplorer</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">JobExplorer</span> {

    <span class="predefined-type">List</span>&lt;JobInstance&gt; getJobInstances(<span class="predefined-type">String</span> jobName, <span class="type">int</span> start, <span class="type">int</span> count);

    JobExecution getJobExecution(<span class="predefined-type">Long</span> executionId);

    StepExecution getStepExecution(<span class="predefined-type">Long</span> jobExecutionId, <span class="predefined-type">Long</span> stepExecutionId);

    JobInstance getJobInstance(<span class="predefined-type">Long</span> instanceId);

    <span class="predefined-type">List</span>&lt;JobExecution&gt; getJobExecutions(JobInstance jobInstance);

    <span class="predefined-type">Set</span>&lt;JobExecution&gt; findRunningJobExecutions(<span class="predefined-type">String</span> jobName);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>As is evident from the method signatures above,
      <code>JobExplorer</code> is a read-only version of the
      <code>JobRepository</code>, and like the
      <code>JobRepository</code>, it can be easily configured via a
      factory bean:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobExplorer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...JobExplorerFactoryBean</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">p:dataSource-ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
<span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">public</span> JobExplorer getJobExplorer() <span class="directive">throws</span> <span class="exception">Exception</span> {
        JobExplorerFactoryBean factoryBean = <span class="keyword">new</span> JobExplorerFactoryBean();
        factoryBean.setDataSource(<span class="local-variable">this</span>.dataSource);
        <span class="keyword">return</span> factoryBean.getObject();
}
...</code></pre>
</div>
</div>
<div class="paragraph">
<p><a href="#repositoryTablePrefix">Earlier in this chapter</a>, it was mentioned that the table prefix of the
      <code>JobRepository</code> can be modified to allow for
      different versions or schemas. Because the
      <code>JobExplorer</code> is working with the same tables, it
      too needs the ability to set a prefix:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobExplorer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...JobExplorerFactoryBean</span><span class="delimiter">&quot;</span></span>
                <span class="attribute-name">p:tablePrefix</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">SYSTEM.</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
<span class="comment">// This would reside in your BatchConfigurer implementation</span>
<span class="annotation">@Override</span>
<span class="directive">public</span> JobExplorer getJobExplorer() <span class="directive">throws</span> <span class="exception">Exception</span> {
        JobExplorerFactoryBean factoryBean = <span class="keyword">new</span> JobExplorerFactoryBean();
        factoryBean.setDataSource(<span class="local-variable">this</span>.dataSource);
        factoryBean.setTablePrefix(<span class="string"><span class="delimiter">&quot;</span><span class="content">SYSTEM.</span><span class="delimiter">&quot;</span></span>);
        <span class="keyword">return</span> factoryBean.getObject();
}
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="jobregistry"><a class="anchor" href="#jobregistry"></a>1.6.2. JobRegistry</h4>
<div class="paragraph">
<p>A <code>JobRegistry</code> (and its parent interface <code>JobLocator</code>) is not
      mandatory, but it can be useful if you want to keep track of which jobs
      are available in the context. It is also useful for collecting jobs
      centrally in an application context when they have been created
      elsewhere (e.g. in child contexts). Custom <code>JobRegistry</code> implementations
      can also be used to manipulate the names and other properties of the
      jobs that are registered. There is only one implementation provided by
      the framework and this is based on a simple map from job name to job
      instance.</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.configuration.support.MapJobRegistry</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="paragraph javaContent">
<p>When using <code>@EnableBatchProcessing</code>, a <code>JobRegistry</code> is provided out of the box for you.
If you want to configure your own:</p>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">...
<span class="comment">// This is already provided via the @EnableBatchProcessing but can be customized via</span>
<span class="comment">// overriding the getter in the SimpleBatchConfiguration</span>
<span class="annotation">@Override</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> JobRegistry jobRegistry() <span class="directive">throws</span> <span class="exception">Exception</span> {
        <span class="keyword">return</span> <span class="keyword">new</span> MapJobRegistry();
}
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two ways to populate a <code>JobRegistry</code> automatically: using
      a bean post processor and using a registrar lifecycle component. These
      two mechanisms are described in the following sections.</p>
</div>
<div class="sect4">
<h5 id="jobregistrybeanpostprocessor"><a class="anchor" href="#jobregistrybeanpostprocessor"></a>JobRegistryBeanPostProcessor</h5>
<div class="paragraph">
<p>This is a bean post-processor that can register all jobs as they
        are created:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistryBeanPostProcessor</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...JobRegistryBeanPostProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> JobRegistryBeanPostProcessor jobRegistryBeanPostProcessor() {
    JobRegistryBeanPostProcessor postProcessor = <span class="keyword">new</span> JobRegistryBeanPostProcessor();
    postProcessor.setJobRegistry(jobRegistry());
    <span class="keyword">return</span> postProcessor;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Although it is not strictly necessary, the post-processor in the
        example has been given an id so that it can be included in child
        contexts (e.g. as a parent bean definition) and cause all jobs created
        there to also be registered automatically.</p>
</div>
</div>
<div class="sect4">
<h5 id="automaticjobregistrar"><a class="anchor" href="#automaticjobregistrar"></a>AutomaticJobRegistrar</h5>
<div class="paragraph">
<p>This is a lifecycle component that creates child contexts and
        registers jobs from those contexts as they are created. One advantage
        of doing this is that, while the job names in the child contexts still
        have to be globally unique in the registry, their dependencies can
        have "natural" names. So for example, you can create a set of XML
        configuration files each having only one Job,
        but all having different definitions of an
        <code>ItemReader</code> with the same bean name, e.g.
        "reader". If all those files were imported into the same context, the
        reader definitions would clash and override one another, but with the
        automatic registrar this is avoided. This makes it easier to
        integrate jobs contributed from separate modules of an
        application.</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...AutomaticJobRegistrar</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
   <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">applicationContextFactories</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...ClasspathXmlApplicationContextsFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">resources</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">classpath*:/config/job*.xml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/bean&gt;</span>
   <span class="tag">&lt;/property&gt;</span>
   <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLoader</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...DefaultJobLoader</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
         <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/bean&gt;</span>
   <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> AutomaticJobRegistrar registrar() {

    AutomaticJobRegistrar registrar = <span class="keyword">new</span> AutomaticJobRegistrar();
    registrar.setJobLoader(jobLoader());
    registrar.setApplicationContextFactories(applicationContextFactories());
    registrar.afterPropertiesSet();
    <span class="keyword">return</span> registrar;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The registrar has two mandatory properties, one is an array of
        <code>ApplicationContextFactory</code> (here created from a
        convenient factory bean), and the other is a
        <code>JobLoader</code>. The <code>JobLoader</code>
        is responsible for managing the lifecycle of the child contexts and
        registering jobs in the <code>JobRegistry</code>.</p>
</div>
<div class="paragraph">
<p>The <code>ApplicationContextFactory</code> is
        responsible for creating the child context and the most common usage
        would be as above using a
        <code>ClassPathXmlApplicationContextFactory</code>. One of
        the features of this factory is that by default it copies some of the
        configuration down from the parent context to the child. So for
        instance you don&#8217;t have to re-define the
        <code>PropertyPlaceholderConfigurer</code> or AOP
        configuration in the child, if it should be the same as the
        parent.</p>
</div>
<div class="paragraph">
<p>The <code>AutomaticJobRegistrar</code> can be used in
        conjunction with a <code>JobRegistryBeanPostProcessor</code>
        if desired (as long as the <code>DefaultJobLoader</code> is
        used as well). For instance this might be desirable if there are jobs
        defined in the main parent context as well as in the child
        locations.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="JobOperator"><a class="anchor" href="#JobOperator"></a>1.6.3. JobOperator</h4>
<div class="paragraph">
<p>As previously discussed, the <code>JobRepository</code>
      provides CRUD operations on the meta-data, and the
      <code>JobExplorer</code> provides read-only operations on the
      meta-data. However, those operations are most useful when used together
      to perform common monitoring tasks such as stopping, restarting, or
      summarizing a Job, as is commonly done by batch operators. Spring Batch
      provides these types of operations via the
      <code>JobOperator</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">JobOperator</span> {

    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Long</span>&gt; getExecutions(<span class="type">long</span> instanceId) <span class="directive">throws</span> NoSuchJobInstanceException;

    <span class="predefined-type">List</span>&lt;<span class="predefined-type">Long</span>&gt; getJobInstances(<span class="predefined-type">String</span> jobName, <span class="type">int</span> start, <span class="type">int</span> count)
          <span class="directive">throws</span> NoSuchJobException;

    <span class="predefined-type">Set</span>&lt;<span class="predefined-type">Long</span>&gt; getRunningExecutions(<span class="predefined-type">String</span> jobName) <span class="directive">throws</span> NoSuchJobException;

    <span class="predefined-type">String</span> getParameters(<span class="type">long</span> executionId) <span class="directive">throws</span> NoSuchJobExecutionException;

    <span class="predefined-type">Long</span> start(<span class="predefined-type">String</span> jobName, <span class="predefined-type">String</span> parameters)
          <span class="directive">throws</span> NoSuchJobException, JobInstanceAlreadyExistsException;

    <span class="predefined-type">Long</span> restart(<span class="type">long</span> executionId)
          <span class="directive">throws</span> JobInstanceAlreadyCompleteException, NoSuchJobExecutionException,
                  NoSuchJobException, JobRestartException;

    <span class="predefined-type">Long</span> startNextInstance(<span class="predefined-type">String</span> jobName)
          <span class="directive">throws</span> NoSuchJobException, JobParametersNotFoundException, JobRestartException,
                 JobExecutionAlreadyRunningException, JobInstanceAlreadyCompleteException;

    <span class="type">boolean</span> stop(<span class="type">long</span> executionId)
          <span class="directive">throws</span> NoSuchJobExecutionException, JobExecutionNotRunningException;

    <span class="predefined-type">String</span> getSummary(<span class="type">long</span> executionId) <span class="directive">throws</span> NoSuchJobExecutionException;

    <span class="predefined-type">Map</span>&lt;<span class="predefined-type">Long</span>, <span class="predefined-type">String</span>&gt; getStepExecutionSummaries(<span class="type">long</span> executionId)
          <span class="directive">throws</span> NoSuchJobExecutionException;

    <span class="predefined-type">Set</span>&lt;<span class="predefined-type">String</span>&gt; getJobNames();

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above operations represent methods from many different
      interfaces, such as <code>JobLauncher</code>,
      <code>JobRepository</code>,
      <code>JobExplorer</code>, and
      <code>JobRegistry</code>. For this reason, the provided
      implementation of <code>JobOperator</code>,
      <code>SimpleJobOperator</code>, has many dependencies:</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobOperator</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...SimpleJobOperator</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobExplorer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.spr...JobExplorerFactoryBean</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
            <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">dataSource</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
        <span class="tag">&lt;/bean&gt;</span>
    <span class="tag">&lt;/property&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRepository</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobRegistry</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"> <span class="comment">/**
  * All injected dependencies for this bean are provided by the @EnableBatchProcessing
  * infrastructure out of the box.
  */</span>
 <span class="annotation">@Bean</span>
 <span class="directive">public</span> SimpleJobOperator jobOperator(JobExplorer jobExplorer,
                                JobRepository jobRepository,
                                JobRegistry jobRegistry) {

        SimpleJobOperator jobOperator = <span class="keyword">new</span> SimpleJobOperator();

        jobOperator.setJobExplorer(jobExplorer);
        jobOperator.setJobRepository(jobRepository);
        jobOperator.setJobRegistry(jobRegistry);
        jobOperator.setJobLauncher(jobLauncher);

        <span class="keyword">return</span> jobOperator;
 }</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If you set the table prefix on the job repository, don&#8217;t forget to set it on the job explorer as well.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="JobParametersIncrementer"><a class="anchor" href="#JobParametersIncrementer"></a>1.6.4. JobParametersIncrementer</h4>
<div class="paragraph">
<p>Most of the methods on <code>JobOperator</code> are
      self-explanatory, and more detailed explanations can be found on the
      <a href="https://docs.spring.io/spring-batch/apidocs/org/springframework/batch/core/launch/JobOperator.html">javadoc of the interface</a>. However, the
      <code>startNextInstance</code> method is worth noting. This
      method will always start a new instance of a Job.
      This can be extremely useful if there are serious issues in a
      <code>JobExecution</code> and the Job
      needs to be started over again from the beginning. Unlike
      <code>JobLauncher</code> though, which requires a new
      <code>JobParameters</code> object that will trigger a new
      <code>JobInstance</code> if the parameters are different from
      any previous set of parameters, the
      <code>startNextInstance</code> method will use the
      <code>JobParametersIncrementer</code> tied to the
      <code>Job</code> to force the <code>Job</code> to a
      new instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">interface</span> <span class="class">JobParametersIncrementer</span> {

    JobParameters getNext(JobParameters parameters);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The contract of <code>JobParametersIncrementer</code> is
      that, given a <a href="#jobParameters">JobParameters</a>
      object, it will return the 'next' JobParameters
      object by incrementing any necessary values it may contain. This
      strategy is useful because the framework has no way of knowing what
      changes to the <code>JobParameters</code> make it the 'next'
      instance. For example, if the only value in
      <code>JobParameters</code> is a date, and the next instance
      should be created, should that value be incremented by one day? Or one
      week (if the job is weekly for instance)? The same can be said for any
      numerical values that help to identify the Job,
      as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> <span class="type">class</span> <span class="class">SampleIncrementer</span> <span class="directive">implements</span> JobParametersIncrementer {

    <span class="directive">public</span> JobParameters getNext(JobParameters parameters) {
        <span class="keyword">if</span> (parameters==<span class="predefined-constant">null</span> || parameters.isEmpty()) {
            <span class="keyword">return</span> <span class="keyword">new</span> JobParametersBuilder().addLong(<span class="string"><span class="delimiter">&quot;</span><span class="content">run.id</span><span class="delimiter">&quot;</span></span>, <span class="integer">1L</span>).toJobParameters();
        }
        <span class="type">long</span> id = parameters.getLong(<span class="string"><span class="delimiter">&quot;</span><span class="content">run.id</span><span class="delimiter">&quot;</span></span>,<span class="integer">1L</span>) + <span class="integer">1</span>;
        <span class="keyword">return</span> <span class="keyword">new</span> JobParametersBuilder().addLong(<span class="string"><span class="delimiter">&quot;</span><span class="content">run.id</span><span class="delimiter">&quot;</span></span>, id).toJobParameters();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, the value with a key of 'run.id' is used to
      discriminate between <code>JobInstances</code>. If the
      <code>JobParameters</code> passed in is null, it can be
      assumed that the <code>Job</code> has never been run before
      and thus its initial state can be returned. However, if not, the old
      value is obtained, incremented by one, and returned.</p>
</div>
<div class="paragraph xmlContent">
<p>An incrementer can
      be associated with <code>Job</code> via the 'incrementer'
      attribute in the namespace:</p>
</div>
<div class="listingblock xmlContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">incrementer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">sampleIncrementer</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    ...
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="paragraph javaContent">
<p>An incrementer can be associated with a 'Job' via the <code>incrementer</code> method provided in the
builders:</p>
</div>
<div class="listingblock javaContent">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> Job footballJob() {
    <span class="keyword">return</span> <span class="local-variable">this</span>.jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">footballJob</span><span class="delimiter">&quot;</span></span>)
                                     .incrementer(sampleIncrementer())
                                     ...
                     .build();
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="stoppingAJob"><a class="anchor" href="#stoppingAJob"></a>1.6.5. Stopping a Job</h4>
<div class="paragraph">
<p>One of the most common use cases of
      <code>JobOperator</code> is gracefully stopping a
      Job:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="predefined-type">Set</span>&lt;<span class="predefined-type">Long</span>&gt; executions = jobOperator.getRunningExecutions(<span class="string"><span class="delimiter">&quot;</span><span class="content">sampleJob</span><span class="delimiter">&quot;</span></span>);
jobOperator.stop(executions.iterator().next());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The shutdown is not immediate, since there is no way to force
      immediate shutdown, especially if the execution is currently in
      developer code that the framework has no control over, such as a
      business service. However, as soon as control is returned back to the
      framework, it will set the status of the current
      <code>StepExecution</code> to
      <code>BatchStatus.STOPPED</code>, save it, then do the same
      for the <code>JobExecution</code> before finishing.</p>
</div>
</div>
<div class="sect3">
<h4 id="aborting-a-job"><a class="anchor" href="#aborting-a-job"></a>1.6.6. Aborting a Job</h4>
<div class="paragraph">
<p>A job execution which is <code>FAILED</code> can be
      restarted (if the <code>Job</code> is restartable). A job execution whose status is
      <code>ABANDONED</code> will not be restarted by the framework.
      The <code>ABANDONED</code> status is also used in step
      executions to mark them as skippable in a restarted job execution: if a
      job is executing and encounters a step that has been marked
      <code>ABANDONED</code> in the previous failed job execution, it
      will move on to the next step (as determined by the job flow definition
      and the step execution exit status).</p>
</div>
<div class="paragraph">
<p>If the process died (<code>"kill -9"</code> or server
      failure) the job is, of course, not running, but the <code>JobRepository</code> has
      no way of knowing because no-one told it before the process died. You
      have to tell it manually that you know that the execution either failed
      or should be considered aborted (change its status to
      <code>FAILED</code> or <code>ABANDONED</code>) - it&#8217;s
      a business decision and there is no way to automate it. Only change the
      status to <code>FAILED</code> if it is not restartable, or if
      you know the restart data is valid. There is a utility in Spring Batch
      Admin <code>JobService</code> to abort a job execution.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.1.2.RELEASE<br>
Last updated 2019-04-03 09:14:50 UTC
</div>
</div>
<script type="text/javascript" src="tocbot-3.0.2/tocbot.js"></script>
<script type="text/javascript" >

    // Tocbot dynamic TOC, works with tocbot 3.0.2
    // Source: https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006

    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    tocbot.init({ contentSelector: '#content',
        headingSelector: 'h1, h2, h3, h4, h5',
        smoothScroll: false });
    var handleTocRefresh = function() {
        tocbot.refresh();
    }
    var handleTocOnResize = function() {
        var width = window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 6,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                smoothScroll: false });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4, h5',
                smoothScroll: false });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    window.addEventListener('tocRefresh', handleTocRefresh);
    handleTocOnResize();

    var link = document.createElement("a");
    link.setAttribute("href", "index.html");
    link.innerHTML = "<i class=\"fa fa-chevron-left\"></i>&nbsp;&nbsp;Back to index";
    var p = document.createElement("p");
    p.setAttribute("id", "backToIndex");
    p.appendChild(link);
    var toc = document.getElementById('toc');
    toc.insertBefore(p, toctitle);

</script>
</body>
</html>