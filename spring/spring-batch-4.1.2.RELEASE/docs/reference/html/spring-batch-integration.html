<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.5">
<title>Spring Batch Integration</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Varela+Round|Montserrat:400,700);
/*! normalize.css v2.1.2 | MIT License | git.io/normalize */
/* ========================================================================== HTML5 display definitions ========================================================================== */
/** Correct `block` display not defined in IE 8/9. */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }

/** Correct `inline-block` display not defined in IE 8/9. */
audio, canvas, video { display: inline-block; }

/** Prevent modern browsers from displaying `audio` without controls. Remove excess height in iOS 5 devices. */
audio:not([controls]) { display: none; height: 0; }

/** Address `[hidden]` styling not present in IE 8/9. Hide the `template` element in IE, Safari, and Firefox < 22. */
[hidden], template { display: none; }

script { display: none !important; }

/* ========================================================================== Base ========================================================================== */
/** 1. Set default font family to sans-serif. 2. Prevent iOS text size adjust after orientation change, without disabling user zoom. */
html { font-family: sans-serif; /* 1 */ -ms-text-size-adjust: 100%; /* 2 */ -webkit-text-size-adjust: 100%; /* 2 */ }

/** Remove default margin. */
body { margin: 0; }

/* ========================================================================== Links ========================================================================== */
/** Remove the gray background color from active links in IE 10. */
a { background: transparent; }

/** Address `outline` inconsistency between Chrome and other browsers. */
a:focus { outline: thin dotted; }

/** Improve readability when focused and also mouse hovered in all browsers. */
a:active, a:hover { outline: 0; }

/* ========================================================================== Typography ========================================================================== */
/** Address variable `h1` font-size and margin within `section` and `article` contexts in Firefox 4+, Safari 5, and Chrome. */
h1 { font-size: 2em; margin: 0.67em 0; }

/** Address styling not present in IE 8/9, Safari 5, and Chrome. */
abbr[title] { border-bottom: 1px dotted; }

/** Address style set to `bolder` in Firefox 4+, Safari 5, and Chrome. */
b, strong { font-weight: bold; }

/** Address styling not present in Safari 5 and Chrome. */
dfn { font-style: italic; }

/** Address differences between Firefox and other browsers. */
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }

/** Address styling not present in IE 8/9. */
mark { background: #ff0; color: #000; }

/** Correct font family set oddly in Safari 5 and Chrome. */
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }

/** Improve readability of pre-formatted text in all browsers. */
pre { white-space: pre-wrap; }

/** Set consistent quote types. */
q { quotes: "\201C" "\201D" "\2018" "\2019"; }

/** Address inconsistent and variable font size in all browsers. */
small { font-size: 80%; }

/** Prevent `sub` and `sup` affecting `line-height` in all browsers. */
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }

sup { top: -0.5em; }

sub { bottom: -0.25em; }

/* ========================================================================== Embedded content ========================================================================== */
/** Remove border when inside `a` element in IE 8/9. */
img { border: 0; }

/** Correct overflow displayed oddly in IE 9. */
svg:not(:root) { overflow: hidden; }

/* ========================================================================== Figures ========================================================================== */
/** Address margin not present in IE 8/9 and Safari 5. */
figure { margin: 0; }

/* ========================================================================== Forms ========================================================================== */
/** Define consistent border, margin, and padding. */
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }

/** 1. Correct `color` not being inherited in IE 8/9. 2. Remove padding so people aren't caught out if they zero out fieldsets. */
legend { border: 0; /* 1 */ padding: 0; /* 2 */ }

/** 1. Correct font family not being inherited in all browsers. 2. Correct font size not being inherited in all browsers. 3. Address margins set differently in Firefox 4+, Safari 5, and Chrome. */
button, input, select, textarea { font-family: inherit; /* 1 */ font-size: 100%; /* 2 */ margin: 0; /* 3 */ }

/** Address Firefox 4+ setting `line-height` on `input` using `!important` in the UA stylesheet. */
button, input { line-height: normal; }

/** Address inconsistent `text-transform` inheritance for `button` and `select`. All other form control elements do not inherit `text-transform` values. Correct `button` style inheritance in Chrome, Safari 5+, and IE 8+. Correct `select` style inheritance in Firefox 4+ and Opera. */
button, select { text-transform: none; }

/** 1. Avoid the WebKit bug in Android 4.0.* where (2) destroys native `audio` and `video` controls. 2. Correct inability to style clickable `input` types in iOS. 3. Improve usability and consistency of cursor style between image-type `input` and others. */
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; /* 2 */ cursor: pointer; /* 3 */ }

/** Re-set default cursor for disabled elements. */
button[disabled], html input[disabled] { cursor: default; }

/** 1. Address box sizing set to `content-box` in IE 8/9. 2. Remove excess padding in IE 8/9. */
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; /* 1 */ padding: 0; /* 2 */ }

/** 1. Address `appearance` set to `searchfield` in Safari 5 and Chrome. 2. Address `box-sizing` set to `border-box` in Safari 5 and Chrome (include `-moz` to future-proof). */
input[type="search"] { -webkit-appearance: textfield; /* 1 */ -moz-box-sizing: content-box; -webkit-box-sizing: content-box; /* 2 */ box-sizing: content-box; }

/** Remove inner padding and search cancel button in Safari 5 and Chrome on OS X. */
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }

/** Remove inner padding and border in Firefox 4+. */
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }

/** 1. Remove default vertical scrollbar in IE 8/9. 2. Improve readability and alignment in all browsers. */
textarea { overflow: auto; /* 1 */ vertical-align: top; /* 2 */ }

/* ========================================================================== Tables ========================================================================== */
/** Remove most spacing between table cells. */
table { border-collapse: collapse; border-spacing: 0; }

meta.foundation-mq-small { font-family: "only screen and (min-width: 768px)"; width: 768px; }

meta.foundation-mq-medium { font-family: "only screen and (min-width:1280px)"; width: 1280px; }

meta.foundation-mq-large { font-family: "only screen and (min-width:1440px)"; width: 1440px; }

*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }

html, body { font-size: 100%; }

body { background: white; color: #34302d; padding: 0; margin: 0; font-family: "Varela Round", sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }

a:hover { cursor: pointer; }

img, object, embed { max-width: 100%; height: auto; }

object, embed { height: 100%; }

img { -ms-interpolation-mode: bicubic; }

#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }

.left { float: left !important; }

.right { float: right !important; }

.text-left { text-align: left !important; }

.text-right { text-align: right !important; }

.text-center { text-align: center !important; }

.text-justify { text-align: justify !important; }

.hide { display: none; }

.antialiased { -webkit-font-smoothing: antialiased; }

img { display: inline-block; vertical-align: middle; }

textarea { height: auto; min-height: 50px; }

select { width: 100%; }

object, svg { display: inline-block; vertical-align: middle; }

.center { margin-left: auto; margin-right: auto; }

.spread { width: 100%; }

p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }

.subheader, .admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { line-height: 1.45; color: #0b0a0a; font-weight: normal; margin-top: 0; margin-bottom: 0.25em; }

/* Typography resets */
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }

/* Default Link Styles */
a { color: #548e2e; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #487a28; }
a img { border: none; }

/* Default paragraph styles */
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }

/* Default header styles */
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Montserrat, sans-serif; font-weight: 400; font-style: normal; color: #34302d; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.0125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #867c74; line-height: 0; }

h1 { font-size: 2.125em; }

h2 { font-size: 1.6875em; }

h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }

h4 { font-size: 1.125em; }

h5 { font-size: 1.125em; }

h6 { font-size: 1em; }

hr { border: solid #ddddd8; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }

/* Helpful Typography Defaults */
em, i { font-style: italic; line-height: inherit; }

strong, b { font-weight: bold; line-height: inherit; }

small { font-size: 60%; line-height: inherit; }

code { font-family: Monaco, Menlo, Consolas, "Courier New", monospace; font-weight: normal; color: rgba(0, 0, 0, 0.9); }

/* Lists */
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }

ul, ol { margin-left: 1.5em; }
ul.no-bullet, ol.no-bullet { margin-left: 1.5em; }

/* Unordered Lists */
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; /* Override nested font-size change */ }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }

/* Ordered Lists */
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }

/* Definition Lists */
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }

/* Abbreviations */
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #34302d; border-bottom: 1px dotted #dddddd; cursor: help; }

abbr { text-transform: none; }

/* Blockquotes */
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: 0.9375em; color: rgba(0, 0, 0, 0.6); }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: rgba(0, 0, 0, 0.6); }

blockquote, blockquote p { line-height: 1.6; color: rgba(0, 0, 0, 0.85); }

/* Microformats */
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }

.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }

@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
/* Tables */
table { background: white; margin-bottom: 1.25em; border: solid 1px #dedede; }
table thead, table tfoot { background: #f7f8f7; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #34302d; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #34302d; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f8f8f7; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }

body { -moz-osx-font-smoothing: grayscale; -webkit-font-smoothing: antialiased; tab-size: 4; }

h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.2; word-spacing: -0.05em; }

.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }

*:not(pre) > code { font-size: 0.9375em; font-style: normal !important; letter-spacing: 0; padding: 0.1em 0.5ex; word-spacing: -0.15em; background-color: #f7f7f8; -webkit-border-radius: 4px; border-radius: 4px; line-height: 1.45; text-rendering: optimizeSpeed; word-wrap: break-word; }
*:not(pre) > code.nobreak { word-wrap: normal; }
*:not(pre) > code.nowrap { white-space: nowrap; }

pre, pre > code { line-height: 1.45; color: rgba(0, 0, 0, 0.9); font-family: Monaco, Menlo, Consolas, "Courier New", monospace; font-weight: normal; text-rendering: optimizeSpeed; }

em em { font-style: normal; }

strong strong { font-weight: normal; }

.keyseq { color: #6b625c; }

kbd { font-family: Monaco, Menlo, Consolas, "Courier New", monospace; display: inline-block; color: #34302d; font-size: 0.65em; line-height: 1.45; background-color: #f7f7f7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 0.1em white inset; margin: 0 0.15em; padding: 0.2em 0.5em; vertical-align: middle; position: relative; top: -0.1em; white-space: nowrap; }

.keyseq kbd:first-child { margin-left: 0; }

.keyseq kbd:last-child { margin-right: 0; }

.menuseq, .menu { color: #191715; }

b.button:before, b.button:after { position: relative; top: -1px; font-weight: normal; }

b.button:before { content: "["; padding: 0 3px 0 2px; }

b.button:after { content: "]"; padding: 0 2px 0 3px; }

p a > code:hover { color: rgba(0, 0, 0, 0.9); }

#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }

#content { margin-top: 1.25em; }

#content:before { content: none; }

#header > h1:first-child { color: rgba(0, 0, 0, 0.85); margin-top: 2.25rem; margin-bottom: 0; }
#header > h1:first-child + #toc { margin-top: 8px; border-top: 1px solid #ddddd8; }
#header > h1:only-child, body.toc2 #header > h1:nth-last-child(2) { border-bottom: 1px solid #ddddd8; padding-bottom: 8px; }
#header .details { border-bottom: 1px solid #ddddd8; line-height: 1.45; padding-top: 0.25em; padding-bottom: 0.25em; padding-left: 0.25em; color: rgba(0, 0, 0, 0.6); display: -ms-flexbox; display: -webkit-flex; display: flex; -ms-flex-flow: row wrap; -webkit-flex-flow: row wrap; flex-flow: row wrap; }
#header .details span:first-child { margin-left: -0.125em; }
#header .details span.email a { color: rgba(0, 0, 0, 0.85); }
#header .details br { display: none; }
#header .details br + span:before { content: "\00a0\2013\00a0"; }
#header .details br + span.author:before { content: "\00a0\22c5\00a0"; color: rgba(0, 0, 0, 0.85); }
#header .details br + span#revremark:before { content: "\00a0|\00a0"; }
#header #revnumber { text-transform: capitalize; }
#header #revnumber:after { content: "\00a0"; }

#content > h1:first-child:not([class]) { color: rgba(0, 0, 0, 0.85); border-bottom: 1px solid #ddddd8; padding-bottom: 8px; margin-top: 0; padding-top: 1rem; margin-bottom: 1.25rem; }

#toc { border-bottom: 1px solid #efefed; padding-bottom: 0.5em; }
#toc > ul { margin-left: 0.125em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin: 0.5em 0; }
#toc ul { font-family: Montserrat, sans-serif; list-style-type: none; }
#toc li { line-height: 1.3334; margin-top: 0.3334em; }
#toc a { text-decoration: none; }
#toc a:active { text-decoration: underline; }

#toctitle { color: #0b0a0a; font-size: 1.2em; }

@media only screen and (min-width: 768px) { #toctitle { font-size: 1.375em; }
  body.toc2 { padding-left: 15em; padding-right: 0; }
  #toc.toc2 { margin-top: 0 !important; background-color: #f1f1f1; position: fixed; width: 15em; left: 0; top: 0; border-right: 1px solid #efefed; border-top-width: 0 !important; border-bottom-width: 0 !important; z-index: 1000; padding: 1.25em 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; margin-bottom: 0.8rem; font-size: 1.2em; }
  #toc.toc2 > ul { font-size: 0.9em; margin-bottom: 0; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 15em; }
  body.toc2.toc-right #toc.toc2 { border-right-width: 0; border-left: 1px solid #efefed; left: auto; right: 0; } }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; padding-right: 0; }
  #toc.toc2 { width: 20em; }
  #toc.toc2 #toctitle { font-size: 1.375em; }
  #toc.toc2 > ul { font-size: 0.95em; }
  #toc.toc2 ul ul { padding-left: 1.25em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d7d7d7; margin-bottom: 1.25em; padding: 1.25em; background: #f1f1f1; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }

#footer { max-width: 100%; background-color: #34302d; padding: 1.25em; }

#footer-text { color: #cbcfd2; line-height: 1.44; }

.sect1 { padding-bottom: 0.625em; }

@media only screen and (min-width: 768px) { .sect1 { padding-bottom: 1.25em; } }
.sect1 + .sect1 { border-top: 1px solid #efefed; }

#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; z-index: 1001; width: 1.5ex; margin-left: -1.5ex; display: block; text-decoration: none !important; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: "\00A7"; font-size: 0.85em; display: block; padding-top: 0.1em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #34302d; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #262321; }

.audioblock, .imageblock, .literalblock, .listingblock, .stemblock, .videoblock { margin-bottom: 1.25em; }

.admonitionblock td.content > .title, .audioblock > .title, .exampleblock > .title, .imageblock > .title, .listingblock > .title, .literalblock > .title, .stemblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, table.tableblock > .title, .verseblock > .title, .videoblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-rendering: optimizeLegibility; text-align: left; font-family: "Varela Round", sans-serif; font-size: 1rem; font-style: italic; }

table.tableblock > caption.title { white-space: nowrap; overflow: visible; max-width: 0; }

.paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { color: rgba(0, 0, 0, 0.85); }

table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }

.admonitionblock > table { border-collapse: separate; border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: initial; }
.admonitionblock > table td.icon .title { font-weight: bold; font-family: Montserrat, sans-serif; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #ddddd8; color: rgba(0, 0, 0, 0.6); }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }

.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }

.sidebarblock { border-style: solid; border-width: 1px; border-color: #d7d7d7; margin-bottom: 1.25em; padding: 1.25em; background: #f1f1f1; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock > .content > .title { color: #0b0a0a; margin-top: 0; text-align: center; }

.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint { background: whitesmoke; }
.sidebarblock .literalblock pre, .sidebarblock .listingblock pre:not(.highlight), .sidebarblock .listingblock pre[class="highlight"], .sidebarblock .listingblock pre[class^="highlight "], .sidebarblock .listingblock pre.CodeRay, .sidebarblock .listingblock pre.prettyprint { background: #f2f1f1; }

.literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { border: 1px solid #dddddd; -webkit-border-radius: 4px; border-radius: 4px; word-wrap: break-word; padding: 1em; font-size: 0.8125em; }
.literalblock pre.nowrap, .literalblock pre[class].nowrap, .listingblock pre.nowrap, .listingblock pre[class].nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
@media only screen and (min-width: 768px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 0.90625em; } }
@media only screen and (min-width: 1280px) { .literalblock pre, .literalblock pre[class], .listingblock pre, .listingblock pre[class] { font-size: 1em; } }

.literalblock.output pre { color: whitesmoke; background-color: rgba(0, 0, 0, 0.9); }

.listingblock pre.highlightjs { padding: 0; }
.listingblock pre.highlightjs > code { padding: 1em; -webkit-border-radius: 4px; border-radius: 4px; }

.listingblock > .content { position: relative; }

.listingblock code[data-lang]:before { display: none; content: attr(data-lang); position: absolute; font-size: 0.75em; top: 0.425rem; right: 0.5rem; line-height: 1; text-transform: uppercase; color: #999; }

.listingblock:hover code[data-lang]:before { display: block; }

.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }

.listingblock.terminal pre .command:not([data-prompt]):before { content: "$"; }

table.pyhltable { border-collapse: separate; border: 0; margin-bottom: 0; background: none; }

table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; line-height: 1.45; }

table.pyhltable td.code { padding-left: .75em; padding-right: 0; }

pre.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #ddddd8; }

pre.pygments .lineno { display: inline-block; margin-right: .25em; }

table.pyhltable .linenodiv { background: none !important; padding-right: 0 !important; }

.quoteblock { margin: 0 1em 1.25em 1.5em; display: table; }
.quoteblock > .title { margin-left: -1.5em; margin-bottom: 0.75em; }
.quoteblock blockquote, .quoteblock blockquote p { color: rgba(0, 0, 0, 0.85); font-size: 1.15rem; line-height: 1.75; word-spacing: 0.1em; letter-spacing: 0; font-style: italic; text-align: justify; }
.quoteblock blockquote { margin: 0; padding: 0; border: 0; }
.quoteblock blockquote:before { content: "\201c"; float: left; font-size: 2.75em; font-weight: bold; line-height: 0.6em; margin-left: -0.6em; color: #0b0a0a; text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: 0.5em; margin-right: 0.5ex; text-align: right; }
.quoteblock .quoteblock { margin-left: 0; margin-right: 0; padding: 0.5em 0; border-left: 3px solid rgba(0, 0, 0, 0.6); }
.quoteblock .quoteblock blockquote { padding: 0 0 0 0.75em; }
.quoteblock .quoteblock blockquote:before { display: none; }

.verseblock { margin: 0 1em 1.25em 1em; }
.verseblock pre { font-family: "Open Sans", "DejaVu Sans", sans; font-size: 1.15rem; color: rgba(0, 0, 0, 0.85); font-weight: 300; text-rendering: optimizeLegibility; }
.verseblock pre strong { font-weight: 400; }
.verseblock .attribution { margin-top: 1.25rem; margin-left: 0.5ex; }

.quoteblock .attribution, .verseblock .attribution { font-size: 0.9375em; line-height: 1.45; font-style: italic; }
.quoteblock .attribution br, .verseblock .attribution br { display: none; }
.quoteblock .attribution cite, .verseblock .attribution cite { display: block; letter-spacing: -0.025em; color: rgba(0, 0, 0, 0.6); }

.quoteblock.abstract { margin: 0 0 1.25em 0; display: block; }
.quoteblock.abstract blockquote, .quoteblock.abstract blockquote p { text-align: left; word-spacing: 0; }
.quoteblock.abstract blockquote:before, .quoteblock.abstract blockquote p:first-of-type:before { display: none; }

table.tableblock { max-width: 100%; border-collapse: separate; }
table.tableblock td > .paragraph:last-child p > p:last-child, table.tableblock th > p:last-child, table.tableblock td > p:last-child { margin-bottom: 0; }

table.tableblock, th.tableblock, td.tableblock { border: 0 solid #dedede; }

table.grid-all th.tableblock, table.grid-all td.tableblock { border-width: 0 1px 1px 0; }

table.grid-all tfoot > tr > th.tableblock, table.grid-all tfoot > tr > td.tableblock { border-width: 1px 1px 0 0; }

table.grid-cols th.tableblock, table.grid-cols td.tableblock { border-width: 0 1px 0 0; }

table.grid-all * > tr > .tableblock:last-child, table.grid-cols * > tr > .tableblock:last-child { border-right-width: 0; }

table.grid-rows th.tableblock, table.grid-rows td.tableblock { border-width: 0 0 1px 0; }

table.grid-all tbody > tr:last-child > th.tableblock, table.grid-all tbody > tr:last-child > td.tableblock, table.grid-all thead:last-child > tr > th.tableblock, table.grid-rows tbody > tr:last-child > th.tableblock, table.grid-rows tbody > tr:last-child > td.tableblock, table.grid-rows thead:last-child > tr > th.tableblock { border-bottom-width: 0; }

table.grid-rows tfoot > tr > th.tableblock, table.grid-rows tfoot > tr > td.tableblock { border-width: 1px 0 0 0; }

table.frame-all { border-width: 1px; }

table.frame-sides { border-width: 0 1px; }

table.frame-topbot { border-width: 1px 0; }

th.halign-left, td.halign-left { text-align: left; }

th.halign-right, td.halign-right { text-align: right; }

th.halign-center, td.halign-center { text-align: center; }

th.valign-top, td.valign-top { vertical-align: top; }

th.valign-bottom, td.valign-bottom { vertical-align: bottom; }

th.valign-middle, td.valign-middle { vertical-align: middle; }

table thead th, table tfoot th { font-weight: bold; }

tbody tr th { display: table-cell; line-height: 1.6; background: #f7f8f7; }

tbody tr th, tbody tr th p, tfoot tr th, tfoot tr th p { color: #34302d; font-weight: bold; }

p.tableblock > code:only-child { background: none; padding: 0; }

p.tableblock { font-size: 1em; }

td > div.verse { white-space: pre; }

ol { margin-left: 1.75em; }

ul li ol { margin-left: 1.5em; }

dl dd { margin-left: 1.125em; }

dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }

ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }

ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }

ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }

ul.checklist li > p:first-child > .fa-square-o:first-child, ul.checklist li > p:first-child > .fa-check-square-o:first-child { width: 1em; font-size: 0.85em; }

ul.checklist li > p:first-child > input[type="checkbox"]:first-child { width: 1em; position: relative; top: 1px; }

ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }

.unstyled dl dt { font-weight: normal; font-style: normal; }

ol.arabic { list-style-type: decimal; }

ol.decimal { list-style-type: decimal-leading-zero; }

ol.loweralpha { list-style-type: lower-alpha; }

ol.upperalpha { list-style-type: upper-alpha; }

ol.lowerroman { list-style-type: lower-roman; }

ol.upperroman { list-style-type: upper-roman; }

ol.lowergreek { list-style-type: lower-greek; }

.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }

td.hdlist1, td.hdlist2 { vertical-align: top; padding: 0 0.625em; }

td.hdlist1 { font-weight: bold; padding-bottom: 1.25em; }

.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }

.colist > table tr > td:first-of-type { padding: 0 0.75em; line-height: 1; }
.colist > table tr > td:first-of-type img { max-width: initial; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }

.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }

.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }

.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }

a.image { text-decoration: none; display: inline-block; }
a.image object { pointer-events: none; }

sup.footnote, sup.footnoteref { font-size: 0.875em; position: static; vertical-align: super; }
sup.footnote a, sup.footnoteref a { text-decoration: none; }
sup.footnote a:active, sup.footnoteref a:active { text-decoration: underline; }

#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -0.25em 0 0.75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em 0 0.225em; line-height: 1.3334; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.05em; margin-bottom: 0.2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }

.gist .file-data > table { border: 0; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }

div.unbreakable { page-break-inside: avoid; }

.big { font-size: larger; }

.small { font-size: smaller; }

.underline { text-decoration: underline; }

.overline { text-decoration: overline; }

.line-through { text-decoration: line-through; }

.aqua { color: #00bfbf; }

.aqua-background { background-color: #00fafa; }

.black { color: black; }

.black-background { background-color: black; }

.blue { color: #0000bf; }

.blue-background { background-color: #0000fa; }

.fuchsia { color: #bf00bf; }

.fuchsia-background { background-color: #fa00fa; }

.gray { color: #606060; }

.gray-background { background-color: #7d7d7d; }

.green { color: #006000; }

.green-background { background-color: #007d00; }

.lime { color: #00bf00; }

.lime-background { background-color: #00fa00; }

.maroon { color: #600000; }

.maroon-background { background-color: #7d0000; }

.navy { color: #000060; }

.navy-background { background-color: #00007d; }

.olive { color: #606000; }

.olive-background { background-color: #7d7d00; }

.purple { color: #600060; }

.purple-background { background-color: #7d007d; }

.red { color: #bf0000; }

.red-background { background-color: #fa0000; }

.silver { color: #909090; }

.silver-background { background-color: #bcbcbc; }

.teal { color: #006060; }

.teal-background { background-color: #007d7d; }

.white { color: #bfbfbf; }

.white-background { background-color: #fafafa; }

.yellow { color: #bfbf00; }

.yellow-background { background-color: #fafa00; }

span.icon > .fa { cursor: default; }

.admonitionblock td.icon [class^="fa icon-"] { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #3f6a22; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }

.conum[data-value] { display: inline-block; color: #fff !important; background-color: #34302d; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; font-size: 0.75em; width: 1.67em; height: 1.67em; line-height: 1.67em; font-family: "Open Sans", "DejaVu Sans", sans-serif; font-style: normal; font-weight: bold; }
.conum[data-value] * { color: #fff !important; }
.conum[data-value] + b { display: none; }
.conum[data-value]:after { content: attr(data-value); }
pre .conum[data-value] { position: relative; top: -0.125em; }

b.conum * { color: inherit !important; }

.conum:not([data-value]):empty { display: none; }

.admonitionblock { border-left: 4px solid #6db33f; background-color: #ebf1e7; padding: 1.2em 0; margin: 30px 0; width: auto; }

#toc a:hover { text-decoration: underline; }

.admonitionblock > table td.content { border-left: none; }

.js-download-widget-selector{display:inline;}.navbar{margin-bottom:0;}.item-slider-widget{display:inline-block;margin-left:15px;}.item-slider-widget .item--slider{height:32px;position:absolute;width:40px;border-radius:2px;margin-top:-4px;z-index:800;background:#68605a;background:-moz-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-webkit-gradient(linear,left top,left bottom,color-stop(0%,#68605a),color-stop(100%,#34302d),color-stop(100%,#020202));background:-webkit-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-o-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:-ms-linear-gradient(top,#68605a 0%,#34302d 100%,#020202 100%);background:linear-gradient(to bottom,#68605a 0%,#34302d 100%,#020202 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#68605a',endColorstr='#020202',GradientType=0);cursor:pointer;transition:all 0.25s;-webkit-transition:all 0.25s;-moz-webkit-transition:all 0.25s;-ms--webkit-transition:all 0.25s;-o-webkit-transition:all 0.25s;}.item-slider-widget .item-slider--container{background-color:white;border:1px solid #999;padding:0 3px;}.item-slider-widget .item-slider--container .item{display:inline-block;color:#c3c3c3;font-family:"Montserrat",sans-serif;font-size:12px;line-height:12px;text-transform:uppercase;padding:7px 6px 5px;cursor:pointer;transition:color 0.25s;-webkit-transition:color 0.25s;-moz-webkit-transition:color 0.25s;-ms--webkit-transition:color 0.25s;-o-webkit-transition:color 0.25s;}.item-slider-widget .item-slider--container .item:hover{color:black;}.item-slider-widget .item-slider--container .item.js-active{z-index:801;position:relative;color:#f1f1f1;}

/* Styling for the toggle buttons */
/* Borrowed from http://jeremyworboys.com/writing/toggle-buttons-without-javascript */
/* Micro clearfix (http://nicolasgallagher.com/micro-clearfix-hack/) */
.cf:before,.cf:after{content:"";display:table}.cf:after{clear:both}.cf{zoom:1}

/* = Function = */

.docToggle-button input {
    display: none;
}
.docToggle-button label {
    background: #ccc;
    border: 1px solid #888;
    color: #666;
    padding: 5px 10px;
}
.docToggle-button label:hover {
    background-color: #ddd;
}
.docToggle-button label:active,
.docToggle-button input:focus + label {
    background-color: #aaa;
}
.docToggle-button input:checked + label {
    background-color: #b4b4b4;
}

.docToggle-button label {
    background-color: #f5f5f5;
    background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -o-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: -ms-linear-gradient(top, #ffffff, #e6e6e6);
    background-image: linear-gradient(top, #ffffff, #e6e6e6);
    background-repeat: repeat-x;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#e6e6e6', GradientType=0);
    border-color: #e6e6e6 #e6e6e6 #bfbfbf;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    border: 1px solid #cccccc;
    border-bottom-color: #b3b3b3;
    -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
    color: #333333;
    cursor: pointer;
    display: inline-block;
    margin-bottom: 0;
    margin-left: -1px;
    padding: 4px 10px;
    font-size: 13px;
    line-height: 18px;
    text-align: center;
    text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
    vertical-align: middle;
}
.docToggle-button label:hover {
    background-color: #e6e6e6;
    background-position: 0 -15px;
    color: #333333;
    text-decoration: none;
    -webkit-transition: background-position 0.1s linear;
    -moz-transition: background-position 0.1s linear;
    -ms-transition: background-position 0.1s linear;
    -o-transition: background-position 0.1s linear;
    transition: background-position 0.1s linear;
}
.docToggle-button label:active,
.docToggle-button input:focus + label {
    background-color: #d9d9d9;
    background-image: none;
    -webkit-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    outline: 0;
}

.docToggle-button input:checked + label {
    background: #404040;
    color: #ffffff;
    -webkit-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    -moz-box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px rgba(0, 0, 0, 0.05);
    box-shadow: inset 0 1px 6px rgba(0, 0, 0, 0.15), 0 1px 2px  rgba(0, 0, 0, 0.05);
}
.docToggle-button:first-child label {
  -webkit-border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px;
  border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px;
  border-bottom-left-radius: 4px;
  margin-left: 0;
}
.docToggle-button:last-child label {
  -webkit-border-top-right-radius: 4px;
  -moz-border-radius-topright: 4px;
  border-top-right-radius: 4px;
  -webkit-border-bottom-right-radius: 4px;
  -moz-border-radius-bottomright: 4px;
  border-bottom-right-radius: 4px;

  -webkit-border-top-left-radius: 4px;
  -moz-border-radius-topleft: 4px;
  border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
  -moz-border-radius-bottomleft: 4px;
  border-bottom-left-radius: 4px;
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
<style>
  #tocbot a.toc-link.node-name--H1{ font-style: italic }
  @media screen{
    #tocbot > ul.toc-list{ margin-bottom: 0.5em; margin-left: 0.125em }
    #tocbot ul.sectlevel0, #tocbot a.toc-link.node-name--H1 + ul{
      padding-left: 0 }
    #tocbot a.toc-link{ height:100% }
    .is-collapsible{ max-height:3000px; overflow:hidden; }
    .is-collapsed{ max-height:0 }
    .is-active-link{ font-weight:700 }
  }
  @media print{
    #tocbot a.toc-link.node-name--H4{ display:none }
  }
</style>
</head>
<body class="book toc2 toc-left">
<div id="header">
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#springBatchIntegration">1. Spring Batch Integration</a>
<ul class="sectlevel2">
<li><a href="#spring-batch-integration-introduction">1.1. Spring Batch Integration Introduction</a>
<ul class="sectlevel3">
<li><a href="#namespace-support">1.1.1. Namespace Support</a></li>
<li><a href="#launching-batch-jobs-through-messages">1.1.2. Launching Batch Jobs through Messages</a>
<ul class="sectlevel4">
<li><a href="#transforming-a-file-into-a-joblaunchrequest">Transforming a file into a JobLaunchRequest</a></li>
<li><a href="#the-jobexecution-response">The <code>JobExecution</code> Response</a></li>
<li><a href="#spring-batch-integration-configuration">Spring Batch Integration Configuration</a></li>
<li><a href="#example-itemreader-configuration">Example ItemReader Configuration</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#availableAttributesOfTheJobLaunchingGateway">1.2. Available Attributes of the Job-Launching Gateway</a></li>
<li><a href="#sub-elements">1.3. Sub-Elements</a>
<ul class="sectlevel3">
<li><a href="#providing-feedback-with-informational-messages">1.3.1. Providing Feedback with Informational Messages</a></li>
<li><a href="#asynchronous-processors">1.3.2. Asynchronous Processors</a></li>
<li><a href="#externalizing-batch-process-execution">1.3.3. Externalizing Batch Process Execution</a>
<ul class="sectlevel4">
<li><a href="#remote-chunking">Remote Chunking</a></li>
<li><a href="#remote-partitioning">Remote Partitioning</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="springBatchIntegration"><a class="anchor" href="#springBatchIntegration"></a>1. Spring Batch Integration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>
<div>
  <script type="text/javascript" src="jsfiles/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="jsfiles/js.cookie.js"></script>
  <script type="text/javascript" src="jsfiles/DocumentToggle.js"></script>
  <div class="docToggle-button">
    <input id="xmlButton" type="radio" name="docToggle" value="XML"><label for="xmlButton">XML</label>
    <input id="javaButton" type="radio" name="docToggle" value="Java" checked><label for="javaButton">Java</label>
    <!-- <input id="bothButton" type="radio" name="docToggle" value="Both" checked><label for="bothButton">Both</label> -->
  </div>
</div>
</p>
</div>
<div class="sect2">
<h3 id="spring-batch-integration-introduction"><a class="anchor" href="#spring-batch-integration-introduction"></a>1.1. Spring Batch Integration Introduction</h3>
<div class="paragraph">
<p>Many users of Spring Batch may encounter requirements that are
outside the scope of Spring Batch but that may be efficiently and
concisely implemented by using Spring Integration. Conversely, Spring
Integration users may encounter Spring Batch requirements and need a way
to efficiently integrate both frameworks. In this context, several
patterns and use-cases emerge, and Spring Batch Integration
addresses those requirements.</p>
</div>
<div class="paragraph">
<p>The line between Spring Batch and Spring Integration is not always
clear, but two pieces of advice can
help: Think about granularity, and apply common patterns. Some
of those common patterns are described in this reference manual
section.</p>
</div>
<div class="paragraph">
<p>Adding messaging to a batch process enables automation of
operations and also separation and strategizing of key concerns.
For example, a message might trigger a job to execute, and then the
sending of the message can be exposed in a variety of ways. Alternatively, when
a job completes or fails, that event might trigger a message to be sent,
and the consumers of those messages might have operational concerns
that have nothing to do with the application itself. Messaging can
also be embedded in a job (for example reading or writing items for
processing via channels). Remote partitioning and remote chunking
provide methods to distribute workloads over a number of workers.</p>
</div>
<div class="paragraph">
<p>This section covers the following key concepts:</p>
</div>
<div class="ulist xmlContent">
<ul>
<li>
<p><a href="#namespace-support">Namespace Support</a></p>
</li>
</ul>
</div>
<div id="continue-section-list" class="ulist">
<ul>
<li>
<p><a href="#launching-batch-jobs-through-messages">Launching Batch Jobs through Messages</a></p>
</li>
<li>
<p><a href="#providing-feedback-with-informational-messages">Providing Feedback with Informational Messages</a></p>
</li>
<li>
<p><a href="#asynchronous-processors">Asynchronous Processors</a></p>
</li>
<li>
<p><a href="#externalizing-batch-process-execution">Externalizing
Batch Process Execution</a></p>
</li>
</ul>
</div>
<div class="sect3 xmlContent">
<h4 id="namespace-support"><a class="anchor" href="#namespace-support"></a>1.1.1. Namespace Support</h4>
<div class="paragraph">
<p>Since Spring Batch Integration 1.3, dedicated XML Namespace
support was added, with the aim to provide an easier configuration
experience. In order to activate the namespace, add the following
namespace declarations to your Spring XML Application Context
file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:batch-int</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/batch-integration</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span>
    <span class="content">http://www.springframework.org/schema/batch-integration</span>
    <span class="content">https://www.springframework.org/schema/batch-integration/spring-batch-integration.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    ...

<span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>A fully configured Spring XML Application Context file for Spring
Batch Integration may look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;beans</span> <span class="attribute-name">xmlns</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/beans</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:xsi</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.w3.org/2001/XMLSchema-instance</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:int</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/integration</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:batch</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/batch</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xmlns:batch-int</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">http://www.springframework.org/schema/batch-integration</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">xsi:schemaLocation</span>=<span class="string"><span class="delimiter">&quot;</span>
    <span class="content">http://www.springframework.org/schema/batch-integration</span>
    <span class="content">https://www.springframework.org/schema/batch-integration/spring-batch-integration.xsd</span>
    <span class="content">http://www.springframework.org/schema/batch</span>
    <span class="content">https://www.springframework.org/schema/batch/spring-batch.xsd</span>
    <span class="content">http://www.springframework.org/schema/beans</span>
    <span class="content">https://www.springframework.org/schema/beans/spring-beans.xsd</span>
    <span class="content">http://www.springframework.org/schema/integration</span>
    <span class="content">https://www.springframework.org/schema/integration/spring-integration.xsd</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>

    ...

<span class="tag">&lt;/beans&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Appending version numbers to the referenced XSD file is also
allowed, but, as a version-less declaration always uses the
latest schema, we generally do not recommend appending the version
number to the XSD name. Adding a version number
could possibly create issues when updating the Spring Batch
Integration dependencies, as they may require more recent versions
of the XML schema.</p>
</div>
</div>
<div class="sect3">
<h4 id="launching-batch-jobs-through-messages"><a class="anchor" href="#launching-batch-jobs-through-messages"></a>1.1.2. Launching Batch Jobs through Messages</h4>
<div class="paragraph">
<p>When starting batch jobs by using the core Spring Batch API, you
basically have 2 options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>From the command line, with the <code>CommandLineJobRunner</code></p>
</li>
<li>
<p>Programmatically, with either <code>JobOperator.start()</code> or <code>JobLauncher.run()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, you may want to use the
<code>CommandLineJobRunner</code> when invoking Batch Jobs by
using a shell script. Alternatively, you may use the
<code>JobOperator</code> directly (for example, when using
Spring Batch as part of a web application). However, what about
more complex use cases? Maybe you need to poll a remote (S)FTP
server to retrieve the data for the Batch Job or your application
has to support multiple different data sources simultaneously. For
example, you may receive data files not only from the web, but also from
FTP and other sources. Maybe additional transformation of the input files is
needed before invoking Spring Batch.</p>
</div>
<div class="paragraph">
<p>Therefore, it would be much more powerful to execute the batch job
using Spring Integration and its numerous adapters. For example,
you can use a <em>File Inbound Channel Adapter</em> to
monitor a directory in the file-system and start the Batch Job as
soon as the input file arrives. Additionally, you can create Spring
Integration flows that use multiple different adapters to easily
ingest data for your batch jobs from multiple sources
simultaneously using only configuration. Implementing all these
scenarios with Spring Integration is easy, as it allows for
decoupled, event-driven execution of the
<code>JobLauncher</code>.</p>
</div>
<div class="paragraph">
<p>Spring Batch Integration provides the
<code>JobLaunchingMessageHandler</code> class that you can
use to launch batch jobs. The input for the
<code>JobLaunchingMessageHandler</code> is provided by a
Spring Integration message, which has a payload of type
<code>JobLaunchRequest</code>. This class is a wrapper around the <code>Job</code>
    that needs to be launched and around the <code>JobParameters</code>
necessary to launch the Batch job.</p>
</div>
<div class="paragraph">
<p>The following image illustrates the typical Spring Integration
message flow in order to start a Batch job. The
<a href="https://www.enterpriseintegrationpatterns.com/toc.html">EIP (Enterprise Integration Patterns) website</a>
provides a full overview of messaging icons and their descriptions.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/launch-batch-job.png" alt="Launch Batch Job">
</div>
<div class="title">Figure 1. Launch Batch Job</div>
</div>
<div class="sect4">
<h5 id="transforming-a-file-into-a-joblaunchrequest"><a class="anchor" href="#transforming-a-file-into-a-joblaunchrequest"></a>Transforming a file into a JobLaunchRequest</h5>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">io.spring.sbi</span>;

<span class="keyword">import</span> <span class="include">org.springframework.batch.core.Job</span>;
<span class="keyword">import</span> <span class="include">org.springframework.batch.core.JobParametersBuilder</span>;
<span class="keyword">import</span> <span class="include">org.springframework.batch.integration.launch.JobLaunchRequest</span>;
<span class="keyword">import</span> <span class="include">org.springframework.integration.annotation.Transformer</span>;
<span class="keyword">import</span> <span class="include">org.springframework.messaging.Message</span>;

<span class="keyword">import</span> <span class="include">java.io.File</span>;

<span class="directive">public</span> <span class="type">class</span> <span class="class">FileMessageToJobRequest</span> {
    <span class="directive">private</span> Job job;
    <span class="directive">private</span> <span class="predefined-type">String</span> fileParameterName;

    <span class="directive">public</span> <span class="type">void</span> setFileParameterName(<span class="predefined-type">String</span> fileParameterName) {
        <span class="local-variable">this</span>.fileParameterName = fileParameterName;
    }

    <span class="directive">public</span> <span class="type">void</span> setJob(Job job) {
        <span class="local-variable">this</span>.job = job;
    }

    <span class="annotation">@Transformer</span>
    <span class="directive">public</span> JobLaunchRequest toRequest(Message&lt;<span class="predefined-type">File</span>&gt; message) {
        JobParametersBuilder jobParametersBuilder =
            <span class="keyword">new</span> JobParametersBuilder();

        jobParametersBuilder.addString(fileParameterName,
            message.getPayload().getAbsolutePath());

        <span class="keyword">return</span> <span class="keyword">new</span> JobLaunchRequest(job, jobParametersBuilder.toJobParameters());
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="the-jobexecution-response"><a class="anchor" href="#the-jobexecution-response"></a>The <code>JobExecution</code> Response</h5>
<div class="paragraph">
<p>When a batch job is being executed, a
<code>JobExecution</code> instance is returned. This
instance can be used to determine the status of an execution. If
a <code>JobExecution</code> is able to be created
successfully, it is always returned, regardless of whether
or not the actual execution is successful.</p>
</div>
<div class="paragraph">
<p>The exact behavior on how the <code>JobExecution</code>
instance is returned depends on the provided
<code>TaskExecutor</code>. If a
<code>synchronous</code> (single-threaded)
<code>TaskExecutor</code> implementation is used, the
<code>JobExecution</code> response is returned only
<code>after</code> the job completes. When using an
<code>asynchronous</code>
<code>TaskExecutor</code>, the
<code>JobExecution</code> instance is returned
immediately. Users can then take the <code>id</code> of
<code>JobExecution</code> instance
(with <code>JobExecution.getJobId()</code>) and query the
<code>JobRepository</code> for the job&#8217;s updated status
using the <code>JobExplorer</code>. For more
information, please refer to the Spring
Batch reference documentation on
<a href="job.html#queryingRepository">Querying the Repository</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="spring-batch-integration-configuration"><a class="anchor" href="#spring-batch-integration-configuration"></a>Spring Batch Integration Configuration</h5>
<div class="paragraph">
<p>The following configuration creates a file
<code>inbound-channel-adapter</code> to listen for CSV
files in the provided directory, hand them off to our
transformer (<code>FileMessageToJobRequest</code>),
launch the job via the <em>Job Launching Gateway</em>, and then log the output of the
<code>JobExecution</code> with the
<code>logging-channel-adapter</code>.</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inboundFileChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outboundJobRequestChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLaunchReplyChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int-file:inbound-channel-adapter</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">filePoller</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inboundFileChannel</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">directory</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">file:/tmp/myfiles/</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">filename-pattern</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*.csv</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;int:poller</span> <span class="attribute-name">fixed-rate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/int-file:inbound-channel-adapter&gt;</span>

<span class="tag">&lt;int:transformer</span> <span class="attribute-name">input-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inboundFileChannel</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">output-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outboundJobRequestChannel</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">io.spring.sbi.FileMessageToJobRequest</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">job</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">personJob</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">fileParameterName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">input.file.name</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/bean&gt;</span>
<span class="tag">&lt;/int:transformer&gt;</span>

<span class="tag">&lt;batch-int:job-launching-gateway</span> <span class="attribute-name">request-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outboundJobRequestChannel</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">reply-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLaunchReplyChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:logging-channel-adapter</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLaunchReplyChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> FileMessageToJobRequest fileMessageToJobRequest() {
    FileMessageToJobRequest fileMessageToJobRequest = <span class="keyword">new</span> FileMessageToJobRequest();
    fileMessageToJobRequest.setFileParameterName(<span class="string"><span class="delimiter">&quot;</span><span class="content">input.file.name</span><span class="delimiter">&quot;</span></span>);
    fileMessageToJobRequest.setJob(personJob());
    <span class="keyword">return</span> fileMessageToJobRequest;
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> JobLaunchingGateway jobLaunchingGateway() {
    SimpleJobLauncher simpleJobLauncher = <span class="keyword">new</span> SimpleJobLauncher();
    simpleJobLauncher.setJobRepository(jobRepository);
    simpleJobLauncher.setTaskExecutor(<span class="keyword">new</span> SyncTaskExecutor());
    JobLaunchingGateway jobLaunchingGateway = <span class="keyword">new</span> JobLaunchingGateway(simpleJobLauncher);

    <span class="keyword">return</span> jobLaunchingGateway;
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow integrationFlow(JobLaunchingGateway jobLaunchingGateway) {
    <span class="keyword">return</span> IntegrationFlows.from(Files.inboundAdapter(<span class="keyword">new</span> <span class="predefined-type">File</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">/tmp/myfiles</span><span class="delimiter">&quot;</span></span>)).
                    filter(<span class="keyword">new</span> SimplePatternFileListFilter(<span class="string"><span class="delimiter">&quot;</span><span class="content">*.csv</span><span class="delimiter">&quot;</span></span>)),
            c -&gt; c.poller(Pollers.fixedRate(<span class="integer">1000</span>).maxMessagesPerPoll(<span class="integer">1</span>))).
            handle(fileMessageToJobRequest()).
            handle(jobLaunchingGateway).
            log(LoggingHandler.Level.WARN, <span class="string"><span class="delimiter">&quot;</span><span class="content">headers.id + ': ' + payload</span><span class="delimiter">&quot;</span></span>).
            get();
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="example-itemreader-configuration"><a class="anchor" href="#example-itemreader-configuration"></a>Example ItemReader Configuration</h5>
<div class="paragraph">
<p>Now that we are polling for files and launching jobs, we need to
configure our Spring Batch
<code>ItemReader</code> (for example) to use the files found at the location defined
by the job parameter called "input.file.name", as shown in the following bean configuration:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemReader</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.item.file.FlatFileItemReader</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">resource</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">file://#{jobParameters['input.file.name']}</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="annotation">@StepScope</span>
<span class="directive">public</span> ItemReader sampleReader(<span class="annotation">@Value</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">#{jobParameters[input.file.name]}</span><span class="delimiter">&quot;</span></span>) <span class="predefined-type">String</span> resource) {
...
    FlatFileItemReader flatFileItemReader = <span class="keyword">new</span> FlatFileItemReader();
    flatFileItemReader.setResource(<span class="keyword">new</span> FileSystemResource(resource));
...
    return flatFileItemReader;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The main points of interest in the preceding example are injecting the value of
<code>#{jobParameters['input.file.name']}</code>
as the Resource property value and setting the <code>ItemReader</code> bean
to have <em>Step scope</em>. Setting the bean to have Step scope takes advantage of
the late binding support, which allows access to the
<code>jobParameters</code> variable.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="availableAttributesOfTheJobLaunchingGateway"><a class="anchor" href="#availableAttributesOfTheJobLaunchingGateway"></a>1.2. Available Attributes of the Job-Launching Gateway</h3>
<div class="paragraph">
<p>The job-launching gateway has the following attributes that you can set to control a job:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code>: Identifies the underlying Spring bean definition, which is an instance of either:</p>
<div class="ulist">
<ul>
<li>
<p><code>EventDrivenConsumer</code></p>
</li>
<li>
<p><code>PollingConsumer</code>
(The exact implementation depends on whether the component&#8217;s input channel is a
<code>SubscribableChannel</code> or <code>PollableChannel</code>.)</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>auto-startup</code>: Boolean flag to indicate that the endpoint should start automatically on
startup. The default is <em>true</em>.</p>
</li>
<li>
<p><code>request-channel</code>: The input <code>MessageChannel</code> of this endpoint.</p>
</li>
<li>
<p><code>reply-channel</code>: <code>MessageChannel</code> to which the resulting <code>JobExecution</code> payload is sent.</p>
</li>
<li>
<p><code>reply-timeout</code>: Lets you specify how long (in milliseconds) this gateway waits for the reply message
to be sent successfully to the reply channel before throwing
an exception. This attribute only applies when the channel
might block (for example, when using a bounded queue channel
that is currently full). Also, keep in mind that, when sending to a
<code>DirectChannel</code>, the invocation occurs
in the sender&#8217;s thread. Therefore, the failing of the send
operation may be caused by other components further downstream.
The <code>reply-timeout</code> attribute maps to the
<code>sendTimeout</code> property of the underlying
<code>MessagingTemplate</code> instance. If not specified, the attribute
defaults to&lt;emphasis&gt;-1&lt;/emphasis&gt;,
meaning that, by default, the <code>Gateway</code> waits indefinitely.</p>
</li>
<li>
<p><code>job-launcher</code>: Optional. Accepts a
custom
<code>JobLauncher</code>
bean reference.
If not specified the adapter
re-uses the instance that is registered under the <code>id</code> of
<code>jobLauncher</code>. If no default instance
exists, an exception is thrown.</p>
</li>
<li>
<p><code>order</code>: Specifies the order of invocation when this endpoint is connected as a subscriber
to a <code>SubscribableChannel</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="sub-elements"><a class="anchor" href="#sub-elements"></a>1.3. Sub-Elements</h3>
<div class="paragraph">
<p>When this <code>Gateway</code> is receiving messages from a
<code>PollableChannel</code>, you must either provide
a global default <code>Poller</code> or provide a <code>Poller</code> sub-element to the
<code>Job Launching Gateway</code>, as shown in the following example:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;batch-int:job-launching-gateway</span> <span class="attribute-name">request-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">queueChannel</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">reply-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replyChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">job-launcher</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobLauncher</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;int:poller</span> <span class="attribute-name">fixed-rate</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1000</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/batch-int:job-launching-gateway&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="annotation">@ServiceActivator</span>(inputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">queueChannel</span><span class="delimiter">&quot;</span></span>, poller = <span class="annotation">@Poller</span>(fixedRate=<span class="string"><span class="delimiter">&quot;</span><span class="content">1000</span><span class="delimiter">&quot;</span></span>))
<span class="directive">public</span> JobLaunchingGateway sampleJobLaunchingGateway() {
    JobLaunchingGateway jobLaunchingGateway = <span class="keyword">new</span> JobLaunchingGateway(jobLauncher());
    jobLaunchingGateway.setOutputChannel(replyChannel());
    <span class="keyword">return</span> jobLaunchingGateway;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="providing-feedback-with-informational-messages"><a class="anchor" href="#providing-feedback-with-informational-messages"></a>1.3.1. Providing Feedback with Informational Messages</h4>
<div class="paragraph">
<p>As Spring Batch jobs can run for long times, providing progress
information is often critical. For example, stake-holders may want
to be notified if some or all parts of a batch job have failed.
Spring Batch provides support for this information being gathered
through:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Active polling</p>
</li>
<li>
<p>Event-driven listeners</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When starting a Spring Batch job asynchronously (for example, by using the
<code>Job Launching Gateway</code>), a
<code>JobExecution</code> instance is returned. Thus,
<code>JobExecution.getJobId()</code> can be used to
continuously poll for status updates by retrieving updated
instances of the <code>JobExecution</code> from the
<code>JobRepository</code> by using the
<code>JobExplorer</code>. However, this is considered
sub-optimal, and an event-driven approach should be preferred.</p>
</div>
<div class="paragraph">
<p>Therefore, Spring Batch provides listeners, including the three most commonly used listeners:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>StepListener</p>
</li>
<li>
<p>ChunkListener</p>
</li>
<li>
<p>JobExecutionListener</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the example shown in the following image, a Spring Batch job has been configured with a
<code>StepExecutionListener</code>. Thus, Spring
Integration receives and processes any step before or after
events. For example, the received
<code>StepExecution</code> can be inspected by using a
<code>Router</code>. Based on the results of that
inspection, various things can occur (such as routing a message
to a Mail Outbound Channel Adapter), so that an Email notification
can be sent out based on some condition.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/handling-informational-messages.png" alt="Handling Informational Messages">
</div>
<div class="title">Figure 2. Handling Informational Messages</div>
</div>
<div class="paragraph">
<p>The following two-part example shows how a listener is configured to send a
message to a <code>Gateway</code> for a
<code>StepExecution</code> events and log its output to a
<code>logging-channel-adapter</code>.</p>
</div>
<div class="paragraph">
<p>First, create the notification integration beans:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionsChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:gateway</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">notificationExecutionsListener</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">service-interface</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.StepExecutionListener</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">default-request-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionsChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:logging-channel-adapter</span> <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionsChannel</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="annotation">@ServiceActivator</span>(inputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionsChannel</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> LoggingHandler loggingHandler() {
    LoggingHandler adapter = <span class="keyword">new</span> LoggingHandler(LoggingHandler.Level.WARN);
    adapter.setLoggerName(<span class="string"><span class="delimiter">&quot;</span><span class="content">TEST_LOGGER</span><span class="delimiter">&quot;</span></span>);
    adapter.setLogExpressionString(<span class="string"><span class="delimiter">&quot;</span><span class="content">headers.id + ': ' + payload</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> adapter;
}

<span class="annotation">@MessagingGateway</span>(name = <span class="string"><span class="delimiter">&quot;</span><span class="content">notificationExecutionsListener</span><span class="delimiter">&quot;</span></span>, defaultRequestChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionsChannel</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="type">interface</span> <span class="class">NotificationExecutionListener</span> <span class="directive">extends</span> StepExecutionListener {}</code></pre>
</div>
</div>
<div class="admonitionblock note javaContent">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will need to add the <code>@IntegrationComponentScan</code> annotation to your configuration.
</td>
</tr>
</table>
</div>
<div id="message-gateway-entry-list" class="paragraph">
<p>Second, modify your job to add a step-level listener:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">importPayments</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;tasklet</span> <span class="attribute-name">..</span><span class="tag">/&gt;</span>
            <span class="tag">&lt;chunk</span> <span class="attribute-name">..</span><span class="tag">/&gt;</span>
            <span class="tag">&lt;listeners&gt;</span>
                <span class="tag">&lt;listener</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">notificationExecutionsListener</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
            <span class="tag">&lt;/listeners&gt;</span>
        <span class="tag">&lt;/tasklet&gt;</span>
        ...
    <span class="tag">&lt;/step&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Job importPaymentsJob() {
    <span class="keyword">return</span> jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">importPayments</span><span class="delimiter">&quot;</span></span>)
        .start(stepBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>)
                .chunk(<span class="integer">200</span>)
                .listener(notificationExecutionsListener())
                ...
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="asynchronous-processors"><a class="anchor" href="#asynchronous-processors"></a>1.3.2. Asynchronous Processors</h4>
<div class="paragraph">
<p>Asynchronous Processors help you to scale the processing of
items. In the asynchronous processor use case, an
<code>AsyncItemProcessor</code> serves as a dispatcher,
executing the logic of the <code>ItemProcessor</code> for an
item on a new thread. Once the item completes, the <code>Future</code> is passed to
the <code>AsynchItemWriter</code> to be written.</p>
</div>
<div class="paragraph">
<p>Therefore, you can increase performance by using asynchronous item
processing, basically allowing you to implement
<em>fork-join</em> scenarios. The
<code>AsyncItemWriter</code> gathers the results and
writes back the chunk as soon as all the results become available.</p>
</div>
<div class="paragraph">
<p>The following example shows how to configuration the <code>AsyncItemProcessor</code>:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">processor</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.async.AsyncItemProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">delegate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">your.ItemProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">taskExecutor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.core.task.SimpleAsyncTaskExecutor</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> AsyncItemProcessor processor(ItemProcessor itemProcessor, TaskExecutor taskExecutor) {
    AsyncItemProcessor asyncItemProcessor = <span class="keyword">new</span> AsyncItemProcessor();
    asyncItemProcessor.setTaskExecutor(taskExecutor);
    asyncItemProcessor.setDelegate(itemProcessor);
    <span class="keyword">return</span> asyncItemProcessor;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>delegate</code> property refers
to your <code>ItemProcessor</code> bean, and
the <code>taskExecutor</code> property
refers to the <code>TaskExecutor</code> of your choice.</p>
</div>
<div class="paragraph">
<p>The following example shows how to configure the <code>AsyncItemWriter</code>:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemWriter</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.async.AsyncItemWriter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">delegate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemWriter</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">your.ItemWriter</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> AsyncItemWriter writer(ItemWriter itemWriter) {
    AsyncItemWriter asyncItemWriter = <span class="keyword">new</span> AsyncItemWriter();
    asyncItemWriter.setDelegate(itemWriter);
    <span class="keyword">return</span> asyncItemWriter;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Again, the <code>delegate</code> property is
actually a reference to your <code>ItemWriter</code> bean.</p>
</div>
</div>
<div class="sect3">
<h4 id="externalizing-batch-process-execution"><a class="anchor" href="#externalizing-batch-process-execution"></a>1.3.3. Externalizing Batch Process Execution</h4>
<div class="paragraph">
<p>The integration approaches discussed so far suggest use cases
where Spring Integration wraps Spring Batch like an outer-shell.
However, Spring Batch can also use Spring Integration internally.
Using this approach, Spring Batch users can delegate the
processing of items or even chunks to outside processes. This
allows you to offload complex processing. Spring Batch Integration
provides dedicated support for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Remote Chunking</p>
</li>
<li>
<p>Remote Partitioning</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="remote-chunking"><a class="anchor" href="#remote-chunking"></a>Remote Chunking</h5>
<div class="imageblock">
<div class="content">
<img src="./images/remote-chunking-sbi.png" alt="Remote Chunking">
</div>
<div class="title">Figure 3. Remote Chunking</div>
</div>
<div class="paragraph">
<p>Taking things one step further, one can also externalize the
chunk processing by using the
<code>ChunkMessageChannelItemWriter</code>
(provided by Spring Batch Integration), which sends items out
and collects the result. Once sent, Spring Batch continues the
process of reading and grouping items, without waiting for the results.
Rather, it is the responsibility of the <code>ChunkMessageChannelItemWriter</code>
to gather the results and integrate them back into the Spring Batch process.</p>
</div>
<div class="paragraph">
<p>With Spring Integration, you have full
control over the concurrency of your processes (for instance, by
using a <code>QueueChannel</code> instead of a
<code>DirectChannel</code>). Furthermore, by relying on
Spring Integration&#8217;s rich collection of Channel Adapters (such as
JMS and AMQP), you can distribute chunks of a Batch job to
external systems for processing.</p>
</div>
<div class="paragraph">
<p>A simple job with a step to be remotely chunked might have a
configuration similar to the following:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">personJob</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;tasklet&gt;</span>
      <span class="tag">&lt;chunk</span> <span class="attribute-name">reader</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemReader</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">writer</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemWriter</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">commit-interval</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">200</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/tasklet&gt;</span>
    ...
  <span class="tag">&lt;/step&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="directive">public</span> Job chunkJob() {
     <span class="keyword">return</span> jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">personJob</span><span class="delimiter">&quot;</span></span>)
             .start(stepBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>)
                     .&lt;Person, Person&gt;chunk(<span class="integer">200</span>)
                     .reader(itemReader())
                     .writer(itemWriter())
                     .build())
             .build();
 }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ItemReader</code> reference points to the bean you want
to use for reading data on the master. The <code>ItemWriter</code> reference
points to a special <code>ItemWriter</code>
(called <code>ChunkMessageChannelItemWriter</code>),
as described above. The processor (if any) is left off the
master configuration, as it is configured on the worker. The
following configuration provides a basic master setup. You
should check any additional component properties, such as
throttle limits and so on, when implementing your use case.</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">connectionFactory</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.activemq.ActiveMQConnectionFactory</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">brokerURL</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;int-jms:outbound-channel-adapter</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jmsRequests</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">destination-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">messagingTemplate</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.integration.core.MessagingTemplate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">receiveTimeout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">2000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemWriter</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.chunk.ChunkMessageChannelItemWriter</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">scope</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">messagingOperations</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">messagingTemplate</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replyChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;int:queue</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/int:channel&gt;</span>

<span class="tag">&lt;int-jms:message-driven-channel-adapter</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jmsReplies</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">destination-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> org.apache.activemq.ActiveMQConnectionFactory connectionFactory() {
    ActiveMQConnectionFactory factory = <span class="keyword">new</span> ActiveMQConnectionFactory();
    factory.setBrokerURL(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> factory;
}

<span class="comment">/*
 * Configure outbound flow (requests going to workers)
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel requests() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow outboundFlow(ActiveMQConnectionFactory connectionFactory) {
    <span class="keyword">return</span> IntegrationFlows
            .from(requests())
            .handle(Jms.outboundAdapter(connectionFactory).destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span>))
            .get();
}

<span class="comment">/*
 * Configure inbound flow (replies coming from workers)
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> QueueChannel replies() {
    <span class="keyword">return</span> <span class="keyword">new</span> QueueChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow inboundFlow(ActiveMQConnectionFactory connectionFactory) {
    <span class="keyword">return</span> IntegrationFlows
            .from(Jms.messageDrivenChannelAdapter(connectionFactory).destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>))
            .channel(replies())
            .get();
}

<span class="comment">/*
 * Configure the ChunkMessageChannelItemWriter
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> ItemWriter&lt;<span class="predefined-type">Integer</span>&gt; itemWriter() {
    MessagingTemplate messagingTemplate = <span class="keyword">new</span> MessagingTemplate();
    messagingTemplate.setDefaultChannel(requests());
    messagingTemplate.setReceiveTimeout(<span class="integer">2000</span>);
    ChunkMessageChannelItemWriter&lt;<span class="predefined-type">Integer</span>&gt; chunkMessageChannelItemWriter
            = <span class="keyword">new</span> ChunkMessageChannelItemWriter&lt;&gt;();
    chunkMessageChannelItemWriter.setMessagingOperations(messagingTemplate);
    chunkMessageChannelItemWriter.setReplyChannel(replies());
    <span class="keyword">return</span> chunkMessageChannelItemWriter;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding configuration provides us with a number of beans. We
configure our messaging middleware using ActiveMQ and the
inbound/outbound JMS adapters provided by Spring Integration. As
shown, our <code>itemWriter</code> bean, which is
referenced by our job step, uses the
<code>ChunkMessageChannelItemWriter</code> for writing chunks over the
configured middleware.</p>
</div>
<div class="paragraph">
<p>Now we can move on to the worker configuration, as shown in the following example:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">connectionFactory</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.apache.activemq.ActiveMQConnectionFactory</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">brokerURL</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int-jms:message-driven-channel-adapter</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">incomingRequests</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">destination-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int-jms:outbound-channel-adapter</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outgoingReplies</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">destination-name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/int-jms:outbound-channel-adapter&gt;</span>

<span class="tag">&lt;int:service-activator</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">serviceActivator</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">input-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">output-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chunkProcessorChunkHandler</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">method</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">handleChunk</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chunkProcessorChunkHandler</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.chunk.ChunkProcessorChunkHandler</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">chunkProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.core.step.item.SimpleChunkProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemWriter</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">io.spring.sbi.PersonItemWriter</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/property&gt;</span>
      <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">itemProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">io.spring.sbi.PersonItemProcessor</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;/property&gt;</span>
    <span class="tag">&lt;/bean&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Bean</span>
<span class="directive">public</span> org.apache.activemq.ActiveMQConnectionFactory connectionFactory() {
    ActiveMQConnectionFactory factory = <span class="keyword">new</span> ActiveMQConnectionFactory();
    factory.setBrokerURL(<span class="string"><span class="delimiter">&quot;</span><span class="content">tcp://localhost:61616</span><span class="delimiter">&quot;</span></span>);
    <span class="keyword">return</span> factory;
}

<span class="comment">/*
 * Configure inbound flow (requests coming from the master)
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel requests() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow inboundFlow(ActiveMQConnectionFactory connectionFactory) {
    <span class="keyword">return</span> IntegrationFlows
            .from(Jms.messageDrivenChannelAdapter(connectionFactory).destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span>))
            .channel(requests())
            .get();
}

<span class="comment">/*
 * Configure outbound flow (replies going to the master)
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel replies() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow outboundFlow(ActiveMQConnectionFactory connectionFactory) {
    <span class="keyword">return</span> IntegrationFlows
            .from(replies())
            .handle(Jms.outboundAdapter(connectionFactory).destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>))
            .get();
}

<span class="comment">/*
 * Configure the ChunkProcessorChunkHandler
 */</span>
<span class="annotation">@Bean</span>
<span class="annotation">@ServiceActivator</span>(inputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">requests</span><span class="delimiter">&quot;</span></span>, outputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">replies</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> ChunkProcessorChunkHandler&lt;<span class="predefined-type">Integer</span>&gt; chunkProcessorChunkHandler() {
    ChunkProcessor&lt;<span class="predefined-type">Integer</span>&gt; chunkProcessor
            = <span class="keyword">new</span> SimpleChunkProcessor&lt;&gt;(itemProcessor(), itemWriter());
    ChunkProcessorChunkHandler&lt;<span class="predefined-type">Integer</span>&gt; chunkProcessorChunkHandler
            = <span class="keyword">new</span> ChunkProcessorChunkHandler&lt;&gt;();
    chunkProcessorChunkHandler.setChunkProcessor(chunkProcessor);
    <span class="keyword">return</span> chunkProcessorChunkHandler;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Most of these configuration items should look familiar from the
master configuration. Workers do not need access to
the Spring Batch <code>JobRepository</code> nor
to the actual job configuration file. The main bean of interest
is the <code>chunkProcessorChunkHandler</code>. The
<code>chunkProcessor</code> property of <code>ChunkProcessorChunkHandler</code> takes a
configured <code>SimpleChunkProcessor</code>, which is where you would provide a reference to your
<code>ItemWriter</code> (and, optionally, your
<code>ItemProcessor</code>) that will run on the worker
when it receives chunks from the master.</p>
</div>
<div class="paragraph">
<p>For more information, see the section of the "Scalability" chapter on
<a href="https://docs.spring.io/spring-batch/reference/html/scalability.html#remoteChunking">Remote Chunking</a>.</p>
</div>
<div class="paragraph">
<p>Starting from version 4.1, Spring Batch Integration introduces the <code>@EnableBatchIntegration</code>
annotation that can be used to simplify a remote chunking setup. This annotation provides
two beans that can be autowired in the application context:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RemoteChunkingMasterStepBuilderFactory</code>: used to configure the master step</p>
</li>
<li>
<p><code>RemoteChunkingWorkerBuilder</code>: used to configure the remote worker integration flow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These APIs take care of configuring a number of components as described in the following diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/remote-chunking-config.png" alt="Remote Chunking Configuration">
</div>
<div class="title">Figure 4. Remote Chunking Configuration</div>
</div>
<div class="paragraph">
<p>On the master side, the <code>RemoteChunkingMasterStepBuilderFactory</code> allows you to
configure a master step by declaring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the item reader to read items and send them to workers</p>
</li>
<li>
<p>the output channel ("Outgoing requests") to send requests to workers</p>
</li>
<li>
<p>the input channel ("Incoming replies") to receive replies from workers</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A <code>ChunkMessageChannelItemWriter</code> and the <code>MessagingTemplate</code> are not needed to be explicitly configured
(Those can still be explicitly configured if required).</p>
</div>
<div class="paragraph">
<p>On the worker side, the <code>RemoteChunkingWorkerBuilder</code> allows you to configure a worker to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>listen to requests sent by the master on the input channel ("Incoming requests")</p>
</li>
<li>
<p>call the <code>handleChunk</code> method of <code>ChunkProcessorChunkHandler</code> for each request
with the configured <code>ItemProcessor</code> and <code>ItemWriter</code></p>
</li>
<li>
<p>send replies on the output channel ("Outgoing replies") to the master</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no need to explicitly configure the <code>SimpleChunkProcessor</code>
and the <code>ChunkProcessorChunkHandler</code> (Those can be explicitly configured if required).</p>
</div>
<div class="paragraph">
<p>The following example shows how to use these APIs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@EnableBatchIntegration</span>
<span class="annotation">@EnableBatchProcessing</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RemoteChunkingJobConfiguration</span> {

    <span class="annotation">@Configuration</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">MasterConfiguration</span> {

        <span class="annotation">@Autowired</span>
        <span class="directive">private</span> RemoteChunkingMasterStepBuilderFactory masterStepBuilderFactory;

        <span class="annotation">@Bean</span>
        <span class="directive">public</span> TaskletStep masterStep() {
            <span class="keyword">return</span> <span class="local-variable">this</span>.masterStepBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">masterStep</span><span class="delimiter">&quot;</span></span>)
                       .chunk(<span class="integer">100</span>)
                       .reader(itemReader())
                       .outputChannel(requests()) <span class="comment">// requests sent to workers</span>
                       .inputChannel(replies())   <span class="comment">// replies received from workers</span>
                       .build();
        }

        <span class="comment">// Middleware beans setup omitted</span>

    }

    <span class="annotation">@Configuration</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">WorkerConfiguration</span> {

        <span class="annotation">@Autowired</span>
        <span class="directive">private</span> RemoteChunkingWorkerBuilder workerBuilder;

        <span class="annotation">@Bean</span>
        <span class="directive">public</span> IntegrationFlow workerFlow() {
            <span class="keyword">return</span> <span class="local-variable">this</span>.workerBuilder
                       .itemProcessor(itemProcessor())
                       .itemWriter(itemWriter())
                       .inputChannel(requests()) <span class="comment">// requests received from the master</span>
                       .outputChannel(replies()) <span class="comment">// replies sent to the master</span>
                       .build();
        }

        <span class="comment">// Middleware beans setup omitted</span>

    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find a complete example of a remote chunking job
<a href="https://github.com/spring-projects/spring-batch/tree/master/spring-batch-samples#remote-chunking-sample">here</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="remote-partitioning"><a class="anchor" href="#remote-partitioning"></a>Remote Partitioning</h5>
<div class="imageblock">
<div class="content">
<img src="./images/remote-partitioning.png" alt="Remote Partitioning">
</div>
<div class="title">Figure 5. Remote Partitioning</div>
</div>
<div class="paragraph">
<p>Remote Partitioning, on the other hand, is useful when it
is not the processing of items but rather the associated I/O that
causes the bottleneck. Using Remote Partitioning, work can
be farmed out to workers that execute complete Spring Batch
steps. Thus, each worker has its own <code>ItemReader</code>, <code>ItemProcessor</code>, and
<code>ItemWriter</code>. For this purpose, Spring Batch
Integration provides the <code>MessageChannelPartitionHandler</code>.</p>
</div>
<div class="paragraph">
<p>This implementation of the <code>PartitionHandler</code>
interface uses <code>MessageChannel</code> instances to
send instructions to remote workers and receive their responses.
This provides a nice abstraction from the transports (such as JMS
and AMQP) being used to communicate with the remote workers.</p>
</div>
<div class="paragraph">
<p>The section of the "Scalability" chapter that addresses
<a href="scalability.html#partitioning">remote partitioning</a> provides an overview of the concepts and
components needed to configure remote partitioning and shows an
example of using the default
<code>TaskExecutorPartitionHandler</code> to partition
in separate local threads of execution. For remote partitioning
to multiple JVMs, two additional components are required:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A remoting fabric or grid environment</p>
</li>
<li>
<p>A <code>PartitionHandler</code> implementation that supports the desired
remoting fabric or grid environment</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Similar to remote chunking, JMS can be used as the "remoting
fabric". In that case, use a <code>MessageChannelPartitionHandler</code> instance as the <code>PartitionHandler</code> implementation,
as described above.
The following example
assumes an existing partitioned job and focuses on
the <code>MessageChannelPartitionHandler</code> and JMS
configuration:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">partitionHandler</span><span class="delimiter">&quot;</span></span>
   <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.partition.MessageChannelPartitionHandler</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepName</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">gridSize</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">3</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">replyChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-replies</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">messagingOperations</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;bean</span> <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.integration.core.MessagingTemplate</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">defaultChannel</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">receiveTimeout</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">100000</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/bean&gt;</span>
  <span class="tag">&lt;/property&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int-jms:outbound-channel-adapter</span> <span class="attribute-name">destination</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requestsQueue</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int-jms:message-driven-channel-adapter</span> <span class="attribute-name">destination</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">requestsQueue</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-requests</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionRequestHandler</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.partition.StepExecutionRequestHandler</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobExplorer</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">jobExplorer</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
  <span class="tag">&lt;property</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepLocator</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepLocator</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;/bean&gt;</span>

<span class="tag">&lt;int:service-activator</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepExecutionRequestHandler</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">input-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-requests</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">output-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-staging</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-staging</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int-jms:outbound-channel-adapter</span> <span class="attribute-name">destination</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stagingQueue</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-staging</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-staging</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
<span class="tag">&lt;int-jms:message-driven-channel-adapter</span> <span class="attribute-name">destination</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stagingQueue</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-staging</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:aggregator</span> <span class="attribute-name">ref</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">partitionHandler</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">input-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">inbound-staging</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">output-channel</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-replies</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>

<span class="tag">&lt;int:channel</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">outbound-replies</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;int:queue</span><span class="tag">/&gt;</span>
<span class="tag">&lt;/int:channel&gt;</span>

<span class="tag">&lt;bean</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">stepLocator</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">class</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.springframework.batch.integration.partition.BeanFactoryStepLocator</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="comment">/*
 * Configuration of the master side
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> PartitionHandler partitionHandler() {
    MessageChannelPartitionHandler partitionHandler = <span class="keyword">new</span> MessageChannelPartitionHandler();
    partitionHandler.setStepName(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1</span><span class="delimiter">&quot;</span></span>);
    partitionHandler.setGridSize(<span class="integer">3</span>);
    partitionHandler.setReplyChannel(outboundReplies());
    MessagingTemplate template = <span class="keyword">new</span> MessagingTemplate();
    template.setDefaultChannel(outboundRequests());
    template.setReceiveTimeout(<span class="integer">100000</span>);
    partitionHandler.setMessagingOperations(template);
    <span class="keyword">return</span> partitionHandler;
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> QueueChannel outboundReplies() {
    <span class="keyword">return</span> <span class="keyword">new</span> QueueChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel outboundRequests() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow outboundJmsRequests() {
    <span class="keyword">return</span> IntegrationFlows.from(<span class="string"><span class="delimiter">&quot;</span><span class="content">outboundRequests</span><span class="delimiter">&quot;</span></span>)
            .handle(Jms.outboundGateway(connectionFactory())
                    .requestDestination(<span class="string"><span class="delimiter">&quot;</span><span class="content">requestsQueue</span><span class="delimiter">&quot;</span></span>))
            .get();
}

<span class="annotation">@Bean</span>
<span class="annotation">@ServiceActivator</span>(inputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">inboundStaging</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> AggregatorFactoryBean partitioningMessageHandler() <span class="directive">throws</span> <span class="exception">Exception</span> {
    AggregatorFactoryBean aggregatorFactoryBean = <span class="keyword">new</span> AggregatorFactoryBean();
    aggregatorFactoryBean.setProcessorBean(partitionHandler());
    aggregatorFactoryBean.setOutputChannel(outboundReplies());
    <span class="comment">// configure other propeties of the aggregatorFactoryBean</span>
    <span class="keyword">return</span> aggregatorFactoryBean;
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel inboundStaging() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow inboundJmsStaging() {
    <span class="keyword">return</span> IntegrationFlows
            .from(Jms.messageDrivenChannelAdapter(connectionFactory())
                    .configureListenerContainer(c -&gt; c.subscriptionDurable(<span class="predefined-constant">false</span>))
                    .destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">stagingQueue</span><span class="delimiter">&quot;</span></span>))
            .channel(inboundStaging())
            .get();
}

<span class="comment">/*
 * Configuration of the worker side
 */</span>
<span class="annotation">@Bean</span>
<span class="directive">public</span> StepExecutionRequestHandler stepExecutionRequestHandler() {
    StepExecutionRequestHandler stepExecutionRequestHandler = <span class="keyword">new</span> StepExecutionRequestHandler();
    stepExecutionRequestHandler.setJobExplorer(jobExplorer);
    stepExecutionRequestHandler.setStepLocator(stepLocator());
    <span class="keyword">return</span> stepExecutionRequestHandler;
}

<span class="annotation">@Bean</span>
<span class="annotation">@ServiceActivator</span>(inputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">inboundRequests</span><span class="delimiter">&quot;</span></span>, outputChannel = <span class="string"><span class="delimiter">&quot;</span><span class="content">outboundStaging</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> StepExecutionRequestHandler serviceActivator() <span class="directive">throws</span> <span class="exception">Exception</span> {
    <span class="keyword">return</span> stepExecutionRequestHandler();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel inboundRequests() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="directive">public</span> IntegrationFlow inboundJmsRequests() {
    <span class="keyword">return</span> IntegrationFlows
            .from(Jms.messageDrivenChannelAdapter(connectionFactory())
                    .configureListenerContainer(c -&gt; c.subscriptionDurable(<span class="predefined-constant">false</span>))
                    .destination(<span class="string"><span class="delimiter">&quot;</span><span class="content">requestsQueue</span><span class="delimiter">&quot;</span></span>))
            .channel(inboundRequests())
            .get();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> DirectChannel outboundStaging() {
    <span class="keyword">return</span> <span class="keyword">new</span> DirectChannel();
}

<span class="annotation">@Bean</span>
<span class="directive">public</span> IntegrationFlow outboundJmsStaging() {
    <span class="keyword">return</span> IntegrationFlows.from(<span class="string"><span class="delimiter">&quot;</span><span class="content">outboundStaging</span><span class="delimiter">&quot;</span></span>)
            .handle(Jms.outboundGateway(connectionFactory())
                    .requestDestination(<span class="string"><span class="delimiter">&quot;</span><span class="content">stagingQueue</span><span class="delimiter">&quot;</span></span>))
            .get();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You must also ensure that the partition <code>handler</code> attribute maps to the <code>partitionHandler</code> bean, as shown in the following example:</p>
</div>
<div class="listingblock xmlContent">
<div class="title">XML Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="tag">&lt;job</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">personJob</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;step</span> <span class="attribute-name">id</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">step1.master</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;partition</span> <span class="attribute-name">partitioner</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">partitioner</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">handler</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">partitionHandler</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    ...
  <span class="tag">&lt;/step&gt;</span>
<span class="tag">&lt;/job&gt;</span></code></pre>
</div>
</div>
<div class="listingblock javaContent">
<div class="title">Java Configuration</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">        <span class="directive">public</span> Job personJob() {
                <span class="keyword">return</span> jobBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">personJob</span><span class="delimiter">&quot;</span></span>)
                                .start(stepBuilderFactory.get(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1.master</span><span class="delimiter">&quot;</span></span>)
                                                .partitioner(<span class="string"><span class="delimiter">&quot;</span><span class="content">step1.worker</span><span class="delimiter">&quot;</span></span>, partitioner())
                                                .partitionHandler(partitionHandler())
                                                .build())
                                .build();
        }</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find a complete example of a remote partitioning job
<a href="https://github.com/spring-projects/spring-batch/tree/master/spring-batch-samples#remote-partitioning-sample">here</a>.</p>
</div>
<div class="paragraph">
<p>The <code>@EnableBatchIntegration</code> annotation that can be used to simplify a remote
 partitioning setup. This annotation provides two beans useful for remote partitioning:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>RemotePartitioningMasterStepBuilderFactory</code>: used to configure the master step</p>
</li>
<li>
<p><code>RemotePartitioningWorkerStepBuilderFactory</code>: used to configure the worker step</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These APIs take care of configuring a number of components as described in the following diagram:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/remote-partitioning-polling-config.png" alt="Remote Partitioning Configuration (with job repository polling)">
</div>
<div class="title">Figure 6. Remote Partitioning Configuration (with job repository polling)</div>
</div>
<div class="imageblock">
<div class="content">
<img src="./images/remote-partitioning-aggregation-config.png" alt="Remote Partitioning Configuration (with replies aggregation)">
</div>
<div class="title">Figure 7. Remote Partitioning Configuration (with replies aggregation)</div>
</div>
<div class="paragraph">
<p>On the master side, the <code>RemotePartitioningMasterStepBuilderFactory</code> allows you to
configure a master step by declaring:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>Partitioner</code> used to partition data</p>
</li>
<li>
<p>the output channel ("Outgoing requests") to send requests to workers</p>
</li>
<li>
<p>the input channel ("Incoming replies") to receive replies from workers (when configuring replies aggregation)</p>
</li>
<li>
<p>the poll interval and timeout parameters (when configuring job repository polling)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>MessageChannelPartitionHandler</code> and the <code>MessagingTemplate</code> are not needed to be explicitly configured
(Those can still be explicitly configured if required).</p>
</div>
<div class="paragraph">
<p>On the worker side, the <code>RemotePartitioningWorkerStepBuilderFactory</code> allows you to configure a worker to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>listen to requests sent by the master on the input channel ("Incoming requests")</p>
</li>
<li>
<p>call the <code>handle</code> method of <code>StepExecutionRequestHandler</code> for each request</p>
</li>
<li>
<p>send replies on the output channel ("Outgoing replies") to the master</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is no need to explicitly configure the <code>StepExecutionRequestHandler</code> (which can be explicitly configured if required).</p>
</div>
<div class="paragraph">
<p>The following example shows how to use these APIs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Configuration</span>
<span class="annotation">@EnableBatchProcessing</span>
<span class="annotation">@EnableBatchIntegration</span>
<span class="directive">public</span> <span class="type">class</span> <span class="class">RemotePartitioningJobConfiguration</span> {

    <span class="annotation">@Configuration</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">MasterConfiguration</span> {

        <span class="annotation">@Autowired</span>
        <span class="directive">private</span> RemotePartitioningMasterStepBuilderFactory masterStepBuilderFactory;

        <span class="annotation">@Bean</span>
        <span class="directive">public</span> Step masterStep() {
                 <span class="keyword">return</span> <span class="local-variable">this</span>.masterStepBuilderFactory
                    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">masterStep</span><span class="delimiter">&quot;</span></span>)
                    .partitioner(<span class="string"><span class="delimiter">&quot;</span><span class="content">workerStep</span><span class="delimiter">&quot;</span></span>, partitioner())
                    .gridSize(<span class="integer">10</span>)
                    .outputChannel(outgoingRequestsToWorkers())
                    .inputChannel(incomingRepliesFromWorkers())
                    .build();
        }

        <span class="comment">// Middleware beans setup omitted</span>

    }

    <span class="annotation">@Configuration</span>
    <span class="directive">public</span> <span class="directive">static</span> <span class="type">class</span> <span class="class">WorkerConfiguration</span> {

        <span class="annotation">@Autowired</span>
        <span class="directive">private</span> RemotePartitioningWorkerStepBuilderFactory workerStepBuilderFactory;

        <span class="annotation">@Bean</span>
        <span class="directive">public</span> Step workerStep() {
                 <span class="keyword">return</span> <span class="local-variable">this</span>.workerStepBuilderFactory
                    .get(<span class="string"><span class="delimiter">&quot;</span><span class="content">workerStep</span><span class="delimiter">&quot;</span></span>)
                    .inputChannel(incomingRequestsFromMaster())
                    .outputChannel(outgoingRepliesToMaster())
                    .chunk(<span class="integer">100</span>)
                    .reader(itemReader())
                    .processor(itemProcessor())
                    .writer(itemWriter())
                    .build();
        }

        <span class="comment">// Middleware beans setup omitted</span>

    }

}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 4.1.2.RELEASE<br>
Last updated 2019-04-03 09:14:50 UTC
</div>
</div>
<script type="text/javascript" src="tocbot-3.0.2/tocbot.js"></script>
<script type="text/javascript" >

    // Tocbot dynamic TOC, works with tocbot 3.0.2
    // Source: https://github.com/asciidoctor/asciidoctor/issues/699#issuecomment-321066006

    var oldtoc = document.getElementById('toctitle').nextElementSibling;
    var newtoc = document.createElement('div');
    newtoc.setAttribute('id', 'tocbot');
    newtoc.setAttribute('class', 'js-toc');
    oldtoc.parentNode.replaceChild(newtoc, oldtoc);
    tocbot.init({ contentSelector: '#content',
        headingSelector: 'h1, h2, h3, h4, h5',
        smoothScroll: false });
    var handleTocRefresh = function() {
        tocbot.refresh();
    }
    var handleTocOnResize = function() {
        var width = window.innerWidth
                    || document.documentElement.clientWidth
                    || document.body.clientWidth;
        if (width < 768) {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 6,
                activeLinkClass: 'ignoreactive',
                throttleTimeout: 1000,
                smoothScroll: false });
        }
        else {
            tocbot.refresh({ contentSelector: '#content',
                headingSelector: 'h1, h2, h3, h4, h5',
                smoothScroll: false });
        }
    };
    window.addEventListener('resize', handleTocOnResize);
    window.addEventListener('tocRefresh', handleTocRefresh);
    handleTocOnResize();

    var link = document.createElement("a");
    link.setAttribute("href", "index.html");
    link.innerHTML = "<i class=\"fa fa-chevron-left\"></i>&nbsp;&nbsp;Back to index";
    var p = document.createElement("p");
    p.setAttribute("id", "backToIndex");
    p.appendChild(link);
    var toc = document.getElementById('toc');
    toc.insertBefore(p, toctitle);

</script>
</body>
</html>