<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<meta name="author" content="Sabby Anandan, Marius Bogoevici, Eric Bottard, Mark Fisher, Ilayaperumal Gopinathan, Gunnar Hillert, Mark Pollack, Patrick Peralta, Glenn Renfro, Thomas Risberg, Dave Syer, David Turanski, Janne Valkealahti, Oleg Zhurakousky, Jay Bryant, Vinicius Carvalho, Chris Schaefer, Damien Vitrac, Christian Tzolov">
<title>Spring Cloud Data Flow Reference Guide</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-left">
<div id="header">
<h1>Spring Cloud Data Flow Reference Guide</h1>
<div class="details">
<span id="author" class="author">Sabby Anandan</span><br>
<span id="author2" class="author">Marius Bogoevici</span><br>
<span id="author3" class="author">Eric Bottard</span><br>
<span id="author4" class="author">Mark Fisher</span><br>
<span id="author5" class="author">Ilayaperumal Gopinathan</span><br>
<span id="author6" class="author">Gunnar Hillert</span><br>
<span id="author7" class="author">Mark Pollack</span><br>
<span id="author8" class="author">Patrick Peralta</span><br>
<span id="author9" class="author">Glenn Renfro</span><br>
<span id="author10" class="author">Thomas Risberg</span><br>
<span id="author11" class="author">Dave Syer</span><br>
<span id="author12" class="author">David Turanski</span><br>
<span id="author13" class="author">Janne Valkealahti</span><br>
<span id="author14" class="author">Oleg Zhurakousky</span><br>
<span id="author15" class="author">Jay Bryant</span><br>
<span id="author16" class="author">Vinicius Carvalho</span><br>
<span id="author17" class="author">Chris Schaefer</span><br>
<span id="author18" class="author">Damien Vitrac</span><br>
<span id="author19" class="author">Christian Tzolov</span><br>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#preface">Preface</a>
<ul class="sectlevel1">
<li><a href="#dataflow-documentation-about">1. About the documentation</a></li>
<li><a href="#dataflow-documentation-getting-help">2. Getting help</a></li>
</ul>
</li>
<li><a href="#getting-started">Getting Started</a>
<ul class="sectlevel1">
<li><a href="#getting-started-local">3. Getting Started - Local</a></li>
<li><a href="#getting-started-cloudfoundry">4. Getting Started - Cloud Foundry</a></li>
<li><a href="#getting-started-kubernetes">5. Getting Started - Kubernetes</a>
<ul class="sectlevel2">
<li><a href="#_application_and_server_properties">5.1. Application and Server Properties</a>
<ul class="sectlevel3">
<li><a href="#_memory_and_cpu_settings">5.1.1. Memory and CPU Settings</a></li>
<li><a href="#_environment_variables">5.1.2. Environment Variables</a></li>
<li><a href="#getting-started-kubernetes-probes">5.1.3. Liveness and Readiness Probes</a></li>
<li><a href="#_using_code_spring_application_json_code">5.1.4. Using <code>SPRING_APPLICATION_JSON</code></a></li>
<li><a href="#_private_docker_registry">5.1.5. Private Docker Registry</a></li>
<li><a href="#_annotations">5.1.6. Annotations</a></li>
<li><a href="#_entry_point_style">5.1.7. Entry Point Style</a></li>
<li><a href="#_deployment_service_account">5.1.8. Deployment Service Account</a></li>
<li><a href="#_image_pull_policy">5.1.9. Image Pull Policy</a></li>
<li><a href="#_deployment_labels">5.1.10. Deployment Labels</a></li>
<li><a href="#_tolerations">5.1.11. Tolerations</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#applications">Applications</a>
<ul class="sectlevel1">
<li><a href="#_available_applications">6. Available Applications</a></li>
</ul>
</li>
<li><a href="#architecture">Architecture</a>
<ul class="sectlevel1">
<li><a href="#arch-intro">7. Introduction</a></li>
</ul>
</li>
<li><a href="#configuration">Configuration</a>
<ul class="sectlevel1">
<li><a href="#configuration-maven">8. Maven</a></li>
<li><a href="#configuration-local">9. Configuration - Local</a>
<ul class="sectlevel2">
<li><a href="#configuration-local-enable-disable-specific-features">9.1. Feature Toggles</a></li>
<li><a href="#configuration-local-rdbms">9.2. Database</a>
<ul class="sectlevel3">
<li><a href="#_disabling_database_schema_creation_and_migration_strategies">9.2.1. Disabling database schema creation and migration strategies</a></li>
<li><a href="#_adding_a_custom_jdbc_driver">9.2.2. Adding a Custom JDBC Driver</a></li>
</ul>
</li>
<li><a href="#configuration-local-deployer">9.3. Deployer Properties</a></li>
<li><a href="#configuration-local-logging">9.4. Logging</a></li>
<li><a href="#configuration-local-streams">9.5. Streams</a></li>
<li><a href="#configuration-local-tasks">9.6. Tasks</a></li>
<li><a href="#configuration-local-security">9.7. Security</a>
<ul class="sectlevel3">
<li><a href="#configuration-local-security-enabling-https">9.7.1. Enabling HTTPS</a>
<ul class="sectlevel4">
<li><a href="#configuration-security-self-signed-certificates">Using Self-Signed Certificates</a></li>
<li><a href="#configuration-security-self-signed-certificates-shell">Self-Signed Certificates and the Shell</a></li>
</ul>
</li>
<li><a href="#configuration-security-oauth2">9.7.2. Authentication using OAuth 2.0</a></li>
<li><a href="#configuration-security-customizing-authorization">9.7.3. Customizing Authorization</a>
<ul class="sectlevel4">
<li><a href="#configuration-security-authorization-local-shell-and-dashboard">Authorization - Shell and Dashboard Behavior</a></li>
<li><a href="#configuration-security-securing-management-endpoints">Securing the Spring Boot Management Endpoints</a></li>
</ul>
</li>
<li><a href="#configuration-security-uaa-authentication">9.7.4. Setting up UAA Authentication</a>
<ul class="sectlevel4">
<li><a href="#configuration-security-role-mapping">Role Mappings</a></li>
</ul>
</li>
<li><a href="#configuration-security-ldap-authentication">9.7.5. LDAP Authentication</a>
<ul class="sectlevel4">
<li><a href="#configuration-security-ldap-role-mapping">LDAP Role Mapping</a></li>
<li><a href="#configuration-security-ldap-uaa-example">LDAP Security and UAA Example Application</a></li>
</ul>
</li>
<li><a href="#configuration-security-spring-security-oauth2-example">9.7.6. Spring Security OAuth2 Resource/Authorization Server Sample</a></li>
<li><a href="#configuration-security-shell-authentication">9.7.7. Data Flow Shell Authentication</a></li>
</ul>
</li>
<li><a href="#_about_configuration">9.8. About Configuration</a>
<ul class="sectlevel3">
<li><a href="#_enabling_shell_checksum_values">9.8.1. Enabling Shell Checksum values</a></li>
<li><a href="#_reserved_values_for_urls">9.8.2. Reserved Values for URLs</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#configuration-cloudfoundry">10. Configuration - Cloud Foundry</a>
<ul class="sectlevel2">
<li><a href="#configuration-cloudfoundry-enable-disable-specific-features">10.1. Feature Toggles</a></li>
<li><a href="#configuration-cloudfoundry-deployer">10.2. Deployer Properties</a></li>
<li><a href="#configuration-cloudfoundry-tasks">10.3. Tasks</a></li>
<li><a href="#configuration-app-names-cloud-foundry">10.4. Application Names and Prefixes</a></li>
<li><a href="#configuration-cloudfoundry-custom-routes">10.5. Custom Routes</a></li>
<li><a href="#configuration-cloudfoundry-docker-apps">10.6. Docker Applications</a></li>
<li><a href="#configuration-cloudfoundry-service-binding-at-application-level">10.7. Application-level Service Bindings</a></li>
<li><a href="#configure-service-binding-parameters">10.8. Configuring Service binding parameters</a></li>
<li><a href="#configuration-cloudfoundry-ups">10.9. User-provided Services</a></li>
<li><a href="#configuration-cloudfoundry-db-connection-pool">10.10. Database Connection Pool</a></li>
<li><a href="#configuration-cloudfoundry-maximum-disk-quota-configuration">10.11. Maximum Disk Quota</a>
<ul class="sectlevel3">
<li><a href="#_pcf_s_operations_manager">10.11.1. PCF&#8217;s Operations Manager</a></li>
</ul>
</li>
<li><a href="#configuration-cloudfoundry-scaling">10.12. Scale Application</a></li>
<li><a href="#configuration-cloudfoundry-managing-disk-utilization">10.13. Managing Disk Use</a></li>
<li><a href="#configuration-cloudfoundry-app-resolution-options">10.14. Application Resolution Alternatives</a></li>
<li><a href="#configuration-cloudfoundry-security">10.15. Security</a>
<ul class="sectlevel3">
<li><a href="#configuration-cloudfoundry-authentication">10.15.1. Authentication</a>
<ul class="sectlevel4">
<li><a href="#configuration-cloudfoundry-security-sso">Pivotal Single Sign-On Service</a></li>
<li><a href="#configuration-cloudfoundry-security-uaa">Cloud Foundry UAA</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_configuration_reference">10.16. Configuration Reference</a></li>
<li><a href="#_debugging">10.17. Debugging</a></li>
<li><a href="#_spring_cloud_config_server">10.18. Spring Cloud Config Server</a>
<ul class="sectlevel3">
<li><a href="#_stream_task_and_spring_cloud_config_server">10.18.1. Stream, Task, and Spring Cloud Config Server</a></li>
<li><a href="#_sample_manifest_template">10.18.2. Sample Manifest Template</a></li>
<li><a href="#_self_signed_ssl_certificate_and_spring_cloud_config_server">10.18.3. Self-signed SSL Certificate and Spring Cloud Config Server</a></li>
</ul>
</li>
<li><a href="#configuration-cloudfoundry-scheduling">10.19. Configure Scheduling</a></li>
</ul>
</li>
<li><a href="#configuration-kubernetes">11. Configuration - Kubernetes</a>
<ul class="sectlevel2">
<li><a href="#configuration-kubernetes-enable-disable-specific-features">11.1. Feature Toggles</a></li>
<li><a href="#configuration-kubernetes-deployer">11.2. Deployer Properties</a></li>
<li><a href="#configuration-kubernetes-tasks">11.3. Tasks</a></li>
<li><a href="#configuration-kubernetes-general">11.4. General Configuration</a>
<ul class="sectlevel3">
<li><a href="#_using_configmap_and_secrets">11.4.1. Using ConfigMap and Secrets</a></li>
</ul>
</li>
<li><a href="#configuration-kubernetes-rdbms">11.5. Database Configuration</a></li>
<li><a href="#configuration-kubernetes-monitoring-management">11.6. Monitoring and Management</a>
<ul class="sectlevel3">
<li><a href="#_inspecting_server_logs">11.6.1. Inspecting Server Logs</a></li>
<li><a href="#_streams">11.6.2. Streams</a></li>
<li><a href="#_tasks">11.6.3. Tasks</a></li>
</ul>
</li>
<li><a href="#_scheduling">11.7. Scheduling</a>
<ul class="sectlevel3">
<li><a href="#_entry_point_style_2">11.7.1. Entry Point Style</a></li>
<li><a href="#_environment_variables_2">11.7.2. Environment Variables</a></li>
<li><a href="#_image_pull_policy_2">11.7.3. Image Pull Policy</a></li>
<li><a href="#_private_docker_registry_2">11.7.4. Private Docker Registry</a></li>
<li><a href="#_namespace">11.7.5. Namespace</a></li>
<li><a href="#_service_account">11.7.6. Service Account</a></li>
</ul>
</li>
<li><a href="#_debug_support">11.8. Debug Support</a>
<ul class="sectlevel3">
<li><a href="#_enabling_debugging_manually">11.8.1. Enabling Debugging Manually</a></li>
<li><a href="#_enabling_debugging_with_patching">11.8.2. Enabling Debugging with Patching</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#shell">Shell</a>
<ul class="sectlevel1">
<li><a href="#shell-options">12. Shell Options</a></li>
<li><a href="#shell-commands">13. Listing Available Commands</a></li>
<li><a href="#shell-tab-completion">14. Tab Completion</a></li>
<li><a href="#shell-white-space">15. White Space and Quoting Rules</a>
<ul class="sectlevel2">
<li><a href="#dsl-quotes-escaping">15.1. Quotes and Escaping</a>
<ul class="sectlevel3">
<li><a href="#_shell_rules">15.1.1. Shell rules</a></li>
<li><a href="#_property_files_rules">15.1.2. Property files rules</a></li>
<li><a href="#_dsl_parsing_rules">15.1.3. DSL Parsing Rules</a></li>
<li><a href="#_spel_syntax_and_spel_literals">15.1.4. SpEL Syntax and SpEL Literals</a></li>
<li><a href="#_putting_it_all_together">15.1.5. Putting It All Together</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-streams">Streams</a>
<ul class="sectlevel1">
<li><a href="#spring-cloud-dataflow-stream-intro">16. Introduction</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-dataflow-stream-intro-dsl">16.1. Stream Pipeline DSL</a></li>
<li><a href="#spring-cloud-dataflow-stream-app-dsl">16.2. Stream Application DSL</a></li>
<li><a href="#_application_properties">16.3. Application properties</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-stream-lifecycle">17. Stream Lifecycle</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-dataflow-register-stream-apps">17.1. Register a Stream App</a>
<ul class="sectlevel3">
<li><a href="#supported-apps-and-tasks">17.1.1. Register Supported Applications and Tasks</a>
<ul class="sectlevel4">
<li><a href="#_spring_cloud_stream_app_starters">Spring Cloud Stream App Starters</a></li>
<li><a href="#_spring_cloud_task_app_starters">Spring Cloud Task App Starters</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-stream-app-whitelisting">17.1.2. Whitelisting application properties</a></li>
<li><a href="#spring-cloud-dataflow-stream-app-metadata-artifact">17.1.3. Creating and Using a Dedicated Metadata Artifact</a></li>
<li><a href="#_using_the_companion_artifact">17.1.4. Using the Companion Artifact</a></li>
<li><a href="#custom-applications">17.1.5. Creating Custom Applications</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-create-stream">17.2. Creating a Stream</a>
<ul class="sectlevel3">
<li><a href="#_application_properties_2">17.2.1. Application Properties</a></li>
<li><a href="#spring-cloud-dataflow-global-properties">17.2.2. Common Application Properties</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-deploy-stream">17.3. Deploying a Stream</a>
<ul class="sectlevel3">
<li><a href="#_deployment_properties">17.3.1. Deployment Properties</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-destroy-stream">17.4. Destroying a Stream</a></li>
<li><a href="#spring-cloud-dataflow-undeploy-stream">17.5. Undeploying a Stream</a></li>
<li><a href="#spring-cloud-dataflow-validate-stream">17.6. Validating a Stream</a></li>
<li><a href="#spring-cloud-dataflow-stream-lifecycle-update">17.7. Updating a Stream</a></li>
<li><a href="#spring-cloud-dataflow-stream-lifecycle-force-update">17.8. Force update of a Stream</a></li>
<li><a href="#_stream_versions">17.9. Stream versions</a></li>
<li><a href="#_stream_manifests">17.10. Stream Manifests</a></li>
<li><a href="#spring-cloud-dataflow-stream-lifecycle-rollback">17.11. Rollback a Stream</a></li>
<li><a href="#_application_count">17.12. Application Count</a></li>
<li><a href="#_skipper_s_upgrade_strategy">17.13. Skipper&#8217;s Upgrade Strategy</a></li>
</ul>
</li>
<li><a href="#_stream_dsl">18. Stream DSL</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-dataflow-stream-dsl-tap">18.1. Tap a Stream</a></li>
<li><a href="#spring-cloud-dataflow-stream-dsl-labels">18.2. Using Labels in a Stream</a></li>
<li><a href="#spring-cloud-dataflow-stream-dsl-named-destinations">18.3. Named Destinations</a></li>
<li><a href="#spring-cloud-dataflow-stream-dsl-fanin-fanout">18.4. Fan-in and Fan-out</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-stream-java-dsl">19. Stream Java DSL</a></li>
<li><a href="#spring-cloud-dataflow-stream-multi-binder">20. Stream Applications with Multiple Binder Configurations</a></li>
<li><a href="#spring-cloud-dataflow-stream-function-composition">21. Function Composition</a></li>
<li><a href="#spring-cloud-dataflow-stream-examples">22. Examples</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-dataflow-simple-stream">22.1. Simple Stream Processing</a></li>
<li><a href="#spring-cloud-dataflow-stream-partitions">22.2. Stateful Stream Processing</a></li>
<li><a href="#spring-cloud-dataflow-stream-app-types">22.3. Other Source and Sink Application Types</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#streams-dev-guide">Stream Developer Guide</a></li>
<li><a href="#streams-monitoring">Stream Monitoring</a></li>
<li><a href="#spring-cloud-dataflow-task">Tasks</a>
<ul class="sectlevel1">
<li><a href="#spring-cloud-dataflow-task-intro">23. Introduction</a></li>
<li><a href="#_the_lifecycle_of_a_task">24. The Lifecycle of a Task</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-dataflow-create-task-apps">24.1. Creating a Task Application</a>
<ul class="sectlevel3">
<li><a href="#_task_database_configuration">24.1.1. Task Database Configuration</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-register-task-apps">24.2. Registering a Task Application</a></li>
<li><a href="#spring-cloud-dataflow-create-task-definition">24.3. Creating a Task Definition</a></li>
<li><a href="#spring-cloud-dataflow-task-launch">24.4. Launching a Task</a>
<ul class="sectlevel3">
<li><a href="#_application_properties_3">24.4.1. Application properties</a></li>
<li><a href="#_common_application_properties">24.4.2. Common application properties</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-task-limit-concurrent-executions">24.5. Limit the number concurrent task launches</a></li>
<li><a href="#spring-cloud-dataflow-task-review-executions">24.6. Reviewing Task Executions</a></li>
<li><a href="#spring-cloud-dataflow-task-definition-destroying">24.7. Destroying a Task Definition</a></li>
<li><a href="#spring-cloud-dataflow-validate-task">24.8. Validating a Task</a></li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-task-events">25. Subscribing to Task/Batch Events</a></li>
<li><a href="#spring-cloud-dataflow-composed-tasks">26. Composed Tasks</a>
<ul class="sectlevel2">
<li><a href="#_configuring_the_composed_task_runner">26.1. Configuring the Composed Task Runner</a>
<ul class="sectlevel3">
<li><a href="#_registering_the_composed_task_runner">26.1.1. Registering the Composed Task Runner</a></li>
<li><a href="#_configuring_the_composed_task_runner_2">26.1.2. Configuring the Composed Task Runner</a>
<ul class="sectlevel4">
<li><a href="#_configuration_options">Configuration Options</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_the_lifecycle_of_a_composed_task">26.2. The Lifecycle of a Composed Task</a>
<ul class="sectlevel3">
<li><a href="#spring-cloud-data-flow-composed-task-creating">26.2.1. Creating a Composed Task</a>
<ul class="sectlevel4">
<li><a href="#_task_application_parameters">Task Application Parameters</a></li>
</ul>
</li>
<li><a href="#_launching_a_composed_task">26.2.2. Launching a Composed Task</a>
<ul class="sectlevel4">
<li><a href="#_passing_properties_to_the_child_tasks">Passing properties to the child tasks</a></li>
<li><a href="#_passing_arguments_to_the_composed_task_runner">Passing arguments to the composed task runner</a></li>
<li><a href="#_exit_statuses">Exit Statuses</a></li>
</ul>
</li>
<li><a href="#_destroying_a_composed_task">26.2.3. Destroying a Composed Task</a></li>
<li><a href="#spring-cloud-data-flow-composed-task-stopping">26.2.4. Stopping a Composed Task</a></li>
<li><a href="#spring-cloud-data-flow-composed-task-restarting">26.2.5. Restarting a Composed Task</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_composed_tasks_dsl">27. Composed Tasks DSL</a>
<ul class="sectlevel2">
<li><a href="#spring-cloud-data-flow-conditional-execution">27.1. Conditional Execution</a></li>
<li><a href="#spring-cloud-data-flow-transitional-execution">27.2. Transitional Execution</a>
<ul class="sectlevel3">
<li><a href="#_basic_transition">27.2.1. Basic Transition</a></li>
<li><a href="#_transition_with_a_wildcard">27.2.2. Transition With a Wildcard</a></li>
<li><a href="#_transition_with_a_following_conditional_execution">27.2.3. Transition With a Following Conditional Execution</a></li>
</ul>
</li>
<li><a href="#spring-cloud-data-flow-split-execution">27.3. Split Execution</a>
<ul class="sectlevel3">
<li><a href="#_split_containing_conditional_execution">27.3.1. Split Containing Conditional Execution</a></li>
<li><a href="#_establishing_the_proper_thread_count_for_splits">27.3.2. Establishing the proper thread count for splits</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-launch-tasks-from-stream">28. Launching Tasks from a Stream</a>
<ul class="sectlevel2">
<li><a href="#_launching_a_composed_task_from_a_stream">28.1. Launching a Composed Task From a Stream</a></li>
</ul>
</li>
<li><a href="#sharing-spring-cloud-dataflows-datastore-with-tasks">29. Sharing Spring Cloud Data Flow&#8217;s Datastore with Tasks</a>
<ul class="sectlevel2">
<li><a href="#a-common-datastore-dependency">29.1. A Common DataStore Dependency</a></li>
<li><a href="#a-common-datastore">29.2. A Common Data Store</a>
<ul class="sectlevel3">
<li><a href="#datasource-simple-task-launch">29.2.1. Simple Task Launch</a></li>
<li><a href="#datasource-task-launcher-sink">29.2.2. Task Launcher Sink</a></li>
<li><a href="#_composed_task_runner">29.2.3. Composed Task Runner</a></li>
<li><a href="#_launching_a_task_externally_from_spring_cloud_data_flow">29.2.4. Launching a task externally from Spring Cloud Data Flow</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#spring-cloud-dataflow-schedule-launch-tasks">30. Scheduling Tasks</a>
<ul class="sectlevel2">
<li><a href="#_the_scheduler">30.1. The Scheduler</a></li>
<li><a href="#_enabling_scheduling">30.2. Enabling Scheduling</a></li>
<li><a href="#_the_lifecycle_of_a_schedule">30.3. The Lifecycle of a Schedule</a>
<ul class="sectlevel3">
<li><a href="#spring-cloud-data-flow-schedule-scheduling">30.3.1. Scheduling a Task Execution</a></li>
<li><a href="#spring-cloud-data-flow-schedule-unscheduling">30.3.2. Deleting a Schedule</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#task-dev-guide">Task Developer Guide</a></li>
<li><a href="#dashboard">Dashboard</a>
<ul class="sectlevel1">
<li><a href="#dashboard-introduction">31. Introduction</a></li>
<li><a href="#dashboard-apps">32. Apps</a>
<ul class="sectlevel2">
<li><a href="#_bulk_import_of_applications">32.1. Bulk Import of Applications</a></li>
</ul>
</li>
<li><a href="#dashboard-runtime">33. Runtime</a></li>
<li><a href="#dashboard-streams">34. Streams</a>
<ul class="sectlevel2">
<li><a href="#dashboard-stream-definitions">34.1. Working with Stream Definitions</a></li>
<li><a href="#dashboard-flo-streams-designer">34.2. Creating a Stream</a></li>
<li><a href="#dashboard-stream-deploy">34.3. Deploying a Stream</a></li>
<li><a href="#_creating_fan_in_fan_out_streams">Creating Fan-In/Fan-Out Streams</a></li>
<li><a href="#_creating_a_tap_stream">34.4. Creating a Tap Stream</a></li>
</ul>
</li>
<li><a href="#dashboard-tasks">35. Tasks</a>
<ul class="sectlevel2">
<li><a href="#dashboard-tasks-apps">35.1. Apps</a>
<ul class="sectlevel3">
<li><a href="#_view_task_app_details">35.1.1. View Task App Details</a></li>
<li><a href="#_create_a_task_definition">35.1.2. Create a Task Definition</a></li>
</ul>
</li>
<li><a href="#dashboard-task-definition">35.2. Definitions</a>
<ul class="sectlevel3">
<li><a href="#_creating_composed_task_definitions">35.2.1. Creating Composed Task Definitions</a></li>
<li><a href="#_launching_tasks">35.2.2. Launching Tasks</a></li>
</ul>
</li>
<li><a href="#dashboard-tasks-executions">35.3. Executions</a></li>
<li><a href="#dashboard-tasks-execution-detail">35.4. Execution Detail</a></li>
</ul>
</li>
<li><a href="#dashboard-jobs">36. Jobs</a>
<ul class="sectlevel2">
<li><a href="#dashboard-job-executions-details">36.1. Job Execution Details</a></li>
<li><a href="#dashboard-job-executions-steps">36.2. Step Execution Details</a></li>
<li><a href="#dashboard-job-executions-steps-progress">36.3. Step Execution Progress</a></li>
</ul>
</li>
<li><a href="#dashboard-task-scheduling">37. Scheduling</a></li>
<li><a href="#dashboard-auditing">38. Auditing</a></li>
</ul>
</li>
<li><a href="#dataflow-samples">Samples</a>
<ul class="sectlevel1">
<li><a href="#samples-links">39. Links</a></li>
</ul>
</li>
<li><a href="#api-guide">REST API Guide</a>
<ul class="sectlevel1">
<li><a href="#api-guide-overview">40. Overview</a>
<ul class="sectlevel2">
<li><a href="#api-guide-overview-http-verbs">40.1. HTTP verbs</a></li>
<li><a href="#api-guide-overview-http-status-codes">40.2. HTTP Status Codes</a></li>
<li><a href="#api-guide-overview-headers">40.3. Headers</a></li>
<li><a href="#api-guide-overview-errors">40.4. Errors</a></li>
<li><a href="#api-guide-overview-hypermedia">40.5. Hypermedia</a></li>
</ul>
</li>
<li><a href="#api-guide-resources">41. Resources</a>
<ul class="sectlevel2">
<li><a href="#api-guide-resources-index">41.1. Index</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-index-access">41.1.1. Accessing the index</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-index-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-index-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-index-response-structure">Response Structure</a></li>
<li><a href="#api-guide-resources-index-example-response">Example Response</a></li>
<li><a href="#api-guide-resources-index-links">Links</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-about">41.2. Server Meta Information</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-server-meta-retrieving">41.2.1. Retrieving information about the server</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-server-meta-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-server-meta-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-server-meta-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#resources-registered-applications">41.3. Registered Applications</a>
<ul class="sectlevel3">
<li><a href="#resources-app-registry-list">41.3.1. Listing Applications</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-get">41.3.2. Getting Information on a Particular Application</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-get-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-get-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-get-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-get-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-get-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-post">41.3.3. Registering a New Application</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-post-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-post-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-post-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-post-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-post-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-post-versioned">41.3.4. Registering a New Application with version</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-post-versioned-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-post-versioned-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-post-versioned-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-post-versioned-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-post-versioned-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-bulk">41.3.5. Registering Applications in Bulk</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-bulk-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-bulk-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-bulk-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-bulk-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-default">41.3.6. Set the default application version</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-default-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-default-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-default-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-default-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-delete">41.3.7. Unregistering an Application</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-delete-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-delete-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-app-registry-delete-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-delete-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#resources-app-registry-delete-all">41.3.8. Unregistering all Applications</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-app-registry-delete-all-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-app-registry-delete-all-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-app-registry-delete-all-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-audit-records">41.4. Audit Records</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-audit-records-list">41.4.1. List All Audit Records</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-audit-records-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-audit-records-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-audit-records-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-audit-records-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-audit-record-get">41.4.2. Retrieve Audit Record Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-audit-record-get-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-audit-record-get-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-audit-record-get-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-audit-record-get-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-audit-action-types">41.4.3. List all the Audit Action Types</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-audit-action-types-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-audit-action-types-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-audit-action-types-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-audit-operation-types">41.4.4. List all the Audit Operation Types</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-audit-operation-types-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-audit-operation-types-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-audit-operation-types-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definitions">41.5. Stream Definitions</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-stream-definitions-create">41.5.1. Creating a New Stream Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-create-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-create-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-create-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-create-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definitions-list">41.5.2. List All Stream Definitions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definitions-list-related">41.5.3. List Related Stream Definitions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-list-related-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-related-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-related-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-list-related-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definition-get">41.5.4. Retrieve Stream Definition Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definition-get-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definition-get-path-parameters">Path Parameters</a></li>
<li><a href="#api-guide-resources-stream-definition-get-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definition-get-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definitions-delete-one">41.5.5. Delete a Single Stream Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-delete-one-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-one-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-one-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-one-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-definitions-delete-all">41.5.6. Delete All Stream Definitions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-delete-all-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-all-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-all-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-delete-all-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-validate">41.6. Stream Validation</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-stream-validation-request-structure">41.6.1. Request Structure</a></li>
<li><a href="#api-guide-resources-stream-validation-path-parameters">41.6.2. Path Parameters</a></li>
<li><a href="#api-guide-resources-stream-validation-example-request">41.6.3. Example Request</a></li>
<li><a href="#api-guide-resources-stream-validation-response-structure">41.6.4. Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment">41.7. Stream Deployments</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-stream-deployment-deploy">41.7.1. Deploying Stream Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-deploy-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-deploy-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-undeploy">41.7.2. Undeploy Stream Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-undeploy-all">41.7.3. Undeploy All Stream Definitions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-update">41.7.4. Update Deployed Stream</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-update-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-update-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-update-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-update-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-rollback">41.7.5. Rollback Stream Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-rollback-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-rollback-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-manifest">41.7.6. Get Manifest</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-manifest-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-manifest-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-history">41.7.7. Get Deployment History</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-history-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-stream-deployment-platform-list">41.7.8. Get Deployment Platforms</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-definitions-deployment-platform-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-platform-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-definitions-deployment-platform-list-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-task-definitions">41.8. Task Definitions</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-task-definitions-creating">41.8.1. Creating a New Task Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-definitions-creating-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-creating-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-creating-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-creating-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-definitions-list">41.8.2. List All Task Definitions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-definitions-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-definition-detail">41.8.3. Retrieve Task Definition Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-definitions-detail-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-detail-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-detail-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-definitions-detail-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-delete-task-definition">41.8.4. Delete Task Definition</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-delete-task-definition-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-delete-task-definition-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-delete-task-definition-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-delete-task-definition-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-task-scheduler">41.9. Task Scheduler</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-task-schedule-creating">41.9.1. Creating a New Task Schedule</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-schedule-creating-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-creating-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-creating-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-creating-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-schedule-list">41.9.2. List All Schedules</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-schedule-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-schedule-filtered-list">41.9.3. List Filtered Schedules</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-filtered-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-stream-task-schedule-list-filtered-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-delete-schedule">41.9.4. Delete Task Schedule</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-delete-task-schedule-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-delete-task-schedule-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-delete-task-schedule-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-delete-task-schedule-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-task-validate">41.10. Task Validation</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-task-validation-request-structure">41.10.1. Request Structure</a></li>
<li><a href="#api-guide-resources-task-validation-path-parameters">41.10.2. Path Parameters</a></li>
<li><a href="#api-guide-resources-task-validation-example-request">41.10.3. Example Request</a></li>
<li><a href="#api-guide-resources-task-validation-response-structure">41.10.4. Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions">41.11. Task Executions</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-task-executions-launching">41.11.1. Launching a Task</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-launching-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-launching-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-launching-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-launching-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions-list">41.11.2. List All Task Executions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions-list-by-name">41.11.3. List All Task Executions With a Specified Task Name</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-list-by-name-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-list-by-name-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-list-by-name-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-list-by-name-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions-detail">41.11.4. Task Execution Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-detail-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-detail-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-detail-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-detail-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions-delete">41.11.5. Delete Task Execution</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-delete-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-delete-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-delete-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-delete-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-task-executions-current-count">41.11.6. Task Execution Current Count</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-task-executions-current-count-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-task-executions-current-count-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-task-executions-current-count-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-task-executions-current-count-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions">41.12. Job Executions</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-job-executions-list">41.12.1. List All Job Executions</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-thin-job-execution-list">41.12.2. List All Job Executions Without Step Executions Included</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-thin-job-execution-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-thin-job-execution-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-job-execution-info-only-list-by-name">41.12.3. List All Job Executions With a Specified Job Name</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-list-by-name-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-list-by-name-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-list-by-name-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-list-by-name-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name">41.12.4. List All Job Executions With a Specified Job Name Without Step Executions Included</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-thin-list-by-name-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-thin-list-by-name-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-thin-list-by-name-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-thin-list-by-name-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-detail">41.12.5. Job Execution Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-detail-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-detail-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-detail-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-detail-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-stop">41.12.6. Stop Job Execution</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-stop-request-structure">Request structure</a></li>
<li><a href="#api-guide-resources-job-executions-stop-request-parameters">Request parameters</a></li>
<li><a href="#api-guide-resources-job-executions-stop-example-request">Example request</a></li>
<li><a href="#api-guide-resources-job-executions-stop-response-structure">Response structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-executions-restart">41.12.7. Restart Job Execution</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-executions-restart-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-executions-restart-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-executions-restart-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-executions-restart-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-job-instances">41.13. Job Instances</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-job-instances-list">41.13.1. List All Job Instances</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-instances-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-instances-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-instances-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-instances-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-instances-detail">41.13.2. Job Instance Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-instances-detail-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-instances-detail-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-instances-detail-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-instances-detail-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-job-step-executions">41.14. Job Step Executions</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-job-step-executions-list">41.14.1. List All Step Executions For a Job Execution</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-step-executions-list-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-step-executions-list-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-step-executions-list-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-step-executions-list-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-step-execution-detail">41.14.2. Job Step Execution Detail</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-step-execution-detail-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-step-execution-detail-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-step-execution-detail-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-step-execution-detail-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-job-step-execution-progress">41.14.3. Job Step Execution Progress</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-job-step-execution-progress-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-job-step-execution-progress-request-parameters">Request Parameters</a></li>
<li><a href="#api-guide-resources-job-step-execution-progress-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-job-step-execution-progress-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#api-guide-resources-runtime-information-applications">41.15. Runtime Information about Applications</a>
<ul class="sectlevel3">
<li><a href="#api-guide-resources-runtime-information-applications-listing-all">41.15.1. Listing All Applications at Runtime</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-runtime-information-applications-listing-all-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-listing-all-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-listing-all-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app">41.15.2. Querying All Instances of a Single App</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure">Response Structure</a></li>
</ul>
</li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app">41.15.3. Querying a Single Instance of a Single App</a>
<ul class="sectlevel4">
<li><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure">Request Structure</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request">Example Request</a></li>
<li><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure">Response Structure</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#appendix">Appendices</a>
<ul class="sectlevel1">
<li><a href="#dataflow-template">Appendix A: Data Flow Template</a>
<ul class="sectlevel2">
<li><a href="#_using_the_data_flow_template">A.1. Using the Data Flow Template</a></li>
<li><a href="#_data_flow_template_and_security">A.2. Data Flow Template and Security</a></li>
</ul>
</li>
<li><a href="#howto">Appendix B: &#8220;How-to&#8221; guides</a>
<ul class="sectlevel2">
<li><a href="#_configure_maven_properties">B.1. Configure Maven Properties</a></li>
<li><a href="#_troubleshooting">B.2. Troubleshooting</a></li>
<li><a href="#faqs">B.3. Frequently Asked Questions</a></li>
</ul>
</li>
<li><a href="#building">Appendix C: Building</a>
<ul class="sectlevel2">
<li><a href="#_documentation">C.1. Documentation</a></li>
<li><a href="#_working_with_the_code">C.2. Working with the Code</a>
<ul class="sectlevel3">
<li><a href="#_importing_into_eclipse_with_m2eclipse">C.2.1. Importing into Eclipse with m2eclipse</a></li>
<li><a href="#_importing_into_eclipse_without_m2eclipse">C.2.2. Importing into Eclipse without m2eclipse</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#contributing">Appendix D: Contributing</a>
<ul class="sectlevel2">
<li><a href="#_sign_the_contributor_license_agreement">D.1. Sign the Contributor License Agreement</a></li>
<li><a href="#_code_conventions_and_housekeeping">D.2. Code Conventions and Housekeeping</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Version 2.1.0.RELEASE</p>
</div>
<div class="paragraph">
<p>&#169; 2012-2019 Pivotal Software, Inc.</p>
</div>
<div class="paragraph">
<p><em>Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically.</em></p>
</div>
</div>
</div>
<h1 id="preface" class="sect0">Preface</h1>
<div class="sect1">
<h2 id="dataflow-documentation-about">1. About the documentation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The documentation for this release is available in <a href="https://docs.spring.io/spring-cloud-dataflow/docs/2.1.0.RELEASE/reference/htmlsingle">HTML</a>.</p>
</div>
<div class="paragraph">
<p>The latest copy of the Spring Cloud Data Flow reference guide can be found <a href="https://docs.spring.io/spring-cloud-dataflow/docs/current-SNAPSHOT/reference/html/">here</a>.</p>
</div>
<div class="paragraph">
<p>Copies of this document may be made for your own use and for
distribution to others, provided that you do not charge any fee for such copies and
further provided that each copy contains this Copyright Notice, whether distributed in
print or electronically.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dataflow-documentation-getting-help">2. Getting help</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Having trouble with Spring Cloud Data Flow, We would like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question. We monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-dataflow"><code>spring-cloud-dataflow</code></a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Data Flow at <a href="https://github.com/spring-cloud/spring-cloud-dataflow/issues" class="bare">github.com/spring-cloud/spring-cloud-dataflow/issues</a>.</p>
</li>
<li>
<p>Chat with the community and developers on <a href="https://gitter.im/spring-cloud/spring-cloud-dataflow">Gitter</a>.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All of Spring Cloud Data Flow is open source, including the documentation! If you find problems
with the docs or if you just want to improve them, please <a href="https://github.com/spring-cloud/spring-cloud-dataflow">get involved</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="getting-started" class="sect0">Getting Started</h1>
<div class="sect1">
<h2 id="getting-started-local">3. Getting Started - Local</h2>
<div class="sectionbody">

<div class="paragraph">
<p>Please see the <a href="https://dataflow.spring.io/docs/installation/local/">Local Machine</a> section of the microsite for more information on setting up docker compose and manual installation.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed locally, you will want to get started with orchestrating the deployment of readily available pre-built applications into a coherent streaming or batch data pipelines. Below we have guides on how to get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-cloudfoundry">4. Getting Started - Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers how to get started with Spring Cloud Data Flow on Cloud Foundry. Please see the <a href="https://dataflow.spring.io/docs/installation/cloudfoundry/">Cloud Foundry</a> section of the microsite for more information on installing Spring Cloud Data Flow on Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed on Cloud Foundry, you will want to get started with orchestrating the deployment of readily available pre-built applications into a coherent streaming or batch data pipelines. Below we have guides on how to get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started-kubernetes">5. Getting Started - Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="https://cloud.spring.io/spring-cloud-dataflow/">Spring Cloud Data Flow</a> is a toolkit for building data integration and real-time data-processing pipelines.</p>
</div>
<div class="paragraph">
<p>Pipelines consist of Spring Boot apps, built with the Spring Cloud Stream or Spring Cloud Task microservice frameworks.
This makes Spring Cloud Data Flow suitable for a range of data-processing use cases, from import-export to event-streaming and predictive analytics.</p>
</div>
<div class="paragraph">
<p>This project provides support for using Spring Cloud Data Flow with Kubernetes as the runtime for these pipelines, with applications packaged as Docker images.</p>
</div>
<div class="paragraph">
<p>Please see the <a href="https://dataflow.spring.io/docs/installation/kubernetes/">Kubernetes</a> section of the microsite for more information on installing Spring Cloud Data Flow on Kubernetes.</p>
</div>
<div class="paragraph">
<p>Once you have the Data Flow server installed on Kubernetes, you will want to get started with orchestrating the deployment of readily available pre-built applications into a coherent streaming or batch data pipelines. Below we have guides on how to get started with both <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch</a> processing.</p>
</div>
<div class="sect2">
<h3 id="_application_and_server_properties">5.1. Application and Server Properties</h3>
<div class="paragraph">
<p>This section covers how you can customize the deployment of your applications. You can use a number of properties to influence settings for the applications that are deployed. Properties can be applied on a per-application basis or in the appropriate server configuration for all deployed applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties set on a per-application basis always take precedence over properties set as the server configuration. This arrangement lets you override global server level properties on a per-application basis.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Properties to be applied for all deployed Tasks are defined in the <code>src/kubernetes/server/server-config-(binder).yaml</code> file and for Streams in <code>src/kubernetes/skipper/skipper-config-(binder).yaml</code>. Replace <code>(binder)</code> with the messaging middleware you are using&#8201;&#8212;&#8201;for example, <code>rabbit</code> or <code>kafka</code>.</p>
</div>
<div class="sect3">
<h4 id="_memory_and_cpu_settings">5.1.1. Memory and CPU Settings</h4>
<div class="paragraph">
<p>Applications are deployed with default memory and CPU settings. If needed, these values can be adjusted. The following example shows how to set <code>Limits</code> to <code>1000m</code> for <code>CPU</code> and <code>1024Mi</code> for memory and <code>Requests</code> to <code>800m</code> for CPU and <code>640Mi</code> for memory:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.limits.cpu=1000m
deployer.&lt;app&gt;.kubernetes.limits.memory=1024Mi
deployer.&lt;app&gt;.kubernetes.requests.cpu=800m
deployer.&lt;app&gt;.kubernetes.requests.memory=640Mi</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Those values results in the following container settings being used:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>Limits:
  cpu:	1
  memory:	1Gi
Requests:
  cpu:	800m
  memory:	640Mi</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can also control the default values to which to set the <code>cpu</code> and <code>memory</code> globally.</p>
</div>
<div class="paragraph">
<p>The following example shows how to set the CPU and memory for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 640mi
                      cpu: 500m</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to set the CPU and memory for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 640mi
                      cpu: 500m</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The settings we have used so far only affect the settings for the container. They do not affect the memory setting for the JVM process in the container. If you would like to set JVM memory settings, you can provide an environment variable to do so. See the next section for details.</p>
</div>
</div>
<div class="sect3">
<h4 id="_environment_variables">5.1.2. Environment Variables</h4>
<div class="paragraph">
<p>To influence the environment settings for a given application, you can use the <code>spring.cloud.deployer.kubernetes.environmentVariables</code> deployer property.
For example, a common requirement in production settings is to influence the JVM memory arguments.
You can do so by using the <code>JAVA_TOOL_OPTIONS</code> environment variable, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.environmentVariables=JAVA_TOOL_OPTIONS=-Xmx1024m</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>environmentVariables</code> property accepts a comma-delimited string. If an environment variable contains a value
which is also a comma-delimited string, it must be enclosed in single quotation marks&#8201;&#8212;&#8201;for example,
<code>spring.cloud.deployer.kubernetes.environmentVariables=spring.cloud.stream.kafka.binder.brokers='somehost:9092,
anotherhost:9093'</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This overrides the JVM memory setting for the desired <code>&lt;app&gt;</code> (replace <code>&lt;app&gt;</code> with the name of your application).</p>
</div>
</div>
<div class="sect3">
<h4 id="getting-started-kubernetes-probes">5.1.3. Liveness and Readiness Probes</h4>
<div class="paragraph">
<p>The <code>liveness</code> and <code>readiness</code> probes use paths called <code>/health</code> and <code>/info</code>, respectively. They use a <code>delay</code> of <code>10</code> for both and a <code>period</code> of <code>60</code> and <code>10</code> respectively. You can change these defaults when you deploy the stream by using deployer properties. Liveness and readiness probes are only applied to streams.</p>
</div>
<div class="paragraph">
<p>The following example changes the <code>liveness</code> probe (replace <code>&lt;app&gt;</code> with the name of your application) by setting deployer properties:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.livenessProbePath=/health
deployer.&lt;app&gt;.kubernetes.livenessProbeDelay=120
deployer.&lt;app&gt;.kubernetes.livenessProbePeriod=20</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can declare the same as part of the server global configuration for streams, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    livenessProbePath: /health
                    livenessProbeDelay: 120
                    livenessProbePeriod: 20</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Similarly, you can swap <code>liveness</code> for <code>readiness</code> to override the default <code>readiness</code> settings.</p>
</div>
<div class="paragraph">
<p>By default, port 8080 is used as the probe port. You can change the defaults for both <code>liveness</code> and <code>readiness</code> probe ports by using deployer properties, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.readinessProbePort=7000
deployer.&lt;app&gt;.kubernetes.livenessProbePort=7000</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>You can declare the same as part of the global configuration for streams, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    readinessProbePort: 7000
                    livenessProbePort: 7000</code></pre>
</div>
</div>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the <code>liveness</code> and <code>readiness</code> probe paths use Spring Boot 2.x+ actuator endpoints. To use Spring Boot 1.x actuator endpoint paths, you must adjust the <code>liveness</code> and <code>readiness</code> values, as the following example shows (replace <code>&lt;app&gt;</code> with the name of your application):</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.livenessProbePath=/health
deployer.&lt;app&gt;.kubernetes.readinessProbePath=/info</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>To automatically set both <code>liveness</code> and <code>readiness</code> endpoints on a per-application basis to the default Spring Boot 1.x paths, you can set the following property:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.bootMajorVersion=1</code></pre>
</div>
</div>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can access secured probe endpoints by using credentials stored in a <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Kubernetes secret</a>. You can use an existing secret, provided the credentials are contained under the <code>credentials</code> key name of the secret&#8217;s <code>data</code> block. You can configure probe authentication on a per-application basis. When enabled, it is applied to both the <code>liveness</code> and <code>readiness</code> probe endpoints by using the same credentials and authentication type. Currently, only <code>Basic</code> authentication is supported.</p>
</div>
<div class="paragraph">
<p>To create a new secret:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate the base64 string with the credentials used to access the secured probe endpoints.</p>
<div class="paragraph">
<p>Basic authentication encodes a username and password as a base64 string in the format of <code>username:password</code>.</p>
</div>
<div class="paragraph">
<p>The following example (which includes output and in which you should replace <code>user</code> and <code>pass</code> with your values) shows how to generate a base64 string:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ echo -n "user:pass" | base64
dXNlcjpwYXNz</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>With the encoded credentials, create a file (for example, <code>myprobesecret.yml</code>) with the following contents:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>apiVersion: v1
kind: Secret
metadata:
  name: myprobesecret
type: Opaque
data:
  credentials: GENERATED_BASE64_STRING</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Replace <code>GENERATED_BASE64_STRING</code> with the base64-encoded value generated earlier.</p>
</li>
<li>
<p>Create the secret by using <code>kubectl</code>, as the following example shows:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl create -f ./myprobesecret.yml
secret "myprobesecret" created</code></pre>
</div>
</div>
</div>
</div>
</li>
<li>
<p>Set the following deployer properties to use authentication when accessing probe endpoints, as the following example shows:</p>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.probeCredentialsSecret=myprobesecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of the application to which to apply authentication.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_using_code_spring_application_json_code">5.1.4. Using <code>SPRING_APPLICATION_JSON</code></h4>
<div class="paragraph">
<p>You can use a <code>SPRING_APPLICATION_JSON</code> environment variable to set Data Flow server properties (including the configuration of maven repository settings) that are common across all of the Data Flow server implementations. These settings go at the server level in the container <code>env</code> section of a deployment YAML. The following example shows how to do so:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>env:
- name: SPRING_APPLICATION_JSON
  value: "{ \"maven\": { \"local-repository\": null, \"remote-repositories\": { \"repo1\": { \"url\": \"https://repo.spring.io/libs-snapshot\"} } } }"</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_private_docker_registry">5.1.5. Private Docker Registry</h4>
<div class="paragraph">
<p>You can pull Docker images from a private registry on a per-application basis. First, you must create a secret in the cluster. Follow the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Pull an Image from a Private Registry</a> guide to create the secret.</p>
</div>
<div class="paragraph">
<p>Once you have created the secret, you can use the <code>imagePullSecret</code> property to set the secret to use, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>deployer.&lt;app&gt;.kubernetes.imagePullSecret=mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
<div class="paragraph">
<p>You can also configure the image pull secret at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullSecret: mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullSecret: mysecret</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_annotations">5.1.6. Annotations</h4>
<div class="paragraph">
<p>You can add annotations to Kubernetes objects on a per-application basis. The supported object types are pod <code>Deployment</code>, <code>Service</code>, and <code>Job</code>. Annotations are defined in a <code>key:value</code> format, allowing for multiple annotations separated by a comma. For more information and use cases on annotations, see <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/annotations/">Annotations</a>.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can configure applications to use annotations:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.podAnnotations=annotationName:annotationValue
deployer.&lt;app&gt;.kubernetes.serviceAnnotations=annotationName:annotationValue,annotationName2:annotationValue2
deployer.&lt;app&gt;.kubernetes.jobAnnotations=annotationName:annotationValue</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and the value of your annotations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_entry_point_style">5.1.7. Entry Point Style</h4>
<div class="paragraph">
<p>An entry point style affects how application properties are passed to the container to be deployed. Currently, three styles are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exec</code> (default): Passes all application properties and command line arguments in the deployment request as container arguments. Application properties are transformed into the format of <code>--key=value</code>.</p>
</li>
<li>
<p><code>shell</code>: Passes all application properties as environment variables. Command line arguments from the deployment request are not converted into environment variables nor set on the container. Application properties are transformed into an uppercase string and <code>.</code> characters are replaced with <code>_</code>.</p>
</li>
<li>
<p><code>boot</code>: Creates an environment variable called <code>SPRING_APPLICATION_JSON</code> that contains a JSON representation of all application properties. Command line arguments from the deployment request are set as container args.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In all cases, environment variables defined at the server-level configuration and on a per-application basis are set onto the container as is.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure applications as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.entryPointStyle=&lt;Entry Point Style&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and <code>&lt;Entry Point Style&gt;</code> with your desired entry point style.</p>
</div>
<div class="paragraph">
<p>You can also configure the entry point style at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    entryPointStyle: entryPointStyle</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    entryPointStyle: entryPointStyle</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>entryPointStye</code> with the desired entry point style.</p>
</div>
<div class="paragraph">
<p>You should choose an Entry Point Style of either <code>exec</code> or <code>shell</code>, to correspond to how the <code>ENTRYPOINT</code> syntax is defined in the container&#8217;s <code>Dockerfile</code>. For more information and uses cases on <code>exec</code> versus <code>shell</code>, see the <a href="https://docs.docker.com/engine/reference/builder/#entrypoint">ENTRYPOINT</a> section of the Docker documentation.</p>
</div>
<div class="paragraph">
<p>Using the <code>boot</code> entry point style corresponds to using the <code>exec</code> style <code>ENTRYPOINT</code>. Command line arguments from the deployment request are passed to the container, with the addition of application properties being mapped into the <code>SPRING_APPLICATION_JSON</code> environment variable rather than command line arguments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When you use the <code>boot</code> Entry Point Style, the <code>deployer.&lt;app&gt;.kubernetes.environmentVariables</code> property must not contain <code>SPRING_APPLICATION_JSON</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_service_account">5.1.8. Deployment Service Account</h4>
<div class="paragraph">
<p>You can configure a custom service account for application deployments through properties. You can use an existing service account or create a new one. One way to create a service account is by using <code>kubectl</code>, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl create serviceaccount myserviceaccountname
serviceaccount "myserviceaccountname" created</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Then you can configure individual applications as follows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.deploymentServiceAccountName=myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and <code>myserviceaccountname</code> with your service account name.</p>
</div>
<div class="paragraph">
<p>You can also configure the service account name at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    deploymentServiceAccountName: myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    deploymentServiceAccountName: myserviceaccountname</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with the service account name to be applied to all deployments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_image_pull_policy">5.1.9. Image Pull Policy</h4>
<div class="paragraph">
<p>An image pull policy defines when a Docker image should be pulled to the local registry. Currently, three policies are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>IfNotPresent</code> (default): Do not pull an image if it already exists.</p>
</li>
<li>
<p><code>Always</code>: Always pull the image regardless of whether it already exists.</p>
</li>
<li>
<p><code>Never</code>: Never pull an image. Use only an image that already exists.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.imagePullPolicy=Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and <code>Always</code> with your desired image pull policy.</p>
</div>
<div class="paragraph">
<p>You can configure an image pull policy at the global server level.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullPolicy: Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    imagePullPolicy: Always</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_deployment_labels">5.1.10. Deployment Labels</h4>
<div class="paragraph">
<p>You can set custom labels on objects related to <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/">Deployment</a>. See <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels/">Labels</a> for more information on labels. Labels are specified in <code>key:value</code> format.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.deploymentLabels=myLabelName:myLabelValue</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application, <code>myLabelName</code> with your label name, and <code>myLabelValue</code> with the value of your label.</p>
</div>
<div class="paragraph">
<p>Additionally, you can apply multiple labels, as the following example shows:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.deploymentLabels=myLabelName:myLabelValue,myLabelName2:myLabelValue2</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tolerations">5.1.11. Tolerations</h4>
<div class="paragraph">
<p>Tolerations work with taints to ensure pods are not scheduled onto particular nodes.
Tolerations are set into the pod configuration while taints are set onto nodes.
Refer to the <a href="https://kubernetes.io/docs/concepts/configuration/taint-and-toleration/">Taints and Tolerations</a> section of the Kubernetes reference for more information.</p>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure applications:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>deployer.&lt;app&gt;.kubernetes.tolerations=[{key: 'mykey' operator: 'Equal', value: 'myvalue', effect: 'NoSchedule'}]</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;app&gt;</code> with the name of your application and the key / value pairs according to your desired toleration configuration.</p>
</div>
<div class="paragraph">
<p>You can configure tolerations at the global server level as well.</p>
</div>
<div class="paragraph">
<p>The following example shows how to do so for streams:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        skipper:
          server:
            platform:
              kubernetes:
                accounts:
                  default:
                    tolerations:
                      - key: mykey
                        operator: Equal
                        value: myvalue
                        effect: NoSchedule</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to do so for tasks:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    tolerations:
                      - key: mykey
                        operator: Equal
                        value: myvalue
                        effect: NoSchedule</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>Replacing the <code>tolerations</code> key / value pairs according to your desired toleration configuration.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="applications" class="sect0">Applications</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>A selection of pre-built <a href="https://cloud.spring.io/spring-cloud-stream-app-starters/">stream</a> and <a href="https://cloud.spring.io/spring-cloud-task-app-starters/">task/batch</a> starter apps for various data integration and processing scenarios to facilitate learning and experimentation. The table below includes the pre-built applications at a glance. For more details, review how to <a href="#supported-apps-and-tasks">register supported applications</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_available_applications">6. Available Applications</h2>
<div class="sectionbody">
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Source</th>
<th class="tableblock halign-left valign-top">Processor</th>
<th class="tableblock halign-left valign-top">Sink</th>
<th class="tableblock halign-left valign-top">Task</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-sftp-source">sftp</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tcp-client-processor">tcp-client</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-mqtt-sink">mqtt</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spark-yarn <sub>(deprecated)</sub></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-jms-source">jms</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-scriptable-transform">scriptable-transform</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-log-sink">log</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spark-cluster <sub>(deprecated)</sub></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-ftp-source">ftp</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-clound-stream-modules-transform-processor">transform</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">task-launcher-yarn <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spark-client <sub>(deprecated)</sub></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-time-source">time</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-header-enricher-processor">header-enricher</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-throughput-sink">throughput</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-task-app-starters/docs/current/reference/htmlsingle/#_timestamp_task">timestamp</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-load-generator-source">load-generator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-python-http-processor">python-http</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">task-launcher-local <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">jdbchdfs-local <sub>(deprecated)</sub></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-syslog-source">syslog</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-twitter-sentiment-processor">twitter-sentiment</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-mongodb-sink">mongodb</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-task-app-starters/docs/current/reference/htmlsingle/#_composed_task_runner">composed-task-runner</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-aws-s3-source">s3</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-splitter">splitter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hdfs-dataset <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-task-app-starters/docs/current/reference/htmlsingle/#_timestamp_batch_task">timestamp-batch</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-loggregator-source">loggregator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-image-recognition-processor">image-recognition</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-ftp-sink">ftp</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-trigger-source">triggertask</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-bridge-processor">bridge</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-jdbc-sink">jdbc</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-twitterstream-source">twitterstream</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-pmml-processor">pmml</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">aggregate-counter <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-mongodb-source">mongodb</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-python-jython-processor">python-jython</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-cassandra-sink">cassandra</a> <sub>(only:2.1.x)</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-gemfire-cq-source">gemfire-cq</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-groovy-transform-processor">groovy-transform</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-router-sink">router</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-http-source">http</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-httpclient-processor">httpclient</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-redis-sink">redis-pubsub</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-rabbit-source">rabbit</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-filter-processor">filter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-file-sink">file</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tcp-source">tcp</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-pose-estimation-processor">pose-estimation</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-websocket-sink">websocket</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-trigger-source">trigger</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-grpc-processor">grpc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-aws-s3-sink">s3</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-mqtt-source">mqtt</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-groovy-filter-processor">groovy-filter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-rabbit-sink">rabbit</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tcp-client-source">tcp-client</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-aggregator-processor">aggregator</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-counter-sink">counter</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-mail-source">mail</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-counter-processor">counter</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-pgcopy-sink">pgcopy</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-jdbc-source">jdbc</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tensorflow-processor">tensorflow</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/spring-cloud-stream-app-starters/gpfdist">gpfdist</a> <sub>(1.3.x)</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-gemfire-source">gemfire</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tasklaunchrequest-transform">tasklaunchrequest-transform</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-sftp-sink">sftp</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-file-source">file</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-object-detection-processor">object-detection</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">field-value-counter <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-task-launcher-dataflow-sink">tasklauncher-dataflow</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-hdfs-sink">hdfs</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-tcp-sink">tcp</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/htmlsingle/#spring-cloud-stream-modules-gemfire-sink">gemfire</a></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">task-launcher-cloudfoundry <sub>(deprecated)</sub></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The above table includes Applications that are compatible with two versions of Spring Boot and Spring Cloud Stream
releases. Darwin-release-train <em>(Spring Boot 2.0.x + Spring Cloud Stream 2.0.x)</em> and Einstein-release-train
<em>(Spring Boot 2.1.x + Spring Cloud Stream 2.1.x)</em>, respectively.
</td>
</tr>
</table>
</div>
</div>
</div>
<h1 id="architecture" class="sect0">Architecture</h1>
<div class="sect1">
<h2 id="arch-intro">7. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow simplifies the development and deployment of applications focused on data processing use cases.</p>
</div>
<div class="paragraph">
<p>The <a href="https://dataflow.spring.io/docs/concepts/architecture/">Architecture</a> section of the microsite contains the description of Data Flow&#8217;s architecture.</p>
</div>
</div>
</div>
<h1 id="configuration" class="sect0">Configuration</h1>
<div class="sect1">
<h2 id="configuration-maven">8. Maven</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you want to override specific maven configuration properties (remote repositories, proxies, and others) or run the Data Flow Server behind a proxy,
you need to specify those properties as command line arguments when starting the Data Flow Server, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-dataflow-server-2.1.0.RELEASE.jar --spring.config.additional-location=/home/joe/maven.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>maven.yaml</code> is</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">maven
  localRepository: mylocal
  remote-repositories:
    repo1:
      url: https://repo1
      auth:
        username: user1
        password: pass1
      snapshot-policy:
        update-policy: daily
        checksum-policy: warn
      release-policy:
        update-policy: never
        checksum-policy: fail
    repo2:
      url: https://repo2
      policy:
        update-policy: always
        checksum-policy: fail
  proxy:
    host: proxy1
    port: "9010"
    auth:
      username: proxyuser1
      password: proxypass1</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the protocol is set to <code>http</code>. You can omit the auth properties if the proxy does not need a username and password. Also, the maven <code>localRepository</code> is set to <code>${user.home}/.m2/repository/</code> by default.
As shown in the preceding example, the remote repositories can be specified along with their authentication (if needed). If the remote repositories are behind a proxy, then the proxy properties can be specified as shown in the preceding example.</p>
</div>
<div class="paragraph">
<p>The repository policies can be specified for each remote repository configuration as shown in the preceding example.
The key <code>policy</code> is applicable to both <code>snapshot</code> and the <code>release</code> repository policies.</p>
</div>
<div class="paragraph">
<p>You can refer to <a href="https://github.com/eclipse/aether-core/blob/4cf5f7a406b516a45d8bf15e7dfe3fb3849cb87b/aether-api/src/main/java/org/eclipse/aether/repository/RepositoryPolicy.java#L16">Repository Policies</a> for the list of
supported repository policies.</p>
</div>
<div class="paragraph">
<p>As these are Spring Boot <code>@ConfigurationProperties</code>, that you need to specify by adding them to the <code>SPRING_APPLICATION_JSON</code> environment variable. The following example shows how the JSON is structured:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ SPRING_APPLICATION_JSON='{ "maven": { "local-repository": null,
"remote-repositories": { "repo1": { "url": "https://repo1", "auth": { "username": "repo1user", "password": "repo1pass" } }, "repo2": { "url": "https://repo2" } },
"proxy": { "host": "proxyhost", "port": 9018, "auth": { "username": "proxyuser", "password": "proxypass" } } } }' java -jar spring-cloud-dataflow-server-2.1.0.RELEASE.jar</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-local">9. Configuration - Local</h2>
<div class="sectionbody">

<div class="sect2">
<h3 id="configuration-local-enable-disable-specific-features">9.1. Feature Toggles</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow Server offers specific set of features that can be enabled/disabled when launching. These features include all the lifecycle operations and REST endpoints (server and client implementations, including the shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams (requires Skipper)</p>
</li>
<li>
<p>Tasks</p>
</li>
<li>
<p>Task Scheduler</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>One can enable and disable these features by setting the following boolean properties when launching the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.streams-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.schedules-enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, stream (requires Skipper), and tasks are enabled and Task Scheduler is disabled by default.</p>
</div>
<div class="paragraph">
<p>The REST <code>/about</code> endpoint provides information on the features that have been enabled and disabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-rdbms">9.2. Database</h3>
<div class="paragraph">
<p>A relational database is used to store stream and task definitions as well as the state of executed tasks.
Spring Cloud Data Flow provides schemas for H2, HSQLDB, MySQL, Oracle, Postgresql, DB2, and SqlServer. The schema is automatically created when the server starts.</p>
</div>
<div class="paragraph">
<p>By default, Spring Cloud Data Flow offers an embedded instance of the H2 database.
The H2 database is good for development purposes but is not recommended for production use.</p>
</div>
<div class="paragraph">
<p>The JDBC drivers for <strong>MySQL</strong> (through the MariaDB driver), <strong>HSQLDB</strong>, <strong>PostgreSQL</strong>, and embedded <strong>H2</strong> are available without additional configuration.
If you are using any other database, then you need to put the corresponding JDBC driver jar on the classpath of the server.</p>
</div>
<div class="paragraph">
<p>The database properties can be passed as environment variables or command-line arguments to the Data Flow Server.</p>
</div>
<div class="paragraph">
<p>The following example shows how to define a database connection with environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">export spring_datasource_url=jdbc:postgresql://localhost:5432/mydb
export spring_datasource_username=myuser
export spring_datasource_password=mypass
export spring_datasource_driver_class_name="org.postgresql.Driver"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to define a MySQL database connection with command Line arguments</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.1.0.RELEASE.jar \
    --spring.datasource.url=jdbc:mysql://localhost:3306/mydb \
    --spring.datasource.username=<user> \
    --spring.datasource.password=<password> \
    --spring.datasource.driver-class-name=org.mariadb.jdbc.Driver &</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to define a MariaDB database connection with command Line arguments</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.1.0.RELEASE.jar \
    --spring.datasource.url=jdbc:mariadb://localhost:3306/mydb?useMysqlMetadata=true \
    --spring.datasource.username=<user> \
    --spring.datasource.password=<password> \
    --spring.datasource.driver-class-name=org.mariadb.jdbc.Driver &</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Starting with MariaDB v2.4.1 connector release, it is required to also add <code>useMysqlMetadata=true</code>
      to the JDBC URL. This is a required workaround until when MySQL and MariaDB entirely switch as two
      different databases.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following example shows how to define a PostgreSQL database connection with command line arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.1.0.RELEASE.jar \
    --spring.datasource.url=jdbc:postgresql://localhost:5432/mydb \
    --spring.datasource.username=<user> \
    --spring.datasource.password=<password> \
    --spring.datasource.driver-class-name=org.postgresql.Driver &</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example shows how to define a HSQLDB database connection with command line arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">java -jar spring-cloud-dataflow-server/target/spring-cloud-dataflow-server-2.1.0.RELEASE.jar \
    --spring.datasource.url=jdbc:hsqldb://localhost:9001/mydb \
    --spring.datasource.username=SA \
    --spring.datasource.driver-class-name=org.hsqldb.jdbc.JDBCDriver &</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
H2 database is not supported as an external mode.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_disabling_database_schema_creation_and_migration_strategies">9.2.1. Disabling database schema creation and migration strategies</h4>
<div class="paragraph">
<p>You can control whether or not Data Flow bootstraps your database on startup. On most production environments chances are you will not have enough privileges to do so.
If that&#8217;s the case you can disable it by setting the property <code>spring.cloud.dataflow.rdbms.initialize.enable</code> to <code>false</code>.
The scripts that the server uses to bootstrap the database can be found under <code>spring-cloud-dataflow-core/src/main/resources/</code> folder.</p>
</div>
<div class="paragraph">
<p>For new installations run the corresponding database script located under <code>/schemas</code> and <code>/migrations.1.x.x</code>, for upgrades from version <code>1.2.0</code> you only need to run the <code>/migrations.1.x.x</code> scripts.</p>
</div>
</div>
<div class="sect3">
<h4 id="_adding_a_custom_jdbc_driver">9.2.2. Adding a Custom JDBC Driver</h4>
<div class="paragraph">
<p>To add a custom driver for the database (for example, Oracle), you should rebuild the Data Flow Server and add the dependency to the Maven <code>pom.xml</code> file.
Since there is a Spring Cloud Data Flow Server for each target platform, you need to modify the appropriate maven <code>pom.xml</code> for each platform.  There are tags in each GitHub repository for each server version.</p>
</div>
<div class="paragraph">
<p>To add a custom JDBC driver dependency for the local server implementation:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select the tag that corresponds to the version of the server you want to rebuild and clone the github repository.</p>
</li>
<li>
<p>Edit the spring-cloud-dataflow-server/pom.xml and, in the <code>dependencies</code> section, add the dependency for the database driver required.  In the following example , an Oracle driver has been chosen:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
...
  &lt;dependency&gt;
    &lt;groupId&gt;com.oracle.jdbc&lt;/groupId&gt;
    &lt;artifactId&gt;ojdbc8&lt;/artifactId&gt;
    &lt;version&gt;12.2.0.1&lt;/version&gt;
  &lt;/dependency&gt;
...
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic" start="3">
<li>
<p>Build the application as described in <a href="#building">Building Spring Cloud Data Flow</a></p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also provide default values when rebuilding the server by adding the necessary properties to the dataflow-server.yml file,
as shown in the following example for PostgreSQL:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>spring:
  datasource:
    url: jdbc:postgresql://localhost:5432/mydb
    username: myuser
    password: mypass
    driver-class-name:org.postgresql.Driver</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-deployer">9.3. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties of the <a href="https://github.com/spring-cloud/spring-cloud-deployer-local">Local deployer</a> to customize how Streams and Tasks are deployed.
When deploying using the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.local.&lt;deployerPropertyName&gt;</code>. See below for an example shell usage.
These properties are also used when configuring <a href="#configuration-local-tasks">Local Task Platforms</a> in the Data Flow server and local platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">workingDirectoriesRoot</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory in which all created processes will run and create log files.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java.io.tmpdir</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">envVarsToInherit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array of regular expression patterns for environment variables that are passed to launched applications.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;"TMP", "LANG", "LANGUAGE", "LC_.*", "PATH", "SPRING_APPLICATION_JSON"&gt; on windows and &lt;"TMP", "LANG", "LANGUAGE", "LC_.*", "PATH"&gt; on Unix</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteFilesOnExit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to delete created files and directories on JVM exit.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javaCmd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command to run java</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">java</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">shutdownTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of seconds to wait for app shutdown.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javaOpts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Java Options to pass to the JVM, e.g -Dtest=foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">inheritLogging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">allow logging to be redirected to the output stream of the process that triggered child process.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">debugPort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port for remote debugging</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As an example, to set Java options for the time application in the <code>ticktock</code> stream, use the following stream deployment properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --name ticktock --definition "time --server.port=9000 | log"
dataflow:&gt; stream deploy --name ticktock --properties "deployer.time.local.javaOpts=-Xmx2048m -Dtest=foo"</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a convenience, you can set the <code>deployer.memory</code> property to set the Java option <code>-Xmx</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream deploy --name ticktock --properties "deployer.time.memory=2048m"</code></pre>
</div>
</div>
<div class="paragraph">
<p>At deployment time, if you specify an <code>-Xmx</code> option in the <code>deployer.&lt;app&gt;.local.javaOpts</code> property in addition to a value of the <code>deployer.&lt;app&gt;.local.memory</code> option, the value in the <code>javaOpts</code> property has precedence.  Also, the <code>javaOpts</code> property set when deploying the application has precedence over the Data Flow Server&#8217;s <code>spring.cloud.deployer.local.javaOpts</code> property.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-logging">9.4. Logging</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow <code>local</code> server is automatically configured to use <code>RollingFileAppender</code> for logging.
The logging configuration is located on the classpath contained in a file named <code>logback-spring.xml</code>.</p>
</div>
<div class="paragraph">
<p>By default, the log file is configured to use:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>&lt;property name="LOG_FILE" value="${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}}/spring-cloud-dataflow-server}"/&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>with the logback configuration for the <code>RollingPolicy</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;appender name="FILE"
			  class="ch.qos.logback.core.rolling.RollingFileAppender"&gt;
		&lt;file&gt;${LOG_FILE}.log&lt;/file&gt;
		&lt;rollingPolicy
				class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy"&gt;
			&lt;!-- daily rolling --&gt;
			&lt;fileNamePattern&gt;${LOG_FILE}.${LOG_FILE_ROLLING_FILE_NAME_PATTERN:-%d{yyyy-MM-dd}}.%i.gz&lt;/fileNamePattern&gt;
			&lt;maxFileSize&gt;${LOG_FILE_MAX_SIZE:-100MB}&lt;/maxFileSize&gt;
			&lt;maxHistory&gt;${LOG_FILE_MAX_HISTORY:-30}&lt;/maxHistory&gt;
			&lt;totalSizeCap&gt;${LOG_FILE_TOTAL_SIZE_CAP:-500MB}&lt;/totalSizeCap&gt;
		&lt;/rollingPolicy&gt;
		&lt;encoder&gt;
			&lt;pattern&gt;${FILE_LOG_PATTERN}&lt;/pattern&gt;
		&lt;/encoder&gt;
	&lt;/appender&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>To check the <code>java.io.tmpdir</code> for the current Spring Cloud Data Flow Server <code>local</code> server,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>jinfo &lt;pid&gt; | grep "java.io.tmpdir"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to change or override any of the properties <code>LOG_FILE</code>, <code>LOG_PATH</code>, <code>LOG_TEMP</code>, <code>LOG_FILE_MAX_SIZE</code>, <code>LOG_FILE_MAX_HISTORY</code> and <code>LOG_FILE_TOTAL_SIZE_CAP</code>, please set them as system properties.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-streams">9.5. Streams</h3>
<div class="paragraph">
<p>Data Flow Server delegates to the Skipper server the management of the Stream&#8217;s lifecycle.  Set the configuration property <code>spring.cloud.skipper.client.serverUri</code> to the location of Skipper, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-dataflow-server-2.1.0.RELEASE.jar --spring.cloud.skipper.client.serverUri=https://192.51.100.1:7577/api</code></pre>
</div>
</div>
<div class="paragraph">
<p>The configuration of show streams are deployed and to which platforms, is done by configuration of <code>platform accounts</code> on the Skipper server.
See the documentation on <a href="https://docs.spring.io/spring-cloud-skipper/docs/current/reference/htmlsingle/#platforms">platforms</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-tasks">9.6. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with streams launched by Skipper, Tasks can be launched to multiple platforms.
If no platform is defined, a platform named <code>default</code> is created using the default values of the class <a href="https://github.com/spring-cloud/spring-cloud-deployer-local/blob/master/spring-cloud-deployer-local/src/main/java/org/springframework/cloud/deployer/spi/local/LocalDeployerProperties.java">LocalDeployerProperties</a>, which is summarized in the table <a href="#configuration-local-deployer">Local Deployer Properties</a></p>
</div>
<div class="paragraph">
<p>To configure new platform accounts for the local platform, provide an entry under the <code>spring.cloud.dataflow.task.platform.local</code> section in your <code>application.yaml</code> file for via another Spring Boot supported mechanism.
In the following example, two local platform accounts named <code>localDev</code> and  <code>localDevDebug</code> are created.
The keys such as <code>shutdownTimeout</code> and <code>javaOpts</code> are local deployer properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          local:
            accounts:
              localDev:
                shutdownTimeout: 60
                javaOpts: "-Dtest=foo -Xmx1024m"
              localDevDebug:
                javaOpts: "-Xdebug -Xmx2048m"</code></pre>
</div>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is running locally to deploy tasks to Cloud Foundry or Kubernetes.  See the sections on <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task Platform Configuration</a> and <a href="#configuration-kubernetes-tasks">Kubernetes Task Platform Configuration</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-local-security">9.7. Security</h3>
<div class="paragraph">
<p>By default, the Data Flow server is unsecured and runs on an unencrypted HTTP connection.
You can secure your REST endpoints as well as the Data Flow Dashboard by enabling HTTPS
and requiring clients to authenticate using <a href="https://oauth.net/2/">OAuth 2.0</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>By default, the REST endpoints (administration, management, and health) as well as the Dashboard UI do not require authenticated access.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>While you can theoretically choose any OAuth provider in conjunction with
Spring Cloud Data Flow, we recommend using the
<a href="https://github.com/cloudfoundry/uaa">CloudFoundry User Account and Authentication (UAA) Server</a>.</p>
</div>
<div class="paragraph">
<p>Not only is the UAA OpenID certified and is used by Cloud Foundry but it can
also be used in local stand-alone deployment scenarios. Furthermore, the UAA not
only provides its own user store, but also provides comprehensive LDAP integration.</p>
</div>
<div class="sect3">
<h4 id="configuration-local-security-enabling-https">9.7.1. Enabling HTTPS</h4>
<div class="paragraph">
<p>By default, the dashboard, management, and health endpoints use HTTP as a transport.
You can switch to HTTPS by adding a certificate to your configuration in
<code>application.yml</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">server:
  port: 8443                                         <i class="conum" data-value="1"></i><b>(1)</b>
  ssl:
    key-alias: yourKeyAlias                          <i class="conum" data-value="2"></i><b>(2)</b>
    key-store: path/to/keystore                      <i class="conum" data-value="3"></i><b>(3)</b>
    key-store-password: yourKeyStorePassword         <i class="conum" data-value="4"></i><b>(4)</b>
    key-password: yourKeyPassword                    <i class="conum" data-value="5"></i><b>(5)</b>
    trust-store: path/to/trust-store                 <i class="conum" data-value="6"></i><b>(6)</b>
    trust-store-password: yourTrustStorePassword     <i class="conum" data-value="7"></i><b>(7)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>As the default port is <code>9393</code>, you may choose to change the port to a more common HTTPs-typical port.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The alias (or name) under which the key is stored in the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The path to the keystore file. Classpath resources may also be specified, by using the classpath prefix - for example: <code>classpath:path/to/keystore</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The password of the keystore.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>The password of the key.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The path to the truststore file. Classpath resources may also be specified, by using the classpath prefix - for example: <code>classpath:path/to/trust-store</code></td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The password of the trust store.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If HTTPS is enabled, it completely replaces HTTP as the protocol over
which the REST endpoints and the Data Flow Dashboard interact. Plain HTTP requests
will fail. Therefore, make sure that you configure your Shell accordingly.
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuration-security-self-signed-certificates">Using Self-Signed Certificates</h5>
<div class="paragraph">
<p>For testing purposes or during development, it might be convenient to create self-signed certificates.
To get started, execute the following command to create a certificate:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -genkey -alias dataflow -keyalg RSA -keystore dataflow.keystore \
          -validity 3650 -storetype JKS \
          -dname "CN=localhost, OU=Spring, O=Pivotal, L=Kailua-Kona, ST=HI, C=US"  <i class="conum" data-value="1"></i><b>(1)</b>
          -keypass dataflow -storepass dataflow</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><code>CN</code> is the important parameter here. It should match the domain you are trying to access - for example, <code>localhost</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Then add the following lines to your <code>application.yml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">server:
  port: 8443
  ssl:
    enabled: true
    key-alias: dataflow
    key-store: "/your/path/to/dataflow.keystore"
    key-store-type: jks
    key-store-password: dataflow
    key-password: dataflow</code></pre>
</div>
</div>
<div class="paragraph">
<p>This is all that is needed for the Data Flow Server. Once you start the server,
you should be able to access it at <code><a href="https://localhost:8443/" class="bare">localhost:8443/</a></code>.
As this is a self-signed certificate, you should hit a warning in your browser, which
you need to ignore.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-self-signed-certificates-shell">Self-Signed Certificates and the Shell</h5>
<div class="paragraph">
<p>By default, self-signed certificates are an issue for the shell, and additional steps
are necessary to make the shell work with self-signed certificates. Two options
are available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the self-signed certificate to the JVM truststore.</p>
</li>
<li>
<p>Skip certificate validation.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="_adding_the_self_signed_certificate_to_the_jvm_truststore">Adding the Self-signed Certificate to the JVM Truststore</h6>
<div class="paragraph">
<p>In order to use the JVM truststore option, we need to
export the previously created certificate from the keystore, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -export -alias dataflow -keystore dataflow.keystore -file dataflow_cert -storepass dataflow</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, we need to create a truststore which the shell can use, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ keytool -importcert -keystore dataflow.truststore -alias dataflow -storepass dataflow -file dataflow_cert -noprompt</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now, you are ready to launch the Data Flow Shell by using the following JVM arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -Djavax.net.ssl.trustStorePassword=dataflow \
       -Djavax.net.ssl.trustStore=/path/to/dataflow.truststore \
       -Djavax.net.ssl.trustStoreType=jks \
       -jar spring-cloud-dataflow-shell-2.1.0.RELEASE.jar</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In case you run into trouble establishing a connection over SSL, you can enable additional
logging by using and setting the <code>javax.net.debug</code> JVM argument to <code>ssl</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Do not forget to target the Data Flow Server with the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; dataflow config server https://localhost:8443/</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_skipping_certificate_validation">Skipping Certificate Validation</h6>
<div class="paragraph">
<p>Alternatively, you can also bypass the certification validation by providing the
optional command-line parameter <code>--dataflow.skip-ssl-validation=true</code>.</p>
</div>
<div class="paragraph">
<p>If you set this command-line parameter, the shell accepts any (self-signed) SSL
certificate.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>If possible, you should avoid using this option. Disabling the trust manager
defeats the purpose of SSL and makes you vulnerable to man-in-the-middle attacks.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-oauth2">9.7.2. Authentication using OAuth 2.0</h4>
<div class="paragraph">
<p>In order to support authentication and authorization, Spring Cloud Data
Flow is using <a href="https://oauth.net/2/">OAuth 2.0</a> and <a href="https://openid.net/connect/">OpenID Connect</a>.
It lets you integrate Spring Cloud Data Flow into Single Sign On (SSO)
environments.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of Spring Cloud Data Flow 2.0, OAuth2 is the only mechanism
for providing authentication and authorization.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following OAuth2 Grant Types are used:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Authorization Code</strong>: Used for the GUI (browser) integration. Visitors are redirected to your OAuth Service for authentication</p>
</li>
<li>
<p><strong>Password</strong>: Used by the shell (and the REST integration), so visitors can log in with username and password</p>
</li>
<li>
<p><strong>Client Credentials</strong>: Retrieve an access token directly from your OAuth provider and pass it to the Data Flow server by using the Authorization HTTP header</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Currently, Spring Cloud Data Flow uses opaque tokens and not transparent
tokens (JWT).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The REST endpoints can be accessed in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Basic authentication</strong>, which uses the <em>Password Grant Type</em> under the covers to authenticate with your OAuth2 service</p>
</li>
<li>
<p><strong>Access token</strong>, which uses the Client <em>Credentials Grant Type</em> under the covers</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When authentication is set up, it is strongly recommended to enable HTTPS
as well, especially in production environments.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can turn on OAuth2 authentication by adding the following to <code>application.yml</code> or by setting
environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">security:
  oauth2:
    client:
      client-id: myclient                                             <i class="conum" data-value="1"></i><b>(1)</b>
      client-secret: mysecret
      access-token-uri: http://127.0.0.1:9999/oauth/token
      user-authorization-uri: http://127.0.0.1:9999/oauth/authorize
    resource:
      user-info-uri: http://127.0.0.1:9999/me                         <i class="conum" data-value="2"></i><b>(2)</b>
      token-info-uri: https://dataflow.local:8080/uaa/check_token      <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Providing the Client ID in the OAuth Configuration Section activates OAuth2 security</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Used to retrieve user information such as the username. Mandatory.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Used to introspect and validate a directly passed-in token. Mandatory.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can verify that basic authentication is working properly by using curl, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl -u myusername:mypassword http://localhost:9393/ -H 'Accept: application/json'</code></pre>
</div>
</div>
<div class="paragraph">
<p>As a result, you should see a list of available REST endpoints.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Please be aware that when accessing the Root URL with a web browser and
enabled security, you are redirected to the Dashboard UI. In order to see the
list of REST endpoints, specify the <code>application/json</code> Accept header. Also be sure
to add the <code>Accept</code> header using tools such as
<a href="https://chrome.google.com/webstore/detail/postman/fhbjgbiflinjbdggehcddcbncdddomop?hl=en">Postman</a> (Chrome)
or <a href="https://addons.mozilla.org/en-GB/firefox/addon/restclient/">RESTClient</a> (Firefox).
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Besides Basic Authentication, you can also provide an Access Token in order to
access the REST Api. In order to make that happen, you would retrieve an
OAuth2 Access Token from your OAuth2 provider first and then pass that Access Token to
the REST Api using the <strong>Authorization</strong> Http header:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ curl -H "Authorization: Bearer &lt;ACCESS_TOKEN&gt;" http://localhost:9393/ -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-customizing-authorization">9.7.3. Customizing Authorization</h4>
<div class="paragraph">
<p>The preceding content deals with mostly with authentication - that is, how to assess
the identity of the user. In this section we want to discuss the available
<strong>authorization</strong> options - that is, who can do what.</p>
</div>
<div class="paragraph">
<p>The authorization rules are defined in <code>dataflow-server-defaults.yml</code> (part of
the Spring Cloud Data Flow Core module).</p>
</div>
<div class="paragraph">
<p>Because the determination of security roles is environment-specific,
Spring Cloud Data Flow, assigns all roles to authenticated OAuth2
users by default. The <code>DefaultDataflowAuthoritiesExtractor</code> class is used for that purpose.</p>
</div>
<div class="paragraph">
<p>Alternatively, Spring Cloud Data Flow can map OAuth2 scopes to Data Flow roles by
setting <code>spring.cloud.dataflow.security.authorization.map-oauth-scopes</code> to <code>true.</code> For more
details, please see the chapter on <a href="#configuration-security-role-mapping">Role Mappings</a>.</p>
</div>
<div class="paragraph">
<p>Lastly, you can customize the role mapping behavior by providing your own Spring bean definition that
extends Spring Security OAuth&#8217;s <code>AuthoritiesExtractor</code> interface. In that case,
the custom bean definition takes precedence over the default one provided by
Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>The default scheme uses seven roles to protect the <a href="#api-guide">REST endpoints</a>
that Spring Cloud Data Flow exposes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ROLE_CREATE</strong> for anything that involves creating, e.g. creating streams or tasks</p>
</li>
<li>
<p><strong>ROLE_DEPLOY</strong> for deploying streams or launching tasks</p>
</li>
<li>
<p><strong>ROLE_DESTROY</strong> for anything that involves deleting streams, tasks etc.</p>
</li>
<li>
<p><strong>ROLE_MANAGE</strong> for boot management endpoints</p>
</li>
<li>
<p><strong>ROLE_MODIFY</strong> for anything that involves mutating the state of the system</p>
</li>
<li>
<p><strong>ROLE_SCHEDULE</strong> for scheduling related operation (e.g. schedule a task execution)</p>
</li>
<li>
<p><strong>ROLE_VIEW</strong> for anything that relates to retrieving state</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As mentioned earlier, all authorization-related default settings are specified
in <code>dataflow-server-defaults.yml</code>, which is part of the Spring Cloud Data Flow Core
Module. Nonetheless, you can override those settings, if desired - for example,
in <code>application.yml</code>. The configuration takes the form of a YAML list (as some
rules may have precedence over others). Consequently, you need to copy and paste
the whole list and tailor it to your needs (as there is no way to merge lists).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Always refer to your version of the <code>application.yml</code> file, as the following snippet may be outdated.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default rules are as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spring:
  cloud:
    dataflow:
      security:
        authorization:
          enabled: true
          rules:
            # About

            - GET    /about                          =&gt; hasRole('ROLE_VIEW')

            # Audit

            - GET /audit-records                     =&gt; hasRole('ROLE_VIEW')
            - GET /audit-records/**                  =&gt; hasRole('ROLE_VIEW')

            # Boot Endpoints

            - GET /management/**                  =&gt; hasRole('ROLE_MANAGE')

            # Apps

            - GET    /apps                           =&gt; hasRole('ROLE_VIEW')
            - GET    /apps/**                        =&gt; hasRole('ROLE_VIEW')
            - DELETE /apps/**                        =&gt; hasRole('ROLE_DESTROY')
            - POST   /apps                           =&gt; hasRole('ROLE_CREATE')
            - POST   /apps/**                        =&gt; hasRole('ROLE_CREATE')
            - PUT    /apps/**                        =&gt; hasRole('ROLE_MODIFY')

            # Completions

            - GET /completions/**                    =&gt; hasRole('ROLE_VIEW')

            # Job Executions &amp; Batch Job Execution Steps &amp;&amp; Job Step Execution Progress

            - GET    /jobs/executions                =&gt; hasRole('ROLE_VIEW')
            - PUT    /jobs/executions/**             =&gt; hasRole('ROLE_MODIFY')
            - GET    /jobs/executions/**             =&gt; hasRole('ROLE_VIEW')

            # Batch Job Instances

            - GET    /jobs/instances                 =&gt; hasRole('ROLE_VIEW')
            - GET    /jobs/instances/*               =&gt; hasRole('ROLE_VIEW')

            # Running Applications

            - GET    /runtime/streams                =&gt; hasRole('ROLE_VIEW')
            - GET    /runtime/apps                   =&gt; hasRole('ROLE_VIEW')
            - GET    /runtime/apps/**                =&gt; hasRole('ROLE_VIEW')

            # Stream Definitions

            - GET    /streams/definitions            =&gt; hasRole('ROLE_VIEW')
            - GET    /streams/definitions/*          =&gt; hasRole('ROLE_VIEW')
            - GET    /streams/definitions/*/related  =&gt; hasRole('ROLE_VIEW')
            - POST   /streams/definitions            =&gt; hasRole('ROLE_CREATE')
            - DELETE /streams/definitions/*          =&gt; hasRole('ROLE_DESTROY')
            - DELETE /streams/definitions            =&gt; hasRole('ROLE_DESTROY')

            # Stream Deployments

            - DELETE /streams/deployments/*          =&gt; hasRole('ROLE_DEPLOY')
            - DELETE /streams/deployments            =&gt; hasRole('ROLE_DEPLOY')
            - POST   /streams/deployments/**         =&gt; hasRole('ROLE_MODIFY')
            - GET    /streams/deployments/**         =&gt; hasRole('ROLE_VIEW')

            # Stream Validations

            - GET /streams/validation/               =&gt; hasRole('ROLE_VIEW')
            - GET /streams/validation/*              =&gt; hasRole('ROLE_VIEW')

            # Task Definitions

            - POST   /tasks/definitions              =&gt; hasRole('ROLE_CREATE')
            - DELETE /tasks/definitions/*            =&gt; hasRole('ROLE_DESTROY')
            - GET    /tasks/definitions              =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/definitions/*            =&gt; hasRole('ROLE_VIEW')

            # Task Executions

            - GET    /tasks/executions               =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/executions/*             =&gt; hasRole('ROLE_VIEW')
            - POST   /tasks/executions               =&gt; hasRole('ROLE_DEPLOY')
            - DELETE /tasks/executions/*             =&gt; hasRole('ROLE_DESTROY')

            # Task Schedules

            - GET    /tasks/schedules                =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/*              =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/instances      =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/schedules/instances/*    =&gt; hasRole('ROLE_VIEW')
            - POST   /tasks/schedules                =&gt; hasRole('ROLE_SCHEDULE')
            - DELETE /tasks/schedules/*              =&gt; hasRole('ROLE_SCHEDULE')

            # Task Validations

            - GET    /tasks/validation/               =&gt; hasRole('ROLE_VIEW')
            - GET    /tasks/validation/*              =&gt; hasRole('ROLE_VIEW')

            # Tools

            - POST   /tools/**                       =&gt; hasRole('ROLE_VIEW')</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format of each line is the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>HTTP_METHOD URL_PATTERN '=&gt;' SECURITY_ATTRIBUTE</pre>
</div>
</div>
<div class="paragraph">
<p>where</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP_METHOD is one http method, capital case</p>
</li>
<li>
<p>URL_PATTERN is an Ant style URL pattern</p>
</li>
<li>
<p>SECURITY_ATTRIBUTE is a SpEL expression.  See <a href="https://docs.spring.io/spring-security/site/docs/current/reference/htmlsingle/#el-access">Expression-Based Access Control</a>.</p>
</li>
<li>
<p>Each of those separated by one or several blank characters (spaces, tabs, and so on)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Be mindful that the above is indeed a YAML list, not a map (thus the use of '-' dashes
at the start of each line) that lives under the <code>spring.cloud.dataflow.security.authorization.rules</code> key.</p>
</div>
<div class="sect4">
<h5 id="configuration-security-authorization-local-shell-and-dashboard">Authorization - Shell and Dashboard Behavior</h5>
<div class="paragraph">
<p>When security is enabled, the dashboard and the shell are role-aware,
meaning that, depending on the assigned roles, not all functionality may be visible.</p>
</div>
<div class="paragraph">
<p>For instance, shell commands for which the user does not have the necessary roles
are marked as unavailable.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Currently, the shell&#8217;s <code>help</code> command lists commands that are unavailable.
Please track the following issue: <a href="https://github.com/spring-projects/spring-shell/issues/115" class="bare">github.com/spring-projects/spring-shell/issues/115</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Similarly, for the Dashboard, the UI does not show pages or page elements for
which the user is not authorized.</p>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-securing-management-endpoints">Securing the Spring Boot Management Endpoints</h5>
<div class="paragraph">
<p>When security is enabled, the
<a href="https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/production-ready-monitoring.html">Spring Boot HTTP Management Endpoints</a>
are secured the same way as the other REST endpoints. The management REST endpoints
are available under <code>/management</code> and require the <code>MANAGEMENT</code> role.</p>
</div>
<div class="paragraph">
<p>The default configuration in <code>dataflow-server-defaults.yml</code> has the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">management:
  endpoints:
    web:
      base-path: /management
  security:
    roles: MANAGE</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Currently, please refrain from customizing the default management path.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-uaa-authentication">9.7.4. Setting up UAA Authentication</h4>
<div class="paragraph">
<p>For local deployment scenarios, we recommend using the <a href="https://github.com/cloudfoundry/uaa">CloudFoundry User
Account and Authentication (UAA) Server</a>, which is <a href="https://openid.net/certification/">OpenID certified</a>.
While the UAA is used by <a href="https://www.cloudfoundry.org/">Cloud Foundry</a>,
it is also a fully featured stand alone OAuth2 server with enterprise features such as
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md">LDAP integration</a>.</p>
</div>
<div class="paragraph">
<p>Checkout, Build and Run UAA:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ git clone https://github.com/cloudfoundry/uaa.git
$ cd uaa/
$ ./gradlew  run</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The UAA requires <strong>Java 8</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The configuration of the UAA is driven by a
<a href="https://github.com/cloudfoundry/uaa/blob/develop/uaa/src/main/resources/uaa.yml">uaa.yml</a>
file. You can provide custom configuration but in this case we will use the
embedded default configuration that provides also a default user:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -v -d"username=marissa&amp;password=koala&amp;client_id=app&amp;grant_type=password" -u "app:appclientsecret" http://localhost:8080/uaa/oauth/token -d 'token_format=opaque'</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should produce output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">*   Trying ::1...
* TCP_NODELAY set
* Connected to localhost (::1) port 8080 (#0)
* Server auth using Basic with user 'app'
&gt; POST /uaa/oauth/token HTTP/1.1
&gt; Host: localhost:8080
&gt; Authorization: Basic YXBwOmFwcGNsaWVudHNlY3JldA==
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*
&gt; Content-Length: 85
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
* upload completely sent off: 85 out of 85 bytes
&lt; HTTP/1.1 200
&lt; Cache-Control: no-store
&lt; Pragma: no-cache
&lt; X-XSS-Protection: 1; mode=block
&lt; X-Frame-Options: DENY
&lt; X-Content-Type-Options: nosniff
&lt; Content-Type: application/json;charset=UTF-8
&lt; Transfer-Encoding: chunked
&lt; Date: Mon, 03 Dec 2018 23:58:41 GMT
&lt;
* Connection #0 to host localhost left intact
{"access_token":"0f935cea42fd4516bb36e4088f6d7c44","token_type":"bearer","id_token":"eyJhbGciOiJIUzI1NiIsImprdSI6Imh0dHBzOi8vbG9jYWxob3N0OjgwODAvdWFhL3Rva2VuX2tleXMiLCJraWQiOiJsZWdhY3ktdG9rZW4ta2V5IiwidHlwIjoiSldUIn0.eyJzdWIiOiI1ODExMWNlNC02NGRlLTQ3ZDYtYjZiZi0wZDRhNDFhNGFlMDAiLCJhdWQiOlsiYXBwIl0sImlzcyI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC91YWEvb2F1dGgvdG9rZW4iLCJleHAiOjE1NDM5MjQ3MjEsImlhdCI6MTU0Mzg4MTUyMSwiYW1yIjpbInB3ZCJdLCJhenAiOiJhcHAiLCJzY29wZSI6WyJvcGVuaWQiXSwiZW1haWwiOiJtYXJpc3NhQHRlc3Qub3JnIiwiemlkIjoidWFhIiwib3JpZ2luIjoidWFhIiwianRpIjoiMGY5MzVjZWE0MmZkNDUxNmJiMzZlNDA4OGY2ZDdjNDQiLCJwcmV2aW91c19sb2dvbl90aW1lIjoxNTQzODgxMTk1NzU2LCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiY2xpZW50X2lkIjoiYXBwIiwiY2lkIjoiYXBwIiwiZ3JhbnRfdHlwZSI6InBhc3N3b3JkIiwidXNlcl9uYW1lIjoibWFyaXNzYSIsInJldl9zaWciOiI1ZmI4N2M1NiIsInVzZXJfaWQiOiI1ODExMWNlNC02NGRlLTQ3ZDYtYjZiZi0wZDRhNDFhNGFlMDAiLCJhdXRoX3RpbWUiOjE1NDM4ODE1MjF9.qSxoygd7LUUJSEN0wGI3-U0x2tYZzHnTDuzk6AJUfBk","refresh_token":"d106513b98804a508c35d3f7b656a7fe-r","expires_in":43199,"scope":"scim.userids openid cloud_controller.read password.write cloud_controller.write","jti":"0f935cea42fd4516bb36e4088f6d7c44"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using <code>token_format</code> parameter you can requested token to be either:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>opaque</p>
</li>
<li>
<p>jwt</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In order to configure the UAA, it is recommended to use the <code>uaac</code> command line tool and target the UAA server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ gem install cf-uaac
$ uaac target http://localhost:8080/uaa</code></pre>
</div>
</div>
<div class="paragraph">
<p>Check out the user details of user <code>marissa</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ uaac token owner get cf marissa -s "" -p koala
$ uaac contexts</code></pre>
</div>
</div>
<div class="paragraph">
<p>This should also provide the relevant token details. Next, switch to the
admin user (password is <code>adminsecret</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ uaac token client get admin -s adminsecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Get a list of all configured clients:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ uaac clients</code></pre>
</div>
</div>
<div class="paragraph">
<p>This returns the interesting client app among others:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">…
  app
    scope: cloud_controller.read cloud_controller.write openid password.write scim.userids organizations.acme
    resource_ids: none
    authorized_grant_types: password implicit authorization_code client_credentials refresh_token
    redirect_uri: http://localhost:8080/** http://localhost:8080/app/
    autoapprove: openid
    authorities: uaa.resource
    name: The Ultimate Oauth App
    signup_redirect_url: http://localhost:8080/app/
    change_email_redirect_url: http://localhost:8080/app/
    lastmodified: 1543879731285
…</code></pre>
</div>
</div>
<div class="paragraph">
<p>We are going to use that <code>app</code> for Spring Cloud Data Flow but need to update
the <code>redirect_uri</code>. We will also update the client secret:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ uaac client update app --redirect_uri http://localhost:9393/login
$ uaac secret set app --secret dataflow</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we can update the relavant OAuth configuration in Spring Cloud Data Flow:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">security:
  oauth2:
    client:
      client-id: app
      client-secret: dataflow
      scope: openid                                                     <i class="conum" data-value="1"></i><b>(1)</b>
      access-token-uri: http://localhost:8080/uaa/oauth/token
      user-authorization-uri: http://localhost:8080/uaa/oauth/authorize
    resource:
      user-info-uri: http://localhost:8080/uaa/userinfo                 <i class="conum" data-value="2"></i><b>(2)</b>
      token-info-uri: http://localhost:8080/uaa/check_token             <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If you use scopes to identify roles, please make sure to also request
the relevant scopes, e.g <code>dataflow.view</code>, <code>dataflow.create</code> etc.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Used to retrieve profile information, e.g. username for display purposes (mandatory)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Used for token introspection and validation (mandatory)</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>token-info-uri</code> property is especially important when passing an externally retrieved OAuth Access Token
to Spring Cloud Data Flow. In that case Spring Cloud Data Flow will take the OAuth Access Token via the
<a href="https://github.com/spring-cloud/spring-cloud-common-security-config/blob/master/spring-cloud-common-security-config-web/src/main/java/org/springframework/cloud/common/security/support/TokenValidatingUserInfoTokenServices.java">TokenValidatingUserInfoTokenServices</a>
, and use the UAA&#8217;s
<a href="https://docs.cloudfoundry.org/api/uaa/version/4.27.0/index.html#check-token">Check Token Endpoint</a>
to not only check the validity of the token but also retrieve the associated OAuth scopes from the UAA
and store the successful authentication in Spring Cloud Data Flow&#8217;s
<a href="https://docs.spring.io/spring-security/oauth/apidocs/org/springframework/security/oauth2/provider/token/TokenStore.html">TokenStore</a>.</p>
</div>
<div class="sect4">
<h5 id="configuration-security-role-mapping">Role Mappings</h5>
<div class="paragraph">
<p>By default all roles are assigned to users that login to Spring Cloud Data Flow.
However, you can set the property:</p>
</div>
<div class="paragraph">
<p><code>spring.cloud.dataflow.security.authorization.map-oauth-scopes: true</code></p>
</div>
<div class="paragraph">
<p>This will instruct the the underlying <code>DefaultAuthoritiesExtractor</code> to map
OAuth scopes to the respective authorities. The following scopes are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Scope <code>dataflow.create</code> maps to the <code>CREATE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.deploy</code> maps to the <code>DEPLOY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.destroy</code> maps to the <code>DESTROY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.manage</code> maps to the <code>MANAGE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.modify</code> maps to the <code>MODIFY</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.schedule</code> maps to the <code>SCHEDULE</code> role</p>
</li>
<li>
<p>Scope <code>dataflow.view</code> maps to the <code>VIEW</code> role</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally you can also map arbitrary scopes to each of the Data Flow roles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spring:
  cloud:
    deployer:
      local:
        free-disk-space-percentage: 0
    dataflow:
      security:
        authorization:
          map-oauth-scopes: true                                    <i class="conum" data-value="1"></i><b>(1)</b>
          role-mappings:
            ROLE_CREATE: dataflow.create                            <i class="conum" data-value="2"></i><b>(2)</b>
            ROLE_DEPLOY: dataflow.deploy
            ROLE_DESTROY: dataflow.destoy
            ROLE_MANAGE: dataflow.manage
            ROLE_MODIFY: dataflow.modify
            ROLE_SCHEDULE: dataflow.schedule
            ROLE_VIEW: dataflow.view</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enables explicit mapping support from OAuth scopes to Data Flow roles</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>When role mapping support is enabled, you must provide a mapping for
all 7 Spring Cloud Data Flow roles <strong>ROLE_CREATE</strong>, <strong>ROLE_DEPLOY</strong>, <strong>ROLE_DESTROY</strong>, <strong>ROLE_MANAGE</strong>, <strong>ROLE_MODIFY</strong>, <strong>ROLE_SCHEDULE</strong>, <strong>ROLE_VIEW</strong>.</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can assign an OAuth scope to multiple Spring Cloud Data Flow roles, giving you flexible regarding the granularity of your authorization configuration.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-ldap-authentication">9.7.5. LDAP Authentication</h4>
<div class="paragraph">
<p>LDAP Authentication (Lightweight Directory Access Protocol) is indirectly
provided by Spring Cloud Data Flow using the UAA. The UAA itself provides
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md">comprehensive LDAP support</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>While you may use your own OAuth2 authentication server, the LDAP support
documented here requires using the UAA as authentication server. For any
other provider, please consult the documentation for that particular provider.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The UAA supports authentication against an LDAP (Lightweight Directory Access Protocol)
server using the following modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-search-and-bind">Direct bind</a></p>
</li>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-bind">Search and bind</a></p>
</li>
<li>
<p><a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#ldap-search-and-compare">Search and Compare</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When integrating with an external identity provider such as LDAP, authentication
within the UAA becomes <strong>chained</strong>. UAA first attempts to authenticate with
a user&#8217;s credentials against the UAA user store before the external provider,
LDAP. For more information, see
<a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#chained-authentication">Chained Authentication</a>
in the <em>User Account and Authentication LDAP Integration</em> GitHub documentation.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="configuration-security-ldap-role-mapping">LDAP Role Mapping</h5>
<div class="paragraph">
<p>The OAuth2 authentication server (UAA), provides comprehensive support
for <a href="https://github.com/cloudfoundry/uaa/blob/develop/docs/UAA-LDAP.md#scopes">mapping LDAP groups to OAuth scopes</a>.</p>
</div>
<div class="paragraph">
<p>The following options exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>ldap/ldap-groups-null.xml</code> No groups will be mapped</p>
</li>
<li>
<p><code>ldap/ldap-groups-as-scopes.xml</code> Group names will be retrieved from an LDAP attribute. E.g. <code>CN</code></p>
</li>
<li>
<p><code>ldap/ldap-groups-map-to-scopes.xml</code> Groups will be mapped to UAA groups using the external_group_mapping table</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These values are specified via the configuration property <code>ldap.groups.file controls</code>. Under the covers
these values reference a Spring XML configuration file.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>During test and development it might be necessary to make frequent changes
to LDAP groups and users and see those reflected in the UAA. However, user
information is cached for the duration of the login. The following script
helps to retrieve the updated information quickly:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">#!/bin/bash
uaac token delete --all
uaac target http://localhost:8080/uaa
uaac token owner get cf &lt;username&gt; -s "" -p  &lt;password&gt;
uaac token client get admin -s adminsecret
uaac user get &lt;username&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="configuration-security-ldap-uaa-example">LDAP Security and UAA Example Application</h5>
<div class="paragraph">
<p>In order to get up and running quickly and to help you understand the security architecture, we
provide the <a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/master/security-ldap-uaa-example">LDAP Security and UAA Example</a>
on GitHub.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This is solely a demo/example application and shall not be used in production.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The setup consists of:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Spring Cloud Data Flow Server</p>
</li>
<li>
<p>Skipper Server</p>
</li>
<li>
<p>CloudFoundry User Account and Authentication (UAA) Server</p>
</li>
<li>
<p>Lightweight Directory Access Protocol (LDAP) Server (provided by <a href="https://directory.apache.org/">Apache Directory Server</a> (ApacheDS))</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ultimately, as part of this example, you will learn how to configure and launch
a Composed Task using this security setup.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-spring-security-oauth2-example">9.7.6. Spring Security OAuth2 Resource/Authorization Server Sample</h4>
<div class="paragraph">
<p>For local testing and development, you may also use the Resource and Authorization
Server support provided by
<a href="https://projects.spring.io/spring-security-oauth/">Spring Security OAuth</a>. It
allows you to easily create your own (very basic) OAuth2 Server with the following simple annotations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@EnableResourceServer</code></p>
</li>
<li>
<p><code>@EnableAuthorizationServer</code></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In fact the UAA uses Spring Security OAuth2 under the covers, thus the basic endpoints
are the same.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A working example application can be found at:
<a href="https://github.com/ghillert/oauth-test-server/">https://github.com/ghillert/oauth-test-server/</a></p>
</div>
<div class="paragraph">
<p>Clone the project and configure Spring Cloud Data Flow with the respective Client ID and Client Secret:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">security:
  oauth2:
    client:
      client-id: myclient
      client-secret: mysecret
      access-token-uri: http://127.0.0.1:9999/oauth/token
      user-authorization-uri: http://127.0.0.1:9999/oauth/authorize
    resource:
      user-info-uri: http://127.0.0.1:9999/me
      token-info-uri: http://127.0.0.1:9999/oauth/check_token</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This sample application is not intended for production use
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="configuration-security-shell-authentication">9.7.7. Data Flow Shell Authentication</h4>
<div class="paragraph">
<p>When using the Shell, the credentials can either be provided via username and password
or by specifying a <em>credentials-provider</em> command. If your OAuth2 provider supports
the <em>Password</em> Grant Type you can start the <em>Data Flow Shell</em> with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-dataflow-shell-2.1.0.RELEASE.jar         \
  --dataflow.uri=http://localhost:9393                                \   <i class="conum" data-value="1"></i><b>(1)</b>
  --dataflow.username=my_username                                     \   <i class="conum" data-value="2"></i><b>(2)</b>
  --dataflow.password=my_password                                     \   <i class="conum" data-value="3"></i><b>(3)</b>
  --skip-ssl-validation  true                                         \   <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Optional, defaults to <a href="http://localhost:9393" class="bare">localhost:9393</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Mandatory.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If the password is not provided, the user is prompted for it.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optional, defaults to <code>false</code>, ignores certificate errors (when using self-signed certificates). Use cautiously!</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Keep in mind that when authentication for Spring Cloud Data Flow is enabled,
the underlying OAuth2 provider <strong>must</strong> support the <em>Password</em> OAuth2 Grant Type
if you want to use the Shell via username/password authentication.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From within the Data Flow Shell you can also provide credentials by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">server-unknown:&gt;dataflow config server                                \
  --uri  http://localhost:9393                                        \   <i class="conum" data-value="1"></i><b>(1)</b>
  --username myuser                                                   \   <i class="conum" data-value="2"></i><b>(2)</b>
  --password mysecret                                                 \   <i class="conum" data-value="3"></i><b>(3)</b>
  --skip-ssl-validation  true                                         \   <i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Optional, defaults to <a href="http://localhost:9393" class="bare">localhost:9393</a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Mandatory..</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>If security is enabled, and the password is not provided, the user is prompted for it.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Optional, ignores certificate errors (when using self-signed certificates). Use cautiously!</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows a typical shell command to connect to and authenticate a Data
Flow Server:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-security-shell-target.png" alt="Target and Authenticate with the Data Flow Server from within the Shell">
</div>
<div class="title">Figure 1. Target and Authenticate with the Data Flow Server from within the Shell</div>
</div>
<div class="paragraph">
<p>Once successfully targeted, you should see the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;dataflow config info
dataflow config info

╔═══════════╤═══════════════════════════════════════╗
║Credentials│[username='my_username, password=****']║
╠═══════════╪═══════════════════════════════════════╣
║Result     │                                       ║
║Target     │http://localhost:9393                  ║
╚═══════════╧═══════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can specify the <em>credentials-provider</em> command in order to
pass-in a bearer token directly, instead of providing a username and password.
This works from within the shell or by providing the
<code>--dataflow.credentials-provider-command</code> command-line argument when starting the Shell.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using the <em>credentials-provider</em> command, please be aware that your
specified command <strong>must</strong> return a <em>Bearer token</em> (Access Token prefixed with <em>Bearer</em>).
For instance, in Unix environments the following simplistic command can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar spring-cloud-dataflow-shell-2.1.0.RELEASE.jar \
  --dataflow.uri=http://localhost:9393 \
  --dataflow.credentials-provider-command="echo Bearer 123456789"</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_about_configuration">9.8. About Configuration</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow About Restful API result contains a display name,
version, and, if specified, a URL for each of the major dependencies that
comprise Spring Cloud Data Flow.  The result (if enabled) also contains the
sha1 and or sha256 checksum values for the shell dependency. The information
that is returned for each of the dependencies is configurable by setting the following
properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-core.name: the
name to be used for the core.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-core.version:
the version to be used for the core.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-dashboard.name: the
name to be used for the dashboard.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-dashboard.version:
the version to be used for the dashboard.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-implementation.name: the
name to be used for the implementation.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-implementation.version:
the version to be used for the implementation.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.name: the
name to be used for the shell.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.version:
the version to be used for the shell.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.url:
the URL to be used for downloading the shell dependency.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1: the sha1
checksum value that is returned with the shell dependency info.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256:
the sha256 checksum value that is returned with the shell dependency info.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1-url:
if the <code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha1</code>
is not specified, SCDF uses the contents of the file specified at this URL for the checksum.</p>
</li>
<li>
<p>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256-url:
if the <code>spring.cloud.dataflow.version-info.spring-cloud-dataflow-shell.checksum-sha256</code>
is not specified, SCDF uses the contents of the file specified at this URL for the checksum.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_enabling_shell_checksum_values">9.8.1. Enabling Shell Checksum values</h4>
<div class="paragraph">
<p>By default, checksum values are not displayed for the shell dependency. If
you need this feature enabled, set the
<code>spring.cloud.dataflow.version-info.dependency-fetch.enabled</code> property to true.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reserved_values_for_urls">9.8.2. Reserved Values for URLs</h4>
<div class="paragraph">
<p>There are reserved values (surrounded by curly braces) that you can insert into
the URL that will make sure that the links are up to date:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>repository: if using a build-snapshot, milestone, or release candidate of
Data Flow, the repository refers to the repo-spring-io repository. Otherwise, it
refers to Maven Central.</p>
</li>
<li>
<p>version: Inserts the version of the jar/pom.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example,
<code><a href="https://myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/{version}/spring-cloud-dataflow-shell-{version}.jar" class="bare">myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/{version}/spring-cloud-dataflow-shell-{version}.jar</a></code>
produces
<code><a href="https://myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/1.2.3.RELEASE/spring-cloud-dataflow-shell-1.2.3.RELEASE.jar" class="bare">myrepository/org/springframework/cloud/spring-cloud-dataflow-shell/1.2.3.RELEASE/spring-cloud-dataflow-shell-1.2.3.RELEASE.jar</a></code>
if you were using the 1.2.3.RELEASE version of the Spring Cloud Data Flow Shell</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-cloudfoundry">10. Configuration - Cloud Foundry</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure Spring Cloud Data Flow server&#8217;s features, such as security and which relational database to use.
It also describes how to configure Spring Cloud Data Flow shell&#8217;s features.</p>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-enable-disable-specific-features">10.1. Feature Toggles</h3>
<div class="paragraph">
<p>Data Flow server offers a specific set of features that you can enable or disable when launching. These features include all the lifecycle operations and REST endpoints (server, client implementations including Shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
</li>
<li>
<p>Tasks</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable or disable these features by setting the following boolean properties when you launch the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.streams-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, all features are enabled.</p>
</div>
<div class="paragraph">
<p>The REST endpoint (<code>/features</code>) provides information on the enabled and disabled features.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-deployer">10.2. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties of the Data Flow server&#8217;s <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry">Cloud Foundry deployer</a> to customize how applications are deployed.
When deploying with the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.cloudfoundry.&lt;deployerPropertyName&gt;</code>. See below for an example shell usage.
These properties are also used when configuring the <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task platforms</a> in the Data Flow server and and Kubernetes platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">services</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The names of services to bind to the deployed application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">host</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The host name to use as part of the route.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hostname derived by Cloud Foundry</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">domain</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The domain to use when mapping routes for the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">routes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The list of routes that the application should be bound to.  Mutually exclusive with host and domain.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">buildpack</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The buildpack to use for deploying the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://github.com/cloudfoundry/java-buildpack.git#v4.16.1" class="bare">github.com/cloudfoundry/java-buildpack.git#v4.16.1</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of memory to allocate. Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The amount of disk space to allocate. Default unit is mebibytes, 'M' and 'G" suffixes supported.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1024m</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">healthCheck</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of health check to perform on deployed application.  Values can be HTTP, NONE, PROCESS, and PORT</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PORT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">healthCheckHttpEndpoint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path that the http health check will use,</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">/health</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">healthCheckTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The timeout value for health checks in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">120</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">instances</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of instances to run.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">enableRandomAppNamePrefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag to enable prefixing the app name with a random prefix.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for blocking API calls, in seconds.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">statusTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout for status API operations in milliseconds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5000</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">useSpringApplicationJson</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flag to indicate whether application properties are fed into SPRING_APPLICATION_JSON or as environment variables.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">stagingTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout allocated for staging the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15 minutes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">startupTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout allocated for starting the application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5 minutes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">appNamePrefix</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String to use as prefix for name of deployed application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Boot property <code>spring.application.name</code> of the application that is using the deployer library.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deleteRoutes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to also delete routes when un-deploying an application.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">javaOpts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Java Options to pass to the JVM, e.g -Dtest=foo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Here are some examples using the Cloud Foundry deployment properties:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can set the buildpack that is used to deploy each application. For example, to use the Java offline buildback,
set the following environment variable:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_BUILDPACK java_buildpack_offline</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>You can customize the health check mechanism used by Cloud Foundry to assert whether apps are running by using the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK</code> environment variable. The current supported options
are <code>http</code> (the default), <code>port</code>, and <code>none</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also set environment variables that specify the the HTTP-based health check endpoint and timeout: <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK_ENDPOINT</code> and <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_HEALTH_CHECK_TIMEOUT</code>, respectively. These default to <code>/health</code> (the Spring Boot default location) and <code>120</code> seconds.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can also specify deployment properties by using the DSL. For instance, if you want to set the allocated memory for the <code>http</code> application to 512m and also bind a mysql service to the <code>jdbc</code> application, you can run the following commands:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:> stream create --name mysqlstream --definition "http | jdbc --tableName=names --columns=name"
dataflow:> stream deploy --name mysqlstream --properties "deployer.http.memory=512, deployer.jdbc.cloudfoundry.services=mysql"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>You can configure these settings separately for stream and task apps. To alter settings for tasks,
substitute <code>TASK</code> for <code>STREAM</code> in the property name, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_TASK_MEMORY 512</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-tasks">10.3. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with Skipper, Tasks can be launched to multiple platforms.
When Data Flow is running on Cloud Foundry, a Task platfom must be defined.
To configure new platform accounts that target Cloud Foundry, provide an entry under the <code>spring.cloud.dataflow.task.platform.cloudfoundry</code> section in your <code>application.yaml</code> file for via another Spring Boot supported mechanism.
In the following example, two Cloud Foundry platform accounts named <code>dev</code> and  <code>qa</code> are created.
The keys such as <code>memory</code> and <code>disk</code> are <a href="#configuration-cloudfoundry-deployer">Cloud Foundry Deployer Properties</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          cloudfoundry:
            accounts:
              dev:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrg
                  space: mySpace
                  domain: cfapps.io
                  username: user@example.com
                  password: drowssap
                  skipSslValidation: false
                deployment:
                  memory: 512m
                  disk: 2048m
                  instances: 4
                  services: rabbit,mysql
                  appNamePrefix: dev1
              qa:
                connection:
                  url: https://api.run.pivotal.io
                  org: myOrgQA
                  space: mySpaceQA
                  domain: cfapps.io
                  username: user@example.com
                  password: drowssap
                  skipSslValidation: true
                deployment:
                  memory: 756m
                  disk: 724m
                  instances: 2
                  services: rabbitQA,mysqlQA
                  appNamePrefix: qa1</code></pre>
</div>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is on Cloud Foundry to deploy tasks to Cloud Foundry or Kubernetes.  See the section on <a href="#configuration-kubernetes-tasks">Kubernetes Task Platform Configuration</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-app-names-cloud-foundry">10.4. Application Names and Prefixes</h3>
<div class="paragraph">
<p>To help avoid clashes with routes across spaces in Cloud Foundry, a naming strategy that provides a random prefix to a
deployed application is available and is enabled by default. You can override the <a href="https://github.com/spring-cloud/spring-cloud-deployer-cloudfoundry#application-name-settings-and-deployments">default configurations</a>
and set the respective properties by using <code>cf set-env</code> commands.</p>
</div>
<div class="paragraph">
<p>For instance, if you want to disable the randomization, you can override it by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf set-env dataflow-server SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_ENABLE_RANDOM_APP_NAME_PREFIX false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-custom-routes">10.5. Custom Routes</h3>
<div class="paragraph">
<p>As an alternative to a random name or to get even more control over the hostname used by the deployed apps, you can use
custom deployment properties, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>stream create foo --definition "http | log"

sdataflow:>stream deploy foo --properties "deployer.http.cloudfoundry.domain=mydomain.com,
                                          deployer.http.cloudfoundry.host=myhost,
                                          deployer.http.cloudfoundry.route-path=my-path"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example binds the <code>http</code> app to the <code><a href="https://myhost.mydomain.com/my-path" class="bare">myhost.mydomain.com/my-path</a></code> URL. Note that this
example shows <strong>all</strong> of the available customization options. In practice, you can use only one or two out of the three.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-docker-apps">10.6. Docker Applications</h3>
<div class="paragraph">
<p>Starting with version 1.2, it is possible to register and deploy Docker based apps as part of streams and tasks by using
Data Flow for Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>If you use Spring Boot and RabbitMQ-based Docker images, you can provide a common deployment property
to facilitate binding the apps to the RabbitMQ service. Assuming your RabbitMQ service is named <code>rabbit</code>, you can provide the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf set-env dataflow-server SPRING_APPLICATION_JSON '{"spring.cloud.dataflow.applicationProperties.stream.spring.rabbitmq.addresses": "${vcap.services.rabbit.credentials.protocols.amqp.uris}"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For Spring Cloud Task apps, you can use something similar to the following, if you use a database service instance named <code>mysql</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf set-env SPRING_DATASOURCE_URL '${vcap.services.mysql.credentials.jdbcUrl}'
cf set-env SPRING_DATASOURCE_USERNAME '${vcap.services.mysql.credentials.username}'
cf set-env SPRING_DATASOURCE_PASSWORD '${vcap.services.mysql.credentials.password}'
cf set-env SPRING_DATASOURCE_DRIVER_CLASS_NAME 'org.mariadb.jdbc.Driver'</code></pre>
</div>
</div>
<div class="paragraph">
<p>For non-Java or non-Boot applications, your Docker app must parse the <code>VCAP_SERVICES</code> variable in order to bind to any available services.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Passing application properties</div>
<div class="paragraph">
<p>When using non-Boot applications, chances are that you want to pass the application properties by using traditional
environment variables, as opposed to using the special <code>SPRING_APPLICATION_JSON</code> variable. To do so, set the
following variables for streams and tasks, respectively:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_USE_SPRING_APPLICATION_JSON=false</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-service-binding-at-application-level">10.7. Application-level Service Bindings</h3>
<div class="paragraph">
<p>When deploying streams in Cloud Foundry, you can take advantage of application-specific service bindings, so not all
services are globally configured for all the apps orchestrated by Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>For instance, if you want to provide a <code>mysql</code> service binding only for the <code>jdbc</code> application in the following stream
definition, you can pass the service binding as a deployment property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>stream create --name httptojdbc --definition "http | jdbc"
dataflow:>stream deploy --name httptojdbc --properties "deployer.jdbc.cloudfoundry.services=mysqlService"</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>mysqlService</code> is the name of the service specifically bound only to the <code>jdbc</code> application and the <code>http</code>
application does not get the binding by this method.</p>
</div>
<div class="paragraph">
<p>If you have more than one service to bind, they can be passed as comma-separated items
(for example: <code>deployer.jdbc.cloudfoundry.services=mysqlService,someService</code>).</p>
</div>
</div>
<div class="sect2">
<h3 id="configure-service-binding-parameters">10.8. Configuring Service binding parameters</h3>
<div class="paragraph">
<p>The CloudFoundry API supports providing configuration parameters when binding a service instance. Some service brokers require or
recommend binding configuration.
For example, binding the <a href="https://docs.pivotal.io/partners/gcp-sb/using.html">Google Cloud Platform service</a> using the CF CLI looks something like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>cf bind-service my-app my-google-bigquery-example -c '{"role":"bigquery.user"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Likewise the <a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">NFS Volume Service</a> supports binding configuration such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>cf bind-service my-app nfs_service_instance -c '{"uid":"1000","gid":"1000","mount":"/var/volume1","readonly":true}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Starting with version 2.0, Data Flow for Cloud Foundry allows you to provide binding configuration parameters may be provided in the app level or server level <code>cloudfoundry.services</code> deployment property. For example, to bind to the nfs service, as above :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt; stream deploy --name mystream --properties "deployer.&lt;app&gt;.cloudfoundry.services='nfs_service_instance uid:1000,gid:1000,mount:/var/volume1,readonly:true'"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The format is intended to be compatible with the Data Flow DSL parser.
Generally, the <code>cloudfoundry.services</code> deployment property accepts a comma delimited value.
Since a comma is also used to separate configuration parameters, and to avoid white space issues, any item including configuration parameters must be enclosed in singe quotes. Valid values incude things like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>rabbitmq,'nfs_service_instance uid:1000,gid:1000,mount:/var/volume1,readonly:true',mysql,'my-google-bigquery-example role:bigquery.user'</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Spaces are permitted within single quotes and  <code>=</code> may be used instead of <code>:</code> to delimit key-value pairs.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-ups">10.9. User-provided Services</h3>
<div class="paragraph">
<p>In addition to marketplace services, Cloud Foundry supports
<a href="https://docs.cloudfoundry.org/devguide/services/user-provided.html">User-provided Services</a> (UPS). Throughout this reference manual,
regular services have been mentioned, but there is nothing precluding the use of User-provided Services as well, whether for use as the
messaging middleware (for example, if you want to use an external Apache Kafka installation) or for use by some
of the stream applications (for example, an Oracle Database).</p>
</div>
<div class="paragraph">
<p>Now we review an example of extracting and supplying the connection credentials from a UPS.</p>
</div>
<div class="paragraph">
<p>The following example shows a sample UPS setup for Apache Kafka:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">cf create-user-provided-service kafkacups -p '{”brokers":"HOST:PORT","zkNodes":"HOST:PORT"}'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The UPS credentials are wrapped within <code>VCAP_SERVICES</code>, and they can be supplied directly in the stream definition, as
the following example shows.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">stream create fooz --definition "time | log"
stream deploy fooz --properties "app.time.spring.cloud.stream.kafka.binder.brokers=${vcap.services.kafkacups.credentials.brokers},app.time.spring.cloud.stream.kafka.binder.zkNodes=${vcap.services.kafkacups.credentials.zkNodes},app.log.spring.cloud.stream.kafka.binder.brokers=${vcap.services.kafkacups.credentials.brokers},app.log.spring.cloud.stream.kafka.binder.zkNodes=${vcap.services.kafkacups.credentials.zkNodes}"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-db-connection-pool">10.10. Database Connection Pool</h3>
<div class="paragraph">
<p>As of Data Flow 2.0, the Spring Cloud Connector library is no longer used to create the DataSource.
The library  <a href="https://github.com/pivotal-cf/java-cfenv">java-cfenv</a> is now used which allows you to set <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-connect-to-production-database">Spring Boot properties</a> to configure the connection pool.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-maximum-disk-quota-configuration">10.11. Maximum Disk Quota</h3>
<div class="paragraph">
<p>By default, every application in Cloud Foundry starts with 1G disk quota and this can be adjusted to a default maximum of
2G. The default maximum can also be overridden up to 10G by using Pivotal Cloud Foundry&#8217;s (PCF) Ops Manager GUI.</p>
</div>
<div class="paragraph">
<p>This configuration is relevant for Spring Cloud Data Flow because every task deployment is composed of applications
(typically Spring Boot uber-jar&#8217;s), and those applications are resolved from a remote maven repository. After resolution,
the application artifacts are downloaded to the local Maven Repository for caching and reuse. With this happening in the background,
the default disk quota (1G) can fill up rapidly, especially when we experiment with streams that
are made up of unique applications. In order to overcome this disk limitation and depending
on your scaling requirements, you may want to change the default maximum from 2G to 10G. Let&#8217;s review the
steps to change the default maximum disk quota allocation.</p>
</div>
<div class="sect3">
<h4 id="_pcf_s_operations_manager">10.11.1. PCF&#8217;s Operations Manager</h4>
<div class="paragraph">
<p>From PCF&#8217;s Ops Manager, select the &#8220;Pivotal Elastic Runtime&#8221; tile and navigate to the &#8220;Application Developer Controls&#8221; tab.
Change the &#8220;Maximum Disk Quota per App (MB)&#8221; setting from 2048 (2G) to 10240 (10G). Save the disk quota update and click
&#8220;Apply Changes&#8221; to complete the configuration override.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-scaling">10.12. Scale Application</h3>
<div class="paragraph">
<p>Once the disk quota change has been successfully applied and assuming you have a <a href="#running-on-cloudfoundry">running application</a>,
you can scale the application with a new <code>disk_limit</code> through the CF CLI, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">→ cf scale dataflow-server -k 10GB

Scaling app dataflow-server in org ORG / space SPACE as user...
OK

....
....
....
....

     state     since                    cpu      memory           disk           details
#0   running   2016-10-31 03:07:23 PM   1.8%     497.9M of 1.1G   193.9M of 10G</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can then list the applications and see the new maximum disk space, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">→ cf apps
Getting apps in org ORG / space SPACE as user...
OK

name              requested state   instances   memory   disk   urls
dataflow-server   started           1/1         1.1G     10G    dataflow-server.apps.io</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-managing-disk-utilization">10.13. Managing Disk Use</h3>
<div class="paragraph">
<p>Even when configuring the Data Flow server to use 10G of space, there is the possibility of exhausting
the available space on the local disk.
If you deploy the Data Flow server by using the default <code>port</code> health check type, you must explicitly monitor the disk space on the server in order to avoid running out space.
If you deploy the server by using the <code>http</code> health check type (see the next example), the Data Flow server is restarted if there is low disk space.
This is due to Spring Boot&#8217;s <a href="https://github.com/spring-projects/spring-boot/blob/v1.5.14.RELEASE/spring-boot-actuator/src/main/java/org/springframework/boot/actuate/health/DiskSpaceHealthIndicator.java">Disk Space Health Indicator</a>.
You can <a href="https://docs.spring.io/spring-boot/docs/1.5.14.RELEASE/reference/htmlsingle/#common-application-properties">configure</a> the settings of the Disk Space Health Indicator by using the properties that have the <code>management.health.diskspace</code> prefix.</p>
</div>
<div class="paragraph">
<p>For version 1.7, we are investigating the use of <a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">Volume Services</a> for the Data Flow server to store <code>.jar</code> artifacts before pushing them to Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>The following example shows how to deploy the <code>http</code> health check type to an endpoint called <code>/management/health</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>---
  ...
  health-check-type: http
  health-check-http-endpoint: /management/health</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-app-resolution-options">10.14. Application Resolution Alternatives</h3>
<div class="paragraph">
<p>Though we highly recommend using Maven Repository for application <a href="https://docs.spring.io/spring-cloud-dataflow/docs//reference/htmlsingle/#spring-cloud-dataflow-register-stream-apps">resolution and registration</a>
in Cloud Foundry, there might be situations where an alternative approach would make sense. The following alternative options
could help you resolve applications when running on Cloud Foundry.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>With the help of Spring Boot, we can serve <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-developing-web-applications.html#boot-features-spring-mvc-static-content">static content</a>
in Cloud Foundry. A simple Spring Boot application can bundle all the required stream and task applications. By having it
run on Cloud Foundry, the static application can then serve the über-jar&#8217;s. From the shell, you can, for example, register the
application with the name <code>http-source.jar</code> by using <code>--uri=http://&lt;Route-To-StaticApp&gt;/http-source.jar</code>.</p>
</li>
<li>
<p>The über-jar&#8217;s can be hosted on any external server that&#8217;s reachable over HTTP. They can be resolved from raw GitHub URIs
as well. From the shell, you can, for example, register the app with the name <code>http-source.jar</code> by using <code>--uri=http://&lt;Raw_GitHub_URI&gt;/http-source.jar</code>.</p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/buildpacks/staticfile/index.html">Static Buildpack</a> support in Cloud Foundry is another
option. A similar HTTP resolution works on this model, too.</p>
</li>
<li>
<p><a href="https://docs.cloudfoundry.org/devguide/services/using-vol-services.html">Volume Services</a> is another great option.
The required über-jars can be hosted in an external file system. With the help of volume-services, you can, for
example, register the application with the name <code>http-source.jar</code> by using <code>--uri=file://&lt;Path-To-FileSystem&gt;/http-source.jar</code>.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-security">10.15. Security</h3>
<div class="paragraph">
<p>By default, the Data Flow server is unsecured and runs on an unencrypted HTTP connection. You can secure your REST endpoints
(as well as the Data Flow Dashboard) by enabling HTTPS and requiring clients to authenticate.
For more details about securing the
REST endpoints and configuring to authenticate against an OAUTH backend (UAA and SSO running on Cloud Foundry),
see the security section from the core <a href="https://docs.spring.io/spring-cloud-dataflow/docs//reference/htmlsingle/#configuration-security">reference guide</a>. You can configure the security details in <code>dataflow-server.yml</code> or pass them as environment variables through <code>cf set-env</code> commands.</p>
</div>
<div class="sect3">
<h4 id="configuration-cloudfoundry-authentication">10.15.1. Authentication</h4>
<div class="paragraph">
<p>Spring Cloud Data Flow can either integrate with Pivotal Single Sign-On Service
(for example, on PWS) or Cloud Foundry User Account and Authentication (UAA) Server.</p>
</div>
<div class="sect4">
<h5 id="configuration-cloudfoundry-security-sso">Pivotal Single Sign-On Service</h5>
<div class="paragraph">
<p>When deploying Spring Cloud Data Flow to Cloud Foundry, you can bind the
application to the Pivotal Single Sign-On Service. By doing so, Spring Cloud
Data Flow takes advantage of the
<a href="https://github.com/pivotal-cf/java-cfenv">Java CFEnv</a>,
which provides Cloud Foundry-specific auto-configuration support for OAuth 2.0.</p>
</div>
<div class="paragraph">
<p>To do so, bind the Pivotal Single Sign-On Service to your Data Flow Server application and
provide the following properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">SPRING_CLOUD_DATAFLOW_SECURITY_CFUSEUAA: false                                                 <i class="conum" data-value="1"></i><b>(1)</b>
SECURITY_OAUTH2_CLIENT_CLIENTID: "${security.oauth2.client.clientId}"
SECURITY_OAUTH2_CLIENT_CLIENTSECRET: "${security.oauth2.client.clientSecret}"
SECURITY_OAUTH2_CLIENT_ACCESSTOKENURI: "${security.oauth2.client.accessTokenUri}"
SECURITY_OAUTH2_CLIENT_USERAUTHORIZATIONURI: "${security.oauth2.client.userAuthorizationUri}"
SECURITY_OAUTH2_RESOURCE_USERINFOURI: "${security.oauth2.resource.userInfoUri}"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>It is important that the property <code>spring.cloud.dataflow.security.cf-use-uaa</code> is set to <code>false</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Authorization is similarly supported for non-Cloud Foundry security scenarios.
See the security section from the core Data Flow <a href="https://docs.spring.io/spring-cloud-dataflow/docs//reference/htmlsingle/#configuration-security">reference guide</a>.</p>
</div>
<div class="paragraph">
<p>As the provisioning of roles can vary widely across environments, we by
default assign all Spring Cloud Data Flow roles to users.</p>
</div>
<div class="paragraph">
<p>You can customize this behavior by providing your own <a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/security/oauth2/resource/AuthoritiesExtractor.html"><code>AuthoritiesExtractor</code></a>.</p>
</div>
<div class="paragraph">
<p>The following example shows one possible approach to set the custom <code>AuthoritiesExtractor</code> on the <code>UserInfoTokenServices</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public class MyUserInfoTokenServicesPostProcessor
	implements BeanPostProcessor {

	@Override
	public Object postProcessBeforeInitialization(Object bean, String beanName) {
		if (bean instanceof UserInfoTokenServices) {
			final UserInfoTokenServices userInfoTokenServices == (UserInfoTokenServices) bean;
			userInfoTokenServices.setAuthoritiesExtractor(ctx.getBean(AuthoritiesExtractor.class));
		}
		return bean;
	}

	@Override
	public Object postProcessAfterInitialization(Object bean, String beanName) {
		return bean;
	}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can declare it in your configuration class as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Bean
public BeanPostProcessor myUserInfoTokenServicesPostProcessor() {
	BeanPostProcessor postProcessor == new MyUserInfoTokenServicesPostProcessor();
	return postProcessor;
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="configuration-cloudfoundry-security-uaa">Cloud Foundry UAA</h5>
<div class="paragraph">
<p>The availability of Cloud Foundry User Account and Authentication (UAA) depends on the Cloud Foundry environment.
In order to provide UAA integration, you have to provide the necessary
OAuth2 configuration properties (for example, by setting the <code>SPRING_APPLICATION_JSON</code>
property).</p>
</div>
<div class="paragraph">
<p>The following JSON example shows how to create a security configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "security.oauth2.client.client-id": "scdf",
  "security.oauth2.client.client-secret": "scdf-secret",
  "security.oauth2.client.access-token-uri": "https://login.cf.myhost.com/oauth/token",
  "security.oauth2.client.user-authorization-uri": "https://login.cf.myhost.com/oauth/authorize",
  "security.oauth2.resource.user-info-uri": "https://login.cf.myhost.com/userinfo"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default, the <code>spring.cloud.dataflow.security.cf-use-uaa</code>  property is set to <code>true</code>. This property activates a special
<a href="https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/security/oauth2/resource/AuthoritiesExtractor.html"><code>AuthoritiesExtractor</code></a> called <code>CloudFoundryDataflowAuthoritiesExtractor</code>.</p>
</div>
<div class="paragraph">
<p>If you do not use CloudFoundry UAA, you should set <code>spring.cloud.dataflow.security.cf-use-uaa</code> to <code>false</code>.</p>
</div>
<div class="paragraph">
<p>Under the covers, this <code>AuthoritiesExtractor</code> calls out to the
<a href="https://apidocs.cloudfoundry.org/253/apps/retrieving_permissions_on_a_app.html">Cloud Foundry
Apps API</a> and ensure that users are in fact Space Developers.</p>
</div>
<div class="paragraph">
<p>If the authenticated user is verified as a Space Developer, all roles are assigned.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_configuration_reference">10.16. Configuration Reference</h3>
<div class="paragraph">
<p>You must provide several pieces of configuration. These are Spring Boot <code>@ConfigurationProperties</code>, so you can set
them as environment variables or by any other means that Spring Boot supports. The following listing is in environment
variable format, as that is an easy way to get started configuring Boot applications in Cloud Foundry.
Note that in the future, you will be able to deploy tasks to multiple platforms, but for 2.0.0.M1 you can deploy only to a single platform and the name must be <code>default</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># Default values appear after the equal signs.
# Example values, typical for Pivotal Web Services, are included as comments.

# URL of the CF API (used when using cf login -a for example) - for example, https://api.run.pivotal.io
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL=

# The name of the organization that owns the space above - for example, youruser-org
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG=

# The name of the space into which modules will be deployed - for example, development
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE=

# The root domain to use when mapping routes - for example, cfapps.io
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN=

# The user name and password of the user to use to create applications
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME=
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD

# Whether to allow self-signed certificates during SSL validation (you should NOT do so in production)
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION

# A comma-separated set of service instance names to bind to every deployed task application.
# Among other things, this should include an RDBMS service that is used
# for Spring Cloud Task execution reporting, such as my_postgres
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES
spring.cloud.deployer.cloudfoundry.task.services=

# Timeout, in seconds, to use when doing blocking API calls to Cloud Foundry
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_API_TIMEOUT=

# Timeout, in milliseconds, to use when querying the Cloud Foundry API to compute app status
SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_STATUS_TIMEOUT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that you can set <code>spring.cloud.deployer.cloudfoundry.services</code>,
<code>spring.cloud.deployer.cloudfoundry.buildpack</code>, or the Spring Cloud Deployer-standard
<code>spring.cloud.deployer.memory</code> and <code>spring.cloud.deployer.disk</code>
as part of an individual deployment request by using the <code>deployer.&lt;app-name&gt;</code> shortcut, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">stream create --name ticktock --definition "time | log"
stream deploy --name ticktock --properties "deployer.time.memory=2g"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The commands in the preceding example deploy the time source with 2048MB of memory, while the log sink uses the default 1024MB.</p>
</div>
<div class="paragraph">
<p>When you deploy a stream, you can also pass <code>JAVA_OPTS</code> as a deployment property, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">stream deploy --name ticktock --properties "deployer.time.cloudfoundry.javaOpts=-Duser.timezone=America/New_York"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_debugging">10.17. Debugging</h3>
<div class="paragraph">
<p>If you want to get better insights into what is happening when your streams and tasks are being deployed, you may want
to turn on the following features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Reactor &#8220;stacktraces&#8221;, showing which operators were involved before an error occurred. This feature is helpful, as the deployer
relies on project reactor and regular stacktraces may not always allow understanding the flow before an error happened.
Note that this comes with a performance penalty, so it is disabled by default.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">spring.cloud.dataflow.server.cloudfoundry.debugReactor == true</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Deployer and Cloud Foundry client library request and response logs. This feature allows seeing a detailed conversation between
the Data Flow server and the Cloud Foundry Cloud Controller.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-data hljs" data-lang="data">logging.level.cloudfoundry-client == DEBUG</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_cloud_config_server">10.18. Spring Cloud Config Server</h3>
<div class="paragraph">
<p>You can use Spring Cloud Config Server to centralize configuration properties for Spring Boot applications. Likewise,
both Spring Cloud Data Flow and the applications orchestrated by Spring Cloud Data Flow can be integrated with
a configuration server to use the same capabilities.</p>
</div>
<div class="sect3">
<h4 id="_stream_task_and_spring_cloud_config_server">10.18.1. Stream, Task, and Spring Cloud Config Server</h4>
<div class="paragraph">
<p>Similar to Spring Cloud Data Flow server, you can configure both the stream and task applications to resolve the centralized properties from the configuration server.
Setting the <code>spring.cloud.config.uri</code> property for the deployed applications is a common way to bind to the configuration server.
See the <a href="https://cloud.spring.io/spring-cloud-config/spring-cloud-config.html#_spring_cloud_config_client">Spring Cloud Config Client</a> reference guide for more information.
Since this property is likely to be used across all applications deployed by the Data Flow server, the Data Flow server&#8217;s <code>spring.cloud.dataflow.applicationProperties.stream</code> property for stream applications and <code>spring.cloud.dataflow.applicationProperties.task</code> property for task applications can be used to pass the <code>uri</code> of the Config Server to each deployed stream or task application. See the section on <a href="https://docs.spring.io/spring-cloud-dataflow/docs//reference/htmlsingle/#spring-cloud-dataflow-global-properties">common application properties</a> for more information.</p>
</div>
<div class="paragraph">
<p>Note that, if you use applications from the <a href="https://cloud.spring.io/spring-cloud-stream-app-starters/">App Starters project</a>, these applications already embed the <code>spring-cloud-services-starter-config-client</code> dependency.
If you build your application from scratch and want to add the client side support for config server, you can add a dependency reference to the config server client library. The following snippet shows a Maven example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">...
&lt;dependency&gt;
  &lt;groupId&gt;io.pivotal.spring.cloud&lt;/groupId&gt;
  &lt;artifactId&gt;spring-cloud-services-starter-config-client&lt;/artifactId&gt;
  &lt;version&gt;CONFIG_CLIENT_VERSION&lt;/version&gt;
&lt;/dependency&gt;
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>CONFIG_CLIENT_VERSION</code> can be the latest release of the <a href="https://github.com/pivotal-cf/spring-cloud-services-connector/releases">Spring Cloud Config Server</a>
client for Pivotal Cloud Foundry.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You may see a <code>WARN</code> logging message if the application that uses this library cannot connect to the configuration
server when the application starts and whenever the <code>/health</code> endpoint is accessed.
If you know that you are not using config server functionality, you can disable the client library by setting the
<code>SPRING_CLOUD_CONFIG_ENABLED</code> environment variable to <code>false</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_sample_manifest_template">10.18.2. Sample Manifest Template</h4>
<div class="paragraph">
<p>The following SCDF and Skipper <code>manifest.yml</code> templates includes the required environment variables for the Skipper and Spring Cloud Data Flow server and deployed applications and tasks to successfully run on Cloud Foundry and automatically resolve centralized properties from <code>my-config-server</code> at runtime:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">---
applications:
- name: data-flow-server
  host: data-flow-server
  memory: 2G
  disk_quota: 2G
  instances: 1
  path: {PATH TO SERVER UBER-JAR}
  env:
    SPRING_APPLICATION_NAME: data-flow-server
    MAVEN_REMOTE_REPOSITORIES_REPO1_URL: https://repo.spring.io/libs-snapshot
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.sys.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN: apps.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: ***
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: true
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: mysql
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
services:
- mysql
- my-config-server

---
applications:
- name: skipper-server
  host: skipper-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  timeout: 180
  buildpack: java_buildpack
  path: &lt;PATH TO THE DOWNLOADED SKIPPER SERVER UBER-JAR&gt;
  env:
    SPRING_APPLICATION_NAME: skipper-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_STRATEGIES_HEALTHCHECK_TIMEOUTINMILLIS: 300000
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.local.pcfdev.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: pcfdev-org
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: pcfdev-space
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: cfapps.io
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: admin
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DELETE_ROUTES: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit, my-config-server
services:
- mysql
  my-config-server</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>my-config-server</code> is the name of the Spring Cloud Config Service instance running on Cloud Foundry.</p>
</div>
<div class="paragraph">
<p>By binding the service to Spring Cloud Data Flow server, Spring Cloud Task and via Skipper to all the Spring Cloud Stream applications respectively, we can now resolve centralized properties backed by this service.</p>
</div>
</div>
<div class="sect3">
<h4 id="_self_signed_ssl_certificate_and_spring_cloud_config_server">10.18.3. Self-signed SSL Certificate and Spring Cloud Config Server</h4>
<div class="paragraph">
<p>Often, in a development environment, we may not have a valid certificate to enable SSL communication between clients and the backend services.
However, the configuration server for Pivotal Cloud Foundry uses HTTPS for all client-to-service communication, so we need to add a self-signed SSL certificate in environments with no valid certificates.</p>
</div>
<div class="paragraph">
<p>By using the same <code>manifest.yml</code> templates listed in the previous section for the server, we can provide the self-signed SSL certificate by setting <code>TRUST_CERTS: &lt;API_ENDPOINT&gt;</code>.</p>
</div>
<div class="paragraph">
<p>However, the deployed applications also require <code>TRUST_CERTS</code> as a flat environment variable (as opposed to being wrapped inside <code>SPRING_APPLICATION_JSON</code>), so we must instruct the server with yet another set of tokens (<code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_USE_SPRING_APPLICATION_JSON: false</code>) for tasks.
With this setup, the applications receive their application properties as regular environment variables.</p>
</div>
<div class="paragraph">
<p>The following listing shows the updated <code>manifest.yml</code> with the required changes. Both the Data Flow server and deployed applications
get their configuration from the <code>my-config-server</code> Cloud Config server (deployed as a Cloud Foundry service).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">---
applications:
- name: test-server
  host: test-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  path: spring-cloud-dataflow-server-VERSION.jar
  env:
    SPRING_APPLICATION_NAME: test-server
    MAVEN_REMOTE_REPOSITORIES_REPO1_URL: https://repo.spring.io/libs-snapshot
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: https://api.sys.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: sabby20
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_DOMAIN: apps.huron.cf-app.com
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: admin
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: ***
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SKIP_SSL_VALIDATION: true
    SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: mysql, config-server
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
    TRUST_CERTS: &lt;API_ENDPOINT&gt; #this is for the server
    SPRING_CLOUD_DATAFLOW_APPLICATION_PROPERTIES_TASK_TRUST_CERTS: &lt;API_ENDPOINT&gt;   #this propagates to all tasks
services:
- mysql
- my-config-server #this is for the server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also add the <code>my-config-server</code> service to the Skipper&#8217;s manifest environment</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">---
applications:
- name: skipper-server
  host: skipper-server
  memory: 1G
  disk_quota: 1G
  instances: 1
  timeout: 180
  buildpack: java_buildpack
  path: &lt;PATH TO THE DOWNLOADED SKIPPER SERVER UBER-JAR&gt;
  env:
    SPRING_APPLICATION_NAME: skipper-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_STRATEGIES_HEALTHCHECK_TIMEOUTINMILLIS: 300000
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: &lt;URL&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: &lt;ORG&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: &lt;SPACE&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: &lt;DOMAIN&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: &lt;USER&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: &lt;PASSWORD&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit, my-config-server #this is so all stream applications bind to my-config-server
services:
- mysql
  my-config-server</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-cloudfoundry-scheduling">10.19. Configure Scheduling</h3>
<div class="paragraph">
<p>This section discusses how to configure Spring Cloud Data Flow to connect to the <a href="https://www.cloudfoundry.org/the-foundry/scheduler/">PCF-Scheduler</a> as its agent to execute tasks.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Before following these instructions, be sure to have an instance of the PCF-Scheduler service running in your Cloud Foundry space.
To create a PCF-Scheduler in your space (assuming it is in your Market Place) execute the following from the CF CLI: <code>cf create-service scheduler-for-pcf standard &lt;name of service&gt;</code>.
Name of a service is later used to bound running application in <em>PCF</em>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For scheduling, you must add (or update) the following environment variables in your environment:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Enable scheduling for Spring Cloud Data Flow by setting <code>spring.cloud.dataflow.features.schedules-enabled</code> to <code>true</code>.</p>
</li>
<li>
<p>Bind the task deployer to your instance of PCF-Scheduler by adding the PCF-Scheduler service name to the <code>SPRING_CLOUD_DATAFLOW_TASK_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES</code> environment variable.</p>
</li>
<li>
<p>Establish the URL to the PCF-Scheduler by setting the <code>SPRING_CLOUD_SCHEDULER_CLOUDFOUNDRY_SCHEDULER_URL</code> environment variable.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>After creating the preceding configurations, you must create any task definitions that need to be scheduled.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following sample manifest shows both environment properties configured (assuming you have a PCF-Scheduler service available with the name <code>myscheduler</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yml hljs" data-lang="yml">---
applications:
- name: data-flow-server
  host: data-flow-server
  memory: 2G
  disk_quota: 2G
  instances: 1
  path: {PATH TO SERVER UBER-JAR}
  env:
    SPRING_APPLICATION_NAME: data-flow-server
    SPRING_CLOUD_SKIPPER_SERVER_ENABLE_LOCAL_PLATFORM: false
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_URL: &lt;URL&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_ORG: &lt;ORG&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_SPACE: &lt;SPACE&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_DOMAIN: &lt;DOMAIN&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_USERNAME: &lt;USER&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_CONNECTION_PASSWORD: &lt;PASSWORD&gt;
    SPRING_CLOUD_SKIPPER_SERVER_PLATFORM_CLOUDFOUNDRY_ACCOUNTS[default]_DEPLOYMENT_SERVICES: rabbit, myscheduler
    SPRING_CLOUD_DATAFLOW_FEATURES_SCHEDULES_ENABLED: true
    SPRING_CLOUD_SKIPPER_CLIENT_SERVER_URI: https://&lt;skipper-host-name&gt;/api
    SPRING_CLOUD_SCHEDULER_CLOUDFOUNDRY_SCHEDULER_URL: https://scheduler.local.pcfdev.io
services:
- mysql</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where the <code>SPRING_CLOUD_SCHEDULER_CLOUDFOUNDRY_SCHEDULER_URL</code> has the following format: <code>scheduler.&lt;Domain-Name&gt;</code> (for
example, <code><a href="https://scheduler.local.pcfdev.io" class="bare">scheduler.local.pcfdev.io</a></code>). Check the actual address from your <em>PCF</em> environment.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration-kubernetes">11. Configuration - Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section describes how to configure Spring Cloud Data Flow features, such as deployer properties, tasks, and which relational database to use.</p>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-enable-disable-specific-features">11.1. Feature Toggles</h3>
<div class="paragraph">
<p>Data Flow server offers specific set of features that can be enabled or disabled when launching. These features include all the lifecycle operations, REST endpoints (server and client implementations including Shell and the UI) for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
</li>
<li>
<p>Tasks</p>
</li>
<li>
<p>Schedules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can enable or disable these features by setting the following boolean environment variables when launching the Data Flow server:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_STREAMS_ENABLED</code></p>
</li>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_TASKS_ENABLED</code></p>
</li>
<li>
<p><code>SPRING_CLOUD_DATAFLOW_FEATURES_SCHEDULES_ENABLED</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, all the features are enabled.</p>
</div>
<div class="paragraph">
<p>The <code>/features</code> REST endpoint provides information on the features that have been enabled and disabled.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-deployer">11.2. Deployer Properties</h3>
<div class="paragraph">
<p>You can use the following configuration properties the <a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes">Kubernetes deployer</a> to customize how Streams and Tasks are deployed.
When deploying with the Data Flow shell, you can use the syntax <code>deployer.&lt;appName&gt;.kubernetes.&lt;deployerPropertyName&gt;</code>.
These properties are also used when configuring the <a href="#configuration-kubernetes-tasks">Kubernetes task platforms</a> in the Data Flow server and Kubernetes platforms in Skipper for deploying Streams.</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Deployer Property Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Default Value</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace to use</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">environment variable <code>KUBERNETES_NAMESPACE</code>, otherwise <code>default</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">nodeSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The node selectors to apply to the deployment in <code>key:value</code> format. Multiple node selectors are comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imagePullSecret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secrets for a access a private registry to pull images.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">imagePullPolicy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Image Pull Policy to apply when pulling images. Valid options are <code>Always</code>, <code>IfNotPresent</code>, and <code>Never</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IfNotPresent</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">livenessProbeDelay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay in seconds when the Kubernetes liveness check of the app container should start checking its health status.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">livenessProbePeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds for performing the Kubernetes liveness check of the app container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">livenessProbeTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout in seconds for the Kubernetes liveness check of the app container.  If the health check takes longer than this value to return it is assumed as 'unavailable'.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">livenessProbePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path that app container has to respond to for liveness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">livenessProbePort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that app container has to respond on for liveness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readinessProbeDelay</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delay in seconds when the readiness check of the app container should start checking if the module is fully up and running.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readinessProbePeriod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Period in seconds to perform the readiness check of the app container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readinessProbeTimeout</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout in seconds that the app container has to respond to its health status during the readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readinessProbePath</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path that app container has to respond to for readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">readinessProbePort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port that app container has to respond on for readiness check.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">probeCredentialsSecret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The secret name containing the credentials to use when accessing secured probe endpoints.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">limits.memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory limit, maximum needed value to allocate a pod, Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">limits.cpu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU limit, maximum needed value to allocate a pod</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests.memory</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The memory request, guaranteed needed value to allocate a pod.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">requests.cpu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The CPU request, guaranteed needed value to allocate a pod.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">statefulSet.volumeClaimTemplate.storageClassName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the storage class for a stateful set</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">statefulSet.volumeClaimTemplate.storage</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The storage amount. Default unit is mebibytes, 'M' and 'G" suffixes supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">environmentVariables</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of environment variables to set for any deployed app container</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">entryPointStyle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Entry point style used for the Docker image. Used to determine how to pass in properties. Can be <code>exec</code>, <code>shell</code>, and <code>boot</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exec</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">createLoadBalancer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "LoadBalancer" for the service created for each app. This facilitates assignment of external IP to app.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">serviceAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service annotations to set for the service created for each application. String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">podAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pod annotations to set for the pod created for each deployment.  String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">jobAnnotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job annotations to set for the pod or job created for a job. String of the format <code>annotation1:value1,annotation2:value2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minutesToWaitForLoadBalancer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for load balancer to be available before attempting delete of service (in minutes).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxTerminatedErrorRestarts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum allowed restarts for app that fails due to an error or excessive resource use.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">maxCrashLoopBackOffRestarts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum allowed restarts for app that is in a CrashLoopBackOff.  Values are <code>Always</code>, <code>IfNotPresent</code>, <code>Never</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>IfNotPresent</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volumeMounts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">volume mounts expressed in YAML format.  e.g. <code><code>[{name: 'testhostpath', mountPath: '/test/hostPath'}, {name: 'testpvc', mountPath: '/test/pvc'}, {name: 'testnfs', mountPath: '/test/nfs'}]</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">volumes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The volumes that a Kubernetes instance supports specifed in YAML format.  e.g. <code><code>[{name: testhostpath, hostPath: { path: '/test/override/hostPath' }},{name: 'testpvc', persistentVolumeClaim: { claimName: 'testClaim', readOnly: 'true' }}, {name: 'testnfs', nfs: { server: '10.0.0.1:111', path: '/test/nfs' }}]</code></code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">hostNetwork</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The hostNetwork setting for the deployments, see  <a href="https://kubernetes.io/docs/api-reference/v1/definitions/#_v1_podspec" class="bare">kubernetes.io/docs/api-reference/v1/definitions/#_v1_podspec</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">createDeployment</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "Deployment" with a "Replica Set" instead of a "Replication Controller".</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">true</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">createJob</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a "Job" instead of just a "Pod" when launching tasks.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">containerCommand</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overrides the default entry point command with the provided command and arguments.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">containerPorts</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Adds additional ports to expose on the container.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">createNodePort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The explicit port to use when <code>NodePort</code> is the <code>Service</code> type.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentServiceAccountName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Service account name to use for app deployments</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">deploymentLabels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Additional labels to add to the deployment in <code>key:value</code> format. Multiple labels are comma separated.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bootMajorVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Spring Boot major version to use. Currently only used to configure Spring Boot version specific probe paths automatically. Valid options are <code>1</code> or <code>2</code>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tolerations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Toleration configuration to set on created pod&#8217;s.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;none&gt;</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-tasks">11.3. Tasks</h3>
<div class="paragraph">
<p>The Data Flow server is responsible for deploying Tasks.
Tasks that are launched by Data Flow write their state to the same database that is used by the Data Flow server.
For Tasks which are Spring Batch Jobs, the job and step execution data is also stored in this database.
As with Skipper, Tasks can be launched to multiple platforms.
When Data Flow is running on Kubernetes, a Task platfom must be defined.
To configure new platform accounts that target Kubernetes, provide an entry under the <code>spring.cloud.dataflow.task.platform.kubernetes</code> section in your <code>application.yaml</code> file for via another Spring Boot supported mechanism.
In the following example, two Kubernetes platform accounts named <code>dev</code> and  <code>qa</code> are created.
The keys such as <code>memory</code> and <code>disk</code> are <a href="#configuration-cloudfoundry-deployer">Cloud Foundry Deployer Properties</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">spring:
  cloud:
    dataflow:
      task:
        platform:
          kubernetes:
            accounts:
              dev:
                namespace: devNamespace
                imagePullPolicy: Always
                entryPointStyle: exec
                limits:
                  cpu: 4
              qa:
                namespace: qaNamespace
                imagePullPolicy: IfNotPresent
                entryPointStyle: boot
                limits:
                  memory: 2048m</code></pre>
</div>
</div>
<div class="paragraph">
<p>When launching a task, pass the value of the platform account name using the task launch option <code>--platformName</code>  If you do not pass a value for <code>platformName</code>, the value <code>default</code> will be used.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When deploying a task to multiple platforms, the configuration of the task needs to connect to the same database as the Data Flow Server.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can configure the Data Flow server that is on Kubernetes to deploy tasks to Cloud Foundry and Kubernetes.  See the section on <a href="#configuration-cloudfoundry-tasks">Cloud Foundry Task Platform Configuration</a> for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-general">11.4. General Configuration</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow server for Kubernetes uses the <a href="https://github.com/fabric8io/spring-cloud-kubernetes"><code>spring-cloud-kubernetes</code></a> module process both the ConfigMap and the secrets settings. To enable the ConfigMap support, pass in an environment variable of <code>SPRING_CLOUD_KUBERNETES_CONFIG_NAME</code> and set it to the name of the ConfigMap. The same is true for the secrets, where the environment variable is <code>SPRING_CLOUD_KUBERNETES_SECRETS_NAME</code>. To use the secrets, you also need to set <code>SPRING_CLOUD_KUBERNETES_SECRETS_ENABLE_API</code> to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows a snippet from a deployment script that sets these environment variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">env:
- name: SPRING_CLOUD_KUBERNETES_SECRETS_ENABLE_API
  value: 'true'
- name: SPRING_CLOUD_KUBERNETES_SECRETS_NAME
  value: mysql
- name: SPRING_CLOUD_KUBERNETES_CONFIG_NAME
  value: scdf-server</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_using_configmap_and_secrets">11.4.1. Using ConfigMap and Secrets</h4>
<div class="paragraph">
<p>You can pass configuration properties to the Data Flow Server by using Kubernetes <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configmap/">ConfigMap</a> and <a href="https://kubernetes.io/docs/concepts/configuration/secret/">secrets</a>.</p>
</div>
<div class="paragraph">
<p>The following example shows one possible configuration, which enables MySQL and sets a memory limit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: scdf-server
  labels:
    app: scdf-server
data:
  application.yaml: |-
    spring:
      cloud:
        dataflow:
          task:
            platform:
              kubernetes:
                accounts:
                  default:
                    limits:
                      memory: 1024Mi
      datasource:
        url: jdbc:mysql://${MYSQL_SERVICE_HOST}:${MYSQL_SERVICE_PORT}/mysql
        username: root
        password: ${mysql-root-password}
        driverClassName: org.mariadb.jdbc.Driver
        testOnBorrow: true
        validationQuery: "SELECT 1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example assumes that MySQL is deployed with <code>mysql</code> as the service name. Kubernetes publishes the host and port values of these services as environment variables that we can use when configuring the apps we deploy.</p>
</div>
<div class="paragraph">
<p>We prefer to provide the MySQL connection password in a Secrets file, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  name: mysql
  labels:
    app: mysql
data:
  mysql-root-password: eW91cnBhc3N3b3Jk</code></pre>
</div>
</div>
<div class="paragraph">
<p>The password is a base64-encoded value.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-rdbms">11.5. Database Configuration</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow provides schemas for H2, HSQLDB, MySQL, Oracle, PostgreSQL, DB2, and SQL Server. The appropriate schema is automatically created when the server starts, provided the right database driver and appropriate credentials are in the classpath.</p>
</div>
<div class="paragraph">
<p>The JDBC drivers for MySQL (via MariaDB driver), HSQLDB, PostgreSQL, and embedded H2 are available out of the box.
If you use any other database, you need to put the corresponding JDBC driver jar on the classpath of the server.</p>
</div>
<div class="paragraph">
<p>For instance, if you use MySQL in addition to a password in the secrets file, you could provide the following properties in the ConfigMap:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      datasource:
        url: jdbc:mysql://${MYSQL_SERVICE_HOST}:${MYSQL_SERVICE_PORT}/mysql
        username: root
        password: ${mysql-root-password}
        driverClassName: org.mariadb.jdbc.Driver
        url: jdbc:mysql://${MYSQL_SERVICE_HOST}:${MYSQL_SERVICE_PORT}/test
        driverClassName: org.mariadb.jdbc.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>For PostgreSQL, you could use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      datasource:
        url: jdbc:postgresql://${PGSQL_SERVICE_HOST}:${PGSQL_SERVICE_PORT}/database
        username: root
        password: ${postgres-password}
        driverClassName: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>For HSQLDB, you could use the following configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">data:
  application.yaml: |-
    spring:
      datasource:
        url: jdbc:hsqldb:hsql://${HSQLDB_SERVICE_HOST}:${HSQLDB_SERVICE_PORT}/database
        username: sa
        driverClassName: org.hsqldb.jdbc.JDBCDriver</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find migration scripts for specific database types in the <a href="https://github.com/spring-cloud/spring-cloud-task/tree/master/spring-cloud-task-core/src/main/resources/org/springframework/cloud/task/migration">spring-cloud-task</a> repo.</p>
</div>
</div>
<div class="sect2">
<h3 id="configuration-kubernetes-monitoring-management">11.6. Monitoring and Management</h3>
<div class="paragraph">
<p>We recommend using the <code>kubectl</code> command for troubleshooting streams and tasks.</p>
</div>
<div class="paragraph">
<p>You can list all artifacts and resources used by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get all,cm,secrets,pvc</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can list all resources used by a specific application or service by using a label to select resources. The following command lists all resources used by the <code>mysql</code> service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get all -l app=mysql</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can get the logs for a specific pod by issuing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs pod &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the pod is continuously getting restarted, you can add <code>-p</code> as an option to see the previous log, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs -p &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also tail or follow a log by adding an <code>-f</code> option, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs -f &lt;pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>A useful command to help in troubleshooting issues, such as a container that has a fatal error when starting up, is to use the <code>describe</code> command, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl describe pod ticktock-log-0-qnk72</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_inspecting_server_logs">11.6.1. Inspecting Server Logs</h4>
<div class="paragraph">
<p>You can access the server logs by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get pod -l app=scdf=server
kubectl logs &lt;scdf-server-pod-name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_streams">11.6.2. Streams</h4>
<div class="paragraph">
<p>Stream applications are deployed with the stream name followed by the name of the application. For processors and sinks, an instance index is also appended.</p>
</div>
<div class="paragraph">
<p>To see all the pods that are deployed by the Spring Cloud Data Flow server, you can specify the <code>role=spring-app</code> label, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get pod -l role=spring-app</code></pre>
</div>
</div>
<div class="paragraph">
<p>To see details for a specific application deployment you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl describe pod &lt;app-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To view the application logs, you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs &lt;app-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you would like to tail a log you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs -f &lt;app-pod-name&gt;</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_tasks">11.6.3. Tasks</h4>
<div class="paragraph">
<p>Tasks are launched as bare pods without a replication controller. The pods remain after the tasks complete, which gives you an opportunity to review the logs.</p>
</div>
<div class="paragraph">
<p>To see all pods for a specific task, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get pod -l task-name=&lt;task-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To review the task logs, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs &lt;task-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You have two options to delete completed pods. You can delete them manually once they are no longer needed or you can use the Data Flow shell <code>task execution cleanup</code> command to remove the completed pod for a task execution.</p>
</div>
<div class="paragraph">
<p>To delete the task pod manually, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl delete pod &lt;task-pod-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use the <code>task execution cleanup</code> command, you must first determine the <code>ID</code> for the task execution. To do so, use the <code>task execution list</code> command, as the following example (with output) shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">dataflow:&gt;task execution list
╔═════════╤══╤════════════════════════════╤════════════════════════════╤═════════╗
║Task Name│ID│         Start Time         │          End Time          │Exit Code║
╠═════════╪══╪════════════════════════════╪════════════════════════════╪═════════╣
║task1    │1 │Fri May 05 18:12:05 EDT 2017│Fri May 05 18:12:05 EDT 2017│0        ║
╚═════════╧══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once you have the ID, you can issue the command to cleanup the execution artifacts (the completed pod), as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">dataflow:&gt;task execution cleanup --id 1
Request to clean up resources for task execution 1 has been submitted</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduling">11.7. Scheduling</h3>
<div class="paragraph">
<p>This section covers customization of how scheduled tasks are configured. Scheduling of tasks is enabled by default in the Spring Cloud Data Flow Kubernetes Server. Properties are used to influence settings for scheduled tasks and can be configured on a global or per-schedule basis.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Unless noted, properties set on a per-schedule basis always take precedence over properties set as the server configuration. This arrangement allows for the ability to override global server level properties for a specific schedule.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <a href="https://github.com/spring-cloud/spring-cloud-scheduler-kubernetes/blob/master/src/main/java/org/springframework/cloud/scheduler/spi/kubernetes/KubernetesSchedulerProperties.java"><code>KubernetesSchedulerProperties</code></a> for more on the supported options.</p>
</div>
<div class="sect3">
<h4 id="_entry_point_style_2">11.7.1. Entry Point Style</h4>
<div class="paragraph">
<p>An Entry Point Style affects how application properties are passed to the task container to be deployed. Currently, three styles are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>exec</code>: (default) Passes all application properties as command line arguments.</p>
</li>
<li>
<p><code>shell</code>: Passes all application properties as environment variables.</p>
</li>
<li>
<p><code>boot</code>: Creates an environment variable called <code>SPRING_APPLICATION_JSON</code> that contains a JSON representation of all application properties.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the entry point style as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>scheduler.kubernetes.entryPointStyle=&lt;Entry Point Style&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>&lt;Entry Point Style&gt;</code> with your desired Entry Point Style.</p>
</div>
<div class="paragraph">
<p>You can also configure the Entry Point Style at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_ENTRY_POINT_STYLE
  value: entryPointStyle</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>entryPointStyle</code> with the desired Entry Point Style.</p>
</div>
<div class="paragraph">
<p>You should choose an Entry Point Style of either <code>exec</code> or <code>shell</code>, to correspond to how the <code>ENTRYPOINT</code> syntax is defined in the container&#8217;s <code>Dockerfile</code>. For more information and uses cases on <code>exec</code> vs <code>shell</code>, see the <a href="https://docs.docker.com/engine/reference/builder/#entrypoint">ENTRYPOINT</a> section of the Docker documentation.</p>
</div>
<div class="paragraph">
<p>Using the <code>boot</code> Entry Point Style corresponds to using the <code>exec</code> style <code>ENTRYPOINT</code>. Command line arguments from the deployment request are passed to the container, with the addition of application properties mapped into the <code>SPRING_APPLICATION_JSON</code> environment variable rather than command line arguments.</p>
</div>
</div>
<div class="sect3">
<h4 id="_environment_variables_2">11.7.2. Environment Variables</h4>
<div class="paragraph">
<p>To influence the environment settings for a given application, you can take advantage of the <code>spring.cloud.scheduler.kubernetes.environmentVariables</code> property.
For example, a common requirement in production settings is to influence the JVM memory arguments.
You can achieve this by using the <code>JAVA_TOOL_OPTIONS</code> environment variable, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>scheduler.kubernetes.environmentVariables=JAVA_TOOL_OPTIONS=-Xmx1024m</code></pre>
</div>
</div>
<div class="paragraph">
<p>Additionally you can configure environment variables at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
When specifying environment variables in the server configuration and on a per-schedule basis, environment variables will be merged. This allows for the ability to set common environment variables in the server configuration and more specific at the specific schedule level.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_ENVIRONMENT_VARIABLES
  value: myVar=myVal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myVar=myVal</code> with your desired environment variables.</p>
</div>
</div>
<div class="sect3">
<h4 id="_image_pull_policy_2">11.7.3. Image Pull Policy</h4>
<div class="paragraph">
<p>An image pull policy defines when a Docker image should be pulled to the local registry. Currently, three policies are supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>IfNotPresent</code>: (default) Do not pull an image if it already exists.</p>
</li>
<li>
<p><code>Always</code>: Always pull the image regardless of whether it already exists.</p>
</li>
<li>
<p><code>Never</code>: Never pull an image. Use only an image that already exists.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example shows how you can individually configure containers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>scheduler.kubernetes.imagePullPolicy=Always</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
<div class="paragraph">
<p>You can configure an image pull policy at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_IMAGE_PULL_POLICY
  value: Always</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>Always</code> with your desired image pull policy.</p>
</div>
</div>
<div class="sect3">
<h4 id="_private_docker_registry_2">11.7.4. Private Docker Registry</h4>
<div class="paragraph">
<p>Docker images that are private and require authentication can be pulled by configuring a Secret. First, you must create a Secret in the cluster. Follow the <a href="https://kubernetes.io/docs/tasks/configure-pod-container/pull-image-private-registry/">Pull an Image from a Private Registry</a> guide to create the Secret.</p>
</div>
<div class="paragraph">
<p>Once you have created the secret, use the <code>imagePullSecret</code> property to set the secret to use, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>scheduler.kubernetes.imagePullSecret=mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
<div class="paragraph">
<p>You can also configure the image pull secret at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_IMAGE_PULL_SECRET
  value: mysecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>mysecret</code> with the name of the secret you created earlier.</p>
</div>
</div>
<div class="sect3">
<h4 id="_namespace">11.7.5. Namespace</h4>
<div class="paragraph">
<p>By default the namespace used for scheduled tasks is <code>default</code>. This value can be set at the server level configuration in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_NAMESPACE
  value: mynamespace</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_service_account">11.7.6. Service Account</h4>
<div class="paragraph">
<p>You can configure a custom service account for scheduled tasks through properties. An existing service account can be used or a new one created. One way to create a service account is by using <code>kubectl</code>, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl create serviceaccount myserviceaccountname
serviceaccount "myserviceaccountname" created</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can configure the service account to use on a per-schedule basis as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code>scheduler.kubernetes.taskServiceAccountName=myserviceaccountname</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with your service account name.</p>
</div>
<div class="paragraph">
<p>You can also configure the service account name at the server level in the container <code>env</code> section of a deployment YAML, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>env:
- name: SPRING_CLOUD_SCHEDULER_KUBERNETES_TASK_SERVICE_ACCOUNT_NAME
  value: myserviceaccountname</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace <code>myserviceaccountname</code> with the service account name to be applied to all deployments.</p>
</div>
<div class="paragraph">
<p>For more information on scheduling tasks see <a href="#spring-cloud-dataflow-schedule-launch-tasks">Scheduling Tasks</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_debug_support">11.8. Debug Support</h3>
<div class="paragraph">
<p>Debugging the Spring Cloud Data Flow Kubernetes Server and included components (such as the <a href="https://github.com/spring-cloud/spring-cloud-deployer-kubernetes">Spring Cloud Kubernetes Deployer</a>) is supported through the <a href="https://docs.oracle.com/javase/8/docs/technotes/guides/jpda/jdwp-spec.html">Java Debug Wire Protocol (JDWP)</a>. This section outlines an approach to manually enable debugging and another approach that uses configuration files provided with Spring Cloud Data Flow Server Kubernetes to &#8220;patch&#8221; a running deployment.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
JDWP itself does not use any authentication. This section assumes debugging is being done on a local development environment (such as Minikube), so guidance on securing the debug port is not provided.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_enabling_debugging_manually">11.8.1. Enabling Debugging Manually</h4>
<div class="paragraph">
<p>To manually enable JDWP, first edit <code>src/kubernetes/server/server-deployment.yaml</code> and add an additional <code>containerPort</code> entry under <code>spec.template.spec.containers.ports</code> with a value of <code>5005</code>. Additionally, add the <a href="https://docs.oracle.com/javase/8/docs/platform/jvmti/jvmti.html#tooloptions"><code>JAVA_TOOL_OPTIONS</code></a> environment variable under <code>spec.template.spec.containers.env</code> as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>spec:
  ...
  template:
    ...
    spec:
      containers:
      - name: scdf-server
        ...
        ports:
        ...
		- containerPort: 5005
        env:
        - name: JAVA_TOOL_OPTIONS
          value: '-agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The preceding example uses port 5005, but it can be any number that does not conflict with another port. The chosen port number must also be the same for the added <code>containerPort</code> value and the <code>address</code> parameter of the <code>JAVA_TOOL_OPTIONS</code> <code>-agentlib</code> flag, as shown in the preceding example.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now start the Spring Cloud Data Flow Kubernetes Server. Once the server is up, you can verify the configuration changes on the <code>scdf-server</code> deployment, as the following example (with output) shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl describe deployment/scdf-server
...
...
Pod Template:
  ...
  Containers:
   scdf-server:
    ...
    Ports:       80/TCP, 5005/TCP
    ...
    Environment:
      JAVA_TOOL_OPTIONS:  -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
	  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>With the server started and JDWP enabled, you need to configure access to the port. In this example, we use the <a href="https://kubernetes.io/docs/tasks/access-application-cluster/port-forward-access-application-cluster/"><code>port-forward</code></a> subcommand of <code>kubectl</code>. The following example (with output) shows how to expose a local port to your debug target by using <code>port-forward</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl get pod -l app=scdf-server
NAME                           READY     STATUS    RESTARTS   AGE
scdf-server-5b7cfd86f7-d8mj4   1/1       Running   0          10m
$ kubectl port-forward scdf-server-5b7cfd86f7-d8mj4 5005:5005
Forwarding from 127.0.0.1:5005 -&gt; 5005
Forwarding from [::1]:5005 -&gt; 5005</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can now attach a debugger by pointing it to <code>127.0.0.1</code> as the host and <code>5005</code> as the port. The <code>port-forward</code> subcommand runs until stopped (by pressing <code>CTRL+c</code>, for example).</p>
</div>
<div class="paragraph">
<p>You can remove debugging support by reverting the changes to <code>src/kubernetes/server/server-deployment.yaml</code>. The reverted changes are picked up on the next deployment of the Spring Cloud Data Flow Kubernetes Server. Manually adding debug support to the configuration is useful when debugging should be enabled by default each time the server is deployed.</p>
</div>
</div>
<div class="sect3">
<h4 id="_enabling_debugging_with_patching">11.8.2. Enabling Debugging with Patching</h4>
<div class="paragraph">
<p>Rather than manually changing the <code>server-deployment.yaml</code>, Kubernetes objects can be &#8220;patched&#8221; in place. For convenience, patch files that provide the same configuration as the manual approach are included. To enable debugging by patching, use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl patch deployment scdf-server -p "$(cat src/kubernetes/server/server-deployment-debug.yaml)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running the preceding command automatically adds the <code>containerPort</code> attribute and the <code>JAVA_TOOL_OPTIONS</code> environment variable. The following example (with output) shows how toverify changes to the <code>scdf-server</code> deployment:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl describe deployment/scdf-server
...
...
Pod Template:
  ...
  Containers:
   scdf-server:
    ...
    Ports:       5005/TCP, 80/TCP
    ...
    Environment:
      JAVA_TOOL_OPTIONS:  -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=5005
	  ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>To enable access to the debug port, rather than using the <code>port-forward</code> subcommand of <code>kubectl</code>, you can patch the <code>scdf-server</code> Kubernetes service object. You must first ensure that the <code>scdf-server</code> Kubernetes service object has the proper configuration. The following example (with output) shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl describe service/scdf-server
Port:                     &lt;unset&gt;  80/TCP
TargetPort:               80/TCP
NodePort:                 &lt;unset&gt;  30784/TCP</code></pre>
</div>
</div>
<div class="paragraph">
<p>If the output contains <code>&lt;unset&gt;</code>, you must patch the service to add a name for this port. The following example shows how to do so:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl patch service scdf-server -p "$(cat src/kubernetes/server/server-svc.yaml)"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A port name should only be missing if the target cluster had been created prior to debug functionality being added. Since multiple ports are being added to the <code>scdf-server</code> Kubernetes Service Object, each needs to have its own name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you can add the debug port, as the following example shows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl patch service scdf-server -p "$(cat src/kubernetes/server/server-svc-debug.yaml)"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example (with output) shows how to verify the mapping:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl describe service scdf-server
Name:                     scdf-server
...
...
Port:                     scdf-server-jdwp  5005/TCP
TargetPort:               5005/TCP
NodePort:                 scdf-server-jdwp  31339/TCP
...
...
Port:                     scdf-server  80/TCP
TargetPort:               80/TCP
NodePort:                 scdf-server  30883/TCP
...
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The output shows that container port 5005 has been mapped to the NodePort of 31339. The following example (with output) shows how to get the IP address of the Minikube node:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ minikube ip
192.168.99.100</code></pre>
</div>
</div>
<div class="paragraph">
<p>With this information, you can create a debug connection by using a host of 192.168.99.100 and a port of 31339.</p>
</div>
<div class="paragraph">
<p>The following example shows how to disable JDWP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">$ kubectl rollout undo deployment/scdf-server
$ kubectl patch service scdf-server --type json -p='[{"op": "remove", "path": "/spec/ports/0"}]'</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kubernetes deployment object is rolled back to its state before being patched. The Kubernetes service object is then patched with a <code>remove</code> operation to remove port 5005 from the <code>containerPorts</code> list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>kubectl rollout undo</code> forces the pod to restart. Patching the Kubernetes Service Object does not re-create the service, and the port mapping to the <code>scdf-server</code> deployment remains the same.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>See <a href="https://kubernetes.io/docs/concepts/workloads/controllers/deployment/#rolling-back-a-deployment">Rolling Back a Deployment</a> for more information on deployment rollbacks, including managing history and <a href="https://kubernetes.io/docs/tasks/run-application/update-api-object-kubectl-patch/">Updating API Objects in Place Using kubectl Patch</a>.</p>
</div>
</div>
</div>
</div>
</div>
<h1 id="shell" class="sect0">Shell</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section covers the options for starting the shell and more advanced functionality relating to how the shell handles white spaces, quotes, and interpretation of SpEL expressions.
The introductory chapters to the
<a href="#spring-cloud-dataflow-stream-intro">Stream DSL</a> and <a href="#spring-cloud-dataflow-composed-tasks">Composed Task DSL</a> are good places to start for the most common usage of shell commands.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-options">12. Shell Options</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shell is built upon the <a href="https://projects.spring.io/spring-shell/">Spring Shell</a> project.
There are command line options generic to Spring Shell and some specific to Data Flow.
The shell takes the following command line options</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">unix:>java -jar spring-cloud-dataflow-shell-2.1.0.RELEASE.jar --help
Data Flow Options:
  --dataflow.uri=<uri>                              Address of the Data Flow Server [default: http://localhost:9393].
  --dataflow.username=<USER>                        Username of the Data Flow Server [no default].
  --dataflow.password=<PASSWORD>                    Password of the Data Flow Server [no default].
  --dataflow.credentials-provider-command=<COMMAND> Executes an external command which must return an
                                                    OAuth Bearer Token (Access Token prefixed with 'Bearer '),
                                                    e.g. 'Bearer 12345'), [no default].
  --dataflow.skip-ssl-validation=<true|false>       Accept any SSL certificate (even self-signed) [default: no].
  --dataflow.proxy.uri=<PROXY-URI>                  Address of an optional proxy server to use [no default].
  --dataflow.proxy.username=<PROXY-USERNAME>        Username of the proxy server (if required by proxy server) [no default].
  --dataflow.proxy.password=<PROXY-PASSWORD>        Password of the proxy server (if required by proxy server) [no default].
  --spring.shell.historySize=<SIZE>                 Default size of the shell log file [default: 3000].
  --spring.shell.commandFile=<FILE>                 Data Flow Shell executes commands read from the file(s) and then exits.
  --help                                            This message.</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>spring.shell.commandFile</code> option can be used to point to an existing file that contains
all the shell commands to deploy one or many related streams and tasks.<br>
Multiple files execution is also supported, they should be passed as comma delimited string :<br></p>
</div>
<div class="paragraph">
<p><code>--spring.shell.commandFile=file1.txt,file2.txt</code></p>
</div>
<div class="paragraph">
<p>This is useful when creating some scripts to help automate deployment.</p>
</div>
<div class="paragraph">
<p>Also, the following shell command helps to modularize a complex script into multiple independent files:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt;script --file &lt;YOUR_AWESOME_SCRIPT&gt;</code></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-commands">13. Listing Available Commands</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Typing <code>help</code> at the command prompt gives a listing of all available commands.
Most of the commands are for Data Flow functionality, but a few are general purpose.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">! - Allows execution of operating system (OS) commands
clear - Clears the console
cls - Clears the console
date - Displays the local date and time
exit - Exits the shell
http get - Make GET request to http endpoint
http post - POST data to http endpoint
quit - Exits the shell
system properties - Shows the shell's properties
version - Displays shell version</code></pre>
</div>
</div>
<div class="paragraph">
<p>Adding the name of the command to <code>help</code> shows additional information on how to invoke the command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;help stream create
Keyword:                   stream create
Description:               Create a new stream definition
 Keyword:                  ** default **
 Keyword:                  name
   Help:                   the name to give to the stream
   Mandatory:              true
   Default if specified:   '__NULL__'
   Default if unspecified: '__NULL__'

 Keyword:                  definition
   Help:                   a stream definition, using the DSL (e.g. "http --port=9000 | hdfs")
   Mandatory:              true
   Default if specified:   '__NULL__'
   Default if unspecified: '__NULL__'

 Keyword:                  deploy
   Help:                   whether to deploy the stream immediately
   Mandatory:              false
   Default if specified:   'true'
   Default if unspecified: 'false'</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-tab-completion">14. Tab Completion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The shell command options can be completed in the shell by pressing the <code>TAB</code> key after the leading <code>--</code>. For example, pressing <code>TAB</code> after <code>stream create --</code> results in</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt;stream create --
stream create --definition    stream create --name</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you type <code>--de</code> and then hit tab, <code>--definition</code> will be expanded.</p>
</div>
<div class="paragraph">
<p>Tab completion is also available inside the stream or composed task DSL expression for application or task properties.  You can also use <code>TAB</code> to get hints in a stream DSL expression for what available sources, processors, or sinks can be used.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="shell-white-space">15. White Space and Quoting Rules</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It is only necessary to quote parameter values if they contain spaces or the <code>|</code> character. The following example passes a SpEL expression (which is applied to any data it encounters) to a transform processor:</p>
</div>
<div class="paragraph">
<p><code>transform --expression='new StringBuilder(payload).reverse()'</code></p>
</div>
<div class="paragraph">
<p>If the parameter value needs to embed a single quote, use two single quotes, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>scan --query='Select * from /Customers where name=''Smith'''</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="dsl-quotes-escaping">15.1. Quotes and Escaping</h3>
<div class="paragraph">
<p>There is a Spring Shell-based client that talks to the Data Flow Server and is responsible for <strong>parsing</strong> the DSL.
In turn, applications may have applications properties that rely on embedded languages, such as the <strong>Spring Expression Language</strong>.</p>
</div>
<div class="paragraph">
<p>The shell, Data Flow DSL parser, and SpEL have rules about how they handle quotes and how syntax escaping works.
When combined together, confusion may arise.
This section explains the rules that apply and provides examples of the most complicated situations you may encounter when all three components are involved.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">It&#8217;s not always that complicated</div>
<div class="paragraph">
<p>If you do not use the Data Flow shell (for example, you use the REST API directly) or if application properties are not SpEL expressions, then the escaping rules are simpler.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_shell_rules">15.1.1. Shell rules</h4>
<div class="paragraph">
<p>Arguably, the most complex component when it comes to quotes is the shell. The rules can be laid out quite simply, though:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A shell command is made of keys (<code>--something</code>) and corresponding values. There is a special, keyless mapping, though, which is described later.</p>
</li>
<li>
<p>A value cannot normally contain spaces, as space is the default delimiter for commands.</p>
</li>
<li>
<p>Spaces can be added though, by surrounding the value with quotes (either single (<code>'</code>) or double (<code>"</code>) quotes).</p>
</li>
<li>
<p>Values passed inside deployment properties (e.g. <code>deployment &lt;stream-name&gt; --properties " &#8230;&#8203;"</code>) should not be quoted again.</p>
</li>
<li>
<p>If surrounded with quotes, a value can embed a literal quote of the same kind by prefixing it with a backslash (<code>\</code>).</p>
</li>
<li>
<p>Other escapes are available, such as <code>\t</code>, <code>\n</code>, <code>\r</code>, <code>\f</code> and unicode escapes of the form <code>\uxxxx</code>.</p>
</li>
<li>
<p>The keyless mapping is handled in a special way such that it does not need quoting to contain spaces.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the shell supports the <code>!</code> command to execute native shell commands. The <code>!</code> accepts a single keyless argument. This is why the following works:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dataflow:&gt;! rm something</pre>
</div>
</div>
<div class="paragraph">
<p>The argument here is the whole <code>rm something</code> string, which is passed as is to the underlying shell.</p>
</div>
<div class="paragraph">
<p>As another example, the following commands are strictly equivalent, and the argument value is <code>something</code> (without the quotes):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dataflow:&gt;stream destroy something
dataflow:&gt;stream destroy --name something
dataflow:&gt;stream destroy "something"
dataflow:&gt;stream destroy --name "something"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_property_files_rules">15.1.2. Property files rules</h4>
<div class="paragraph">
<p>Rules are relaxed when loading the properties from files.
* The special characters used in property files (both Java and YAML) needs to be escaped. For example <code>\</code> should be replaced  by <code>\\</code>, '\t` by <code>\\t</code> and so forth.
* For Java property files (<code>--propertiesFile</code> &lt;FILE_PATH&gt;.properties) the property values should not be surrounded by quotes! It is not needed even if they contain spaces.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>filter.expression=payload &gt; 5</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>For YAML property files (<code>--propertiesFile</code> &lt;FILE_PATH&gt;.yaml), though, the values need to be surrounded by double quotes.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>app:
    filter:
        filter:
            expression: "payload &gt; 5"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_dsl_parsing_rules">15.1.3. DSL Parsing Rules</h4>
<div class="paragraph">
<p>At the parser level (that is, inside the body of a stream or task definition) the rules are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Option values are normally parsed until the first space character.</p>
</li>
<li>
<p>They can be made of literal strings, though, surrounded by single or double quotes.</p>
</li>
<li>
<p>To embed such a quote, use two consecutive quotes of the desired kind.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As such, the values of the <code>--expression</code> option to the filter application are semantically equivalent in the following examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>filter --expression=payload&gt;5
filter --expression="payload&gt;5"
filter --expression='payload&gt;5'
filter --expression='payload &gt; 5'</pre>
</div>
</div>
<div class="paragraph">
<p>Arguably, the last one is more readable. It is made possible thanks to the surrounding quotes. The actual expression is <code>payload &gt; 5</code> (without quotes).</p>
</div>
<div class="paragraph">
<p>Now, imagine that we want to test against string messages. If we want to compare the payload to the SpEL literal string, <code>"something"</code>, we could use the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>filter --expression=payload=='something'           <i class="conum" data-value="1"></i><b>(1)</b>
filter --expression='payload == ''something'''     <i class="conum" data-value="2"></i><b>(2)</b>
filter --expression='payload == "something"'       <i class="conum" data-value="3"></i><b>(3)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>This works because there are no spaces. It is not very legible, though.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>This uses single quotes to protect the whole argument. Hence, the actual single quotes need to be doubled.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>SpEL recognizes String literals with either single or double quotes, so this last method is arguably the most readable.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Please note that the preceding examples are to be considered outside of the shell (for example, when calling the REST API directly).
When entered inside the shell, chances are that the whole stream definition is itself inside double quotes, which would need to be escaped. The whole example then becomes the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dataflow:&gt;stream create something --definition "http | filter --expression=payload='something' | log"

dataflow:&gt;stream create something --definition "http | filter --expression='payload == ''something''' | log"

dataflow:&gt;stream create something --definition "http | filter --expression='payload == \"something\"' | log"</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_spel_syntax_and_spel_literals">15.1.4. SpEL Syntax and SpEL Literals</h4>
<div class="paragraph">
<p>The last piece of the puzzle is about SpEL expressions.
Many applications accept options that are to be interpreted as SpEL expressions, and, as seen above, String literals are handled in a special way there, too. The rules are as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Literals can be enclosed in either single or double quotes.</p>
</li>
<li>
<p>Quotes need to be doubled to embed a literal quote. Single quotes inside double quotes need no special treatment, and the reverse is also true.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As a last example, assume you want to use the <a href="$https://docs.spring.io/spring-cloud-stream-app-starters/docs/current/reference/html/spring-cloud-stream-modules-processors.html#spring-clound-stream-modules-transform-processor">transform processor</a>.
This processor accepts an <code>expression</code> option which is a SpEL expression. It is to be evaluated against the incoming message, with a default of <code>payload</code> (which forwards the message payload untouched).</p>
</div>
<div class="paragraph">
<p>It is important to understand that the following statements are equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transform --expression=payload
transform --expression='payload'</pre>
</div>
</div>
<div class="paragraph">
<p>However, they are different from the following (and variations upon them):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>transform --expression="'payload'"
transform --expression='''payload'''</pre>
</div>
</div>
<div class="paragraph">
<p>The first series evaluates to the message payload, while the latter examples evaluate to the literal string, <code>payload</code>, (again, without quotes).</p>
</div>
</div>
<div class="sect3">
<h4 id="_putting_it_all_together">15.1.5. Putting It All Together</h4>
<div class="paragraph">
<p>As a last, complete example, consider how one could force the transformation of all messages to the string literal, <code>hello world</code>, by creating a stream in the context of the Data Flow shell:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>dataflow:&gt;stream create something --definition "http | transform --expression='''hello world''' | log" <i class="conum" data-value="1"></i><b>(1)</b>

dataflow:&gt;stream create something --definition "http | transform --expression='\"hello world\"' | log" <i class="conum" data-value="2"></i><b>(2)</b>

dataflow:&gt;stream create something --definition "http | transform --expression=\"'hello world'\" | log" <i class="conum" data-value="2"></i><b>(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>In the first line, there are single quotes around the string (at the Data Flow parser level), but they need to be doubled because they are inside a string literal (started by the first single quote after the equals sign).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The second and third lines, use single and double quotes respectively to encompass the whole string at the Data Flow parser level. Consequently, the other kind of quote can be used inside the string. The whole thing is inside the <code>--definition</code> argument to the shell, though, which uses double quotes. Consequently, double quotes are escaped (at the shell level)</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<h1 id="spring-cloud-dataflow-streams" class="sect0">Streams</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section goes into more detail about how you can create Streams, which are collections of
<a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> applications. It covers topics such as
creating and deploying Streams.</p>
</div>
<div class="paragraph">
<p>If you are just starting out with Spring Cloud Data Flow, you should probably read the
<a href="#getting-started">Getting Started</a> guide before diving into
this section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-intro">16. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Stream is are a collection of long-lived <a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> applications that communicate with each other over messaging middleware.
A text-based DSL defines the configuration and data flow between the applications.  While many applications are provided for you to implement common use-cases, you typically create a custom Spring Cloud Stream application to implement custom business logic.</p>
</div>
<div class="paragraph">
<p>The general lifecycle of a Stream is:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Register applications.</p>
</li>
<li>
<p>Create a Stream Definition.</p>
</li>
<li>
<p>Deploy the Stream.</p>
</li>
<li>
<p>Undeploy or Destroy the Stream.</p>
</li>
<li>
<p>Upgrade or Rollback applications in the Stream.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>For deploying streams, the Data Flow Server has to be configured to delegate the deployment to a new server in the Spring Cloud ecosystem named <a href="https://cloud.spring.io/spring-cloud-skipper/">Skipper</a>.</p>
</div>
<div class="paragraph">
<p>Furthermore you can configure Skipper to deploy applications to one or more Cloud Foundry orgs and spaces, one or more namespaces on a Kubernetes cluster, or to the local machine.
When deploying a stream in Data Flow, you can specify which platform to use at deployment time.
Skipper also provides Data Flow with the ability to perform updates to deployed streams.
There are many ways the applications in a stream can be updated, but one of the most common examples is to upgrade a processor application with new custom business logic while leaving the existing source and sink applications alone.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-intro-dsl">16.1. Stream Pipeline DSL</h3>
<div class="paragraph">
<p>A stream is defined by using a unix-inspired <a href="https://en.wikipedia.org/wiki/Pipeline_(Unix)">Pipeline syntax</a>.
The syntax uses vertical bars, also known as &#8220;pipes&#8221; to connect multiple commands.
The command <code>ls -l | grep key | less</code> in Unix takes the output of the <code>ls -l</code> process and pipes it to the input of the <code>grep key</code> process.
The output of <code>grep</code> in turn is sent to the input of the <code>less</code> process.
Each <code>|</code> symbol connects the standard output of the command on the left to the standard input of the command on the right.
Data flows through the pipeline from left to right.</p>
</div>
<div class="paragraph">
<p>In Data Flow, the Unix command is replaced by a <a href="https://cloud.spring.io/spring-cloud-stream/">Spring Cloud Stream</a> application and each pipe symbol represents connecting the input and output of applications over messaging middleware, such as RabbitMQ or Apache Kafka.</p>
</div>
<div class="paragraph">
<p>Each Spring Cloud Stream application is registered under a simple name.
The registration process specifies where the application can be obtained (for example, in a Maven Repository or a Docker registry).  You can find out more information on how to register Spring Cloud Stream applications in this <a href="#spring-cloud-dataflow-register-stream-apps">section</a>.
In Data Flow, we classify the Spring Cloud Stream applications as Sources, Processors, or Sinks.</p>
</div>
<div class="paragraph">
<p>As a simple example, consider the collection of data from an HTTP Source writing to a File Sink.
Using the DSL, the stream description is:</p>
</div>
<div class="paragraph">
<p><code>http | file</code></p>
</div>
<div class="paragraph">
<p>A stream that involves some processing would be expressed as:</p>
</div>
<div class="paragraph">
<p><code>http | filter | transform | file</code></p>
</div>
<div class="paragraph">
<p>Stream definitions can be created by using the shell&#8217;s <code>stream create</code> command, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --name httpIngest --definition "http | file"</code></p>
</div>
<div class="paragraph">
<p>The Stream DSL is passed in to the <code>--definition</code> command option.</p>
</div>
<div class="paragraph">
<p>The deployment of stream definitions is done through the shell&#8217;s <code>stream deploy</code> command.</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream deploy --name ticktock</code></p>
</div>
<div class="paragraph">
<p>The <a href="#getting-started">Getting Started</a> section shows you how to start the server and how to start and use the Spring Cloud Data Flow shell.</p>
</div>
<div class="paragraph">
<p>Note that the shell calls the Data Flow Servers' REST API. For more information on making HTTP requests directly to the server, consult the <a href="#api-guide">REST API Guide</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-app-dsl">16.2. Stream Application DSL</h3>
<div class="paragraph">
<p>The Stream Application DSL can be used to define custom binding properties for each of the Spring Cloud Stream applications.
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/stream-application-dsl/">Stream Application DSL</a> section of the microsite for more information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">public interface Barista {

    @Input
    SubscribableChannel orders();

    @Output
    MessageChannel hotDrinks();

    @Output
    MessageChannel coldDrinks();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or as is common when creating a Kafka Streams application,</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">interface KStreamKTableBinding {

    @Input
    KStream&lt;?, ?&gt; inputStream();

    @Input
    KTable&lt;?, ?&gt; inputTable();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In these cases with multiple input and output bindings, Data Flow cannot make any assumptions about the flow of data from one application to another.
Therefore the developer needs to set the binding properties to 'wire up' the application.
The <strong>Stream Application DSL</strong> uses a <code>double pipe</code>, instead of the <code>pipe symbol</code>, to indicate that Data Flow should not configure the binding properties of the application.  Think of <code>||</code> as meaning 'in parallel'.
For example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --definition "orderGeneratorApp || baristaApp || hotDrinkDeliveryApp || coldDrinkDeliveryApp" --name myCafeStream</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Breaking Change!  Versions of SCDF Local, Cloud Foundry 1.7.0 to 1.7.2 and SCDF Kubernetes 1.7.0 to 1.7.1 used the <code>comma</code> character as the separator between applications.  This caused breaking changes in the traditional Stream DSL.  While not ideal, changing the separator character was felt to be the best solution with the least impact on existing users.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>There are four applications in this stream.
 The baristaApp has two output destinations, <code>hotDrinks</code> and <code>coldDrinks</code> intended to be consumed by the <code>hotDrinkDeliveryApp</code> and <code>coldDrinkDeliveryApp</code> respectively.
When deploying this stream, you need to set the binding properties so that the <code>baristaApp</code> sends hot drink messages to the <code>hotDrinkDeliveryApp</code> destination and cold drink messages to the <code>coldDrinkDeliveryApp</code> destination.
For example</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">app.baristaApp.spring.cloud.stream.bindings.hotDrinks.destination=hotDrinksDest
app.baristaApp.spring.cloud.stream.bindings.coldDrinks.destination=coldDrinksDest
app.hotDrinkDeliveryApp.spring.cloud.stream.bindings.input.destination=hotDrinksDest
app.coldDrinkDeliveryApp.spring.cloud.stream.bindings.input.destination=coldDrinksDest</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to use consumer groups, you will need to set the Spring Cloud Stream application property <code>spring.cloud.stream.bindings.&lt;channelName&gt;.producer.requiredGroups</code> and <code>spring.cloud.stream.bindings.&lt;channelName&gt;.group</code> on the producer and consumer applications respectively.</p>
</div>
<div class="paragraph">
<p>Another common use case for the Stream Application DSL is to deploy a http gateway application that sends a synchronous request/reply message to a Kafka or RabbitMQ application.
In this case both the http gateway application and the Kafka or RabbitMQ application can be a Spring Integration application that does not make use of the Spring Cloud Stream library.</p>
</div>
<div class="paragraph">
<p>It is also possible to deploy just a single application using the Stream application DSL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_properties">16.3. Application properties</h3>
<div class="paragraph">
<p>Each application takes properties to customize its behavior.  As an example, the <code>http</code> source module exposes a <code>port</code> setting that allows the data ingestion port to be changed from the default value.</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --definition "http --port=8090 | log" --name myhttpstream</code></p>
</div>
<div class="paragraph">
<p>This <code>port</code> property is actually the same as the standard Spring Boot <code>server.port</code> property.
Data Flow adds the ability to use the shorthand form <code>port</code> instead of <code>server.port</code>.
One may also specify the longhand version as well, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --definition "http --server.port=8000 | log" --name myhttpstream</code></p>
</div>
<div class="paragraph">
<p>This shorthand behavior is discussed more in the section on <a href="#spring-cloud-dataflow-stream-app-whitelisting">Whitelisting application properties</a>.
If you have <a href="#spring-cloud-dataflow-stream-app-metadata-artifact">registered application property metadata</a> you can use tab completion in the shell after typing <code>--</code> to get a list of candidate property names.</p>
</div>
<div class="paragraph">
<p>The shell provides tab completion for application properties. The shell command <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> provides additional documentation for all the supported properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Supported Stream <code>&lt;appType&gt;</code> possibilities are: source, processor, and sink.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-lifecycle">17. Stream Lifecycle</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The lifecycle of a stream, goes through the following stages:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#spring-cloud-dataflow-register-stream-apps">Register a Stream App</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-create-stream">Creating a Stream</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-deploy-stream">Deploying a Stream</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-destroy-stream">Destroying a Stream</a> or <a href="#spring-cloud-dataflow-undeploy-stream">Undeploying a Stream</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-streams-upgrading">Upgrade</a> or <a href="#spring-cloud-dataflow-streams-rollback">Rollback</a> applications in the Stream.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p><a href="https://cloud.spring.io/spring-cloud-skipper/">Skipper</a> is a server that you discover Spring Boot applications and manage their lifecycle on multiple Cloud Platforms.</p>
</div>
<div class="paragraph">
<p>Applications in Skipper are bundled as packages that contain the application&#8217;s resource location, application properties and deployment properties.
You can think Skipper packages as analogous to packages found in tools such as <code>apt-get</code> or <code>brew</code>.</p>
</div>
<div class="paragraph">
<p>When Data Flow deploys a Stream, it will generate and upload a package to Skipper that represents the applications in the Stream.
Subsequent commands to upgrade or rollback the applications within the Stream are passed through to Skipper.
In addition, the Stream definition is reverse engineered from the package and the status of the Stream is also delegated to Skipper.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-register-stream-apps">17.1. Register a Stream App</h3>
<div class="paragraph">
<p>Register a versioned stream application using the <code>app register</code> command. You must provide a unique name, application type, and a URI that can be resolved to the app artifact.
For the type, specify "source", "processor", or "sink". The version is resolved from the URI. Here are a few examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.1
dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.2
dataflow:&gt;app register --name mysource --type source --uri maven://com.example:mysource:0.0.3

dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │&gt; mysource-0.0.1 &lt;│         │    │    ║
║   │mysource-0.0.2    │         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝

dataflow:&gt;app register --name myprocessor --type processor --uri file:///Users/example/myprocessor-1.2.3.jar

dataflow:&gt;app register --name mysink --type sink --uri https://example.com/mysink-2.0.1.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>The application URI should conform to one the following schema formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>maven schema</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>maven://&lt;groupId&gt;:&lt;artifactId&gt;[:&lt;extension&gt;[:&lt;classifier&gt;]]:&lt;version&gt;</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>http schema</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>http://&lt;web-path&gt;/&lt;artifactName&gt;-&lt;version&gt;.jar</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>file schema</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>file:///&lt;local-path&gt;/&lt;artifactName&gt;-&lt;version&gt;.jar</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>docker schema</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>docker:&lt;docker-image-path&gt;/&lt;imageName&gt;:&lt;version&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The URI <code>&lt;version&gt;</code> part is compulsory for the versioned stream applications.
Skipper leverages the multi-versioned stream applications to allow upgrade or rollback of those applications at runtime using the deployment properties.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you would like to register the snapshot versions of the <code>http</code> and <code>log</code>
applications built with the RabbitMQ binder, you could do the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app register --name http --type source --uri maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.1.BUILD-SNAPSHOT
dataflow:&gt;app register --name log --type sink --uri maven://org.springframework.cloud.stream.app:log-sink-rabbit:1.2.1.BUILD-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you would like to register multiple apps at one time, you can store them in a properties file
where the keys are formatted as <code>&lt;type&gt;.&lt;name&gt;</code> and the values are the URIs.</p>
</div>
<div class="paragraph">
<p>For example, if you would like to register the snapshot versions of the <code>http</code> and <code>log</code>
applications built with the RabbitMQ binder, you could have the following in a properties file (for example, <code>stream-apps.properties</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">source.http=maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.1.BUILD-SNAPSHOT
sink.log=maven://org.springframework.cloud.stream.app:log-sink-rabbit:1.2.1.BUILD-SNAPSHOT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then to import the apps in bulk, use the <code>app import</code> command and provide the location of the properties file with the <code>--uri</code> switch, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app import --uri file:///&lt;YOUR_FILE_LOCATION&gt;/stream-apps.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>Registering an application using <code>--type app</code> is the same as registering a <code>source</code>, <code>processor</code> or <code>sink</code>.
Applications of the type <code>app</code> are only allowed to be used in the Stream Application DSL, which uses a comma instead of the pipe symbol in the DSL, and instructs Data Flow not to configure the Spring Cloud Stream binding properties of the application.
The application that is registered using <code>--type app</code> does not have to be a Spring Cloud Stream app, it can be any Spring Boot application.
See the <a href="#spring-cloud-dataflow-stream-app-dsl">Stream Application DSL introduction</a> for more information on using this application type.</p>
</div>
<div class="paragraph">
<p>Multiple versions can be registered for the same applications (e.g. same name and type) but only one can be set as default.
The default version is used for deploying Streams.</p>
</div>
<div class="paragraph">
<p>The first time an application is registered it will be marked as default. The default application version can be altered with the <code>app default</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app default --id source:mysource --version 0.0.2
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │mysource-0.0.1    │         │    │    ║
║   │&gt; mysource-0.0.2 &lt;│         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>app list --id &lt;type:name&gt;</code> command lists all versions for a given stream application.</p>
</div>
<div class="paragraph">
<p>The <code>app unregister</code> command has an optional <code>--version</code> parameter to specify the app version to unregister.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app unregister --name mysource --type source --version 0.0.1
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │&gt; mysource-0.0.2 &lt;│         │    │    ║
║   │mysource-0.0.3    │         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>If a <code>--version</code> is not specified, the default version is unregistered.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>All applications in a stream should have a default version set for the stream to be deployed.
Otherwise they will be treated as unregistered application during the deployment.
Use the <code>app default</code> to set the defaults.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">app default --id source:mysource --version 0.0.3
dataflow:&gt;app list --id source:mysource
╔═══╤══════════════════╤═════════╤════╤════╗
║app│      source      │processor│sink│task║
╠═══╪══════════════════╪═════════╪════╪════╣
║   │mysource-0.0.2    │         │    │    ║
║   │&gt; mysource-0.0.3 &lt;│         │    │    ║
╚═══╧══════════════════╧═════════╧════╧════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>stream deploy</code> necessitates default app versions to be set.
The <code>stream update</code> and <code>stream rollback</code> commands though can use all (default and non-default) registered app versions.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream create foo --definition "mysource | log"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create stream using the default mysource version (0.0.3). Then we can update the version to 0.0.2 like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream update foo --properties version.mysource=0.0.2</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only pre-registered applications can be used to <code>deploy</code>, <code>update</code> or <code>rollback</code> a Stream.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An attempt to update the <code>mysource</code> to version <code>0.0.1</code> (not registered) will fail!</p>
</div>
<div class="sect3">
<h4 id="supported-apps-and-tasks">17.1.1. Register Supported Applications and Tasks</h4>
<div class="paragraph">
<p>For convenience, we have the static files with application-URIs (for both maven and docker) available
for all the out-of-the-box stream and task/batch app-starters. You can point to this file and import
all the application-URIs in bulk. Otherwise, as explained previously, you can register them individually or have your own
custom property file with only the required application-URIs in it. It is recommended, however, to have a &#8220;focused&#8221;
list of desired application-URIs in a custom property file.</p>
</div>
<div class="sect4">
<h5 id="_spring_cloud_stream_app_starters">Spring Cloud Stream App Starters</h5>
<div class="paragraph">
<p>The following table includes the dataflow.spring.io links to the available Stream Application Starters based on Spring Cloud Stream 2.0.x
and Spring Boot 2.0.x:</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-SR3-stream-applications-rabbit-maven" class="bare">dataflow.spring.io/Darwin-SR3-stream-applications-rabbit-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-rabbit-maven" class="bare">dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-rabbit-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-SR3-stream-applications-rabbit-docker" class="bare">dataflow.spring.io/Darwin-SR3-stream-applications-rabbit-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-rabbit-docker" class="bare">dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-rabbit-docker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-SR3-stream-applications-kafka-maven" class="bare">dataflow.spring.io/Darwin-SR3-stream-applications-kafka-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-kafka-maven" class="bare">dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-kafka-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-SR3-stream-applications-kafka-docker" class="bare">dataflow.spring.io/Darwin-SR3-stream-applications-kafka-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-kafka-docker" class="bare">dataflow.spring.io/Darwin-BUILD-SNAPSHOT-stream-applications-kafka-docker</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following table includes the dataflow.spring.io links to the available Stream Application Starters based on Spring Cloud Stream 2.1.x
and Spring Boot 2.1.x:</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-SR2-stream-applications-rabbit-maven" class="bare">dataflow.spring.io/Einstein-SR2-stream-applications-rabbit-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-rabbit-maven" class="bare">dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-rabbit-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RabbitMQ + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-SR2-stream-applications-rabbit-docker" class="bare">dataflow.spring.io/Einstein-SR2-stream-applications-rabbit-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-rabbit-docker" class="bare">dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-rabbit-docker</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-SR2-stream-applications-kafka-maven" class="bare">dataflow.spring.io/Einstein-SR2-stream-applications-kafka-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-kafka-maven" class="bare">dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-kafka-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Kafka + Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-SR2-stream-applications-kafka-docker" class="bare">dataflow.spring.io/Einstein-SR2-stream-applications-kafka-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-kafka-docker" class="bare">dataflow.spring.io/Einstein-BUILD-SNAPSHOT-stream-applications-kafka-docker</a></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
App Starter actuator endpoints are secured by default. You can disable security by deploying streams with the
property <code>app.*.spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.security.servlet.SecurityAutoConfiguration</code>.
On Kubernetes refer to the section <a href="#getting-started-kubernetes-probes">Liveness and readiness probes</a> to configure
security for actuator endpoints.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Starting with Spring Cloud Stream 2.1 GA release, we now have robust interoperability with Spring Cloud Function
programming model. Building on that, with Einstein release-train, it is now possible to pick a few Stream App
Starters, and compose them into a single application using the functional-style programming model. Check out the
<a href="https://spring.io/blog/2019/01/09/composed-function-support-in-spring-cloud-data-flow">"Composed Function Support in
Spring Cloud Data Flow"</a> blog to learn more about the developer and orchestration-experience with an example.
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="_spring_cloud_task_app_starters">Spring Cloud Task App Starters</h5>
<div class="paragraph">
<p>The following table includes the available Task Application Starters based on Spring Cloud Task 2.0.x and Spring Boot 2.0.x:</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-SR1-task-applications-maven" class="bare">dataflow.spring.io/Dearborn-SR1-task-applications-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-maven" class="bare">dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-SR1-task-applications-docker" class="bare">dataflow.spring.io/Dearborn-SR1-task-applications-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-docker" class="bare">dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-docker</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The following table includes the available Task Application Starters based on Spring Cloud Task 2.1.x and Spring Boot 2.1.x:</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Milestone Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Elston-GA-task-applications-maven" class="bare">dataflow.spring.io/Elston-GA-task-applications-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Elston-BUILD-SNAPSHOT-task-applications-maven" class="bare">dataflow.spring.io/Elston-BUILD-SNAPSHOT-task-applications-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Elston-GA-task-applications-docker" class="bare">dataflow.spring.io/Elston-GA-task-applications-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Elston-BUILD-SNAPSHOT-task-applications-docker" class="bare">dataflow.spring.io/Elston-BUILD-SNAPSHOT-task-applications-docker</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can find more information about the available task starters in the <a href="https://cloud.spring.io/spring-cloud-task-app-starters/">Task App Starters Project Page</a> and
related reference documentation.  For more information about the available stream starters, look at the <a href="https://cloud.spring.io/spring-cloud-stream-app-starters/">Stream App Starters Project Page</a>
and related reference documentation.</p>
</div>
<div class="paragraph">
<p>As an example, if you would like to register all out-of-the-box stream applications built with the Kafka binder in bulk, you can use the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ dataflow:>app import --uri https://dataflow.spring.io/kafka-maven-latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively you can register all the stream applications with the Rabbit binder, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ dataflow:>app import --uri https://dataflow.spring.io/rabbitmq-maven-latest</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also pass the <code>--local</code> option (which is <code>true</code> by default) to indicate whether the
properties file location should be resolved within the shell process itself. If the location should
be resolved from the Data Flow Server process, specify <code>--local false</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When using either <code>app register</code> or <code>app import</code>, if an app is already registered with
the provided name and type and version, it is not overridden by default. If you would like to override the
pre-existing app uri or metadata-uri coordinates, then include the <code>--force</code> option.</p>
</div>
<div class="paragraph">
<p>Note, however, that, once downloaded, applications may be cached locally on the Data Flow server, based on the resource
location. If the resource location does not change (even though the actual resource <em>bytes</em> may be different), then it
is not re-downloaded. When using <code>maven://</code> resources on the other hand, using a constant location may still circumvent
caching (if using <code>-SNAPSHOT</code> versions).</p>
</div>
<div class="paragraph">
<p>Moreover, if a stream is already deployed and using some version of a registered app, then (forcibly) re-registering a
different app has no effect until the stream is deployed again.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some cases, the Resource is resolved on the server side. In others, the
URI is passed to a runtime container instance where it is resolved. Consult
the specific documentation of each Data Flow Server for more detail.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-dataflow-stream-app-whitelisting">17.1.2. Whitelisting application properties</h4>
<div class="paragraph">
<p>Stream and Task applications are Spring Boot applications that are aware of many <a href="#spring-cloud-dataflow-global-properties">Common Application Properties</a>, such as <code>server.port</code> but also families of properties such as those with the prefix <code>spring.jmx</code> and <code>logging</code>.  When creating your own application, you should whitelist properties so that the shell and the UI can display them first as primary properties when presenting options through TAB completion or in drop-down boxes.</p>
</div>
<div class="paragraph">
<p>To whitelist application properties, create a file named <code>spring-configuration-metadata-whitelist.properties</code> in the <code>META-INF</code> resource directory. There are two property keys that can be used inside this file. The first key is named <code>configuration-properties.classes</code>. The value is a comma separated list of fully qualified <code>@ConfigurationProperty</code> class names. The second key is <code>configuration-properties.names</code>, whose value is a comma-separated list of property names. This can contain the full name of the property, such as <code>server.port</code>, or a partial name to whitelist a category of property names, such as <code>spring.jmx</code>.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/spring-cloud-stream-app-starters">Spring Cloud Stream application starters</a> are a good place to look for examples of usage. The following example comes from the file sink&#8217;s <code>spring-configuration-metadata-whitelist.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>configuration-properties.classes=org.springframework.cloud.stream.app.file.sink.FileSinkProperties</code></pre>
</div>
</div>
<div class="paragraph">
<p>If we also want to add <code>server.port</code> to be white listed, it would become the following line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>configuration-properties.classes=org.springframework.cloud.stream.app.file.sink.FileSinkProperties
configuration-properties.names=server.port</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure to add 'spring-boot-configuration-processor' as an optional dependency to generate configuration metadata file for the properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-dataflow-stream-app-metadata-artifact">17.1.3. Creating and Using a Dedicated Metadata Artifact</h4>
<div class="paragraph">
<p>You can go a step further in the process of describing the main properties that your stream or task app supports by
creating a metadata companion artifact. This jar file contains only the Spring boot JSON file about
configuration properties metadata and the whitelisting file described in the previous section.</p>
</div>
<div class="paragraph">
<p>The following example shows the contents of such an artifact, for the canonical <code>log</code> sink:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ jar tvf log-sink-rabbit-1.2.1.BUILD-SNAPSHOT-metadata.jar
373848 META-INF/spring-configuration-metadata.json
   174 META-INF/spring-configuration-metadata-whitelist.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that the <code>spring-configuration-metadata.json</code> file is quite large. This is because it contains the concatenation of <em>all</em> the properties that
are available at runtime to the <code>log</code> sink (some of them come from <code>spring-boot-actuator.jar</code>, some of them come from
<code>spring-boot-autoconfigure.jar</code>, some more from <code>spring-cloud-starter-stream-sink-log.jar</code>, and so on). Data Flow
always relies on all those properties, even when a companion artifact is not available, but here all have been merged
into a single file.</p>
</div>
<div class="paragraph">
<p>To help with that (you do not want to try to craft this giant JSON file by hand), you can use the
following plugin in your build:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;plugin&gt;
 	&lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
 	&lt;artifactId&gt;spring-cloud-app-starter-metadata-maven-plugin&lt;/artifactId&gt;
 	&lt;executions&gt;
 		&lt;execution&gt;
 			&lt;id&gt;aggregate-metadata&lt;/id&gt;
 			&lt;phase&gt;compile&lt;/phase&gt;
 			&lt;goals&gt;
 				&lt;goal&gt;aggregate-metadata&lt;/goal&gt;
 			&lt;/goals&gt;
 		&lt;/execution&gt;
 	&lt;/executions&gt;
 &lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This plugin comes in addition to the <code>spring-boot-configuration-processor</code> that creates the individual JSON files.
Be sure to configure both.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The benefits of a companion artifact include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Being much lighter. (The companion artifact is usually a few kilobytes, as opposed to megabytes for the actual app.) Consequently, they are quicker to download,
allowing quicker feedback when using, for example, <code>app info</code> or the Dashboard UI.</p>
</li>
<li>
<p>As a consequence of being lighter, they can be used in resource constrained environments (such as PaaS) when metadata is
the only piece of information needed.</p>
</li>
<li>
<p>For environments that do not deal with Spring Boot uber jars directly (for example, Docker-based runtimes such as
Kubernetes or Cloud Foundry), this is the only way to provide metadata about the properties supported by the app.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remember, though, that this is entirely optional when dealing with uber jars. The uber jar itself also includes the
metadata in it already.</p>
</div>
</div>
<div class="sect3">
<h4 id="_using_the_companion_artifact">17.1.4. Using the Companion Artifact</h4>
<div class="paragraph">
<p>Once you have a companion artifact at hand, you need to make the system aware of it so that it can be used.</p>
</div>
<div class="paragraph">
<p>When registering a single app with <code>app register</code>, you can use the optional <code>--metadata-uri</code> option in the shell, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>app register --name log --type sink
    --uri maven://org.springframework.cloud.stream.app:log-sink:2.1.0.RELEASE
    --metadata-uri maven://org.springframework.cloud.stream.app:log-sink:jar:metadata:2.1.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>When registering several files by using the <code>app import</code> command, the file should contain a <code>&lt;type&gt;.&lt;name&gt;.metadata</code> line
in addition to each <code>&lt;type&gt;.&lt;name&gt;</code> line. Strictly speaking, doing so is optional (if some apps have it but some others do not, it works), but it is best practice.</p>
</div>
<div class="paragraph">
<p>The following example shows a Dockerized app, where the metadata artifact is being hosted in a Maven repository (retrieving
it through <code>http://</code> or <code>file://</code> would be equally possible).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">...
source.http=docker:springcloudstream/http-source-rabbit:latest
source.http.metadata=maven://org.springframework.cloud.stream.app:http-source-rabbit:jar:metadata:2.1.0.RELEASE
...</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="custom-applications">17.1.5. Creating Custom Applications</h4>
<div class="paragraph">
<p>While there are out-of-the-box source, processor, sink applications available, you can extend these applications or write a custom <a href="https://github.com/spring-cloud/spring-cloud-stream">Spring Cloud Stream</a> application.</p>
</div>
<div class="paragraph">
<p>The process of creating Spring Cloud Stream applications with <a href="https://start.spring.io/">Spring Initializr</a> is detailed in the Spring Cloud Stream <a href="https://docs.spring.io/spring-cloud-stream/docs/current/reference/htmlsingle/index.html#_getting_started">documentation</a>.
It is possible to include multiple binders to an application.
If doing so, see the instructions in <a href="#passing_producer_consumer_properties">[passing_producer_consumer_properties]</a> for how to configure them.</p>
</div>
<div class="paragraph">
<p>For supporting property whitelisting, Spring Cloud Stream applications running in Spring Cloud Data Flow may include the Spring Boot <code>configuration-processor</code> as an optional dependency, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependencies&gt;
  &lt;!-- other dependencies --&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
    &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
    &lt;optional&gt;true&lt;/optional&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Make sure that the <code>spring-boot-maven-plugin</code> is included in the POM.
The plugin is necessary for creating the executable jar that is registered with Spring Cloud Data Flow.
Spring Initialzr includes the plugin in the generated POM.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once a custom application has been created, it can be registered as described in <a href="#spring-cloud-dataflow-register-stream-apps">Register a Stream App</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-stream">17.2. Creating a Stream</h3>
<div class="paragraph">
<p>The Spring Cloud Data Flow Server exposes a full RESTful API for managing the lifecycle of stream definitions, but the easiest way to use is it is through the Spring Cloud Data Flow shell. Start the shell as described in the <a href="#getting-started">Getting Started</a> section.</p>
</div>
<div class="paragraph">
<p>New streams are created with the help of stream definitions. The definitions are built from a simple DSL. For example, consider what happens if we execute the following shell command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock</code></pre>
</div>
</div>
<div class="paragraph">
<p>This defines a stream named <code>ticktock</code> that is based off the DSL expression <code>time | log</code>. The DSL uses the "pipe" symbol (<code>|</code>), to connect a source to a sink.</p>
</div>
<div class="paragraph">
<p>The <code>stream info</code> command shows useful information about the stream, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream info ticktock
╔═══════════╤═════════════════╤══════════╗
║Stream Name│Stream Definition│  Status  ║
╠═══════════╪═════════════════╪══════════╣
║ticktock   │time | log       │undeployed║
╚═══════════╧═════════════════╧══════════╝</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_application_properties_2">17.2.1. Application Properties</h4>
<div class="paragraph">
<p>Application properties are the properties associated with each application in the stream. When the application is deployed, the application properties are applied to the application through
command line arguments or environment variables, depending on the underlying deployment implementation.</p>
</div>
<div class="paragraph">
<p>The following stream can have application properties defined at the time of stream creation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock</code></pre>
</div>
</div>
<div class="paragraph">
<p>The shell command <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> displays the white-listed application properties for the application.
For more info on the property white listing, refer to <a href="#spring-cloud-dataflow-stream-app-whitelisting">Whitelisting application properties</a></p>
</div>
<div class="paragraph">
<p>The following listing shows the white_listed properties for the <code>time</code> app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; app info --name time --type source
╔══════════════════════════════╤══════════════════════════════╤══════════════════════════════╤══════════════════════════════╗
║         Option Name          │         Description          │           Default            │             Type             ║
╠══════════════════════════════╪══════════════════════════════╪══════════════════════════════╪══════════════════════════════╣
║trigger.time-unit             │The TimeUnit to apply to delay│&lt;none&gt;                        │java.util.concurrent.TimeUnit ║
║                              │values.                       │                              │                              ║
║trigger.fixed-delay           │Fixed delay for periodic      │1                             │java.lang.Integer             ║
║                              │triggers.                     │                              │                              ║
║trigger.cron                  │Cron expression value for the │&lt;none&gt;                        │java.lang.String              ║
║                              │Cron Trigger.                 │                              │                              ║
║trigger.initial-delay         │Initial delay for periodic    │0                             │java.lang.Integer             ║
║                              │triggers.                     │                              │                              ║
║trigger.max-messages          │Maximum messages per poll, -1 │1                             │java.lang.Long                ║
║                              │means infinity.               │                              │                              ║
║trigger.date-format           │Format for the date value.    │&lt;none&gt;                        │java.lang.String              ║
╚══════════════════════════════╧══════════════════════════════╧══════════════════════════════╧══════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following listing shows the white-listed properties for the <code>log</code> app:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; app info --name log --type sink
╔══════════════════════════════╤══════════════════════════════╤══════════════════════════════╤══════════════════════════════╗
║         Option Name          │         Description          │           Default            │             Type             ║
╠══════════════════════════════╪══════════════════════════════╪══════════════════════════════╪══════════════════════════════╣
║log.name                      │The name of the logger to use.│&lt;none&gt;                        │java.lang.String              ║
║log.level                     │The level at which to log     │&lt;none&gt;                        │org.springframework.integratio║
║                              │messages.                     │                              │n.handler.LoggingHandler$Level║
║log.expression                │A SpEL expression (against the│payload                       │java.lang.String              ║
║                              │incoming message) to evaluate │                              │                              ║
║                              │as the logged message.        │                              │                              ║
╚══════════════════════════════╧══════════════════════════════╧══════════════════════════════╧══════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>The application properties for the <code>time</code> and <code>log</code> apps can be specified at the time of <code>stream</code> creation as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --definition "time --fixed-delay=5 | log --level=WARN" --name ticktock</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that, in the preceding example, the <code>fixed-delay</code> and <code>level</code> properties defined for the apps <code>time</code> and <code>log</code> are the "'short-form'" property names provided by the shell completion.
These "'short-form'" property names are applicable only for the white-listed properties. In all other cases, only fully qualified property names should be used.</p>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-dataflow-global-properties">17.2.2. Common Application Properties</h4>
<div class="paragraph">
<p>In addition to configuration through DSL, Spring Cloud Data Flow provides a mechanism for setting common properties to all
the streaming applications that are launched by it.
This can be done by adding properties prefixed with <code>spring.cloud.dataflow.applicationProperties.stream</code> when starting
the server.
When doing so, the server passes all the properties, without the prefix, to the instances it launches.</p>
</div>
<div class="paragraph">
<p>For example, all the launched applications can be configured to use a specific Kafka broker by launching the
Data Flow server with the following options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>--spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.binder.brokers=192.168.1.100:9092
--spring.cloud.dataflow.applicationProperties.stream.spring.cloud.stream.kafka.binder.zkNodes=192.168.1.100:2181</code></pre>
</div>
</div>
<div class="paragraph">
<p>Doing so causes the properties <code>spring.cloud.stream.kafka.binder.brokers</code> and <code>spring.cloud.stream.kafka.binder.zkNodes</code>
to be passed to all the launched applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties configured with this mechanism have lower precedence than stream deployment properties.
They are overridden if a property with the same key is specified at stream deployment time (for example,
<code>app.http.spring.cloud.stream.kafka.binder.brokers</code> overrides the common property).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-deploy-stream">17.3. Deploying a Stream</h3>
<div class="paragraph">
<p>This section describes how to deploy a Stream when the Spring Cloud Data Flow server is responsible for deploying the stream. It covers the deployment and upgrade of Streams leveraging the Skipper service.  The description of how deployment properties applies to both approaches of Stream deployment.</p>
</div>
<div class="paragraph">
<p>Give the <code>ticktock</code> stream definition:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream create --definition "time | log" --name ticktock</code></p>
</div>
<div class="paragraph">
<p>To deploy the stream, use the following shell command:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream deploy --name ticktock</code></p>
</div>
<div class="paragraph">
<p>The Data Flow Server delegates to Skipper the resolution and deployment of the <code>time</code> and <code>log</code> applications.</p>
</div>
<div class="paragraph">
<p>The <code>stream info</code> command shows useful information about the stream, including the deployment properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream info --name ticktock
╔═══════════╤═════════════════╤═════════╗
║Stream Name│Stream Definition│  Status ║
╠═══════════╪═════════════════╪═════════╣
║ticktock   │time | log       │deploying║
╚═══════════╧═════════════════╧═════════╝

Stream Deployment properties: {
  "log" : {
    "resource" : "maven://org.springframework.cloud.stream.app:log-sink-rabbit",
    "spring.cloud.deployer.group" : "ticktock",
    "version" : "2.0.1.RELEASE"
  },
  "time" : {
    "resource" : "maven://org.springframework.cloud.stream.app:time-source-rabbit",
    "spring.cloud.deployer.group" : "ticktock",
    "version" : "2.0.1.RELEASE"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There is an important optional command argument (called <code>--platformName</code>) to the <code>stream deploy</code> command.
Skipper can be configured to deploy to multiple platforms.
Skipper is pre-configured with a platform named <code>default</code>, which deploys applications to the local machine where Skipper is running.
The default value of the command line argument <code>--platformName</code> is <code>default</code>.
If you commonly deploy to one platform, when installing Skipper, you can override the configuration of the <code>default</code> platform.
Otherwise, specify the <code>platformName</code> to one of the values returned by the <code>stream platform-list</code> command.</p>
</div>
<div class="paragraph">
<p>In the preceding example, the time source sends the current time as a message each second, and the log sink outputs it by using the logging framework.
You can tail the <code>stdout</code> log (which has an <code>&lt;instance&gt;</code> suffix). The log files are located within the directory displayed in the Data Flow Server&#8217;s log output, as shown in the following listing:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>$ tail -f /var/folders/wn/8jxm_tbd1vj28c8vj37n900m0000gn/T/spring-cloud-dataflow-912434582726479179/ticktock-1464788481708/ticktock.log/stdout_0.log
2016-06-01 09:45:11.250  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:11
2016-06-01 09:45:12.250  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:12
2016-06-01 09:45:13.251  INFO 79194 --- [  kafka-binder-] log.sink    : 06/01/16 09:45:13</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also create and deploy the stream in one step by passing the <code>--deploy</code> flag when creating the stream, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --definition "time | log" --name ticktock --deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, it is not very common in real-world use cases to create and deploy the stream in one step.
The reason is that when you use the <code>stream deploy</code> command, you can pass in properties that define how to map the applications onto the platform (for example, what is the memory size of the container to use, the number of each application to run, and whether to enable data partitioning features).
Properties can also override application properties that were set when creating the stream.
The next sections cover this feature in detail.</p>
</div>
<div class="sect3">
<h4 id="_deployment_properties">17.3.1. Deployment Properties</h4>
<div class="paragraph">
<p>When deploying a stream, you can specify properties that can control how apps are deployed and configured. Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/deployment-properties/">Deployment Properties</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-destroy-stream">17.4. Destroying a Stream</h3>
<div class="paragraph">
<p>You can delete a stream by issuing the <code>stream destroy</code> command from the shell, as follows:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream destroy --name ticktock</code></p>
</div>
<div class="paragraph">
<p>If the stream was deployed, it is undeployed before the stream definition is deleted.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-undeploy-stream">17.5. Undeploying a Stream</h3>
<div class="paragraph">
<p>Often you want to stop a stream but retain the name and definition for future use. In that case, you can <code>undeploy</code> the stream by name.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt; stream undeploy --name ticktock
dataflow:&gt; stream deploy --name ticktock</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can issue the <code>deploy</code> command at a later time to restart it.</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; stream deploy --name ticktock</code></p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-validate-stream">17.6. Validating a Stream</h3>
<div class="paragraph">
<p>Sometimes the one or more of the apps contained within a stream definition contain an invalid URI in its registration.
This can caused by an invalid URI entered at app registration time or the app was removed from the repository from which it was to be drawn.
To verify that all the apps contained in a stream are resolve-able, a user can use the <code>validate</code> command.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream validate ticktock
╔═══════════╤═════════════════╗
║Stream Name│Stream Definition║
╠═══════════╪═════════════════╣
║ticktock   │time | log       ║
╚═══════════╧═════════════════╝


ticktock is a valid stream.
╔═══════════╤═════════════════╗
║ App Name  │Validation Status║
╠═══════════╪═════════════════╣
║source:time│valid            ║
║sink:log   │valid            ║
╚═══════════╧═════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above the user validated their ticktock stream.   As we see that both the <code>source:time</code> and <code>sink:log</code> are valid.
Now let&#8217;s see what happens if we have a stream definition with a registered app with an invalid URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream validate bad-ticktock
╔════════════╤═════════════════╗
║Stream Name │Stream Definition║
╠════════════╪═════════════════╣
║bad-ticktock│bad-time | log   ║
╚════════════╧═════════════════╝


bad-ticktock is an invalid stream.
╔═══════════════╤═════════════════╗
║   App Name    │Validation Status║
╠═══════════════╪═════════════════╣
║source:bad-time│invalid          ║
║sink:log       │valid            ║
╚═══════════════╧═════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case Spring Cloud Data Flow states that the stream is invalid because source:bad-time has an invalid URI.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-update">17.7. Updating a Stream</h3>
<div class="paragraph">
<p>To update the stream, use the command <code>stream update</code> which takes as a command argument either <code>--properties</code> or <code>--propertiesFile</code>.
There is an important new top level prefix available when using Skipper, which is <code>version</code>.
If the Stream <code>http | log</code> was deployed, and the version of <code>log</code> which registered at the time of deployment was <code>1.1.0.RELEASE</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --name httptest --definition "http --server.port=9000 | log"
dataflow:&gt; stream deploy --name httptest
dataflow:&gt;stream info httptest
╔══════════════════════════════╤══════════════════════════════╤════════════════════════════╗
║             Name             │             DSL              │          Status            ║
╠══════════════════════════════╪══════════════════════════════╪════════════════════════════╣
║httptest                      │http --server.port=9000 | log │deploying                   ║
╚══════════════════════════════╧══════════════════════════════╧════════════════════════════╝

Stream Deployment properties: {
  "log" : {
    "spring.cloud.deployer.indexed" : "true",
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:log-sink-rabbit" : "1.1.0.RELEASE"
  },
  "http" : {
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:http-source-rabbit" : "1.1.0.RELEASE"
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then the following command will update the Stream to use the <code>1.2.0.RELEASE</code> of the log application.
Before updating the stream with the specific version of the app, we need to make sure that the app is registered with that version.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app register --name log --type sink --uri maven://org.springframework.cloud.stream.app:log-sink-rabbit:1.2.0.RELEASE
Successfully registered application 'sink:log'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream update --name httptest --properties version.log=1.2.0.RELEASE</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Only pre-registered application versions can be used to <code>deploy</code>, <code>update</code>, or <code>rollback</code> a stream.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To verify the deployment properties and the updated version, we can use <code>stream info</code>, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream info httptest
╔══════════════════════════════╤══════════════════════════════╤════════════════════════════╗
║             Name             │             DSL              │          Status            ║
╠══════════════════════════════╪══════════════════════════════╪════════════════════════════╣
║httptest                      │http --server.port=9000 | log │deploying                   ║
╚══════════════════════════════╧══════════════════════════════╧════════════════════════════╝

Stream Deployment properties: {
  "log" : {
    "spring.cloud.deployer.indexed" : "true",
    "spring.cloud.deployer.count" : "1",
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:log-sink-rabbit" : "1.2.0.RELEASE"
  },
  "http" : {
    "spring.cloud.deployer.group" : "httptest",
    "maven://org.springframework.cloud.stream.app:http-source-rabbit" : "1.1.0.RELEASE"
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-force-update">17.8. Force update of a Stream</h3>
<div class="paragraph">
<p>When upgrading a stream, the <code>--force</code> option can be used to deploy new instances of currently deployed applications even if no application or deployment properties have changed.
This behavior is needed in the case when configuration information is obtained by the application itself at startup time, for example from Spring Cloud Config Server.
You can specify which applications to force upgrade by using the option <code>--app-names</code>.
If you do not specify any application names, all the applications will be force upgraded.
You can specify <code>--force</code> and <code>--app-names</code> options together with <code>--properties</code> or <code>--propertiesFile</code> options.</p>
</div>
</div>
<div class="sect2">
<h3 id="_stream_versions">17.9. Stream versions</h3>
<div class="paragraph">
<p>Skipper keeps a history of the streams that were deployed.
After updating a Stream, there will be a second version of the stream.
You can query for the history of the versions using the command <code>stream history --name &lt;name-of-stream&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream history --name httptest
╔═══════╤════════════════════════════╤════════╤════════════╤═══════════════╤════════════════╗
║Version│        Last updated        │ Status │Package Name│Package Version│  Description   ║
╠═══════╪════════════════════════════╪════════╪════════════╪═══════════════╪════════════════╣
║2      │Mon Nov 27 22:41:16 EST 2017│DEPLOYED│httptest    │1.0.0          │Upgrade complete║
║1      │Mon Nov 27 22:40:41 EST 2017│DELETED │httptest    │1.0.0          │Delete complete ║
╚═══════╧════════════════════════════╧════════╧════════════╧═══════════════╧════════════════╝</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_stream_manifests">17.10. Stream Manifests</h3>
<div class="paragraph">
<p>Skipper keeps a &#8220;manifest&#8221; of the all the applications, their application properties, and their deployment properties after all values have been substituted.
This represents the final state of what was deployed to the platform.
You can view the manifest for any of the versions of a Stream by using the following command:</p>
</div>
<div class="paragraph">
<p><code>stream manifest --name &lt;name-of-stream&gt; --releaseVersion &lt;optional-version&gt;</code></p>
</div>
<div class="paragraph">
<p>If the <code>--releaseVersion</code> is not specified, the manifest for the last version is returned.</p>
</div>
<div class="paragraph">
<p>The following example shows the use of the manifest:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream manifest --name httptest</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the command results in the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml"># Source: log.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: log
spec:
  resource: maven://org.springframework.cloud.stream.app:log-sink-rabbit
  version: 1.2.0.RELEASE
  applicationProperties:
    spring.metrics.export.triggers.application.includes: integration**
    spring.cloud.dataflow.stream.app.label: log
    spring.cloud.stream.metrics.key: httptest.log.${spring.cloud.application.guid}
    spring.cloud.stream.bindings.input.group: httptest
    spring.cloud.stream.metrics.properties: spring.application.name,spring.application.index,spring.cloud.application.*,spring.cloud.dataflow.*
    spring.cloud.dataflow.stream.name: httptest
    spring.cloud.dataflow.stream.app.type: sink
    spring.cloud.stream.bindings.input.destination: httptest.http
  deploymentProperties:
    spring.cloud.deployer.indexed: true
    spring.cloud.deployer.group: httptest
    spring.cloud.deployer.count: 1

---
# Source: http.yml
apiVersion: skipper.spring.io/v1
kind: SpringCloudDeployerApplication
metadata:
  name: http
spec:
  resource: maven://org.springframework.cloud.stream.app:http-source-rabbit
  version: 1.2.0.RELEASE
  applicationProperties:
    spring.metrics.export.triggers.application.includes: integration**
    spring.cloud.dataflow.stream.app.label: http
    spring.cloud.stream.metrics.key: httptest.http.${spring.cloud.application.guid}
    spring.cloud.stream.bindings.output.producer.requiredGroups: httptest
    spring.cloud.stream.metrics.properties: spring.application.name,spring.application.index,spring.cloud.application.*,spring.cloud.dataflow.*
    server.port: 9000
    spring.cloud.stream.bindings.output.destination: httptest.http
    spring.cloud.dataflow.stream.name: httptest
    spring.cloud.dataflow.stream.app.type: source
  deploymentProperties:
    spring.cloud.deployer.group: httptest</code></pre>
</div>
</div>
<div class="paragraph">
<p>The majority of the deployment and application properties were set by Data Flow to enable the applications to talk to each other and to send application metrics with identifying labels.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-lifecycle-rollback">17.11. Rollback a Stream</h3>
<div class="paragraph">
<p>You can rollback to a previous version of the stream using the command <code>stream rollback</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream rollback --name httptest</code></pre>
</div>
</div>
<div class="paragraph">
<p>The optional <code>--releaseVersion</code> command argument adds the version of the stream.
If not specified, the rollback goes to the previous stream version.</p>
</div>
</div>
<div class="sect2">
<h3 id="_application_count">17.12. Application Count</h3>
<div class="paragraph">
<p>The application count is a dynamic property of the system used to specify the number of instances of applications. Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/application-count/">Application Count</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_skipper_s_upgrade_strategy">17.13. Skipper&#8217;s Upgrade Strategy</h3>
<div class="paragraph">
<p>Skipper has a simple 'red/black' upgrade strategy.  It deploys the new version of the applications, using as many instances as the currently running version, and checks the <code>/health</code> endpoint of the application.
If the health of the new application is good, then the previous application is undeployed.
If the health of the new application is bad, then all new applications are undeployed and the upgrade is considered to be not successful.</p>
</div>
<div class="paragraph">
<p>The upgrade strategy is not a rolling upgrade, so if five applications of the application are running, then in a sunny-day scenario, five of the new applications are also running before the older version is undeployed.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_stream_dsl">18. Stream DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section covers additional features of the Stream DSL not covered in the  <a href="#spring-cloud-dataflow-stream-intro-dsl">Stream DSL introduction</a>.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-tap">18.1. Tap a Stream</h3>
<div class="paragraph">
<p>Taps can be created at various producer endpoints in a stream. Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/taps/">Tapping a Stream</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-labels">18.2. Using Labels in a Stream</h3>
<div class="paragraph">
<p>When a stream is made up of multiple apps with the same name, they must be qualified with labels.
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/labels/">Labeling Applications</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-named-destinations">18.3. Named Destinations</h3>
<div class="paragraph">
<p>Instead of referencing a source or sink application, you can use a named destination.
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/named-destinations/">Named Destinations</a> section of the microsite for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-dsl-fanin-fanout">18.4. Fan-in and Fan-out</h3>
<div class="paragraph">
<p>By using named destinations, you can support fan-in and fan-out use cases.
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/fanin-fanout/">Fan-in and Fan-out</a> section of the microsite for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-java-dsl">19. Stream Java DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instead of using the shell to create and deploy streams, you can use the Java-based DSL provided by the <code>spring-cloud-dataflow-rest-client</code> module.
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/java-dsl/">Java DSL</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-multi-binder">20. Stream Applications with Multiple Binder Configurations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In some cases, a stream can have its applications bound to multiple spring cloud stream binders when they are required to connect to different messaging
middleware configurations. In those cases, it is important to make sure the applications are configured appropriately with their binder
configurations. For example, a multi-binder transformer that supports both Kafka and Rabbit binders is the processor in the following stream:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">http | multibindertransform --expression=payload.toUpperCase() | log</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In the example above you would write your own multibindertransform application.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In this stream, each application connects to messaging middleware in the following way:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The HTTP source sends events to RabbitMQ (<code>rabbit1</code>).</p>
</li>
<li>
<p>The Multi-Binder Transform processor receives events from RabbitMQ (<code>rabbit1</code>) and sends the processed events into Kafka (<code>kafka1</code>).</p>
</li>
<li>
<p>The log sink receives events from Kafka (<code>kafka1</code>).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Here, <code>rabbit1</code> and <code>kafka1</code> are the binder names given in the spring cloud stream application properties.
Based on this setup, the applications have the following binder(s) in their classpath with the appropriate configuration:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>HTTP: Rabbit binder</p>
</li>
<li>
<p>Transform: Both Kafka and Rabbit binders</p>
</li>
<li>
<p>Log: Kafka binder</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The spring-cloud-stream <code>binder</code> configuration properties can be set within the applications themselves.
If not, they can be passed through <code>deployment</code> properties when the stream is deployed as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;stream create --definition "http | multibindertransform --expression=payload.toUpperCase() | log" --name mystream

dataflow:&gt;stream deploy mystream --properties "app.http.spring.cloud.stream.bindings.output.binder=rabbit1,app.multibindertransform.spring.cloud.stream.bindings.input.binder=rabbit1,
app.multibindertransform.spring.cloud.stream.bindings.output.binder=kafka1,app.log.spring.cloud.stream.bindings.input.binder=kafka1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>One can override any of the binder configuration properties by specifying them through deployment properties.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-function-composition">21. Function Composition</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Function composition allows you can attach a functional logic dynamically to an existing event streaming application. Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/function-composition/">Function Composition</a> section of the microsite for more details.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-stream-examples">22. Examples</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter includes the following examples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-dataflow-simple-stream">Simple Stream Processing</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-stream-partitions">Stateful Stream Processing</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-stream-app-types">Other Source and Sink Application Types</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can find links to more samples in the &#8220;<a href="#dataflow-samples">Samples</a>&#8221; chapter.</p>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-simple-stream">22.1. Simple Stream Processing</h3>
<div class="paragraph">
<p>As an example of a simple processing step, we can transform the payload of the HTTP posted data to upper case by using the following stream definition:
<code>http | transform --expression=payload.toUpperCase() | log</code></p>
</div>
<div class="paragraph">
<p>To create this stream enter the following command in the shell</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt; stream create --definition "http --server.port=9000 | transform --expression=payload.toUpperCase() | log" --name mystream --deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following example uses a shell command to post some data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt; http post --target http://localhost:9000 --data "hello"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding example results in an upper-case 'HELLO' in the log, as follows:</p>
</div>
<div class="paragraph">
<p><code>2016-06-01 09:54:37.749  INFO 80083 --- [  kafka-binder-] log.sink    : HELLO</code></p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-partitions">22.2. Stateful Stream Processing</h3>
<div class="paragraph">
<p>To demonstrate the data partitioning functionality, the following listing deploys a stream with Kafka as the binder:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt;stream create --name words --definition "http --server.port=9900 | splitter --expression=payload.split(' ') | log"
Created new stream 'words'

dataflow:&gt;stream deploy words --properties "app.splitter.producer.partitionKeyExpression=payload,deployer.log.count=2"
Deployed stream 'words'

dataflow:&gt;http post --target http://localhost:9900 --data "How much wood would a woodchuck chuck if a woodchuck could chuck wood"
&gt; POST (text/plain;Charset=UTF-8) http://localhost:9900 How much wood would a woodchuck chuck if a woodchuck could chuck wood
&gt; 202 ACCEPTED


dataflow:&gt;runtime apps
╔════════════════════╤═══════════╤═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║App Id / Instance Id│Unit Status│                                                               No. of Instances / Attributes                                                               ║
╠════════════════════╪═══════════╪═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║words.log-v1        │ deployed  │                                                                             2                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 24166                                                                                                                                        ║
║                    │           │        pid = 33097                                                                                                                                        ║
║                    │           │       port = 24166                                                                                                                                        ║
║words.log-v1-0      │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stderr_0.log     ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stdout_0.log     ║
║                    │           │        url = https://192.168.0.102:24166                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 41269                                                                                                                                        ║
║                    │           │        pid = 33098                                                                                                                                        ║
║                    │           │       port = 41269                                                                                                                                        ║
║words.log-v1-1      │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stderr_1.log     ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1/stdout_1.log     ║
║                    │           │        url = https://192.168.0.102:41269                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461063/words.log-v1                  ║
╟────────────────────┼───────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║words.http-v1       │ deployed  │                                                                             1                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 9900                                                                                                                                         ║
║                    │           │        pid = 33094                                                                                                                                        ║
║                    │           │       port = 9900                                                                                                                                         ║
║words.http-v1-0     │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1/stderr_0.log    ║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1/stdout_0.log    ║
║                    │           │        url = https://192.168.0.102:9900                                                                                                                    ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803461054/words.http-v1                 ║
╟────────────────────┼───────────┼───────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║words.splitter-v1   │ deployed  │                                                                             1                                                                             ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                    │           │       guid = 33963                                                                                                                                        ║
║                    │           │        pid = 33093                                                                                                                                        ║
║                    │           │       port = 33963                                                                                                                                        ║
║words.splitter-v1-0 │ deployed  │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1/stderr_0.log║
║                    │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1/stdout_0.log║
║                    │           │        url = https://192.168.0.102:33963                                                                                                                   ║
║                    │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/words-1542803437542/words.splitter-v1             ║
╚════════════════════╧═══════════╧═══════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you review the <code>words.log-v1-0</code> logs, you should see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2016-06-05 18:35:47.047  INFO 58638 --- [  kafka-binder-] log.sink                                 : How
2016-06-05 18:35:47.066  INFO 58638 --- [  kafka-binder-] log.sink                                 : chuck
2016-06-05 18:35:47.066  INFO 58638 --- [  kafka-binder-] log.sink                                 : chuck</code></pre>
</div>
</div>
<div class="paragraph">
<p>When you review the <code>words.log-v1-1</code> logs, you should see the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2016-06-05 18:35:47.047  INFO 58639 --- [  kafka-binder-] log.sink                                 : much
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : wood
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : would
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : a
2016-06-05 18:35:47.066  INFO 58639 --- [  kafka-binder-] log.sink                                 : woodchuck
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : if
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : a
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : woodchuck
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : could
2016-06-05 18:35:47.067  INFO 58639 --- [  kafka-binder-] log.sink                                 : wood</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example has shown that payload splits that contain the same word are routed to the same application instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-stream-app-types">22.3. Other Source and Sink Application Types</h3>
<div class="paragraph">
<p>This example shows something a bit more complicated: swapping out the <code>time</code> source for something else. Another supported source type is <code>http</code>, which accepts data for ingestion over HTTP POSTs. Note that the <code>http</code> source accepts data on a different port from the Data Flow Server (default 8080). By default, the port is randomly assigned.</p>
</div>
<div class="paragraph">
<p>To create a stream using an <code>http</code> source but still using the same <code>log</code> sink, we would change the original command in the <a href="#spring-cloud-dataflow-simple-stream">Simple Stream Processing</a> example to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; stream create --definition "http | log" --name myhttpstream --deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that we do not see any other output this time until we actually post some data (by using a shell command). In order to see the randomly assigned port on which the http source is listening, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;runtime apps

╔══════════════════════╤═══════════╤═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╗
║ App Id / Instance Id │Unit Status│                                                                    No. of Instances / Attributes                                                                    ║
╠══════════════════════╪═══════════╪═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╣
║myhttpstream.log-v1   │ deploying │                                                                                  1                                                                                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                      │           │       guid = 39628                                                                                                                                                  ║
║                      │           │        pid = 34403                                                                                                                                                  ║
║                      │           │       port = 39628                                                                                                                                                  ║
║myhttpstream.log-v1-0 │ deploying │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1/stderr_0.log ║
║                      │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1/stdout_0.log ║
║                      │           │        url = https://192.168.0.102:39628                                                                                                                             ║
║                      │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803867070/myhttpstream.log-v1              ║
╟──────────────────────┼───────────┼─────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╢
║myhttpstream.http-v1  │ deploying │                                                                                  1                                                                                  ║
╟┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┼┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈┈╢
║                      │           │       guid = 52143                                                                                                                                                  ║
║                      │           │        pid = 34401                                                                                                                                                  ║
║                      │           │       port = 52143                                                                                                                                                  ║
║myhttpstream.http-v1-0│ deploying │     stderr = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1/stderr_0.log║
║                      │           │     stdout = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1/stdout_0.log║
║                      │           │        url = https://192.168.0.102:52143                                                                                                                             ║
║                      │           │working.dir = /var/folders/js/7b_pn0t575l790x7j61slyxc0000gn/T/spring-cloud-deployer-6467595568759190742/myhttpstream-1542803866800/myhttpstream.http-v1             ║
╚══════════════════════╧═══════════╧═════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see that the corresponding <code>http</code> source has a <code>url</code> property containing the host and port information on which it is listening. You are now ready to post to that url, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:> http post --target http://localhost:1234 --data "hello"
dataflow:> http post --target http://localhost:1234 --data "goodbye"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The stream then funnels the data from the http source to the output log implemented by the log sink, yielding output similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>2016-06-01 09:50:22.121  INFO 79654 --- [  kafka-binder-] log.sink    : hello
2016-06-01 09:50:26.810  INFO 79654 --- [  kafka-binder-] log.sink    : goodbye</code></pre>
</div>
</div>
<div class="paragraph">
<p>We could also change the sink implementation. You could pipe the output to a file (<code>file</code>), to hadoop (<code>hdfs</code>), or to any of the other sink applications that are available. You can also define your own applications.</p>
</div>
</div>
</div>
</div>
<h1 id="streams-dev-guide" class="sect0">Stream Developer Guide</h1>
<div class="openblock partintro">
<div class="content">
Please see the <a href="https://dataflow.spring.io/docs/stream-developer-guides/">Stream Developer Guides</a> of the microsite for more information on how to create, test, and run Spring Cloud Stream applications on your local machine.
</div>
</div>
<h1 id="streams-monitoring" class="sect0">Stream Monitoring</h1>
<div class="openblock partintro">
<div class="content">
Please see the <a href="https://dataflow.spring.io/docs/feature-guides/streams/monitoring/">Stream Monitoring</a> Guide of the microsite for more information on how to monitor the applications that were deployed as part of a Stream.
</div>
</div>
<h1 id="spring-cloud-dataflow-task" class="sect0">Tasks</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section goes into more detail about how you can orchestrate <a href="https://cloud.spring.io/spring-cloud-task/">Spring Cloud Task</a> applications on Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>If you are just starting out with Spring Cloud Data Flow, you should probably read the Getting Started guide for  &#8220;<a href="#getting-started-local">Local</a>&#8221; , &#8220;<a href="#getting-started-cloudfoundry">Cloud Foundry</a>&#8221;, &#8220;<a href="#getting-started-kubernetes">Kubernetes</a>&#8221; before diving into this section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-task-intro">23. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A task application is short lived, meaning it stops running on purpose, and can be executed on demand or scheduled for execution.
A use case might be to scrape a web page and write to the database.
The <a href="https://cloud.spring.io/spring-cloud-task/">Spring Cloud Task</a> framework is based on Spring Boot and adds the capability for Boot applications to record the lifecycle events of a short lived application such as when it starts, when it ends and the exit status.
The <a href="https://docs.spring.io/spring-cloud-task/docs/2.0.0.RELEASE/reference/htmlsingle/#features-task-execution-details">TaskExecution</a> documentation shows which information is stored in the database.
The entry point for code execution in a Spring Cloud Task application is most often an implementation of Boot&#8217;s CommandLineRunner interface as shown in this <a href="https://docs.spring.io/spring-cloud-task/docs/2.0.0.RELEASE/reference/htmlsingle/#getting-started-writing-the-code">example</a>.</p>
</div>
<div class="paragraph">
<p>The Spring Batch project is probably what comes to mind for Spring developers writing short lived applications.
Spring Batch provides a much richer set of functionality than Spring Cloud Task and is recommended when processing large volumes of data.
A use case might be to read many CSV files, transform each row of data, and write each transformed row to a database.
Spring Batch provides its own database schema with a much more rich <a href="https://docs.spring.io/spring-batch/4.1.x/reference/html/schema-appendix.html#metaDataSchema">set of information</a> about the execution of a Spring Batch job.
Spring Cloud Task is integrated with Spring Batch so that if a Spring Cloud Task application defined a Spring Batch <code>Job</code>, a link between the Spring Cloud Task and Spring Cloud Batch execution tables is created.</p>
</div>
<div class="paragraph">
<p>When running Data Flow on your local machine, Tasks are launched in a separate JVM.
When running on Cloud Foundry, tasks are launched using <a href="https://docs.cloudfoundry.org/devguide/using-tasks.html">Cloud Foundry&#8217;s Task</a> functionality and when running on Kubernetes, tasks are launched using either a <code>Pod</code> or a <code>Job</code> resource.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_lifecycle_of_a_task">24. The Lifecycle of a Task</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before we dive deeper into the details of creating Tasks, we need to understand the typical lifecycle for tasks in the context of Spring Cloud Data Flow:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#spring-cloud-dataflow-create-task-apps">Creating a Task Application</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-register-task-apps">Registering a Task Application</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-create-task-definition">Creating a Task Definition</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-launch">Launching a Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-review-executions">Reviewing Task Executions</a></p>
</li>
<li>
<p><a href="#spring-cloud-dataflow-task-definition-destroying">Destroying a Task Definition</a></p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-task-apps">24.1. Creating a Task Application</h3>
<div class="paragraph">
<p>While Spring Cloud Task does provide a number of out-of-the-box applications (at <a href="https://github.com/spring-cloud-task-app-starters">spring-cloud-task-app-starters</a>), most task applications require custom development.
  To create a custom task application:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use the <a href="https://start.spring.io">Spring Initializer</a> to create a new project, making sure to select the following starters:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>Cloud Task</code>: This dependency is the <code>spring-cloud-starter-task</code>.</p>
</li>
<li>
<p><code>JDBC</code>: This dependency is the <code>spring-jdbc</code> starter.</p>
</li>
<li>
<p>Select your database dependency: Enter the database dependency that Data Flow is currently using.  For example: <code>H2</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Within your new project, create a new class to serve as your main class, as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@EnableTask
@SpringBootApplication
public class MyTask {

    public static void main(String[] args) {
		SpringApplication.run(MyTask.class, args);
	}
}</code></pre>
</div>
</div>
</li>
<li>
<p>With this class, you need one or more <code>CommandLineRunner</code> or <code>ApplicationRunner</code> implementations within your application.  You can either implement your own or use the ones provided by Spring Boot (there is one for running batch jobs, for example).</p>
</li>
<li>
<p>Packaging your application with Spring Boot into an über jar is done through the standard <a href="https://docs.spring.io/spring-boot/docs/2.1.1.RELEASE/reference/html/getting-started-first-application.html#getting-started-first-application-executable-jar">Spring Boot conventions</a>.
The packaged application can be registered and deployed as noted below.</p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_task_database_configuration">24.1.1. Task Database Configuration</h4>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
When launching a task application, be sure that the database driver that is being used by Spring Cloud Data Flow is also a dependency on the task application.
For example, if your Spring Cloud Data Flow is set to use Postgresql, be sure that the task application also has Postgresql as a dependency.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When you run tasks externally (that is, from the command line) and you want Spring Cloud Data Flow to show the TaskExecutions in its UI, be sure that common datasource settings are shared among the both.
By default, Spring Cloud Task uses a local H2 instance, and the execution is recorded to the database used by Spring Cloud Data Flow.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-register-task-apps">24.2. Registering a Task Application</h3>
<div class="paragraph">
<p>You can register a Task App with the App Registry by using the Spring Cloud Data Flow Shell <code>app register</code> command.
You must provide a unique name and a URI that can be resolved to the app artifact. For the type, specify "task".
The following listing shows three examples:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;app register --name task1 --type task --uri maven://com.example:mytask:1.0.2

dataflow:&gt;app register --name task2 --type task --uri file:///Users/example/mytask-1.0.2.jar

dataflow:&gt;app register --name task3 --type task --uri https://example.com/mytask-1.0.2.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>When providing a URI with the <code>maven</code> scheme, the format should conform to the following:</p>
</div>
<div class="paragraph">
<p><code>maven://&lt;groupId&gt;:&lt;artifactId&gt;[:&lt;extension&gt;[:&lt;classifier&gt;]]:&lt;version&gt;</code></p>
</div>
<div class="paragraph">
<p>If you would like to register multiple apps at one time, you can store them in a properties file where the keys are formatted as <code>&lt;type&gt;.&lt;name&gt;</code> and the values are the URIs.
For example, the followinng listing would be a valid properties file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task.foo=file:///tmp/foo-1.2.1.BUILD-SNAPSHOT.jar
task.bar=file:///tmp/bar-1.2.1.BUILD-SNAPSHOT.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can use the <code>app import</code> command and provide the location of the properties file by using the  <code>--uri</code> option, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>app import --uri file:///tmp/task-apps.properties</code></pre>
</div>
</div>
<div class="paragraph">
<p>For convenience, we have the static files with application-URIs (for both maven and docker) available for all the out-of-the-box Task app-starters.
You can point to this file and import all the application-URIs in bulk.
Otherwise, as explained earlier in this chapter, you can register them individually or have your own custom property file with only the required application-URIs in it.
It is recommended, however, to have a &#8220;focused&#8221; list of desired application-URIs in a custom property file.</p>
</div>
<div class="paragraph">
<p>The following table lists the available static property files:</p>
</div>
<table class="tableblock frame-topbot grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Artifact Type</th>
<th class="tableblock halign-left valign-top">Stable Release</th>
<th class="tableblock halign-left valign-top">SNAPSHOT Release</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maven</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-SR1-task-applications-maven" class="bare">dataflow.spring.io/Dearborn-SR1-task-applications-maven</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-maven" class="bare">dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-maven</a></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Docker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-SR1-task-applications-docker" class="bare">dataflow.spring.io/Dearborn-SR1-task-applications-docker</a></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a href="https://dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-docker" class="bare">dataflow.spring.io/Dearborn-BUILD-SNAPSHOT-task-applications-docker</a></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For example, if you would like to register all out-of-the-box task applications in bulk, you can do so with the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>dataflow:&gt;app import --uri https://dataflow.spring.io/Dearborn-SR1-task-applications-maven</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also pass the <code>--local</code> option (which is <code>TRUE</code> by default) to indicate whether the properties file location should be resolved within the shell process itself.
If the location should be resolved from the Data Flow Server process, specify <code>--local false</code>.</p>
</div>
<div class="paragraph">
<p>When using either <code>app register</code> or <code>app import</code>, if a task app is already registered with
the provided name and version, it is not overridden by default. If you would like to override the
pre-existing task app with a different uri or uri-metadata location, then include the <code>--force</code> option.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In some cases, the Resource is resolved on the server side.
In other cases, the URI is passed to a runtime container instance where it is resolved.
Consult the specific documentation of each Data Flow Server for more detail.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-create-task-definition">24.3. Creating a Task Definition</h3>
<div class="paragraph">
<p>You can create a task Definition from a task app by providing a definition name as well as
properties that apply to the task execution.  Creating a task definition can be done through
the RESTful API or the shell.  To create a task definition by using the shell, use the
<code>task create</code> command to create the task definition, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task create mytask --definition "timestamp --format=\"yyyy\""
Created new task 'mytask'</code></pre>
</div>
</div>
<div class="paragraph">
<p>A listing of the current task definitions can be obtained through the RESTful API or the shell.
To get the task definition list by using the shell, use the <code>task list</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-launch">24.4. Launching a Task</h3>
<div class="paragraph">
<p>An adhoc task can be launched through the RESTful API or the shell.
To launch an ad-hoc task through the shell, use the <code>task launch</code> command, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task launch mytask
Launched task 'mytask'</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a task is launched, any properties that need to be passed as command line arguments to the task application can be set when launching the task, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task launch mytask --arguments "--server.port=8080 --custom=value"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The arguments need to be passed as <code>space</code> delimited values.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Additional properties meant for a <code>TaskLauncher</code> itself can be passed in by using a <code>--properties</code> option.
The format of this option is a comma-separated string of properties prefixed with <code>app.&lt;task definition name&gt;.&lt;property&gt;</code>.
Properties are passed to <code>TaskLauncher</code> as application properties.
It is up to an implementation to choose how those are passed into an actual task application.
If the property is prefixed with <code>deployer</code> instead of <code>app</code>, it is passed to <code>TaskLauncher</code> as a deployment property and its meaning may be <code>TaskLauncher</code> implementation specific.</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt;task launch mytask --properties "deployer.timestamp.custom1=value1,app.timestamp.custom2=value2"</code></p>
</div>
<div class="sect3">
<h4 id="_application_properties_3">24.4.1. Application properties</h4>
<div class="paragraph">
<p>Each application takes properties to customize its behavior.  As an example, the <code>timestamp</code> task <code>format</code> setting establishes a output format that is different from the default value.</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; task create --definition "timestamp --format=\"yyyy\"" --name printTimeStamp</code></p>
</div>
<div class="paragraph">
<p>This <code>timestamp</code> property is actually the same as the <code>timestamp.format</code> property specified by the timestamp application.
Data Flow adds the ability to use the shorthand form <code>format</code> instead of <code>timestamp.format</code>.
One may also specify the longhand version as well, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; task create --definition "timestamp --timestamp.format=\"yyyy\"" --name printTimeStamp</code></p>
</div>
<div class="paragraph">
<p>This shorthand behavior is discussed more in the section on <a href="#spring-cloud-dataflow-stream-app-whitelisting">Whitelisting application properties</a>.
If you have <a href="#spring-cloud-dataflow-stream-app-metadata-artifact">registered application property metadata</a> you can use tab completion in the shell after typing <code>--</code> to get a list of candidate property names.</p>
</div>
<div class="paragraph">
<p>The shell provides tab completion for application properties. The shell command <code>app info --name &lt;appName&gt; --type &lt;appType&gt;</code> provides additional documentation for all the supported properties.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The supported Task <code>&lt;appType&gt;</code> is task.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_common_application_properties">24.4.2. Common application properties</h4>
<div class="paragraph">
<p>In addition to configuration through DSL, Spring Cloud Data Flow provides a mechanism for setting common properties to all the task applications that are launched by it.
This can be done by adding properties prefixed with <code>spring.cloud.dataflow.applicationProperties.task</code> when starting the server.
When doing so, the server passes all the properties, without the prefix, to the instances it launches.</p>
</div>
<div class="paragraph">
<p>For example, all the launched applications can be configured to use the properties <code>prop1</code> and <code>prop2</code> by launching the Data Flow server with the following options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">--spring.cloud.dataflow.applicationProperties.task.prop1=value1
--spring.cloud.dataflow.applicationProperties.task.prop2=value2</code></pre>
</div>
</div>
<div class="paragraph">
<p>This causes the properties, <code>prop1=value1</code> and <code>prop2=value2</code>, to be passed to all the launched applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Properties configured by using this mechanism have lower precedence than task deployment properties.
They are overridden if a property with the same key is specified at task launch time (for example, <code>app.trigger.prop2</code>
overrides the common property).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-limit-concurrent-executions">24.5. Limit the number concurrent task launches</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow allows a user to limit the maximum number of concurrently running tasks for each configured platform to prevent the saturation of IaaS/hardware resources.
The limit is set to <code>20</code> for all supported platforms by default. If the number of concurrently running tasks on a platform instance is greater or equal to the limit, the next task launch request will fail and an error message will be returned via the RESTful API, Shell or UI.
This limit can be configured for a platform instance by setting the corresponding deployer property, <code>spring.cloud.dataflow.task.platform.&lt;platform-type&gt;.accounts[&lt;account-name&gt;].maximum-concurrent-tasks</code> property, where <code>&lt;account-name&gt;</code> is the name of a configured platform account (<code>default</code> if no accounts are explicitly configured).
The <code>&lt;platform-type&gt;</code> refers to one of the currently supported deployers: <code>local</code>, <code>cloudfoundry</code>, or <code>kubernetes</code>.</p>
</div>
<div class="paragraph">
<p>The TaskLauncher implementation for each supported platform determines the number of currently executing tasks by querying the underlying platform&#8217;s runtime state if possible. The method for identifying a <code>task</code> varies by platform.
For example, launching a task on the local host uses the <code>LocalTaskLauncher</code>. The LocalTaskLauncher executes a process for each launch request and keeps track of these processes in memory. In this case, we don&#8217;t query the underlying OS, as it is impractical to identify tasks this way.
For Cloud Foundry, tasks are a core concept supported by its deployment model. The state of all tasks, running, completed, or failed, is available directly via the API.
This means that every running task container in the account&#8217;s org and space is included in the running execution count, whether or not it was launched using Spring Cloud Data Flow, or invoking the <code>CloudFoundryTaskLauncher</code> directly.
For Kubernetes, launching a task via the <code>KubernetesTaskLauncher</code>, if successful, results in a running pod which we expect to eventually complete or fail.
In this environment there is generally no easy way to identify pods that correspond to a task.
For this reason, we only count pods that were launched by the <code>KubernetesTaskLauncher</code>.
Since the task launcher provides <code>task-name</code> label in the pod&#8217;s metadata, we filter all running pods by the presence of this label.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-review-executions">24.6. Reviewing Task Executions</h3>
<div class="paragraph">
<p>Once the task is launched, the state of the task is stored in a relational DB.  The state
includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Task Name</p>
</li>
<li>
<p>Start Time</p>
</li>
<li>
<p>End Time</p>
</li>
<li>
<p>Exit Code</p>
</li>
<li>
<p>Exit Message</p>
</li>
<li>
<p>Last Updated Time</p>
</li>
<li>
<p>Parameters</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A user can check the status of their task executions through the RESTful API or the shell.
To display the latest task executions through the shell, use the <code>task execution list</code> command.</p>
</div>
<div class="paragraph">
<p>To get a list of task executions for just one task definition, add <code>--name</code> and
the task definition name, for example <code>task execution list --name foo</code>.  To retrieve full
details for a task execution use the <code>task execution status</code> command with the id of the task execution,
for example <code>task execution status --id 549</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-task-definition-destroying">24.7. Destroying a Task Definition</h3>
<div class="paragraph">
<p>Destroying a Task Definition removes the definition from the definition repository.
This can be done through the RESTful API or the shell.
To destroy a task through the shell, use the <code>task destroy</code> command, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task destroy mytask
Destroyed task 'mytask'</code></pre>
</div>
</div>
<div class="paragraph">
<p>To destroy all tasks through the shell, use the <code>task all destroy</code> command as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task all destroy
Really destroy all tasks? [y, n]: y
All tasks destroyed</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or use the force command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task all destroy --force
All tasks destroyed</code></pre>
</div>
</div>
<div class="paragraph">
<p>The task execution information for previously launched tasks for the definition remains in the task repository.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This does not stop any currently executing tasks for this definition. Instead, it removes the task definition from the database.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>task destroy &lt;task-name&gt;</code> deletes only the definition and not the task deployed on Cloud Foundry.
The only way to do this now is through the CLI in two steps. First, obtain a list of the apps by using the <code>cf apps</code> command.
. Identify the task application to be deleted and run the <code>cf delete &lt;task-name&gt;</code> command.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-dataflow-validate-task">24.8. Validating a Task</h3>
<div class="paragraph">
<p>Sometimes the one or more of the apps contained within a task definition contain an invalid URI in its registration.
This can be caused by an invalid URI entered at app registration time or the app was removed from the repository from which it was to be drawn.
To verify that all the apps contained in a task are resolve-able, a user can use the <code>validate</code> command.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task validate time-stamp
╔══════════╤═══════════════╗
║Task Name │Task Definition║
╠══════════╪═══════════════╣
║time-stamp│timestamp      ║
╚══════════╧═══════════════╝


time-stamp is a valid task.
╔═══════════════╤═════════════════╗
║   App Name    │Validation Status║
╠═══════════════╪═════════════════╣
║task:timestamp │valid            ║
╚═══════════════╧═════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example above the user validated their time-stamp task.   As we see <code>task:timestamp</code> app is valid.
Now let&#8217;s see what happens if we have a stream definition with a registered app with an invalid URI.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task validate bad-timestamp
╔═════════════╤═══════════════╗
║  Task Name  │Task Definition║
╠═════════════╪═══════════════╣
║bad-timestamp│badtimestamp   ║
╚═════════════╧═══════════════╝


bad-timestamp is an invalid task.
╔══════════════════╤═════════════════╗
║     App Name     │Validation Status║
╠══════════════════╪═════════════════╣
║task:badtimestamp │invalid          ║
╚══════════════════╧═════════════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case Spring Cloud Data Flow states that the task is invalid because task:badtimestamp has an invalid URI.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-task-events">25. Subscribing to Task/Batch Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can also tap into various task and batch events when the task is launched.
If the task is enabled to generate task or batch events (with the additional dependencies <code>spring-cloud-task-stream</code> and, in the case of Kafka as the binder, <code>spring-cloud-stream-binder-kafka</code>), those events are published during the task lifecycle.
By default, the destination names for those published events on the broker (Rabbit, Kafka, and others) are the event names themselves (for instance: <code>task-events</code>, <code>job-execution-events</code>, and so on).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>task create myTask --definition "myBatchJob"
dataflow:>stream create task-event-subscriber1 --definition ":task-events > log" --deploy
dataflow:>task launch myTask</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can control the destination name for those events by specifying explicit names when launching the task, as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:>stream create task-event-subscriber2 --definition ":myTaskEvents > log" --deploy
dataflow:>task launch myTask --properties "app.myBatchJob.spring.cloud.stream.bindings.task-events.destination=myTaskEvents"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table lists the default task and batch event and destination names on the broker:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<caption class="title">Table 1. Task and Batch Event Destinations</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Event</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Destination</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Task events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Job Execution events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>job-execution-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Step Execution events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>step-execution-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Read events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-read-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Process events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-process-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Item Write events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>item-write-events</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Skip events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>skip-events</code></p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-composed-tasks">26. Composed Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow lets a user create a directed graph where each node of the graph is a task application.
This is done by using the DSL for composed tasks.
A composed task can be created through the RESTful API, the Spring Cloud Data Flow Shell, or the Spring Cloud Data Flow UI.</p>
</div>
<div class="sect2">
<h3 id="_configuring_the_composed_task_runner">26.1. Configuring the Composed Task Runner</h3>
<div class="paragraph">
<p>Composed tasks are executed through a task application called the <a href="https://github.com/spring-cloud-task-app-starters/composed-task-runner">Composed Task Runner</a>.</p>
</div>
<div class="sect3">
<h4 id="_registering_the_composed_task_runner">26.1.1. Registering the Composed Task Runner</h4>
<div class="paragraph">
<p>By default, the Composed Task Runner application is not registered with Spring Cloud Data Flow.
Consequently, to launch composed tasks, we must first register the Composed
Task Runner as an application with Spring Cloud Data Flow, as follows:</p>
</div>
<div class="paragraph">
<p><code>app register --name composed-task-runner --type task --uri maven://org.springframework.cloud.task.app:composedtaskrunner-task:2.1.0.RELEASE</code></p>
</div>
<div class="paragraph">
<p>You can also configure Spring Cloud Data Flow to use a different task definition name for the composed task runner.
This can be done by setting the <code>spring.cloud.dataflow.task.composedTaskRunnerName</code> property to the name of your choice.
You can then register the composed task runner application with the name you set by using that property.</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_composed_task_runner_2">26.1.2. Configuring the Composed Task Runner</h4>
<div class="paragraph">
<p>The Composed Task Runner application has a <code>dataflow.server.uri</code> property that is used for validation and for launching child tasks.
This defaults to <code><a href="http://localhost:9393" class="bare">localhost:9393</a></code>. If you run a distributed Spring Cloud Data Flow server, as you would if you deploy the server on Cloud Foundry, YARN, or Kubernetes, you need to provide the URI that can be used to access the server.
You can either provide this <code>dataflow.server.uri</code> property for the Composed Task Runner application when launching a composed task or you can provide a <code>spring.cloud.dataflow.server.uri</code> property for the Spring Cloud Data Flow server when it is started.
For the latter case, the <code>dataflow.server.uri</code> Composed Task Runner application property is automatically set when a composed task is launched.</p>
</div>
<div class="paragraph">
<p>In some cases, you may wish to execute an instance of the Composed Task Runner through the Task Launcher sink.
In that case, you must configure the Composed Task Runner to use the same datasource that the Spring Cloud Data Flow instance is using.
The datasource properties are set with the <code>TaskLaunchRequest</code> through the use of the <code>commandlineArguments</code> or the <code>environmentProperties</code> switches.
This is because the Composed Task Runner monitors the <code>task_executions</code> table to check the status of the tasks that it is running.
Using information from the table, it determines how it should navigate the graph.</p>
</div>
<div class="sect4">
<h5 id="_configuration_options">Configuration Options</h5>
<div class="paragraph">
<p>The ComposedTaskRunner task has the following options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>increment-instance-enabled</strong>
Allows a single ComposedTaskRunner instance to be re-executed without changing the parameters. Default is false which means a ComposedTaskRunner instance can only be executed once with a given set of parameters, if true it can be re-executed. (Boolean, default: false).
ComposedTaskRunner is built using <a href="https://github.com/spring-projects/spring-batch">Spring Batch</a> and thus upon a successful execution the batch job is considered complete.
To launch the same ComposedTaskRunner definition multiple times you must set the <code>increment-instance-enabled</code> property to true or change the parameters for the definition for each launch.</p>
</li>
<li>
<p><strong>interval-time-between-checks</strong>
The amount of time in millis that the ComposedTaskRunner will wait between checks of the database to see if a task has completed. (Integer, default: 10000).
ComposedTaskRunner uses the datastore to determine the status of each child tasks.  This interval indicates to ComposedTaskRunner how often it should check the status its child tasks.</p>
</li>
<li>
<p><strong>max-wait-time</strong>
The maximum amount of time in millis that a individual step can run before the execution of the Composed task is failed (Integer, default: 0).
Determines the maximum time each child task is allowed to run before the CTR will terminate with a failure.  The default of <code>0</code> indicates no timeout.</p>
</li>
<li>
<p><strong>split-thread-allow-core-thread-timeout</strong>
Specifies whether to allow split core threads to timeout. Default is false; (Boolean, default: false)
Sets the policy governing whether core threads may timeout and terminate if no tasks arrive within the keep-alive time, being replaced if needed when new tasks arrive.</p>
</li>
<li>
<p><strong>split-thread-core-pool-size</strong>
Split&#8217;s core pool size. Default is 1; (Integer, default: 1)
Each child task contained in a split requires a thread in order to execute.   So for example a definition like: <code>&lt;AAA || BBB || CCC&gt; &amp;&amp; &lt;DDD || EEE&gt;</code> would require a split-thread-core-pool-size of 3.
This is because the largest split contains 3 child tasks.   A count of 2 would mean that <code>AAA</code> and <code>BBB</code> would run in parallel but CCC would wait until either <code>AAA</code> or <code>BBB</code> to finish in order to run.
Then <code>DDD</code> and <code>EEE</code> would run in parallel.</p>
</li>
<li>
<p><strong>split-thread-keep-alive-seconds</strong>
Split&#8217;s thread keep alive seconds. Default is 60. (Integer, default: 60)
If the pool currently has more than corePoolSize threads, excess threads will be terminated if they have been idle for more than the keepAliveTime.</p>
</li>
<li>
<p><strong>split-thread-max-pool-size</strong>
Split&#8217;s maximum pool size. Default is {@code Integer.MAX_VALUE} (Integer, default: &lt;none&gt;).
Establish the maximum number of threads allowed for the thread pool.</p>
</li>
<li>
<p><strong>split-thread-queue-capacity</strong>
Capacity for Split&#8217;s BlockingQueue. Default is {@code Integer.MAX_VALUE}. (Integer, default: &lt;none&gt;)</p>
<div class="ulist">
<ul>
<li>
<p>If fewer than corePoolSize threads are running, the Executor always prefers adding a new thread rather than queuing.</p>
</li>
<li>
<p>If corePoolSize or more threads are running, the Executor always prefers queuing a request rather than adding a new thread.</p>
</li>
<li>
<p>If a request cannot be queued, a new thread is created unless this would exceed maximumPoolSize, in which case, the task will be rejected.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>split-thread-wait-for-tasks-to-complete-on-shutdown</strong>
Whether to wait for scheduled tasks to complete on shutdown, not interrupting running tasks and executing all tasks in the queue. Default is false; (Boolean, default: false)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note
when using the options above as environment variables, convert to uppercase, remove the dash character and replace with the underscore character. For example: increment-instance-enabled would be INCREMENT_INSTANCE_ENABLED.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_composed_task">26.2. The Lifecycle of a Composed Task</h3>
<div class="paragraph">
<p>The lifecycle of a composed task has three parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-creating">Creating a Composed Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-stopping">Stopping a Composed Task</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-composed-task-restarting">Restarting a Composed Task</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-creating">26.2.1. Creating a Composed Task</h4>
<div class="paragraph">
<p>The DSL for the composed tasks is used when creating a task definition through the task create command, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:> app register --name timestamp --type task --uri maven://org.springframework.cloud.task.app:timestamp-task:<DESIRED_VERSION>
dataflow:> app register --name mytaskapp --type task --uri file:///home/tasks/mytask.jar
dataflow:> task create my-composed-task --definition "mytaskapp && timestamp"
dataflow:> task launch my-composed-task</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, we assume that the applications to be used by our composed task have not been registered yet.
Consequently, in the first two steps, we register two task applications.
We then create our composed task definition by using the <code>task create</code> command.
The composed task DSL in the preceding example, when launched, runs mytaskapp and then runs the timestamp application.</p>
</div>
<div class="paragraph">
<p>But before we launch the <code>my-composed-task</code> definition, we can view what Spring Cloud Data Flow generated for us.
This can be done by executing the task list command, as shown (including its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task list
╔══════════════════════════╤══════════════════════╤═══════════╗
║        Task Name         │   Task Definition    │Task Status║
╠══════════════════════════╪══════════════════════╪═══════════╣
║my-composed-task          │mytaskapp &amp;&amp; timestamp│unknown    ║
║my-composed-task-mytaskapp│mytaskapp             │unknown    ║
║my-composed-task-timestamp│timestamp             │unknown    ║
╚══════════════════════════╧══════════════════════╧═══════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example, Spring Cloud Data Flow created three task definitions, one for each of the applications that makes up our composed task (<code>my-composed-task-mytaskapp</code> and <code>my-composed-task-timestamp</code>) as well as the composed task (<code>my-composed-task</code>) definition.
We also see that each of the generated names for the child tasks is made up of the name of the composed task and the name of the application, separated by a dash <code>-</code> (as in <em>my-composed-task</em> <code>-</code> <em>mytaskapp</em>).</p>
</div>
<div class="sect4">
<h5 id="_task_application_parameters">Task Application Parameters</h5>
<div class="paragraph">
<p>The task applications that make up the composed task definition can also contain parameters, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>dataflow:&gt; task create my-composed-task --definition "mytaskapp --displayMessage=hello &amp;&amp; timestamp --format=YYYY"</code></p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_launching_a_composed_task">26.2.2. Launching a Composed Task</h4>
<div class="paragraph">
<p>Launching a composed task is done the same way as launching a stand-alone task, as follows:</p>
</div>
<div class="paragraph">
<p><code>task launch my-composed-task</code></p>
</div>
<div class="paragraph">
<p>Once the task is launched, and assuming all the tasks complete successfully, you can see three task executions when executing a <code>task execution list</code>, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task execution list
╔══════════════════════════╤═══╤════════════════════════════╤════════════════════════════╤═════════╗
║        Task Name         │ID │         Start Time         │          End Time          │Exit Code║
╠══════════════════════════╪═══╪════════════════════════════╪════════════════════════════╪═════════╣
║my-composed-task-timestamp│713│Wed Apr 12 16:43:07 EDT 2017│Wed Apr 12 16:43:07 EDT 2017│0        ║
║my-composed-task-mytaskapp│712│Wed Apr 12 16:42:57 EDT 2017│Wed Apr 12 16:42:57 EDT 2017│0        ║
║my-composed-task          │711│Wed Apr 12 16:42:55 EDT 2017│Wed Apr 12 16:43:15 EDT 2017│0        ║
╚══════════════════════════╧═══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, we see that <code>my-compose-task</code> launched and that it also launched the other tasks in sequential order.
All of them executed successfully with <code>Exit Code</code> as <code>0</code>.</p>
</div>
<div class="sect4">
<h5 id="_passing_properties_to_the_child_tasks">Passing properties to the child tasks</h5>
<div class="paragraph">
<p>To set the properties for child tasks in a composed task graph at task launch time,
you would use the following format of <code>app.&lt;composed task definition name&gt;.&lt;child task app name&gt;.&lt;property&gt;</code>.
Using the following Composed Task definition as an example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt; task create my-composed-task --definition "mytaskapp  &amp;&amp; mytimestamp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To have mytaskapp display 'HELLO' and set the mytimestamp timestamp format to 'YYYY' for the Composed Task definition, you would use the following task launch format:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">task launch my-composed-task --properties "app.my-composed-task.mytaskapp.displayMessage=HELLO,app.my-composed-task.mytimestamp.timestamp.format=YYYY"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Similar to application properties, the <code>deployer</code> properties can also be set for child tasks using the format format of <code>deployer.&lt;composed task definition name&gt;.&lt;child task app name&gt;.&lt;deployer-property&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">task launch my-composed-task --properties "deployer.my-composed-task.mytaskapp.memory=2048m,app.my-composed-task.mytimestamp.timestamp.format=HH:mm:ss"
Launched task 'a1'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_passing_arguments_to_the_composed_task_runner">Passing arguments to the composed task runner</h5>
<div class="paragraph">
<p>Command line arguments for the composed task runner can be passed using <code>--arguments</code> option.</p>
</div>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task create my-composed-task --definition "&lt;aaa: timestamp || bbb: timestamp&gt;"
Created new task 'my-composed-task'

dataflow:&gt;task launch my-composed-task --arguments "--increment-instance-enabled=true --max-wait-time=50000 --split-thread-core-pool-size=4" --properties "app.my-composed-task.bbb.timestamp.format=dd/MM/yyyy HH:mm:ss"
Launched task 'my-composed-task'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_exit_statuses">Exit Statuses</h5>
<div class="paragraph">
<p>The following list shows how the Exit Status is set for each step (task) contained in the composed task following each step execution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the <code>TaskExecution</code> has an <code>ExitMessage</code>, that is used as the <code>ExitStatus</code>.</p>
</li>
<li>
<p>If no <code>ExitMessage</code> is present and the <code>ExitCode</code> is set to zero, then the <code>ExitStatus</code> for the step is <code>COMPLETED</code>.</p>
</li>
<li>
<p>If no <code>ExitMessage</code> is present and the <code>ExitCode</code> is set to any non-zero number, the <code>ExitStatus</code> for the step is <code>FAILED</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_destroying_a_composed_task">26.2.3. Destroying a Composed Task</h4>
<div class="paragraph">
<p>The command used to destroy a stand-alone task is the same as the command used to destroy a composed task.
The only difference is that destroying a composed task also destroys the child tasks associated with it.
The following example shows the task list before and after using the <code>destroy</code> command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task list
╔══════════════════════════╤══════════════════════╤═══════════╗
║        Task Name         │   Task Definition    │Task Status║
╠══════════════════════════╪══════════════════════╪═══════════╣
║my-composed-task          │mytaskapp &amp;&amp; timestamp│COMPLETED  ║
║my-composed-task-mytaskapp│mytaskapp             │COMPLETED  ║
║my-composed-task-timestamp│timestamp             │COMPLETED  ║
╚══════════════════════════╧══════════════════════╧═══════════╝
...
dataflow:&gt;task destroy my-composed-task
dataflow:&gt;task list
╔═════════╤═══════════════╤═══════════╗
║Task Name│Task Definition│Task Status║
╚═════════╧═══════════════╧═══════════╝</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-stopping">26.2.4. Stopping a Composed Task</h4>
<div class="paragraph">
<p>In cases where a composed task execution needs to be stopped, you can do so through the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To stop a composed task through the dashboard, select the Jobs tab and click the Stop button next to the job execution that you want to stop.</p>
</div>
<div class="paragraph">
<p>The composed task run is stopped when the currently running child task completes.
The step associated with the child task that was running at the time that the composed task was stopped is marked as <code>STOPPED</code> as well as the composed task job execution.</p>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-composed-task-restarting">26.2.5. Restarting a Composed Task</h4>
<div class="paragraph">
<p>In cases where a composed task fails during execution and the status of the composed task is <code>FAILED</code>, the task can be restarted.
You can do so through the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>The shell</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To restart a composed task through the shell, launch the task with the same parameters.
To restart a composed task through the dashboard, select the Jobs tab and click the Restart button next to the job execution that you want to restart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Restarting a Composed Task job that has been stopped (through the Spring Cloud Data Flow Dashboard or RESTful API) relaunches the <code>STOPPED</code> child task and then launches the remaining (unlaunched) child tasks in the specified order.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_composed_tasks_dsl">27. Composed Tasks DSL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Composed tasks can be run in three ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-conditional-execution">Conditional Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-transitional-execution">Transitional Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-split-execution">Split Execution</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-conditional-execution">27.1. Conditional Execution</h3>
<div class="paragraph">
<p>Conditional execution is expressed by using a double ampersand symbol (<code>&amp;&amp;</code>).
This lets each task in the sequence be launched only if the previous task
successfully completed, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>task create my-composed-task --definition "task1 &amp;&amp; task2"</code></p>
</div>
<div class="paragraph">
<p>When the composed task called <code>my-composed-task</code> is launched, it launches the task called <code>task1</code> and, if it completes successfully, then the task called <code>task2</code> is launched.
If <code>task1</code> fails, then <code>task2</code> does not launch.</p>
</div>
<div class="paragraph">
<p>You can also use the Spring Cloud Data Flow Dashboard to create your conditional execution, by using the designer to drag and drop applications that are required and connecting them together to create your directed graph, as shown in the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-conditional-execution.png" alt="Composed Task Conditional Execution">
</div>
<div class="title">Figure 2. Conditional Execution</div>
</div>
<div class="paragraph">
<p>The preceding diagram is a screen capture of the directed graph as it being created by using the Spring Cloud Data Flow Dashboard.
You can see that are four components in the diagram that comprise a conditional execution:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Start icon: All directed graphs start from this symbol.
There is only one.</p>
</li>
<li>
<p>Task icon: Represents each task in the directed graph.</p>
</li>
<li>
<p>End icon: Represents the termination of a directed graph.</p>
</li>
<li>
<p>Solid line arrow: Represents the flow conditional execution flow between:</p>
<div class="ulist">
<ul>
<li>
<p>Two applications.</p>
</li>
<li>
<p>The start control node and an application.</p>
</li>
<li>
<p>An application and the end control node.</p>
</li>
</ul>
</div>
</li>
<li>
<p>End icon: All directed graphs end at this symbol.</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can view a diagram of your directed graph by clicking the Detail button next to the composed task definition on the Definitions tab.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-transitional-execution">27.2. Transitional Execution</h3>
<div class="paragraph">
<p>The DSL supports fine-grained control over the transitions taken during the execution of the directed graph.
Transitions are specified by providing a condition for equality based on the exit status of the previous task.
A task transition is represented by the following symbol <code>-&gt;</code>.</p>
</div>
<div class="sect3">
<h4 id="_basic_transition">27.2.1. Basic Transition</h4>
<div class="paragraph">
<p>A basic transition would look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task create my-transition-composed-task --definition "foo 'FAILED' -&gt; bar 'COMPLETED' -&gt; baz"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, the <code>bar</code> task would launch.
If the exit status of <code>foo</code> was <code>COMPLETED</code>, <code>baz</code> would launch.
All other statuses returned by <code>foo</code> have no effect, and the task would terminate normally.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same " <code>basic transition</code> " would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-basic.png" alt="Composed Task Basic Transition">
</div>
<div class="title">Figure 3. Basic Transition</div>
</div>
<div class="paragraph">
<p>The preceding diagram is a screen capture of the directed graph as it being created in the Spring Cloud Data Flow Dashboard.
Notice that there are two different types of connectors:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dashed line: Represents transitions from the application to one of the possible destination applications.</p>
</li>
<li>
<p>Solid line: Connects applications in a conditional execution or a connection between the application and a control node (start or end).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a transitional connector:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When creating a transition, link the application to each possible destination by using the connector.</p>
</li>
<li>
<p>Once complete, go to each connection and select it by clicking it.</p>
</li>
<li>
<p>A bolt icon appears.</p>
</li>
<li>
<p>Click that icon.</p>
</li>
<li>
<p>Enter the exit status required for that connector.</p>
</li>
<li>
<p>The solid line for that connector turns to a dashed line.</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="_transition_with_a_wildcard">27.2.2. Transition With a Wildcard</h4>
<div class="paragraph">
<p>Wildcards are supported for transitions by the DSL, as shown in the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task create my-transition-composed-task --definition "foo 'FAILED' -&gt; bar '*' -&gt; baz"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, the <code>bar</code> task would launch.
For any exit status of <code>foo</code> other than <code>FAILED</code>, <code>baz</code> would launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;transition with wildcard&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-basic-wildcard.png" alt="Composed Task Basic Transition with Wildcard">
</div>
<div class="title">Figure 4. Basic Transition With Wildcard</div>
</div>
</div>
<div class="sect3">
<h4 id="_transition_with_a_following_conditional_execution">27.2.3. Transition With a Following Conditional Execution</h4>
<div class="paragraph">
<p>A transition can be followed by a conditional execution so long as the wildcard
is not used, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task create my-transition-conditional-execution-task --definition "foo 'FAILED' -&gt; bar 'UNKNOWN' -&gt; baz &amp;&amp; qux &amp;&amp; quux"</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the preceding example, <code>foo</code> would launch, and, if it had an exit status of <code>FAILED</code>, the <code>bar</code> task would launch.
If <code>foo</code> had an exit status of <code>UNKNOWN</code>, <code>baz</code> would launch.
For any exit status of <code>foo</code> other than <code>FAILED</code> or <code>UNKNOWN</code>, <code>qux</code> would launch and, upon successful completion, <code>quux</code> would launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;transition with conditional execution&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-transition-conditional-execution.png" alt="Composed Task Transition with Conditional Execution">
</div>
<div class="title">Figure 5. Transition With Conditional Execution</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
In this diagram we see the dashed line (transition) connecting the <code>foo</code> application to the target applications, but a solid line connecting the conditional executions between <code>foo</code>, <code>qux</code>, and  <code>quux</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="spring-cloud-data-flow-split-execution">27.3. Split Execution</h3>
<div class="paragraph">
<p>Splits allow multiple tasks within a composed task to be run in parallel.
It is denoted by using angle brackets (<code>&lt;&gt;</code>) to group tasks and flows that are to be run in parallel.
These tasks and flows are separated by the double pipe <code>||</code> symbol, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>task create my-split-task --definition "&lt;foo || bar || baz&gt;"</code></p>
</div>
<div class="paragraph">
<p>The preceding example above launches tasks <code>foo</code>, <code>bar</code> and <code>baz</code> in parallel.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;split execution&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-split.png" alt="Composed Task Split">
</div>
<div class="title">Figure 6. Split</div>
</div>
<div class="paragraph">
<p>With the task DSL, a user may also execute multiple split groups in succession, as shown in the following example:</p>
</div>
<div class="paragraph">
<p>`task create my-split-task --definition "&lt;foo || bar || baz&gt; &amp;&amp; &lt;qux || quux&gt;"'</p>
</div>
<div class="paragraph">
<p>In the preceding example, tasks <code>foo</code>, <code>bar</code>, and <code>baz</code> are launched in parallel.
Once they all complete, then tasks <code>qux</code> and <code>quux</code> are launched in parallel.
Once they complete, the composed task ends.
However, if <code>foo</code>, <code>bar</code>, or <code>baz</code> fails, the split containing <code>qux</code> and <code>quux</code> does not launch.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same &#8220;split with multiple groups&#8221; would resemble the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-multiple-splits.png" alt="Composed Task Split">
</div>
<div class="title">Figure 7. Split as a part of a conditional execution</div>
</div>
<div class="paragraph">
<p>Notice that there is a <code>SYNC</code> control node that is inserted by the designer when
connecting two consecutive splits.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Tasks that are used in a split should not set the their <code>ExitMessage</code>.   Setting the <code>ExitMessage</code> is only to be used
with  <a href="#spring-cloud-data-flow-transitional-execution">transitions</a>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_split_containing_conditional_execution">27.3.1. Split Containing Conditional Execution</h4>
<div class="paragraph">
<p>A split can also have a conditional execution within the angle brackets, as shown in the following example:</p>
</div>
<div class="paragraph">
<p><code>task create my-split-task --definition "&lt;foo &amp;&amp; bar || baz&gt;"</code></p>
</div>
<div class="paragraph">
<p>In the preceding example, we see that <code>foo</code> and <code>baz</code> are launched in parallel.
However, <code>bar</code> does not launch until <code>foo</code> completes successfully.</p>
</div>
<div class="paragraph">
<p>Using the Spring Cloud Data Flow Dashboard to create the same " <code>split containing conditional execution</code> " resembles the following image:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-split-contains-conditional.png" alt="Composed Task Split With Conditional Execution">
</div>
<div class="title">Figure 8. Split with conditional execution</div>
</div>
</div>
<div class="sect3">
<h4 id="_establishing_the_proper_thread_count_for_splits">27.3.2. Establishing the proper thread count for splits</h4>
<div class="paragraph">
<p>Each child task contained in a split requires a thread in order to execute.  To set this properly you want to look at your graph and count the split that has the largest number of child tasks, this will be the number of threads you will need to utilize.
To set the thread count use the split-thread-core-pool-size property (defaults to 1).   So for example a definition like: <code>&lt;AAA || BBB || CCC&gt; &amp;&amp; &lt;DDD || EEE&gt;</code> would require a split-thread-core-pool-size of 3.
This is because the largest split contains 3 child tasks.   A count of 2 would mean that <code>AAA</code> and <code>BBB</code> would run in parallel but CCC would wait until either <code>AAA</code> or <code>BBB</code> to finish in order to run.
Then <code>DDD</code> and <code>EEE</code> would run in parallel.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-launch-tasks-from-stream">28. Launching Tasks from a Stream</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can launch a task from a stream by using the <a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/blob/master/spring-cloud-starter-stream-sink-task-launcher-dataflow/README.adoc">tasklauncher-dataflow</a> sink.
The sink connects to a Data Flow server and uses its REST API to launch any defined task.
The sink accepts a <a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow/blob/master/spring-cloud-starter-stream-sink-task-launcher-dataflow/README.adoc#payload">JSON payload</a> representing a <code>task launch request</code> which provides the name of the task to launch, and may include command line arguments and deployment properties.</p>
</div>
<div class="paragraph">
<p>The <a href="https://github.com/spring-cloud-stream-app-starters/core/blob/master/common/app-starters-task-launch-request-common/README.adoc">app-starters-task-launch-request-common</a> component , in conjunction with Spring Cloud Stream <a href="https://docs.spring.io/spring-cloud-stream/docs/current-snapshot/reference/htmlsingle/#_functional_composition">functional composition</a>, can transform the output of any source or processor to a task launch request.</p>
</div>
<div class="paragraph">
<p>Adding a dependency to <code>app-starters-task-launch-request-common</code>, auto-configures a <code>java.util.function.Function</code> implementation, registered via <a href="https://cloud.spring.io/spring-cloud-function/">Spring Cloud Function</a> as <code>taskLaunchRequest</code>.</p>
</div>
<div class="paragraph">
<p>For example, you can start with the <a href="https://github.com/spring-cloud-stream-app-starters/time/tree/master/spring-cloud-starter-stream-source-time">time</a> source, add the following dependency, build it, and register it as a custom source. We&#8217;ll call it <code>time-tlr</code> in this example.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.springframework.cloud.stream.app&lt;/groupId&gt;
    &lt;artifactId&gt;app-starters-task-launch-request-common&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<a href="https://start-scs.cfapps.io/">Spring Cloud Stream Initializr</a> provides a great starting point for creating stream applications.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Next, <a href="#applications">register</a> the <code>tasklauncher-dataflow</code> sink, and create a task (we will use the provided timestamp task).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>stream create --name task-every-minute --definition "time-tlr --trigger.fixed-delay=60 --spring.cloud.stream.function.definition=taskLaunchRequest --task.launch.request.task-name=timestamp-task | tasklauncher-dataflow" --deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>The preceding stream will produce a task launch request every minute. The request provides the name of the task to launch : <code>{"name":"timestamp-task"}</code>.</p>
</div>
<div class="paragraph">
<p>The following stream definition illustrates the use of command line arguments. It will produce messages like <code>{"args":["foo=bar","time=12/03/18 17:44:12"],"deploymentProps":{},"name":"timestamp-task"}</code> to provide command line arguments to the task:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>stream create --name task-every-second --definition "time-tlr --spring.cloud.stream.function.definition=taskLaunchRequest --task.launch.request.task-name=timestamp-task --task.launch.request.args=foo=bar --task.launch.request.arg-expressions=time=payload | tasklauncher-dataflow" --deploy</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note the use of SpEL expressions to map each message payload to the <code>time</code> command line argument, along with a static argument <code>foo=bar</code>.</p>
</div>
<div class="paragraph">
<p>You can then see the list of task executions by using the shell command <code>task execution list</code>, as shown (with its output) in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-bash hljs" data-lang="bash">dataflow:&gt;task execution list
╔════════════════════╤══╤════════════════════════════╤════════════════════════════╤═════════╗
║     Task Name      │ID│         Start Time         │          End Time          │Exit Code║
╠════════════════════╪══╪════════════════════════════╪════════════════════════════╪═════════╣
║timestamp-task_26176│4 │Tue May 02 12:13:49 EDT 2017│Tue May 02 12:13:49 EDT 2017│0        ║
║timestamp-task_32996│3 │Tue May 02 12:12:49 EDT 2017│Tue May 02 12:12:49 EDT 2017│0        ║
║timestamp-task_58971│2 │Tue May 02 12:11:50 EDT 2017│Tue May 02 12:11:50 EDT 2017│0        ║
║timestamp-task_13467│1 │Tue May 02 12:10:50 EDT 2017│Tue May 02 12:10:50 EDT 2017│0        ║
╚════════════════════╧══╧════════════════════════════╧════════════════════════════╧═════════╝</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example, we have shown how to use the <code>time</code> source to launch a task at a fixed rate.
This pattern may be applied to any source to launch a task in response to any event.</p>
</div>
<div class="sect2">
<h3 id="_launching_a_composed_task_from_a_stream">28.1. Launching a Composed Task From a Stream</h3>
<div class="paragraph">
<p>A composed task can be launched with the <code>tasklauncher-dataflow</code> sink, as discussed <a href="#spring-cloud-dataflow-launch-tasks-from-stream">here</a>.
Since we use the <code>ComposedTaskRunner</code> directly, we need to set up the task definitions for the composed task runner itself, along with the composed tasks, prior to the creation of the composed task launching stream.
Suppose we wanted to create the following composed task definition: <code>AAA &amp;&amp; BBB</code>.
The first step would be to create the task definitions, as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task create composed-task-runner --definition "composed-task-runner"
task create AAA --definition "timestamp"
task create BBB --definition "timestamp"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Releases of <code>ComposedTaskRunner</code> can be found
<a href="https://github.com/spring-cloud-task-app-starters/composed-task-runner/releases">here</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now that the task definitions we need for composed task definition are ready, we need to create a stream that launches <code>ComposedTaskRunner</code>.
So, in this case, we create a stream with</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>time</code> source customized to emit task launch requests, as shown <a href="#spring-cloud-dataflow-launch-tasks-from-stream">above</a>.</p>
</li>
<li>
<p>The <code>tasklauncher-dataflow</code> sink that launches the <code>ComposedTaskRunner</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The stream should resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>stream create ctr-stream --definition "time --fixed-delay=30 --task.launch.request.task-name=composed-task-launcher --task.launch.request.args=--graph=AAA&amp;&amp;BBB,--increment-instance-enabled=true | tasklauncher-dataflow"</code></pre>
</div>
</div>
<div class="paragraph">
<p>For now, we focus on the configuration that is required to launch the <code>ComposedTaskRunner</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>graph</strong>: this is the graph that is to be executed by the <code>ComposedTaskRunner</code>.
In this case it is <code>AAA&amp;&amp;BBB</code>.</p>
</li>
<li>
<p><strong>increment-instance-enabled</strong>: This lets each execution of <code>ComposedTaskRunner</code> be unique.
<code>ComposedTaskRunner</code> is built by using <a href="https://projects.spring.io/spring-batch/">Spring Batch</a>.
Thus, we want a new Job Instance for each launch of the <code>ComposedTaskRunner</code>.
To do this, we set <code>increment-instance-enabled</code> to be <code>true</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="sharing-spring-cloud-dataflows-datastore-with-tasks">29. Sharing Spring Cloud Data Flow&#8217;s Datastore with Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As discussed in the <a href="#spring-cloud-dataflow-task">Tasks</a> documentation Spring
Cloud Data Flow allows a user to view Spring Cloud Task App executions. So in
this section we will discuss what is required by a Task Application and Spring
Cloud Data Flow to share the task execution information.</p>
</div>
<div class="sect2">
<h3 id="a-common-datastore-dependency">29.1. A Common DataStore Dependency</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow supports many databases out-of-the-box,
so all the user typically has to do is declare the <code>spring_datasource_*</code> environment variables
to establish what data store Spring Cloud Data Flow will need.
So whatever database you decide to use for Spring Cloud Data Flow make sure that the your task also
includes that database dependency in its <code>pom.xml</code> or <code>gradle.build</code> file.  If the database dependency
that is used by Spring Cloud Data Flow is not present in the Task Application, the task will fail
and the task execution will not be recorded.</p>
</div>
</div>
<div class="sect2">
<h3 id="a-common-datastore">29.2. A Common Data Store</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow and your task application must access the same datastore instance.
This is so that the task executions recorded by the task application can be read by Spring Cloud Data Flow to list them in the Shell and Dashboard views.
Also the task app must have read  &amp; write privileges to the task data tables that are used by Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>Given the understanding of Datasource dependency between Task apps and Spring Cloud Data Flow, let&#8217;s review how to apply them in various Task orchestration scenarios.</p>
</div>
<div class="sect3">
<h4 id="datasource-simple-task-launch">29.2.1. Simple Task Launch</h4>
<div class="paragraph">
<p>When launching a task from Spring Cloud Data Flow, Data Flow adds its datasource
properties (<code>spring.datasource.url</code>, <code>spring.datasource.driverClassName</code>, <code>spring.datasource.username</code>, <code>spring.datasource.password</code>)
to the app properties of the task being launched.  Thus a task application
will record its task execution information to the Spring Cloud Data Flow repository.</p>
</div>
</div>
<div class="sect3">
<h4 id="datasource-task-launcher-sink">29.2.2. Task Launcher Sink</h4>
<div class="paragraph">
<p>The <a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-dataflow">Data Flow Task Launcher Sink</a> always uses the Data Flow Server&#8217;s configured task database when launching tasks.</p>
</div>
<div class="paragraph">
<p>Standalone Task Launcher Sink implementations are also available which allow you to store task executions in a separate database.
Since these task launchers do not use the Data Flow Server, they are platform-specific and require additional configuration parameters, including data source configuration, and the resource location of the executable jar for the task application.
Additionally, they do not provide a way to limit the number of concurrently running tasks, as the Data Flow Task Launcher does.</p>
</div>
<div class="paragraph">
<p>The additional configuration requires a more complex form of the
<a href="https://docs.spring.io/spring-cloud-task/docs/current/apidocs/org/springframework/cloud/task/launcher/TaskLaunchRequest.html">TaskLaunchRequest</a>.
Requests processed by a standalone Task Launcher Sink must include the required datasource information as app properties or command line arguments.
Both <a href="https://github.com/spring-cloud-stream-app-starters/tasklaunchrequest-transform/blob/master/spring-cloud-starter-stream-processor-tasklaunchrequest-transform/README.adoc">TaskLaunchRequest-Transform</a>
and <a href="https://github.com/spring-cloud-stream-app-starters/triggertask/blob/master/spring-cloud-starter-stream-source-triggertask/README.adoc">TriggerTask Source</a> provide examples of using a standalone Task Launcher Sink.</p>
</div>
<div class="paragraph">
<p>Currently the platforms supported by the standalone <code>tasklauncher</code> sinks are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-local">local</a></p>
</li>
<li>
<p><a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-cloudfoundry">Cloud Foundry</a></p>
</li>
<li>
<p><a href="https://github.com/spring-cloud-stream-app-starters/tasklauncher-kubernetes">Kubernetes</a></p>
</li>
</ul>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
<code>tasklauncher-local</code> is meant for development purposes only.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_composed_task_runner">29.2.3. Composed Task Runner</h4>
<div class="paragraph">
<p>Spring Cloud Data Flow allows a user to create a directed graph where each node
of the graph is a task application and this is done via the
<a href="https://github.com/spring-cloud-task-app-starters/composed-task-runner/blob/master/spring-cloud-starter-task-composedtaskrunner/README.adoc">Composed Task Runner</a>.
In this case the rules that applied to a <a href="#datasource-simple-task-launch">Simple Task Launch</a>
or <a href="#datasource-task-launcher-sink">Task Launcher Sink</a> apply to the composed task runner as well.
All child apps must also have access to the datastore that is being used by the composed task runner
Also, All child apps must have the same database dependency as the composed task runner enumerated in their <code>pom.xml</code> or <code>gradle.build</code> file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launching_a_task_externally_from_spring_cloud_data_flow">29.2.4. Launching a task externally from Spring Cloud Data Flow</h4>
<div class="paragraph">
<p>Users may wish to launch Spring Cloud Task applications via another method (scheduler for example) but still track the task execution via Spring Cloud Data Flow.
This can be done so long as the task applications observe the rules specified <a href="#a-common-datastore-dependency">here</a> and <a href="#a-common-datastore">here</a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If a user wishes to use Spring Cloud Data Flow to view their
<a href="https://projects.spring.io/spring-batch/">Spring Batch</a> jobs, the user must make sure that
their batch application use the <code>@EnableTask</code> annotation and follow the rules enumerated <a href="#a-common-datastore-dependency">here</a> and <a href="#a-common-datastore">here</a>.
More information is available <a href="https://github.com/spring-projects/spring-batch-admin/blob/master/MIGRATION.md">here</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="spring-cloud-dataflow-schedule-launch-tasks">30. Scheduling Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow lets a user schedule the execution of tasks via a cron expression.
A schedule can be created through the RESTful API or the Spring Cloud Data Flow UI.</p>
</div>
<div class="sect2">
<h3 id="_the_scheduler">30.1. The Scheduler</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow will schedule the execution of its tasks via a scheduling agent that is available on the cloud platform.
When using the Cloud Foundry platform Spring Cloud Data Flow will use the <a href="https://www.cloudfoundry.org/the-foundry/scheduler/">PCF Scheduler</a>.
When using Kubernetes, a <a href="https://kubernetes.io/docs/concepts/workloads/controllers/cron-jobs/">CronJob</a> will be used.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-scheduling-architecture.png" alt="Scheduler Architecture Overview">
</div>
<div class="title">Figure 9. Architectural Overview</div>
</div>
</div>
<div class="sect2">
<h3 id="_enabling_scheduling">30.2. Enabling Scheduling</h3>
<div class="paragraph">
<p>By default the Spring Cloud Data Flow leaves the scheduling feature disabled.  To enable the scheduling feature the following feature properties must be set to <code>true</code>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spring.cloud.dataflow.features.schedules-enabled</code></p>
</li>
<li>
<p><code>spring.cloud.dataflow.features.tasks-enabled</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_the_lifecycle_of_a_schedule">30.3. The Lifecycle of a Schedule</h3>
<div class="paragraph">
<p>The lifecycle of a schedule has 2 parts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#spring-cloud-data-flow-schedule-scheduling">Scheduling a Task Execution</a></p>
</li>
<li>
<p><a href="#spring-cloud-data-flow-schedule-unscheduling">Deleting a Schedule</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-schedule-scheduling">30.3.1. Scheduling a Task Execution</h4>
<div class="paragraph">
<p>You can schedule a task execution via the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To schedule a task from the UI click the Tasks tab at the top of the screen, this will take you to the Task Definitions screen.   Then from the Task Definition that you wish to schedule click the "clock" icon associated with task definition you wish to schedule.
This will lead you to a <code>Create Schedule(s)</code> screen, where you will create a unique name for the schedule and enter the associated cron expression.
Keep in mind you can always create multiple schedules for a single task definition.</p>
</div>
</div>
<div class="sect3">
<h4 id="spring-cloud-data-flow-schedule-unscheduling">30.3.2. Deleting a Schedule</h4>
<div class="paragraph">
<p>You can delete a schedule via the:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RESTful API</p>
</li>
<li>
<p>Spring Cloud Data Flow Dashboard</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To delete a schedule through the dashboard, select the Schedule tab under Tasks tab and click the <code>garbage can</code> icon next to the schedule you wish to delete.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Any currently running tasks that were run by the scheduling agent will not be stopped if the schedule is deleted.   It only prevents future executions.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<h1 id="task-dev-guide" class="sect0">Task Developer Guide</h1>
<div class="openblock partintro">
<div class="content">
Please see the <a href="https://dataflow.spring.io/docs/batch-developer-guides/">Batch Developer</a> section of the microsite for more information on how to create, test, and run Spring Cloud Task applications on your local machine.
</div>
</div>
<h1 id="dashboard" class="sect0">Dashboard</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes how to use the dashboard of Spring Cloud Data Flow.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-introduction">31. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow provides a browser-based GUI called the dashboard to manage the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Apps</strong>: The Apps tab lists all available applications and provides the controls to register/unregister them.</p>
</li>
<li>
<p><strong>Runtime</strong>: The Runtime tab provides the list of all running applications.</p>
</li>
<li>
<p><strong>Streams</strong>: The Streams tab lets you list, design, create, deploy, and destroy Stream Definitions.</p>
</li>
<li>
<p><strong>Tasks</strong>: The Tasks tab lets you list, create, launch, schedule and, destroy Task Definitions.</p>
</li>
<li>
<p><strong>Jobs</strong>: The Jobs tab lets you perform batch job related functions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Upon starting Spring Cloud Data Flow, the dashboard is available at:</p>
</div>
<div class="paragraph">
<p><code><a href="http://&lt;host&gt;:&lt;port&gt;/dashboard" class="bare">&lt;host&gt;:&lt;port&gt;/dashboard</a></code></p>
</div>
<div class="paragraph">
<p>For example, if Spring Cloud Data Flow is running locally, the dashboard is available at <code>http://localhost:9393/dashboard</code>.</p>
</div>
<div class="paragraph">
<p>If you have enabled https, then the dashboard will be located at <code>https://localhost:9393/dashboard</code>.
If you have enabled security, a login form is available at <code>http://localhost:9393/dashboard/#/login</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The default Dashboard server port is <code>9393</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the opening page of the Spring Cloud Data Flow dashboard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-dashboard-about.png" alt="The Spring Cloud Data Flow Dashboard">
</div>
<div class="title">Figure 10. The Spring Cloud Data Flow Dashboard</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-apps">32. Apps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Apps section of the dashboard lists all the available applications and provides the controls to register and unregister them (if applicable).
It is possible to import a number of applications at once by using the Bulk Import Applications action.</p>
</div>
<div class="paragraph">
<p>The following image shows a typical list of available apps within the dashboard:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-available-apps-list.png" alt="List of available applications">
</div>
<div class="title">Figure 11. List of Available Applications</div>
</div>
<div class="sect2">
<h3 id="_bulk_import_of_applications">32.1. Bulk Import of Applications</h3>
<div class="paragraph">
<p>The Bulk Import Applications page provides numerous options for defining and importing a set of applications all at once.
For bulk import, the application definitions are expected to be expressed in a properties style, as follows:</p>
</div>
<div class="paragraph">
<p><code>&lt;type&gt;.&lt;name&gt; = &lt;coordinates&gt;</code></p>
</div>
<div class="paragraph">
<p>The following examples show a typical application definitions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code>task.timestamp=maven://org.springframework.cloud.task.app:timestamp-task:1.2.0.RELEASE
processor.transform=maven://org.springframework.cloud.stream.app:transform-processor-rabbit:1.2.0.RELEASE</code></pre>
</div>
</div>
<div class="paragraph">
<p>At the top of the bulk import page, a URI can be specified that points to a properties file stored elsewhere, it should contain properties formatted as shown in the previous example.
Alternatively, by using the textbox labeled &#8220;Apps as Properties&#8221;, you can directly list each property string. Finally, if the properties are stored in a local file, the &#8220;Select Properties File&#8221; option opens a local file browser to select the file.
After setting your definitions through one of these routes, click Import.</p>
</div>
<div class="paragraph">
<p>The following image shows the Bulk Import Applications page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-bulk-import-applications.png" alt="Bulk Import Applications">
</div>
<div class="title">Figure 12. Bulk Import Applications</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-runtime">33. Runtime</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Runtime section of the Dashboard application shows the list of all running applications.
For each runtime app, the state of the deployment and the number of deployed instances is shown.
A list of the used deployment properties is available by clicking on the App Id.</p>
</div>
<div class="paragraph">
<p>The following image shows an example of the Runtime tab in use:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-runtime.png" alt="List of running applications">
</div>
<div class="title">Figure 13. List of Running Applications</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-streams">34. Streams</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Streams tab has two child tabs: Definitions and Create Stream. The following topics describe how to work with each one:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#dashboard-stream-definitions">Working with Stream Definitions</a></p>
</li>
<li>
<p><a href="#dashboard-flo-streams-designer">Creating a Stream</a></p>
</li>
<li>
<p><a href="#dashboard-stream-deploy">Deploying a Stream</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="dashboard-stream-definitions">34.1. Working with Stream Definitions</h3>
<div class="paragraph">
<p>The Streams section of the Dashboard includes the Definitions tab that provides a listing of Stream definitions.
There you have the option to deploy or undeploy those stream definitions.
Additionally, you can remove the definition by clicking on Destroy.
Each row includes an arrow on the left, which you can click to see a visual representation of the definition.
Hovering over the boxes in the visual representation shows more details about the apps, including any options passed to them.</p>
</div>
<div class="paragraph">
<p>In the following screenshot, the <code>timer</code> stream has been expanded to show the visual representation:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-streams-list-definitions.png" alt="List of Stream Definitions">
</div>
<div class="title">Figure 14. List of Stream Definitions</div>
</div>
<div class="paragraph">
<p>If you click the details button, the view changes to show a visual representation of that stream and any related streams.
In the preceding example, if you click details for the <code>timer</code> stream, the view changes to the following view, which clearly shows the relationship between the three streams (two of them are tapping into the <code>timer</code> stream):</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-details.png" alt="Stream Details Page">
</div>
<div class="title">Figure 15. Stream Details Page</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-flo-streams-designer">34.2. Creating a Stream</h3>
<div class="paragraph">
<p>The Streams section of the Dashboard includes the Create Stream tab, which makes available the <a href="https://github.com/spring-projects/spring-flo">Spring Flo</a> designer: a canvas application that offers an interactive graphical interface for creating data pipelines.</p>
</div>
<div class="paragraph">
<p>In this tab, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create, manage, and visualize stream pipelines using DSL, a graphical canvas, or both</p>
</li>
<li>
<p>Write pipelines via DSL with content-assist and auto-complete</p>
</li>
<li>
<p>Use auto-adjustment and grid-layout capabilities in the GUI for simpler and interactive organization of pipelines</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You should watch this <a href="https://www.youtube.com/watch?v=78CgV46OstI">screencast</a> that highlights some of the "Flo for Spring Cloud Data Flow" capabilities.
The Spring Flo <a href="https://github.com/spring-projects/spring-flo/wiki">wiki</a> includes more detailed content on core Flo capabilities.</p>
</div>
<div class="paragraph">
<p>The following image shows the Flo designer in use:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-stream.png" alt="Flo for Spring Cloud Data Flo">
</div>
<div class="title">Figure 16. Flo for Spring Cloud Data Flow</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-stream-deploy">34.3. Deploying a Stream</h3>
<div class="paragraph">
<p>The stream deploy page includes tabs that provide different ways to setup the deployment properties and deploy the stream.
The following screenshots show the stream deploy page for <code>foobar</code> (<code>time | log</code>).</p>
</div>
<div class="paragraph">
<p>You can define deployments properties using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Form builder tab: a builder which help you to define deployment properties (deployer, application properties&#8230;&#8203;)</p>
</li>
<li>
<p>Free text tab: a free text area (key/value pairs)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can switch between the both views, the form builder provides a more stronger validation of the inputs.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-deploy-builder.png" alt="Form builder">
</div>
<div class="title">Figure 17. The following image shows the form builder</div>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-stream-deploy-freetext.png" alt="Free text">
</div>
<div class="title">Figure 18. The following image shows the same properties in the free text</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_fan_in_fan_out_streams">Creating Fan-In/Fan-Out Streams</h3>
<div class="paragraph">
<p>In chapter <a href="#spring-cloud-dataflow-stream-dsl-fanin-fanout">Fan-in and Fan-out</a> you learned how we can support fan-in and fan-out use cases using <a href="#spring-cloud-dataflow-stream-dsl-named-destinations">named destinations</a>.
The UI provides dedicated support for named destinations as well:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-stream-fanin-fanout.png" alt="Fan-in and Fan-out example">
</div>
<div class="title">Figure 19. Flo for Spring Cloud Data Flow</div>
</div>
<div class="paragraph">
<p>In this example we have data from an <em>HTTP Source</em> and a <em>JDBC Source</em> that is being sent to the
<em>sharedData</em> channel which represents a <strong>Fan-in</strong> use case.
On the other end we have a <em>Cassandra Sink</em> and a <em>File Sink</em> subscribed to the <em>sharedData</em> channel which represents a <strong>Fan-out</strong> use case.</p>
</div>
</div>
<div class="sect2">
<h3 id="_creating_a_tap_stream">34.4. Creating a Tap Stream</h3>
<div class="paragraph">
<p>Creating Taps using the Dashboard is straightforward.
Let&#8217;s say you have stream consisting of an <em>HTTP Source</em> and a <em>File Sink</em> and you would like to tap into the stream
to also send data to a <em>JDBC Sink</em>.
In order to create the tap stream simply connect the output connector of the <em>HTTP Source</em> to the <em>JDBC Sink</em>.
The connection will be displayed as a dotted line, indicating that you created a tap stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-create-tap-stream.png" alt="Tap stream example">
</div>
<div class="title">Figure 20. Creating a Tap Stream</div>
</div>
<div class="paragraph">
<p>The primary stream (<em>HTTP Source</em> to <em>File Sink</em>) will be automatically named, in case you did not provide a name for the stream, yet.
When creating tap streams, the primary stream must always be explicitly named.
In the picture above, the primary stream was named <em>HTTP_INGEST</em>.</p>
</div>
<div class="paragraph">
<p>Using the Dashboard, you can also switch the primary stream to become the secondary tap stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-tap-stream-switch-to-primary-stream.png" alt="Switch tap stream to primary stream">
</div>
<div class="title">Figure 21. Change Primary Stream to Secondary Tap Stream</div>
</div>
<div class="paragraph">
<p>Simply hover over the existing primary stream, the line between <em>HTTP Source</em> and <em>File Sink</em>.
Several control icons will appear, and by clicking on the icon labeled <em>Switch to/from tap</em>,
you change the primary stream into a tap stream.
Do the same for the tap stream and switch it to a primary stream.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-flo-tap-stream-switch-to-primary-stream-result.png" alt="End result of switching the tap stream to a primary stream">
</div>
<div class="title">Figure 22. End Result of Switching the Primary Stream</div>
</div>
<div class="exampleblock">
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
When interacting directly with <a href="#spring-cloud-dataflow-stream-dsl-named-destinations">named destinations</a>,
there can be "n" combinations (Inputs/Outputs). This allows you to create complex topologies involving a
wide variety of data sources and destinations.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-tasks">35. Tasks</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Tasks section of the Dashboard currently has three tabs:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#dashboard-tasks-apps">Apps</a></p>
</li>
<li>
<p><a href="#dashboard-task-definition">Definitions</a></p>
</li>
<li>
<p><a href="#dashboard-tasks-executions">Executions</a></p>
</li>
<li>
<p><a href="#dashboard-task-scheduling">Scheduling</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-apps">35.1. Apps</h3>
<div class="paragraph">
<p>Each app encapsulates a unit of work into a reusable component.
Within the Data Flow runtime environment, apps let users create definitions for streams as well as tasks.
Consequently, the Apps tab within the Tasks section lets users create task definitions.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also use this tab to create Batch Jobs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows a typical list of task apps:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-apps-list.png" alt="List of Task Apps">
</div>
<div class="title">Figure 23. List of Task Apps</div>
</div>
<div class="paragraph">
<p>On this screen, you can perform the following actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View details, such as the task app options.</p>
</li>
<li>
<p>Create a task definition from the respective app.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_view_task_app_details">35.1.1. View Task App Details</h4>
<div class="paragraph">
<p>On this page you can view the details of a selected task app, including the list of available options (properties) for that app.</p>
</div>
</div>
<div class="sect3">
<h4 id="_create_a_task_definition">35.1.2. Create a Task Definition</h4>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-definition-create.png" alt="List of Task Apps">
</div>
</div>
<div class="paragraph">
<p>At a minimum, you must provide a name for the new definition.
You also have the option to specify various properties that are used during the deployment of the app.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Each parameter is included only if the Include checkbox is selected.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-task-definition">35.2. Definitions</h3>
<div class="paragraph">
<p>This page lists the Data Flow task definitions and provides actions to launch or destroy those tasks.
It also provides a shortcut operation to define one or more tasks with simple textual input, indicated by
the Bulk Define Tasks button.</p>
</div>
<div class="paragraph">
<p>The following image shows the Definitions page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-definitions-list.png" alt="List of Task Definitions">
</div>
<div class="title">Figure 24. List of Task Definitions</div>
</div>
<div class="sect3">
<h4 id="_creating_composed_task_definitions">35.2.1. Creating Composed Task Definitions</h4>
<div class="paragraph">
<p>The dashboard includes the Create Composed Task tab, which provides an interactive graphical interface for creating composed tasks.</p>
</div>
<div class="paragraph">
<p>In this tab, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create and visualize composed tasks using DSL, a graphical canvas, or both.</p>
</li>
<li>
<p>Use auto-adjustment and grid-layout capabilities in the GUI for simpler and interactive organization of the composed task.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On the Create Composed Task screen, you can define one or more task parameters by entering both the parameter key and the parameter value.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Task parameters are not typed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following image shows the composed task designer:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-ctr-flo-tab.png" alt="Composed Task Designer">
</div>
<div class="title">Figure 25. Composed Task Designer</div>
</div>
</div>
<div class="sect3">
<h4 id="_launching_tasks">35.2.2. Launching Tasks</h4>
<div class="paragraph">
<p>Once the task definition has been created, the tasks can be launched through the dashboard.
To do so, click the Definitions tab and select the task you want to launch by pressing <code>Launch</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-executions">35.3. Executions</h3>
<div class="paragraph">
<p>The Executions tab shows the current running and completed tasks.</p>
</div>
<div class="paragraph">
<p>The following image shows the Executions tab:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-executions-list.png" alt="List of Task Executions">
</div>
<div class="title">Figure 26. List of Task Executions</div>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-tasks-execution-detail">35.4. Execution Detail</h3>
<div class="paragraph">
<p>For each task execution on the Executions page, a user can retrieve detailed information about a specific execution by clicking the information icon located to the right of the task execution.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-task-execution-detail.png" alt="List of Task Executions">
</div>
</div>
<div class="paragraph">
<p>On this screen the user can view not only the information from the Task Executions page but also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Task Arguments</p>
</li>
<li>
<p>External Execution Id</p>
</li>
<li>
<p>Batch Job Indicator (indicates if the task execution contained Spring Batch jobs.)</p>
</li>
<li>
<p>Job Execution Ids links (Clicking the Job Execution Id will take you to the <a href="#dashboard-job-executions-details">Job Execution Details</a> for that Job Execution Id.)</p>
</li>
<li>
<p>Task Execution Duration</p>
</li>
<li>
<p>Task Execution Exit Message</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-jobs">36. Jobs</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Jobs section of the Dashboard lets you inspect batch jobs.
The main section of the screen provides a list of job executions.
Batch jobs are tasks that each execute one or more batch jobs.
Each job execution has a reference to the task execution ID (in the Task Id column).</p>
</div>
<div class="paragraph">
<p>The list of Job Executions also shows the state of the underlying Job Definition.
Thus, if the underlying definition has been deleted, &#8220;No definition found&#8221; appears in the Status column.</p>
</div>
<div class="paragraph">
<p>You can take the following actions for each job:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Restart (for failed jobs).</p>
</li>
<li>
<p>Stop (for running jobs).</p>
</li>
<li>
<p>View execution details.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Note: Clicking the stop button actually sends a stop request to the running job, which may not immediately stop.</p>
</div>
<div class="paragraph">
<p>The following image shows the Jobs page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-job-executions-list.png" alt="List of Job Executions">
</div>
<div class="title">Figure 27. List of Job Executions</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-details">36.1. Job Execution Details</h3>
<div class="paragraph">
<p>After having launched a batch job, the Job Execution Details page will show information about the job.</p>
</div>
<div class="paragraph">
<p>The following image shows the Job Execution Details page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-jobs-job-execution-details.png" alt="Job Execution Details">
</div>
<div class="title">Figure 28. Job Execution Details</div>
</div>
<div class="paragraph">
<p>The Job Execution Details page contains a list of the executed steps.
You can further drill into the details of each step&#8217;s execution by clicking the magnifying glass icon.</p>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-steps">36.2. Step Execution Details</h3>
<div class="paragraph">
<p>The Step Execution Details page provides information about an individual step within a job.</p>
</div>
<div class="paragraph">
<p>The following image shows the Step Execution Details page:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-step-execution-history.png" alt="Step Execution History">
</div>
<div class="title">Figure 29. Step Execution Details</div>
</div>
<div class="paragraph">
<p>On the top of the page, you can see a progress indicator the respective step, with the option to refresh the indicator.
A link is provided to view the step execution history.</p>
</div>
<div class="paragraph">
<p>The Step Execution Details screen provides a complete list of all Step Execution Context key/value pairs.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
For exceptions, the Exit Description field contains additional error information.
However, this field can have a maximum of 2500 characters.
Therefore, in the case of long exception stack traces, trimming of error messages may occur.
When that happens, refer to the server log files for further details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="dashboard-job-executions-steps-progress">36.3. Step Execution Progress</h3>
<div class="paragraph">
<p>On this screen, you can see a progress bar indicator in regards to the execution
of the current step. Under the Step Execution History, you can also view various
metrics associated with the selected step, such as duration, read counts, write
counts, and others.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-task-scheduling">37. Scheduling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can create schedules from the SCDF Dashboard for the Task Definitions. Please see the <a href="https://dataflow.spring.io/docs/feature-guides/batch/scheduling/">Scheduling Batch Jobs</a> section of the microsite for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dashboard-auditing">38. Auditing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Auditing page of the Dashboard gives you access to recorded audit events. Currently audit event
are recorded for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Streams</p>
<div class="ulist">
<ul>
<li>
<p>Create</p>
</li>
<li>
<p>Delete</p>
</li>
<li>
<p>Deploy</p>
</li>
<li>
<p>Undeploy</p>
</li>
</ul>
</div>
</li>
<li>
<p>Tasks</p>
<div class="ulist">
<ul>
<li>
<p>Create</p>
</li>
<li>
<p>Delete</p>
</li>
<li>
<p>Launch</p>
</li>
</ul>
</div>
</li>
<li>
<p>Scheduling of Tasks</p>
<div class="ulist">
<ul>
<li>
<p>Create Schedule</p>
</li>
<li>
<p>Delete Schedule</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-audit-records-list.png" alt="List Available Audit Records">
</div>
<div class="title">Figure 30. List Overview of Audit Records</div>
</div>
<div class="paragraph">
<p>By clicking on the <em>Show Details</em> icon, you can obtain further details regarding
the auditing details:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://raw.githubusercontent.com/spring-cloud/spring-cloud-dataflow/master/spring-cloud-dataflow-docs/src/main/asciidoc/images/dataflow-audit-records-details.png" alt="Details of a single Audit Record">
</div>
<div class="title">Figure 31. List Details of an Audit Record</div>
</div>
<div class="paragraph">
<p>Generally, auditing provides the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When was the record created?</p>
</li>
<li>
<p>Username that triggered the audit event (if security is enabled)</p>
</li>
<li>
<p>Audit operation (Schedule, Stresm, Task)</p>
</li>
<li>
<p>Performed action (Create, Delete, Deploy, Rollback, Undeploy, Update)</p>
</li>
<li>
<p>Correlation Id, e.g. Stream/Task name</p>
</li>
<li>
<p>Audit Data</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The written value of the property <em>Audit Data</em> depends on the performed <em>Audit Operation</em> and the <em>ActionType</em>.
For example, when a Schedule is being created, the name of the task definition,
task definition properties, deployment properties, as well as command line arguments are written
to the persistence store.</p>
</div>
<div class="paragraph">
<p>Sensitive information is sanitized prior to saving the Audit Record, in an <em>best-effort-manner</em>.
Any of the following keys are being detected and its sensitive values are
masked:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>password</p>
</li>
<li>
<p>secret</p>
</li>
<li>
<p>key</p>
</li>
<li>
<p>token</p>
</li>
<li>
<p>.*credentials.*</p>
</li>
<li>
<p>vcap_services</p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="dataflow-samples" class="sect0">Samples</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section shows the available samples.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="samples-links">39. Links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Several samples have been created to help you get started on implementing higher-level use cases than the basic Streams and Tasks shown in the reference guide.
The samples are part of a separate <a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples">repository</a> and have their own <a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/">reference documentation</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_java_dsl">Java DSL</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#spring-cloud-data-flow-samples-http-cassandra-overview">HTTP to Cassandra</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_http_to_mysql_demo">HTTP to MySQL</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_http_to_gemfire_demo">HTTP to Gemfire</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_gemfire_cq_to_log_demo">Gemfire CQ to Log Demo</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_gemfire_to_log_demo">Gemfire to Log Demo</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_custom_spring_cloud_stream_processor">Custom Processor</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Task and Batch</div>
<ul>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_batch_job_on_cloud_foundry">Batch Job on Cloud Foundry</a></p>
</li>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_batch_file_ingest">Batch File Ingest</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Data Science</div>
<ul>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_species_prediction">Species Prediction</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Functions</div>
<ul>
<li>
<p><a href="https://docs.spring.io/spring-cloud-dataflow-samples/docs/current/reference/htmlsingle/#_functions_in_spring_cloud_data_flow">Using Spring Cloud Function</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><br>
<br></p>
</div>
</div>
</div>
<h1 id="api-guide" class="sect0">REST API Guide</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This section describes the Spring Cloud Data Flow REST API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-overview">40. Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud Data Flow provides a REST API that lets you access all aspects of the server.
In fact, the Spring Cloud Data Flow shell is a first-class consumer of that API.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you plan to use the REST API with Java, you should consider using the
provided Java client (<code>DataflowTemplate</code>) that uses the REST API internally.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-verbs">40.1. HTTP verbs</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow tries to adhere as closely as possible to standard HTTP and REST conventions in its use of HTTP verbs, as described in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Verb</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>GET</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to retrieve a resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>POST</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to create a new resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PUT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to update an existing resource, including partial updates. Also used for
resources that imply the concept of <code>restarts</code>, such as Tasks.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>DELETE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Used to delete an existing resource.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-http-status-codes">40.2. HTTP Status Codes</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow tries to adhere as closely as possible to standard HTTP and REST conventions in its use of HTTP status codes, as shown in the following table:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Status code</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>200 OK</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request completed successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>201 Created</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A new resource has been created successfully. The resource&#8217;s URI is available from the response&#8217;s <code>Location</code> header.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>204 No Content</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An update to an existing resource has been applied successfully.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>400 Bad Request</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The request was malformed. The response body includes an error description that provides further information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>404 Not Found</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested resource did not exist.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>409 Conflict</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested resource already exists. For example, the task already exists or the stream was already being deployed</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>422 Unprocessable Entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returned in cases where the Job Execution cannot be stopped or restarted.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-headers">40.3. Headers</h3>
<div class="paragraph">
<p>Every response has the following header(s):</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Content-Type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The Content-Type of the payload, e.g. <code>application/hal+json</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-errors">40.4. Errors</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>error</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP error that occurred, e.g. <code>Bad Request</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>message</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A description of the cause of the error</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path to which the request was made</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>status</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The HTTP status code, e.g. <code>400</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timestamp</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The time, in milliseconds, at which the error occurred</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="api-guide-overview-hypermedia">40.5. Hypermedia</h3>
<div class="paragraph">
<p>Spring Cloud Data Flow uses hypermedia, and resources include links to other resources
in their responses.
Responses are in the <a href="http://stateless.co/hal_specification.html">Hypertext Application from resource to resource Language (HAL)</a> format.
Links can be found beneath the <code>_links</code> key.
Users of the API should not create URIs themselves.
Instead. they should use the above-described links to navigate.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="api-guide-resources">41. Resources</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The API includes the following resources:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-index">Index</a></p>
</li>
<li>
<p><a href="#resources-about">Server Meta Information</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records">Audit Records</a></p>
</li>
<li>
<p><a href="#resources-registered-applications">Registered Applications</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions">Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment">Stream Deployments</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validate">Stream Validation</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definitions">Task Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions">Task Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-scheduler">Task Scheduler</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validate">Task Validation</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions">Job Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances">Job Instances</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions">Job Step Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications">Runtime Information about Applications</a></p>
</li>
<li>
<p><a href="#api-guide-resources-metrics-stream-applications">[api-guide-resources-metrics-stream-applications]</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="api-guide-resources-index">41.1. Index</h3>
<div class="paragraph">
<p>The index provides the entry point into Spring Cloud Data Flow&#8217;s REST API.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-index-access">Accessing the index</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-response-structure">Response Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-example-response">Example Response</a></p>
</li>
<li>
<p><a href="#api-guide-resources-index-links">Links</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-index-access">41.1.1. Accessing the index</h4>
<div class="paragraph">
<p>Use a <code>GET</code> request to access the index.</p>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET / HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-response-structure">Response Structure</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Path</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Object</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Links to other resources</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>['api.revision']</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Number</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Incremented each time a change is implemented in this REST API</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.audit-records.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the audit records</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.dashboard.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the dashboard</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions/definition.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/definitions/definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/definitions/definition.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/definitions/definition is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/apps/{appId}/instances/{instanceId}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/apps/{appId}/instances/{instanceId}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/apps/{appId}/instances/{instanceId} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the runtime/streams</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.runtime/streams.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link runtime/streams is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/{name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/deployment.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/deployment</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/deployment.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/deployment is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/manifest/{name}/{version}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/manifest/{name}/{version}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/manifest/{name}/{version}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/manifest/{name}/{version} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/history/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/history/{name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/history/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/history is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/rollback/{name}/{version}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/rollback/{name}/{version}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/rollback/{name}/{version}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/rollback/{name}/{version} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/update/{name}.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/update/{name}</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/update/{name}.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/deployments/update/{name} is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/deployments/platform/list.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/deployments/platform/list</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/validation.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the streams/validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.streams/validation.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link streams/validation is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/platforms.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions/definition.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/definitions/definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/definitions/definition.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/definitions/definition is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/current.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/current</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/execution.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/executions/execution.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/executions/execution is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/executions/schedules</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules/instances.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/schedules/instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/schedules/instances.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/schedules/instances is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/validation.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tasks/validation</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tasks/validation.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link tasks/validation is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/thinexecutions/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/thinexecutions/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps/step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps/step is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step/progress.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/executions/execution/steps/step/progress</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/executions/execution/steps/step/progress.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/executions/execution/steps/step/progress is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/name.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/instances/name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/name.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/instances/name is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/instance.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the jobs/instances/instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.jobs/instances/instance.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link jobs/instances/instance is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tools/parseTaskTextToGraph.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tools/parseTaskTextToGraph</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.tools/convertTaskGraphToText.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the tools/convertTaskGraphToText</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.apps.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the apps</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.about.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the about</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/stream.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the completions/stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/stream.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link completions/stream is templated</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/task.href</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>String</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link to the completions/task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>_links.completions/task.templated</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Boolean</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Link completions/task is templated</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-example-response">Example Response</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 5416

{
  "_links" : {
    "dashboard" : {
      "href" : "http://localhost:9393/dashboard"
    },
    "audit-records" : {
      "href" : "http://localhost:9393/audit-records"
    },
    "streams/definitions" : {
      "href" : "http://localhost:9393/streams/definitions"
    },
    "streams/definitions/definition" : {
      "href" : "http://localhost:9393/streams/definitions/{name}",
      "templated" : true
    },
    "streams/validation" : {
      "href" : "http://localhost:9393/streams/validation/{name}",
      "templated" : true
    },
    "runtime/streams" : {
      "href" : "http://localhost:9393/runtime/streams?names={names}",
      "templated" : true
    },
    "runtime/apps" : {
      "href" : "http://localhost:9393/runtime/apps"
    },
    "runtime/apps/{appId}" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}",
      "templated" : true
    },
    "runtime/apps/{appId}/instances" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances",
      "templated" : true
    },
    "runtime/apps/{appId}/instances/{instanceId}" : {
      "href" : "http://localhost:9393/runtime/apps/{appId}/instances/{instanceId}",
      "templated" : true
    },
    "streams/deployments" : {
      "href" : "http://localhost:9393/streams/deployments"
    },
    "streams/deployments/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/{name}",
      "templated" : true
    },
    "streams/deployments/history/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/history/{name}",
      "templated" : true
    },
    "streams/deployments/manifest/{name}/{version}" : {
      "href" : "http://localhost:9393/streams/deployments/manifest/{name}/{version}",
      "templated" : true
    },
    "streams/deployments/platform/list" : {
      "href" : "http://localhost:9393/streams/deployments/platform/list"
    },
    "streams/deployments/rollback/{name}/{version}" : {
      "href" : "http://localhost:9393/streams/deployments/rollback/{name}/{version}",
      "templated" : true
    },
    "streams/deployments/update/{name}" : {
      "href" : "http://localhost:9393/streams/deployments/update/{name}",
      "templated" : true
    },
    "streams/deployments/deployment" : {
      "href" : "http://localhost:9393/streams/deployments/{name}",
      "templated" : true
    },
    "tasks/platforms" : {
      "href" : "http://localhost:9393/tasks/platforms"
    },
    "tasks/definitions" : {
      "href" : "http://localhost:9393/tasks/definitions"
    },
    "tasks/definitions/definition" : {
      "href" : "http://localhost:9393/tasks/definitions/{name}",
      "templated" : true
    },
    "tasks/executions" : {
      "href" : "http://localhost:9393/tasks/executions"
    },
    "tasks/executions/name" : {
      "href" : "http://localhost:9393/tasks/executions{?name}",
      "templated" : true
    },
    "tasks/executions/current" : {
      "href" : "http://localhost:9393/tasks/executions/current"
    },
    "tasks/executions/execution" : {
      "href" : "http://localhost:9393/tasks/executions/{id}",
      "templated" : true
    },
    "tasks/validation" : {
      "href" : "http://localhost:9393/tasks/validation/{name}",
      "templated" : true
    },
    "tasks/schedules" : {
      "href" : "http://localhost:9393/tasks/schedules"
    },
    "tasks/schedules/instances" : {
      "href" : "http://localhost:9393/tasks/schedules/instances/{taskDefinitionName}",
      "templated" : true
    },
    "jobs/executions" : {
      "href" : "http://localhost:9393/jobs/executions"
    },
    "jobs/executions/name" : {
      "href" : "http://localhost:9393/jobs/executions{?name}",
      "templated" : true
    },
    "jobs/executions/execution" : {
      "href" : "http://localhost:9393/jobs/executions/{id}",
      "templated" : true
    },
    "jobs/executions/execution/steps" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps",
      "templated" : true
    },
    "jobs/executions/execution/steps/step" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps/{stepId}",
      "templated" : true
    },
    "jobs/executions/execution/steps/step/progress" : {
      "href" : "http://localhost:9393/jobs/executions/{jobExecutionId}/steps/{stepId}/progress",
      "templated" : true
    },
    "jobs/instances/name" : {
      "href" : "http://localhost:9393/jobs/instances{?name}",
      "templated" : true
    },
    "jobs/instances/instance" : {
      "href" : "http://localhost:9393/jobs/instances/{id}",
      "templated" : true
    },
    "tools/parseTaskTextToGraph" : {
      "href" : "http://localhost:9393/tools"
    },
    "tools/convertTaskGraphToText" : {
      "href" : "http://localhost:9393/tools"
    },
    "jobs/thinexecutions" : {
      "href" : "http://localhost:9393/jobs/thinexecutions"
    },
    "jobs/thinexecutions/name" : {
      "href" : "http://localhost:9393/jobs/thinexecutions{?name}",
      "templated" : true
    },
    "apps" : {
      "href" : "http://localhost:9393/apps"
    },
    "about" : {
      "href" : "http://localhost:9393/about"
    },
    "completions/stream" : {
      "href" : "http://localhost:9393/completions/stream{?start,detailLevel}",
      "templated" : true
    },
    "completions/task" : {
      "href" : "http://localhost:9393/completions/task{?start,detailLevel}",
      "templated" : true
    }
  },
  "api.revision" : 14
}</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-index-links">Links</h5>
<div class="paragraph">
<p>The main element of the index are the links, as they let you traverse the API
and execute the desired functionality:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Relation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>about</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access meta information, including enabled features, security info, version information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dashboard</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Access the dashboard UI</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>audit-records</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides audit trail information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle registered applications</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>completions/stream</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the DSL completion features for Stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>completions/task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the DSL completion features for Task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the JobExecution resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the JobExecution thin resource with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific JobExecution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the steps for a JobExecution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps/step</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the details for a specific step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/execution/steps/step/progress</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides progress information for a specific step</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/executions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/thinexecutions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retrieve Job Executions by Job name with no step executions included</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/instances/instance</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the job instance resource for a specific job instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>jobs/instances/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the Job instance resource for a specific job name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/streams</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes stream runtime status</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the runtime application resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the runtime status for a specific app</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the status for app instances</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>runtime/apps/{appId}/instances/{instanceId}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the status for specific app instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/definitions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the task definition resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/definitions/definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/validation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the validation for a task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns Task executions and allows launching of tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/current</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the current count of running tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/schedules</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides schedule information of tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/schedules/instances</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides schedule information of a specific task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns all task executions for a given Task name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/executions/execution</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides details for a specific task execution</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tasks/platforms</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides platform accounts for launching tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/definitions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Exposes the Streams resource</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/definitions/definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Handle a specific Stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/validation</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides the validation for a stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provides Stream deployment operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request un-deployment of an existing stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/deployment</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request (un-)deployment of an existing stream definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/manifest/{name}/{version}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return a manifest info of a release version</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/history/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get stream&#8217;s deployment history as list or Releases for this release</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/rollback/{name}/{version}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rollback the stream to the previous or a specific version of the stream</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/update/{name}</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Update the stream.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>streams/deployments/platform/list</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of supported deployment platforms</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tools/parseTaskTextToGraph</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parse a task definition into a graph structure</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tools/convertTaskGraphToText</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Convert a graph format into DSL text format</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-about">41.2. Server Meta Information</h3>
<div class="paragraph">
<p>The server meta information endpoint provides more information about the server itself.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-server-meta-retrieving">Retrieving information about the server</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-server-meta-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-server-meta-retrieving">41.2.1. Retrieving information about the server</h4>
<div class="paragraph">
<p>A <code>GET</code> request returns meta information for Spring Cloud Data Flow, including:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Runtime environment information</p>
</li>
<li>
<p>Information regarding which features are enabled</p>
</li>
<li>
<p>Dependency information of Spring Cloud Data Flow Server</p>
</li>
<li>
<p>Security information</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /about HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/about' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-server-meta-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2638
Content-Type: application/json;charset=UTF-8

{
  "featureInfo" : {
    "analyticsEnabled" : true,
    "streamsEnabled" : true,
    "tasksEnabled" : true,
    "schedulesEnabled" : true,
    "grafanaEnabled" : false
  },
  "versionInfo" : {
    "implementation" : {
      "name" : "${info.app.name}",
      "version" : "${info.app.version}"
    },
    "core" : {
      "name" : "Spring Cloud Data Flow Core",
      "version" : "2.1.0.RELEASE"
    },
    "dashboard" : {
      "name" : "Spring Cloud Dataflow UI",
      "version" : "2.1.0.RELEASE"
    },
    "shell" : {
      "name" : "Spring Cloud Data Flow Shell",
      "version" : "2.1.0.RELEASE",
      "url" : "https://repo.spring.io/libs-release/org/springframework/cloud/spring-cloud-dataflow-shell/2.1.0.RELEASE/spring-cloud-dataflow-shell-2.1.0.RELEASE.jar"
    }
  },
  "securityInfo" : {
    "authenticationEnabled" : false,
    "authenticated" : false,
    "username" : null,
    "roles" : [ ]
  },
  "runtimeEnvironment" : {
    "appDeployer" : {
      "deployerImplementationVersion" : "Test Version",
      "deployerName" : "Test Server",
      "deployerSpiVersion" : "2.0.2.RELEASE",
      "javaVersion" : "1.8.0_201",
      "platformApiVersion" : "",
      "platformClientVersion" : "",
      "platformHostVersion" : "",
      "platformSpecificInfo" : {
        "default" : "local"
      },
      "platformType" : "Skipper Managed",
      "springBootVersion" : "2.1.3.RELEASE",
      "springVersion" : "5.1.5.RELEASE"
    },
    "taskLaunchers" : [ {
      "deployerImplementationVersion" : "2.0.2.RELEASE",
      "deployerName" : "LocalTaskLauncher",
      "deployerSpiVersion" : "2.0.1.RELEASE",
      "javaVersion" : "1.8.0_201",
      "platformApiVersion" : "Linux 4.4.0-145-generic",
      "platformClientVersion" : "4.4.0-145-generic",
      "platformHostVersion" : "4.4.0-145-generic",
      "platformSpecificInfo" : { },
      "platformType" : "Local",
      "springBootVersion" : "2.1.3.RELEASE",
      "springVersion" : "5.1.5.RELEASE"
    }, {
      "deployerImplementationVersion" : "2.0.2.RELEASE",
      "deployerName" : "LocalTaskLauncher",
      "deployerSpiVersion" : "2.0.1.RELEASE",
      "javaVersion" : "1.8.0_201",
      "platformApiVersion" : "Linux 4.4.0-145-generic",
      "platformClientVersion" : "4.4.0-145-generic",
      "platformHostVersion" : "4.4.0-145-generic",
      "platformSpecificInfo" : { },
      "platformType" : "Local",
      "springBootVersion" : "2.1.3.RELEASE",
      "springVersion" : "5.1.5.RELEASE"
    } ]
  },
  "grafanaInfo" : {
    "url" : "",
    "refreshInterval" : 15
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/about"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="resources-registered-applications">41.3. Registered Applications</h3>
<div class="paragraph">
<p>The registered applications endpoint provides information about the applications that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#resources-app-registry-list">Listing Applications</a></p>
</li>
<li>
<p><a href="#resources-app-registry-get">Getting Information on a Particular Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-post">Registering a New Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-post-versioned">Registering a New Application with version</a></p>
</li>
<li>
<p><a href="#resources-app-registry-bulk">Registering Applications in Bulk</a></p>
</li>
<li>
<p><a href="#resources-app-registry-default">Set the default application version</a></p>
</li>
<li>
<p><a href="#resources-app-registry-delete">Unregistering an Application</a></p>
</li>
<li>
<p><a href="#resources-app-registry-delete-all">Unregistering all Applications</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="resources-app-registry-list">41.3.1. Listing Applications</h4>
<div class="paragraph">
<p>A <code>GET</code> request will list all applications known to Spring Cloud Data Flow.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /apps?name=&amp;type=source&amp;name= HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Restrict the returned apps to the type of the app. One of [app, source, processor, sink, task]</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps?name=&amp;type=source&amp;name=' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 959
Content-Type: application/json;charset=UTF-8

{
  "_embedded" : {
    "appRegistrationResourceList" : [ {
      "name" : "http",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.0.RELEASE",
      "version" : "1.2.0.RELEASE",
      "defaultVersion" : true,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/http/1.2.0.RELEASE"
        }
      }
    }, {
      "name" : "time",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:time-source-rabbit:1.2.0.RELEASE",
      "version" : "1.2.0.RELEASE",
      "defaultVersion" : true,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/time/1.2.0.RELEASE"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-get">41.3.2. Getting Information on a Particular Application</h4>
<div class="paragraph">
<p>A <code>GET</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> gets info on a particular application.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /apps/source/http?exhaustive=false HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>exhaustive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Return all application properties, including common Spring Boot properties</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to query. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to query</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http?exhaustive=false' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-get-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 2446
Content-Type: application/json;charset=UTF-8

{
  "name" : "http",
  "type" : "source",
  "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.2.0.RELEASE",
  "version" : "1.2.0.RELEASE",
  "defaultVersion" : true,
  "options" : [ {
    "id" : "http.path-pattern",
    "name" : "path-pattern",
    "type" : "java.lang.String",
    "description" : "An Ant-Style pattern to determine which http requests will be captured.",
    "shortDescription" : "An Ant-Style pattern to determine which http requests will be captured.",
    "defaultValue" : "/",
    "hints" : {
      "keyHints" : [ ],
      "keyProviders" : [ ],
      "valueHints" : [ ],
      "valueProviders" : [ ]
    },
    "deprecation" : null,
    "sourceType" : "org.springframework.cloud.stream.app.http.source.HttpSourceProperties",
    "sourceMethod" : null,
    "deprecated" : false
  }, {
    "id" : "http.mapped-request-headers",
    "name" : "mapped-request-headers",
    "type" : "java.lang.String[]",
    "description" : "Headers that will be mapped.",
    "shortDescription" : "Headers that will be mapped.",
    "defaultValue" : null,
    "hints" : {
      "keyHints" : [ ],
      "keyProviders" : [ ],
      "valueHints" : [ ],
      "valueProviders" : [ ]
    },
    "deprecation" : null,
    "sourceType" : "org.springframework.cloud.stream.app.http.source.HttpSourceProperties",
    "sourceMethod" : null,
    "deprecated" : false
  }, {
    "id" : "http.secured",
    "name" : "secured",
    "type" : "java.lang.Boolean",
    "description" : "Secure or not HTTP source path.",
    "shortDescription" : "Secure or not HTTP source path.",
    "defaultValue" : false,
    "hints" : {
      "keyHints" : [ ],
      "keyProviders" : [ ],
      "valueHints" : [ ],
      "valueProviders" : [ ]
    },
    "deprecation" : null,
    "sourceType" : "org.springframework.cloud.stream.app.http.source.HttpSourceProperties",
    "sourceMethod" : null,
    "deprecated" : false
  }, {
    "id" : "server.port",
    "name" : "port",
    "type" : "java.lang.Integer",
    "description" : "Server HTTP port.",
    "shortDescription" : "Server HTTP port.",
    "defaultValue" : null,
    "hints" : {
      "keyHints" : [ ],
      "keyProviders" : [ ],
      "valueHints" : [ ],
      "valueProviders" : [ ]
    },
    "deprecation" : null,
    "sourceType" : "org.springframework.boot.autoconfigure.web.ServerProperties",
    "sourceMethod" : null,
    "deprecated" : false
  } ],
  "shortDescription" : null
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-post">41.3.3. Registering a New Application</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> allows registration of a new application.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-post-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /apps/source/http HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application bits reside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata-uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application metadata jar can be found</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to register. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to register</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http' -i -X POST \
    -d 'uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-post-versioned">41.3.4. Registering a New Application with version</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;/&lt;version&gt;</code> allows registration of a new application
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-post-versioned-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /apps/source/http/1.1.0.RELEASE HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application bits reside</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata-uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where the application metadata jar can be found</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version:.+}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to register. One of [app, source, processor, sink, task] (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to register</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application to register</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.1.0.RELEASE' -i -X POST \
    -d 'uri=maven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-post-versioned-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-bulk">41.3.5. Registering Applications in Bulk</h4>
<div class="paragraph">
<p>A <code>POST</code> request on <code>/apps</code> allows registering multiple applications at once.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-bulk-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /apps HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

apps=source.http%3Dmaven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE&amp;force=false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uri</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI where a properties file containing registrations can be fetched. Exclusive with <code>apps</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>apps</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Inline set of registrations. Exclusive with <code>uri</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>force</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Must be true if a registration with the same name and type already exists, otherwise an error will occur</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps' -i -X POST \
    -d 'apps=source.http%3Dmaven%3A%2F%2Forg.springframework.cloud.stream.app%3Ahttp-source-rabbit%3A1.1.0.RELEASE&amp;force=false'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-bulk-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 611

{
  "_embedded" : {
    "appRegistrationResourceList" : [ {
      "name" : "http",
      "type" : "source",
      "uri" : "maven://org.springframework.cloud.stream.app:http-source-rabbit:1.1.0.RELEASE",
      "version" : "1.1.0.RELEASE",
      "defaultVersion" : true,
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/apps/source/http/1.1.0.RELEASE"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-default">41.3.6. Set the default application version</h4>
<div class="paragraph">
<p>For an application with the <code>name</code> and <code>type</code>, multiple versions can be registered.
In this case, one of the versions can be chosen as the default application.</p>
</div>
<div class="paragraph">
<p>The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-default-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-default-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">PUT /apps/source/http/1.2.0.RELEASE HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version:.+}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.2.0.RELEASE' -i -X PUT \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-default-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 202 Accepted</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-delete">41.3.7. Unregistering an Application</h4>
<div class="paragraph">
<p>A <code>DELETE</code> request on <code>/apps/&lt;type&gt;/&lt;name&gt;</code> unregisters a previously registered application.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-delete-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /apps/source/http/1.2.0.RELEASE HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/apps/{type}/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of application to unregister. One of [app, source, processor, sink, task]</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the application to unregister</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application to unregister (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps/source/http/1.2.0.RELEASE' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="resources-app-registry-delete-all">41.3.8. Unregistering all Applications</h4>
<div class="paragraph">
<p>A <code>DELETE</code> request on <code>/apps</code> unregisters all the applications.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-app-registry-delete-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /apps HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/apps' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-app-registry-delete-all-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-audit-records">41.4. Audit Records</h3>
<div class="paragraph">
<p>The audit records endpoint provides information about the audit records. The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-records-list">List All Audit Records</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get">Retrieve Audit Record Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types">List all the Audit Action Types</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types">List all the Audit Operation Types</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-records-list">41.4.1. List All Audit Records</h4>
<div class="paragraph">
<p>The audit records endpoint lets you retrieve audit trail information.</p>
</div>
<div class="paragraph">
<p>The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-records-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-records-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /audit-records?page=0&amp;size=10&amp;operations=STREAM&amp;actions=CREATE&amp;fromDate=2000-01-01T00%3A00%3A00&amp;toDate=2099-01-01T00%3A00%3A00 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>operations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of Audit Operations (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>actions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Comma-separated list of Audit Actions (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fromDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">From date filter (ex.: 2019-02-03T00:00:30) (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>toDate</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">To date filter (ex.: 2019-02-03T00:00:30) (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/audit-records?page=0&amp;size=10&amp;operations=STREAM&amp;actions=CREATE&amp;fromDate=2000-01-01T00%3A00%3A00&amp;toDate=2099-01-01T00%3A00%3A00' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-records-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 651

{
  "_embedded" : {
    "auditRecordResourceList" : [ {
      "auditRecordId" : 5,
      "createdBy" : null,
      "correlationId" : "timelog",
      "auditData" : "time --format='YYYY MM DD' | log",
      "createdOn" : "2019-05-17T16:18:43.040Z",
      "auditAction" : "CREATE",
      "auditOperation" : "STREAM",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/audit-records/5"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/audit-records?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-record-get">41.4.2. Retrieve Audit Record Detail</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get a single audit record. The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-record-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-record-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /audit-records/5 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/audit-records/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of the audit record to query (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/audit-records/5' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-record-get-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 329
Content-Type: application/hal+json;charset=UTF-8

{
  "auditRecordId" : 5,
  "createdBy" : null,
  "correlationId" : "timelog",
  "auditData" : "time --format='YYYY MM DD' | log",
  "createdOn" : "2019-05-17T16:18:43.040Z",
  "auditAction" : "CREATE",
  "auditOperation" : "STREAM",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/audit-records/5"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-action-types">41.4.3. List all the Audit Action Types</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get the action types. The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-action-types-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-action-types-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /audit-records/audit-action-types HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/audit-records/audit-action-types' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-action-types-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 934
Content-Type: application/json;charset=UTF-8

[ {
  "id" : 100,
  "name" : "Create",
  "description" : "Create an Entity",
  "nameWithDescription" : "Create (Create an Entity)",
  "key" : "CREATE"
}, {
  "id" : 200,
  "name" : "Delete",
  "description" : "Delete an Entity",
  "nameWithDescription" : "Delete (Delete an Entity)",
  "key" : "DELETE"
}, {
  "id" : 300,
  "name" : "Deploy",
  "description" : "Deploy an Entity",
  "nameWithDescription" : "Deploy (Deploy an Entity)",
  "key" : "DEPLOY"
}, {
  "id" : 400,
  "name" : "Rollback",
  "description" : "Rollback an Entity",
  "nameWithDescription" : "Rollback (Rollback an Entity)",
  "key" : "ROLLBACK"
}, {
  "id" : 500,
  "name" : "Undeploy",
  "description" : "Undeploy an Entity",
  "nameWithDescription" : "Undeploy (Undeploy an Entity)",
  "key" : "UNDEPLOY"
}, {
  "id" : 600,
  "name" : "Update",
  "description" : "Update an Entity",
  "nameWithDescription" : "Update (Update an Entity)",
  "key" : "UPDATE"
} ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-audit-operation-types">41.4.4. List all the Audit Operation Types</h4>
<div class="paragraph">
<p>The audit record endpoint lets you get the operation types. The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-audit-operation-types-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-audit-operation-types-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /audit-records/audit-operation-types HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/audit-records/audit-operation-types' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-audit-operation-types-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 258
Content-Type: application/json;charset=UTF-8

[ {
  "id" : 100,
  "name" : "App Registration",
  "key" : "APP_REGISTRATION"
}, {
  "id" : 200,
  "name" : "Schedule",
  "key" : "SCHEDULE"
}, {
  "id" : 300,
  "name" : "Stream",
  "key" : "STREAM"
}, {
  "id" : 400,
  "name" : "Task",
  "key" : "TASK"
} ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-definitions">41.5. Stream Definitions</h3>
<div class="paragraph">
<p>The registered applications endpoint provides information about the stream definitions that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-create">Creating a New Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list">List All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related">List Related Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get">Retrieve Stream Definition Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one">Delete a Single Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all">Delete All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-deploy">Deploying Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy">Undeploy Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy-all">Undeploy All Stream Definitions</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-create">41.5.1. Creating a New Stream Definition</h4>
<div class="paragraph">
<p>Creating a stream definition is achieved by creating a POST request to the stream definitions endpoint.
A curl request for a <code>ticktock</code> stream might resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -X POST -d "name=ticktock&amp;definition=time | log" localhost:9393/streams/definitions?deploy=false</code></pre>
</div>
</div>
<div class="paragraph">
<p>A stream definition can also contain additional parameters.
For instance, in the example shown under &#8220;<a href="#api-guide-resources-stream-definitions-create-request-structure">Request Structure</a>&#8221;, we also provide the date-time format.</p>
</div>
<div class="paragraph">
<p>The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-create-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /streams/definitions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=timelog&amp;definition=time+--format%3D%27YYYY+MM+DD%27+%7C+log&amp;deploy=false</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created task definitions</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The definition for the stream, using Data Flow DSL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>deploy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true, the stream is deployed upon creation (default is false)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions' -i -X POST \
    -d 'name=timelog&amp;definition=time+--format%3D%27YYYY+MM+DD%27+%7C+log&amp;deploy=false'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-create-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 288

{
  "name" : "timelog",
  "dslText" : "time --format='YYYY MM DD' | log",
  "status" : "unknown",
  "statusDescription" : "The app or group deployment is not known to the system",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-list">41.5.2. List All Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you list all the stream definitions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/definitions?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;search= HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;search=' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 623

{
  "_embedded" : {
    "streamDefinitionResourceList" : [ {
      "name" : "timelog",
      "dslText" : "time --format='YYYY MM DD' | log",
      "status" : "unknown",
      "statusDescription" : "The app or group deployment is not known to the system",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/streams/definitions/timelog"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions?page=0&amp;size=10&amp;sort=name,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-list-related">41.5.3. List Related Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you list related stream definitions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-list-related-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/definitions/timelog/related?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;nested=true&amp;search= HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>nested</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should we recursively findByTaskNameContains for related stream definitions (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog/related?page=0&amp;sort=name%2CASC&amp;search=&amp;size=10&amp;nested=true&amp;search=' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-list-related-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 639

{
  "_embedded" : {
    "streamDefinitionResourceList" : [ {
      "name" : "timelog",
      "dslText" : "time --format='YYYY MM DD' | log",
      "status" : "unknown",
      "statusDescription" : "The app or group deployment is not known to the system",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/streams/definitions/timelog"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog/related?page=0&amp;size=10&amp;sort=name,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definition-get">41.5.4. Retrieve Stream Definition Detail</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you get a single stream definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definition-get-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definition-get-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/definitions/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-path-parameters">Path Parameters</h5>
<div class="paragraph">
<p>/streams/definitions/{name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the stream definition to query (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definition-get-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 288

{
  "name" : "timelog",
  "dslText" : "time --format='YYYY MM DD' | log",
  "status" : "unknown",
  "statusDescription" : "The app or group deployment is not known to the system",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/streams/definitions/timelog"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-delete-one">41.5.5. Delete a Single Stream Definition</h4>
<div class="paragraph">
<p>The streams endpoint lets you delete a single stream definition.
(See also: <a href="#api-guide-resources-stream-definitions-delete-all">Delete All Stream Definitions</a>.)
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-one-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /streams/definitions/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions/timelog' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-one-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-definitions-delete-all">41.5.6. Delete All Stream Definitions</h4>
<div class="paragraph">
<p>The streams endpoint lets you delete all single stream definitions.
(See also: <a href="#api-guide-resources-stream-definitions-delete-one">Delete a Single Stream Definition</a>.)
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-delete-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /streams/definitions HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/definitions' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-delete-all-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-validate">41.6. Stream Validation</h3>
<div class="paragraph">
<p>The stream validation endpoint lets you validate the apps in a stream definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-validation-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-validation-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-request-structure">41.6.1. Request Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/validation/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-path-parameters">41.6.2. Path Parameters</h4>
<div class="paragraph">
<p>/streams/validation/{name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a stream definition to be validated (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-example-request">41.6.3. Example Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/validation/timelog' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-validation-response-structure">41.6.4. Response Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 152
Content-Type: application/hal+json;charset=UTF-8

{
  "appName" : "timelog",
  "dsl" : "time --format='YYYY MM DD' | log",
  "appStatuses" : {
    "source:time" : "valid",
    "sink:log" : "valid"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-stream-deployment">41.7. Stream Deployments</h3>
<div class="paragraph">
<p>The deployment definitions endpoint provides information about the deployments that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-deployment-deploy">Deploying Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy">Undeploy Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-undeploy-all">Undeploy All Stream Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-update">Update Deployed Stream</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-rollback">Rollback Stream Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-manifest">Get Manifest</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-history">Get Deployment History</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-deployment-platform-list">Get Deployment Platforms</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-deploy">41.7.1. Deploying Stream Definition</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you deploy a single stream definition.
Optionally, you can pass application parameters as properties in the request body.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-deploy-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /streams/deployments/timelog HTTP/1.1
Host: localhost:9393
Content-Type: application/json
Content-Length: 36

{"app.time.timestamp.format":"YYYY"}</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/{timelog}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/timelog' -i -X POST \
    -H 'Content-Type: application/json' \
    -d '{"app.time.timestamp.format":"YYYY"}'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-deploy-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-undeploy">41.7.2. Undeploy Stream Definition</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you undeploy a single stream definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /streams/deployments/timelog HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/{timelog}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/timelog' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-undeploy-all">41.7.3. Undeploy All Stream Definitions</h4>
<div class="paragraph">
<p>The stream definition endpoint lets you undeploy all single stream definitions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /streams/deployments HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-undeploy-all-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-update">41.7.4. Update Deployed Stream</h4>
<div class="paragraph">
<p>Thanks to Skipper, you can update deployed streams, and provide additional deployment properties.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-update-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /streams/deployments/update/timelog1 HTTP/1.1
Host: localhost:9393
Content-Length: 196
Content-Type: application/json

{"releaseName":"timelog1","packageIdentifier":{"repositoryName":"test","packageName":"timelog1","packageVersion":"1.0.0"},"updateProperties":{"app.time.timestamp.format":"YYYYMMDD"},"force":false}</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/update/{timelog1}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>timelog1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/update/timelog1' -i -X POST \
    -H 'Content-Type: application/json' \
    -d '{"releaseName":"timelog1","packageIdentifier":{"repositoryName":"test","packageName":"timelog1","packageVersion":"1.0.0"},"updateProperties":{"app.time.timestamp.format":"YYYYMMDD"},"force":false}'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-update-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-rollback">41.7.5. Rollback Stream Definition</h4>
<div class="paragraph">
<p>Rollback the stream to the previous or a specific version of the stream.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-rollback-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /streams/deployments/rollback/timelog1/1 HTTP/1.1
Host: localhost:9393
Content-Type: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments//rollback/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version to rollback to</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/rollback/timelog1/1' -i -X POST \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-rollback-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-manifest">41.7.6. Get Manifest</h4>
<div class="paragraph">
<p>Return a manifest of a released version. For packages with dependencies, the manifest includes the contents of those dependencies.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-manifest-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/deployments/manifest/timelog1/1 HTTP/1.1
Host: localhost:9393
Content-Type: application/json</code></pre>
</div>
</div>
<div class="paragraph">
<p>/streams/deployments/manifest/{name}/{version}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing stream definition (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>version</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the stream</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/manifest/timelog1/1' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-manifest-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-history">41.7.7. Get Deployment History</h4>
<div class="paragraph">
<p>Get the stream&#8217;s deployment history.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/deployments/history/timelog1 HTTP/1.1
Host: localhost:9393
Content-Type: application/json</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/history/timelog1' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 162
Content-Type: application/json;charset=UTF-8

[ {
  "name" : null,
  "version" : 0,
  "info" : null,
  "pkg" : null,
  "configValues" : {
    "raw" : null
  },
  "manifest" : null,
  "platformName" : null
} ]</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-stream-deployment-platform-list">41.7.8. Get Deployment Platforms</h4>
<div class="paragraph">
<p>Retrieve a list of supported deployment platforms.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-platform-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-definitions-deployment-history-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /streams/deployments/platform/list HTTP/1.1
Host: localhost:9393
Content-Type: application/json</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/streams/deployments/platform/list' -i -X GET \
    -H 'Content-Type: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-definitions-deployment-platform-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 106
Content-Type: application/json;charset=UTF-8

[ {
  "id" : null,
  "name" : "default",
  "type" : "local",
  "description" : null,
  "options" : [ ]
} ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-definitions">41.8. Task Definitions</h3>
<div class="paragraph">
<p>The task definitions endpoint provides information about the task definitions that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-definitions-creating">Creating a New Task Definition</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definitions-list">List All Task Definitions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-definition-detail">Retrieve Task Definition Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition">Delete Task Definition</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definitions-creating">41.8.1. Creating a New Task Definition</h4>
<div class="paragraph">
<p>The task definition endpoint lets you create a new task definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-creating-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /tasks/definitions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=my-task&amp;definition=timestamp+--format%3D%27YYYY+MM+DD%27</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created task definition</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>definition</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The definition for the task, using Data Flow DSL</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions' -i -X POST \
    -d 'name=my-task&amp;definition=timestamp+--format%3D%27YYYY+MM+DD%27'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-creating-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 255

{
  "name" : "my-task",
  "dslText" : "timestamp --format='YYYY MM DD'",
  "composed" : false,
  "lastTaskExecution" : null,
  "status" : "UNKNOWN",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions/my-task"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definitions-list">41.8.2. List All Task Definitions</h4>
<div class="paragraph">
<p>The task definition endpoint lets you get all task definitions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/definitions?page=0&amp;size=10&amp;sort=taskName%2CASC&amp;search=&amp;search= HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The search string performed on the name (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sort</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sort on the list (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions?page=0&amp;size=10&amp;sort=taskName%2CASC&amp;search=&amp;search=' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 594
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "taskDefinitionResourceList" : [ {
      "name" : "my-task",
      "dslText" : "timestamp --format='YYYY MM DD'",
      "composed" : false,
      "lastTaskExecution" : null,
      "status" : "UNKNOWN",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/definitions/my-task"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions?page=0&amp;size=10&amp;sort=taskName,asc"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-definition-detail">41.8.3. Retrieve Task Definition Detail</h4>
<div class="paragraph">
<p>The task definition endpoint lets you get a single task definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-definitions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/definitions/my-task HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/definitions/{my-task}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my-task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions/my-task' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-definitions-detail-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 255

{
  "name" : "my-task",
  "dslText" : "timestamp --format='YYYY MM DD'",
  "composed" : false,
  "lastTaskExecution" : null,
  "status" : "UNKNOWN",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/definitions/my-task"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-delete-task-definition">41.8.4. Delete Task Definition</h4>
<div class="paragraph">
<p>The task definition endpoint lets you delete a single task definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-delete-task-definition-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-definition-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /tasks/definitions/my-task HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/definitions/{my-task}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>my-task</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/definitions/my-task' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-definition-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-scheduler">41.9. Task Scheduler</h3>
<div class="paragraph">
<p>The task scheduler endpoint provides information about the task schedules that are registered with the Scheduler Implementation.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-schedule-creating">Creating a New Task Schedule</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-schedule-list">List All Schedules</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-schedule-filtered-list">List Filtered Schedules</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-delete-schedule">Delete Task Schedule</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-creating">41.9.1. Creating a New Task Schedule</h4>
<div class="paragraph">
<p>The task schedule endpoint lets you create a new task schedule.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-creating-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /tasks/schedules HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

scheduleName=myschedule&amp;taskDefinitionName=mytaskname&amp;properties=scheduler.cron.expression%3D00+22+17+%3F+*&amp;arguments=--foo%3Dbar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheduleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name for the created schedule</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>taskDefinitionName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the task definition to be scheduled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the properties that are required to schedule and launch the task</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">the command line arguments to be used for launching the task</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules' -i -X POST \
    -d 'scheduleName=myschedule&amp;taskDefinitionName=mytaskname&amp;properties=scheduler.cron.expression%3D00+22+17+%3F+*&amp;arguments=--foo%3Dbar'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-creating-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-list">41.9.2. List All Schedules</h4>
<div class="paragraph">
<p>The task schedules endpoint lets you get all task schedules.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/schedules?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 587

{
  "_embedded" : {
    "scheduleInfoResourceList" : [ {
      "scheduleName" : "FOO",
      "taskDefinitionName" : "BAR",
      "scheduleProperties" : {
        "scheduler.AAA.spring.cloud.scheduler.cron.expression" : "00 41 17 ? * *"
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/schedules/FOO"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/schedules?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-schedule-filtered-list">41.9.3. List Filtered Schedules</h4>
<div class="paragraph">
<p>The task schedules endpoint lets you get all task schedules that have the specified task definition name.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-stream-task-schedule-list-filtered-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/schedules/instances/FOO?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/schedules/instances/{task-definition-name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>task-definition-name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Filter schedules based on the specified task definition (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules/instances/FOO?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-stream-task-schedule-list-filtered-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 599

{
  "_embedded" : {
    "scheduleInfoResourceList" : [ {
      "scheduleName" : "FOO",
      "taskDefinitionName" : "BAR",
      "scheduleProperties" : {
        "scheduler.AAA.spring.cloud.scheduler.cron.expression" : "00 41 17 ? * *"
      },
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/schedules/FOO"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/schedules/instances/FOO?page=0&amp;size=1"
    }
  },
  "page" : {
    "size" : 1,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-delete-schedule">41.9.4. Delete Task Schedule</h4>
<div class="paragraph">
<p>The task schedule endpoint lets you delete a single task schedule.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-delete-task-schedule-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /tasks/schedules/mytestschedule HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/schedules/{scheduleName}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scheduleName</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of an existing schedule (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/schedules/mytestschedule' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-delete-task-schedule-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-validate">41.10. Task Validation</h3>
<div class="paragraph">
<p>The task validation endpoint lets you validate the apps in a task definition.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-validation-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-path-parameters">Path Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-validation-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-request-structure">41.10.1. Request Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/validation/taskC HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-path-parameters">41.10.2. Path Parameters</h4>
<div class="paragraph">
<p>/tasks/validation/{name}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a task definition to be validated (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-example-request">41.10.3. Example Request</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/validation/taskC' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-validation-response-structure">41.10.4. Response Structure</h4>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 122

{
  "appName" : "taskC",
  "dsl" : "timestamp --format='yyyy MM dd'",
  "appStatuses" : {
    "task:taskC" : "valid"
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-task-executions">41.11. Task Executions</h3>
<div class="paragraph">
<p>The task executions endpoint provides information about the task executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-launching">Launching a Task</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list">List All Task Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name">List All Task Executions With a Specified Task Name</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail">Task Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete">Delete Task Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count">Task Execution Current Count</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-launching">41.11.1. Launching a Task</h4>
<div class="paragraph">
<p>Launching a task is done by requesting the creation of a new task execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-launching-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-launching-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">POST /tasks/executions HTTP/1.1
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the task definition to launch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>properties</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application and Deployer properties to use while launching</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>arguments</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Command line arguments to pass to the task</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions' -i -X POST \
    -d 'name=taskA&amp;properties=app.my-task.foo%3Dbar%2Cdeployer.my-task.something-else%3D3&amp;arguments=--server.port%3D8080+--foo%3Dbar'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-launching-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 201 Created
Content-Type: application/json;charset=UTF-8
Content-Length: 1

1</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-list">41.11.2. List All Task Executions</h4>
<div class="paragraph">
<p>The task executions endpoint lets you list all task executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/executions?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 1243
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "taskExecutionResourceList" : [ {
      "executionId" : 2,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-23162255-fa2e-46b5-80d4-523b4e95efbe",
      "taskExecutionStatus" : "UNKNOWN",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/2"
        }
      }
    }, {
      "executionId" : 1,
      "exitCode" : null,
      "taskName" : "taskA",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskA-69e60d36-2d09-4454-9db5-a999e7b34fed",
      "taskExecutionStatus" : "UNKNOWN",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-list-by-name">41.11.3. List All Task Executions With a Specified Task Name</h4>
<div class="paragraph">
<p>The task executions endpoint lets you list task executions with a specified task name.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/executions?name=taskB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the task execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions?name=taskB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-list-by-name-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 758
Content-Type: application/hal+json;charset=UTF-8

{
  "_embedded" : {
    "taskExecutionResourceList" : [ {
      "executionId" : 2,
      "exitCode" : null,
      "taskName" : "taskB",
      "startTime" : null,
      "endTime" : null,
      "exitMessage" : null,
      "arguments" : [ ],
      "jobExecutionIds" : [ ],
      "errorMessage" : null,
      "externalExecutionId" : "taskB-23162255-fa2e-46b5-80d4-523b4e95efbe",
      "taskExecutionStatus" : "UNKNOWN",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/tasks/executions/2"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-detail">41.11.4. Task Execution Detail</h4>
<div class="paragraph">
<p>The task executions endpoint lets you get the details about a task execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/executions/1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing task execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-detail-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 415

{
  "executionId" : 1,
  "exitCode" : null,
  "taskName" : "taskA",
  "startTime" : null,
  "endTime" : null,
  "exitMessage" : null,
  "arguments" : [ ],
  "jobExecutionIds" : [ ],
  "errorMessage" : null,
  "externalExecutionId" : "taskA-69e60d36-2d09-4454-9db5-a999e7b34fed",
  "taskExecutionStatus" : "UNKNOWN",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/tasks/executions/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-delete">41.11.5. Delete Task Execution</h4>
<div class="paragraph">
<p>The task executions endpoint lets you clean up resources used to deploy the task.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The cleanup implementation is platform specific.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-delete-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-delete-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">DELETE /tasks/executions/1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/tasks/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing task execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/1' -i -X DELETE</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-delete-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-task-executions-current-count">41.11.6. Task Execution Current Count</h4>
<div class="paragraph">
<p>The task executions current endpoint lets you retrieve the current number of running executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-task-executions-current-count-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /tasks/executions/current HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/tasks/executions/current' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-task-executions-current-count-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/json;charset=UTF-8
Content-Length: 111

[ {
  "name" : "default",
  "type" : "Local",
  "maximumTaskExecutions" : 20,
  "runningExecutionCount" : 0
} ]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-executions">41.12. Job Executions</h3>
<div class="paragraph">
<p>The job executions endpoint provides information about the job executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list">List All Job Executions</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list">List All Job Executions Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-job-execution-info-only-list-by-name">List All Job Executions With a Specified Job Name</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name">List All Job Executions With a Specified Job Name Without Step Executions Included</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail">Job Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop">Stop Job Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart">Restart Job Execution</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-list">41.12.1. List All Job Executions</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 3381
Content-Type: application/json;charset=UTF-8

{
  "_embedded" : {
    "jobExecutionResourceList" : [ {
      "executionId" : 2,
      "stepExecutionCount" : 0,
      "jobId" : 2,
      "taskExecutionId" : 2,
      "name" : "DOCJOB_1",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "duration" : "00:00:00",
      "jobExecution" : {
        "id" : 2,
        "version" : 1,
        "jobParameters" : {
          "parameters" : { },
          "empty" : true
        },
        "jobInstance" : {
          "id" : 2,
          "version" : null,
          "jobName" : "DOCJOB_1",
          "instanceId" : 2
        },
        "stepExecutions" : [ ],
        "status" : "STOPPED",
        "startTime" : "2019-05-17T16:19:26.205+0000",
        "createTime" : "2019-05-17T16:19:26.202+0000",
        "endTime" : null,
        "lastUpdated" : "2019-05-17T16:19:26.205+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : "",
          "running" : true
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "running" : true,
        "jobId" : 2,
        "stopping" : false,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : true,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/2"
        }
      }
    }, {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "duration" : "00:00:00",
      "jobExecution" : {
        "id" : 1,
        "version" : 2,
        "jobParameters" : {
          "parameters" : { },
          "empty" : true
        },
        "jobInstance" : {
          "id" : 1,
          "version" : null,
          "jobName" : "DOCJOB",
          "instanceId" : 1
        },
        "stepExecutions" : [ ],
        "status" : "STOPPING",
        "startTime" : "2019-05-17T16:19:26.192+0000",
        "createTime" : "2019-05-17T16:19:26.183+0000",
        "endTime" : null,
        "lastUpdated" : "2019-05-17T16:19:26.498+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : "",
          "running" : true
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "running" : true,
        "jobId" : 1,
        "stopping" : true,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : false,
      "timeZone" : "UTC",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-list">41.12.2. List All Job Executions Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions without step executions included.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-job-execution-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/thinexecutions?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-job-execution-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 1605
Content-Type: application/json;charset=UTF-8

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 2,
      "stepExecutionCount" : 0,
      "jobId" : 2,
      "taskExecutionId" : 2,
      "instanceId" : 2,
      "name" : "DOCJOB_1",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "startDateTime" : "2019-05-17T16:19:26.205+0000",
      "duration" : "00:00:00",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : true,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : true,
      "timeZone" : "UTC",
      "status" : "STOPPED",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/thinexecutions/2"
        }
      }
    }, {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "startDateTime" : "2019-05-17T16:19:26.192+0000",
      "duration" : "00:00:00",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : false,
      "stoppable" : true,
      "defined" : false,
      "timeZone" : "UTC",
      "status" : "STARTED",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/thinexecutions/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 2,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-job-execution-info-only-list-by-name">41.12.3. List All Job Executions With a Specified Job Name</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-list-by-name-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 1825
Content-Type: application/json;charset=UTF-8

{
  "_embedded" : {
    "jobExecutionResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "duration" : "00:00:00",
      "jobExecution" : {
        "id" : 1,
        "version" : 2,
        "jobParameters" : {
          "parameters" : { },
          "empty" : true
        },
        "jobInstance" : {
          "id" : 1,
          "version" : null,
          "jobName" : "DOCJOB",
          "instanceId" : 1
        },
        "stepExecutions" : [ ],
        "status" : "STOPPING",
        "startTime" : "2019-05-17T16:19:26.192+0000",
        "createTime" : "2019-05-17T16:19:26.183+0000",
        "endTime" : null,
        "lastUpdated" : "2019-05-17T16:19:26.498+0000",
        "exitStatus" : {
          "exitCode" : "UNKNOWN",
          "exitDescription" : "",
          "running" : true
        },
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "failureExceptions" : [ ],
        "jobConfigurationName" : null,
        "running" : true,
        "jobId" : 1,
        "stopping" : true,
        "allFailureExceptions" : [ ]
      },
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : false,
      "timeZone" : "UTC",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-thin-job-execution-info-only-list-by-name">41.12.4. List All Job Executions With a Specified Job Name Without Step Executions Included</h4>
<div class="paragraph">
<p>The job executions endpoint lets you list all job executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-thin-list-by-name-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/thinexecutions?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job execution</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/thinexecutions?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-thin-list-by-name-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 943
Content-Type: application/json;charset=UTF-8

{
  "_embedded" : {
    "jobExecutionThinResourceList" : [ {
      "executionId" : 1,
      "stepExecutionCount" : 0,
      "jobId" : 1,
      "taskExecutionId" : 1,
      "instanceId" : 1,
      "name" : "DOCJOB",
      "startDate" : "2019-05-17",
      "startTime" : "16:19:26",
      "startDateTime" : "2019-05-17T16:19:26.192+0000",
      "duration" : "00:00:00",
      "jobParameters" : { },
      "jobParametersString" : "",
      "restartable" : false,
      "abandonable" : true,
      "stoppable" : false,
      "defined" : false,
      "timeZone" : "UTC",
      "status" : "STOPPING",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/thinexecutions/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/thinexecutions?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-detail">41.12.5. Job Execution Detail</h4>
<div class="paragraph">
<p>The job executions endpoint lets you get the details about a job execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions/2 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameter for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/2' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-detail-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 1323
Content-Type: application/json;charset=UTF-8

{
  "executionId" : 2,
  "stepExecutionCount" : 0,
  "jobId" : 2,
  "taskExecutionId" : 2,
  "name" : "DOCJOB_1",
  "startDate" : "2019-05-17",
  "startTime" : "16:19:26",
  "duration" : "00:00:00",
  "jobExecution" : {
    "id" : 2,
    "version" : 1,
    "jobParameters" : {
      "parameters" : { },
      "empty" : true
    },
    "jobInstance" : {
      "id" : 2,
      "version" : 0,
      "jobName" : "DOCJOB_1",
      "instanceId" : 2
    },
    "stepExecutions" : [ ],
    "status" : "STOPPED",
    "startTime" : "2019-05-17T16:19:26.205+0000",
    "createTime" : "2019-05-17T16:19:26.202+0000",
    "endTime" : null,
    "lastUpdated" : "2019-05-17T16:19:26.205+0000",
    "exitStatus" : {
      "exitCode" : "UNKNOWN",
      "exitDescription" : "",
      "running" : true
    },
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "failureExceptions" : [ ],
    "jobConfigurationName" : null,
    "running" : true,
    "jobId" : 2,
    "stopping" : false,
    "allFailureExceptions" : [ ]
  },
  "jobParameters" : { },
  "jobParametersString" : "",
  "restartable" : true,
  "abandonable" : true,
  "stoppable" : false,
  "defined" : true,
  "timeZone" : "UTC",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/2"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-stop">41.12.6. Stop Job Execution</h4>
<div class="paragraph">
<p>The job executions endpoint lets you stop a job execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-stop-request-structure">Request structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-request-parameters">Request parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-example-request">Example request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-stop-response-structure">Response structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-request-structure">Request structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">PUT /jobs/executions/1 HTTP/1.1
Accept: application/json
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

stop=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-request-parameters">Request parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stop</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends signal to stop the job if set to true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-example-request">Example request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1' -i -X PUT \
    -H 'Accept: application/json' \
    -d 'stop=true'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-stop-response-structure">Response structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-executions-restart">41.12.7. Restart Job Execution</h4>
<div class="paragraph">
<p>The job executions endpoint lets you restart a job execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-executions-restart-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-executions-restart-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">PUT /jobs/executions/2 HTTP/1.1
Accept: application/json
Host: localhost:9393
Content-Type: application/x-www-form-urlencoded

restart=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>restart</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Sends signal to restart the job if set to true</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/2' -i -X PUT \
    -H 'Accept: application/json' \
    -d 'restart=true'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-executions-restart-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-instances">41.13. Job Instances</h3>
<div class="paragraph">
<p>The job instances endpoint provides information about the job instances that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-list">List All Job Instances</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail">Job Instance Detail</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-instances-list">41.13.1. List All Job Instances</h4>
<div class="paragraph">
<p>The job instances endpoint lets you list all job instances.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/instances?name=DOCJOB&amp;page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name associated with the job instance</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/instances?name=DOCJOB&amp;page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 2014

{
  "_embedded" : {
    "jobInstanceResourceList" : [ {
      "jobName" : "DOCJOB",
      "jobInstanceId" : 1,
      "jobExecutions" : [ {
        "executionId" : 1,
        "stepExecutionCount" : 0,
        "jobId" : 1,
        "taskExecutionId" : 1,
        "name" : "DOCJOB",
        "startDate" : "2019-05-17",
        "startTime" : "16:19:11",
        "duration" : "00:00:00",
        "jobExecution" : {
          "id" : 1,
          "version" : 1,
          "jobParameters" : {
            "parameters" : { },
            "empty" : true
          },
          "jobInstance" : {
            "id" : 1,
            "version" : 0,
            "jobName" : "DOCJOB",
            "instanceId" : 1
          },
          "stepExecutions" : [ ],
          "status" : "STARTED",
          "startTime" : "2019-05-17T16:19:11.996+0000",
          "createTime" : "2019-05-17T16:19:11.987+0000",
          "endTime" : null,
          "lastUpdated" : "2019-05-17T16:19:11.996+0000",
          "exitStatus" : {
            "exitCode" : "UNKNOWN",
            "exitDescription" : "",
            "running" : true
          },
          "executionContext" : {
            "dirty" : false,
            "empty" : true,
            "values" : [ ]
          },
          "failureExceptions" : [ ],
          "jobConfigurationName" : null,
          "running" : true,
          "jobId" : 1,
          "stopping" : false,
          "allFailureExceptions" : [ ]
        },
        "jobParameters" : { },
        "jobParametersString" : "",
        "restartable" : false,
        "abandonable" : false,
        "stoppable" : true,
        "defined" : false,
        "timeZone" : "UTC"
      } ],
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/instances/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/instances?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-instances-detail">41.13.2. Job Instance Detail</h4>
<div class="paragraph">
<p>The job instances endpoint lets you list all job instances.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-instances-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-instances-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/instances/1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/instances/{id}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job instance (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/instances/1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-instances-detail-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 1499

{
  "jobName" : "DOCJOB",
  "jobInstanceId" : 1,
  "jobExecutions" : [ {
    "executionId" : 1,
    "stepExecutionCount" : 0,
    "jobId" : 1,
    "taskExecutionId" : 1,
    "name" : "DOCJOB",
    "startDate" : "2019-05-17",
    "startTime" : "16:19:11",
    "duration" : "00:00:00",
    "jobExecution" : {
      "id" : 1,
      "version" : 1,
      "jobParameters" : {
        "parameters" : { },
        "empty" : true
      },
      "jobInstance" : {
        "id" : 1,
        "version" : 0,
        "jobName" : "DOCJOB",
        "instanceId" : 1
      },
      "stepExecutions" : [ ],
      "status" : "STARTED",
      "startTime" : "2019-05-17T16:19:11.996+0000",
      "createTime" : "2019-05-17T16:19:11.987+0000",
      "endTime" : null,
      "lastUpdated" : "2019-05-17T16:19:11.996+0000",
      "exitStatus" : {
        "exitCode" : "UNKNOWN",
        "exitDescription" : "",
        "running" : true
      },
      "executionContext" : {
        "dirty" : false,
        "empty" : true,
        "values" : [ ]
      },
      "failureExceptions" : [ ],
      "jobConfigurationName" : null,
      "running" : true,
      "jobId" : 1,
      "stopping" : false,
      "allFailureExceptions" : [ ]
    },
    "jobParameters" : { },
    "jobParametersString" : "",
    "restartable" : false,
    "abandonable" : false,
    "stoppable" : true,
    "defined" : false,
    "timeZone" : "UTC"
  } ],
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/instances/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-job-step-executions">41.14. Job Step Executions</h3>
<div class="paragraph">
<p>The job step executions endpoint provides information about the job step executions that are registered with the Spring Cloud Data Flow server.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-executions-list">List All Step Executions For a Job Execution</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail">Job Step Execution Detail</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress">Job Step Execution Progress</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-executions-list">41.14.1. List All Step Executions For a Job Execution</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you list all job step executions.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-executions-list-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions/1/steps?page=0&amp;size=10 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-request-parameters">Request Parameters</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>page</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The zero-based page number (optional)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>size</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The requested page size (optional)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps?page=0&amp;size=10' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-executions-list-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 1677

{
  "_embedded" : {
    "stepExecutionResourceList" : [ {
      "jobExecutionId" : 1,
      "stepExecution" : {
        "id" : 1,
        "version" : 0,
        "stepName" : "DOCJOB_STEP",
        "status" : "STARTING",
        "readCount" : 0,
        "writeCount" : 0,
        "commitCount" : 0,
        "rollbackCount" : 0,
        "readSkipCount" : 0,
        "processSkipCount" : 0,
        "writeSkipCount" : 0,
        "startTime" : "2019-05-17T16:18:28.913+0000",
        "endTime" : null,
        "lastUpdated" : "2019-05-17T16:18:28.913+0000",
        "executionContext" : {
          "dirty" : false,
          "empty" : true,
          "values" : [ ]
        },
        "exitStatus" : {
          "exitCode" : "EXECUTING",
          "exitDescription" : "",
          "running" : true
        },
        "terminateOnly" : false,
        "filterCount" : 0,
        "failureExceptions" : [ ],
        "jobParameters" : {
          "parameters" : { },
          "empty" : true
        },
        "jobExecutionId" : 1,
        "skipCount" : 0,
        "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
      },
      "stepType" : "",
      "_links" : {
        "self" : {
          "href" : "http://localhost:9393/jobs/executions/1/steps/1"
        }
      }
    } ]
  },
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps?page=0&amp;size=10"
    }
  },
  "page" : {
    "size" : 10,
    "totalElements" : 1,
    "totalPages" : 1,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-execution-detail">41.14.2. Job Step Execution Detail</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you get details about a job step execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-detail-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions/1/steps/1 HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}/steps/{stepid}</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stepid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing step execution for a specific job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps/1' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-detail-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 1219
Content-Type: application/hal+json;charset=UTF-8

{
  "jobExecutionId" : 1,
  "stepExecution" : {
    "id" : 1,
    "version" : 0,
    "stepName" : "DOCJOB_STEP",
    "status" : "STARTING",
    "readCount" : 0,
    "writeCount" : 0,
    "commitCount" : 0,
    "rollbackCount" : 0,
    "readSkipCount" : 0,
    "processSkipCount" : 0,
    "writeSkipCount" : 0,
    "startTime" : "2019-05-17T16:18:28.913+0000",
    "endTime" : null,
    "lastUpdated" : "2019-05-17T16:18:28.913+0000",
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "exitStatus" : {
      "exitCode" : "EXECUTING",
      "exitDescription" : "",
      "running" : true
    },
    "terminateOnly" : false,
    "filterCount" : 0,
    "failureExceptions" : [ ],
    "jobParameters" : {
      "parameters" : { },
      "empty" : true
    },
    "jobExecutionId" : 1,
    "skipCount" : 0,
    "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
  },
  "stepType" : "",
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-job-step-execution-progress">41.14.3. Job Step Execution Progress</h4>
<div class="paragraph">
<p>The job step executions endpoint lets you get details about the progress of a job step execution.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-request-parameters">Request Parameters</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-job-step-execution-progress-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /jobs/executions/1/steps/1/progress HTTP/1.1
Host: localhost:9393</code></pre>
</div>
</div>
<div class="paragraph">
<p>/jobs/executions/{id}/steps/{stepid}/progress</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing job execution (required)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>stepid</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The id of an existing step execution for a specific job execution (required)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-request-parameters">Request Parameters</h5>
<div class="paragraph">
<p>There are no request parameters for this endpoint.</p>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/jobs/executions/1/steps/1/progress' -i -X GET</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-job-step-execution-progress-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Type: application/hal+json;charset=UTF-8
Content-Length: 2722

{
  "stepExecution" : {
    "id" : 1,
    "version" : 0,
    "stepName" : "DOCJOB_STEP",
    "status" : "STARTING",
    "readCount" : 0,
    "writeCount" : 0,
    "commitCount" : 0,
    "rollbackCount" : 0,
    "readSkipCount" : 0,
    "processSkipCount" : 0,
    "writeSkipCount" : 0,
    "startTime" : "2019-05-17T16:18:28.913+0000",
    "endTime" : null,
    "lastUpdated" : "2019-05-17T16:18:28.913+0000",
    "executionContext" : {
      "dirty" : false,
      "empty" : true,
      "values" : [ ]
    },
    "exitStatus" : {
      "exitCode" : "EXECUTING",
      "exitDescription" : "",
      "running" : true
    },
    "terminateOnly" : false,
    "filterCount" : 0,
    "failureExceptions" : [ ],
    "jobParameters" : {
      "parameters" : { },
      "empty" : true
    },
    "jobExecutionId" : 1,
    "skipCount" : 0,
    "summary" : "StepExecution: id=1, version=0, name=DOCJOB_STEP, status=STARTING, exitStatus=EXECUTING, readCount=0, filterCount=0, writeCount=0 readSkipCount=0, writeSkipCount=0, processSkipCount=0, commitCount=0, rollbackCount=0"
  },
  "stepExecutionHistory" : {
    "stepName" : "DOCJOB_STEP",
    "count" : 0,
    "commitCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "rollbackCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "readCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "writeCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "filterCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "readSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "writeSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "processSkipCount" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "duration" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    },
    "durationPerRead" : {
      "count" : 0,
      "min" : 0.0,
      "max" : 0.0,
      "standardDeviation" : 0.0,
      "mean" : 0.0
    }
  },
  "percentageComplete" : 0.5,
  "finished" : false,
  "duration" : 322.0,
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/jobs/executions/1/steps/1"
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="api-guide-resources-runtime-information-applications">41.15. Runtime Information about Applications</h3>
<div class="paragraph">
<p>It is possible to get information about running apps known to the system, either globally or individually.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all">Listing All Applications at Runtime</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app">Querying All Instances of a Single App</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app">Querying a Single Instance of a Single App</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-listing-all">41.15.1. Listing All Applications at Runtime</h4>
<div class="paragraph">
<p>To retrieve information about all instances of all apps, query the <code>/runtime/apps</code> endpoint by using <code>GET</code>.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-listing-all-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-listing-all-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 209
Content-Type: application/json;charset=UTF-8

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app">41.15.2. Querying All Instances of a Single App</h4>
<div class="paragraph">
<p>To retrieve information about all instances of a particular app, query the <code>/runtime/apps/&lt;appId&gt;/instances</code> endpoint by using <code>GET</code>.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-all-instances-single-app-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 209
Content-Type: application/json;charset=UTF-8

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app">41.15.3. Querying a Single Instance of a Single App</h4>
<div class="paragraph">
<p>Finally, to retrieve information about a particular instance of a particular app, query the <code>/runtime/apps/&lt;appId&gt;/instances/&lt;instanceId&gt;</code> endpoint by using <code>GET</code>.
The following topics provide more detail:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure">Request Structure</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request">Example Request</a></p>
</li>
<li>
<p><a href="#api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure">Response Structure</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-request-structure">Request Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">GET /runtime/apps HTTP/1.1
Accept: application/json
Host: localhost:9393</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-example-request">Example Request</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ curl 'http://localhost:9393/runtime/apps' -i -X GET \
    -H 'Accept: application/json'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="api-guide-resources-runtime-information-applications-querying-single-instance-single-app-response-structure">Response Structure</h5>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight nowrap"><code class="language-http hljs" data-lang="http">HTTP/1.1 200 OK
Content-Length: 209
Content-Type: application/json;charset=UTF-8

{
  "_links" : {
    "self" : {
      "href" : "http://localhost:9393/runtime/apps?page=0&amp;size=20"
    }
  },
  "page" : {
    "size" : 20,
    "totalElements" : 0,
    "totalPages" : 0,
    "number" : 0
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<h1 id="appendix" class="sect0">Appendices</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Having trouble with Spring Cloud Data Flow, We&#8217;d like to help!</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Ask a question - we monitor <a href="https://stackoverflow.com">stackoverflow.com</a> for questions
tagged with <a href="https://stackoverflow.com/tags/spring-cloud-dataflow"><code>spring-cloud-dataflow</code></a>.</p>
</li>
<li>
<p>Report bugs with Spring Cloud Data Flow at <a href="https://github.com/spring-cloud/spring-cloud-dataflow/issues" class="bare">github.com/spring-cloud/spring-cloud-dataflow/issues</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="dataflow-template">Appendix A: Data Flow Template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As described in the previous chapter, Spring Cloud Data Flow&#8217;s functionality is completely exposed through REST endpoints.
While you can use those endpoints directly, Spring Cloud Data Flow also provides a Java-based API, which makes using those REST endpoints even easier.</p>
</div>
<div class="paragraph">
<p>The central entry point is the <code>DataFlowTemplate</code> class in the <code>org.springframework.cloud.dataflow.rest.client</code> package.</p>
</div>
<div class="paragraph">
<p>This class implements the <code>DataFlowOperations</code> interface and delegates to the following sub-templates that provide the specific functionality for each feature-set:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Interface</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>StreamOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for stream operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>FieldValueCounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for field value counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AggregateCounterOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for aggregate counter operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>TaskOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for task operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>JobOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for job operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>AppRegistryOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for app registry operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>CompletionOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST client for completion operations</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>RuntimeOperations</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REST Client for runtime operations</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When the <code>DataFlowTemplate</code> is being initialized, the sub-templates can be discovered through the REST relations, which are provided by HATEOAS.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnote_1" title="View footnote.">1</a>]</sup></p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
If a resource cannot be resolved, the respective sub-template results
in NULL. A common cause is that Spring Cloud Data Flow offers for specific
sets of features to be enabled/disabled when launching. For more information, see <code><a href="#configuration-local-enable-disable-specific-features">local</a></code>, <code><a href="#configuration-cloudfoundry-enable-disable-specific-features">Cloud Foundry</a></code>, <code><a href="#configuration-kubernetes-enable-disable-specific-features">Kubernetes</a></code>.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_using_the_data_flow_template">A.1. Using the Data Flow Template</h3>
<div class="paragraph">
<p>When you use the Data Flow Template, the only needed Data Flow dependency is the
Spring Cloud Data Flow Rest Client, as shown in the following Maven snippet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
  &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;
  &lt;artifactId&gt;spring-cloud-dataflow-rest-client&lt;/artifactId&gt;
  &lt;version&gt;2.1.0.RELEASE&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>With that dependency, you get the <code>DataFlowTemplate</code> class as well as all the dependencies needed to make calls to a Spring Cloud Data Flow server.</p>
</div>
<div class="paragraph">
<p>When instantiating the <code>DataFlowTemplate</code>, you also pass in a <code>RestTemplate</code>.
Please be aware that the needed <code>RestTemplate</code> requires some additional configuration to be valid in the context of the <code>DataFlowTemplate</code>.
When declaring a <code>RestTemplate</code> as a bean, the following configuration suffices:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">  @Bean
  public static RestTemplate restTemplate() {
    RestTemplate restTemplate = new RestTemplate();
    restTemplate.setErrorHandler(new VndErrorResponseErrorHandler(restTemplate.getMessageConverters()));
    for(HttpMessageConverter&lt;?&gt; converter : restTemplate.getMessageConverters()) {
      if (converter instanceof MappingJackson2HttpMessageConverter) {
        final MappingJackson2HttpMessageConverter jacksonConverter =
            (MappingJackson2HttpMessageConverter) converter;
        jacksonConverter.getObjectMapper()
            .registerModule(new Jackson2HalModule())
            .addMixIn(JobExecution.class, JobExecutionJacksonMixIn.class)
            .addMixIn(JobParameters.class, JobParametersJacksonMixIn.class)
            .addMixIn(JobParameter.class, JobParameterJacksonMixIn.class)
            .addMixIn(JobInstance.class, JobInstanceJacksonMixIn.class)
            .addMixIn(ExitStatus.class, ExitStatusJacksonMixIn.class)
            .addMixIn(StepExecution.class, StepExecutionJacksonMixIn.class)
            .addMixIn(ExecutionContext.class, ExecutionContextJacksonMixIn.class)
            .addMixIn(StepExecutionHistory.class, StepExecutionHistoryJacksonMixIn.class);
      }
    }
    return restTemplate;
  }</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can also get a pre-configured <code>RestTemplate</code> using
<code>DataFlowTemplate.getDefaultDataflowRestTemplate();</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now you can instantiate the <code>DataFlowTemplate</code> with the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">DataFlowTemplate dataFlowTemplate = new DataFlowTemplate(
    new URI("http://localhost:9393/"), restTemplate);         <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The <code>URI</code> points to the ROOT of your Spring Cloud Data Flow Server.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Depending on your requirements, you can now make calls to the server. For instance,
if you want to get a list of currently available applications you can run the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">PagedResources&lt;AppRegistrationResource&gt; apps = dataFlowTemplate.appRegistryOperations().list();

System.out.println(String.format("Retrieved %s application(s)",
    apps.getContent().size()));

for (AppRegistrationResource app : apps.getContent()) {
  System.out.println(String.format("App Name: %s, App Type: %s, App URI: %s",
    app.getName(),
    app.getType(),
    app.getUri()));
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_data_flow_template_and_security">A.2. Data Flow Template and Security</h3>
<div class="paragraph">
<p>When using the <code>DataFlowTemplate</code>, you can also provide all the security-related
options similar to as if you were using the <em>Data Flow Shell</em>. In fact the <em>Data Flow Shell</em>
uses the <code>DataFlowTemplate</code> for all its operations.</p>
</div>
<div class="paragraph">
<p>In order to get started, we provide a <code>HttpClientConfigurer</code> that uses the builder
pattern to set the various security-related options:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">	HttpClientConfigurer
		.create(targetUri)                                             <i class="conum" data-value="1"></i><b>(1)</b>
		.basicAuthCredentials(username, password)                      <i class="conum" data-value="2"></i><b>(2)</b>
		.skipTlsCertificateVerification()                              <i class="conum" data-value="3"></i><b>(3)</b>
		.withProxyCredentials(proxyUri, proxyUsername, proxyPassword)  <i class="conum" data-value="4"></i><b>(4)</b>
		.addInterceptor(interceptor)                                   <i class="conum" data-value="5"></i><b>(5)</b>
		.buildClientHttpRequestFactory()                               <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Creates a HttpClientConfigurer with the provided target URI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Sets the credentials for basic authentication (Using OAuth2 Password Grant)</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Skip SSL certificate verification (<strong>Use for DEVELOPMENT ONLY!</strong>)</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Configure any Proxy settings</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Add a custom interceptor e.g. to set the OAuth2 Authorization header. This allows
you to pass an OAuth2 Access Token instead of username/password credentials.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Builds the <code>ClientHttpRequestFactory</code> that can be set on the <code>RestTemplate</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the <code>HttpClientConfigurer</code> is configured, its <code>buildClientHttpRequestFactory</code>
can be used to build the <code>ClientHttpRequestFactory</code> and you would set the corresponding
property on the <code>RestTemplate</code>. You can then instantiate the actual <code>DataFlowTemplate</code>
using that <code>RestTemplate</code>.</p>
</div>
<div class="paragraph">
<p>In order to configure <em>Basic Authentication</em>, the following setup is required:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">	RestTemplate restTemplate = DataFlowTemplate.getDefaultDataflowRestTemplate();
	HttpClientConfigurer httpClientConfigurer = HttpClientConfigurer.create("http://localhost:9393");

	httpClientConfigurer.basicAuthCredentials("my_username", "my_password");
	restTemplate.setRequestFactory(httpClientConfigurer.buildClientHttpRequestFactory());

	DataFlowTemplate dataFlowTemplate = new DataFlowTemplate("http://localhost:9393", restTemplate);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can find a sample application as part of the
<a href="https://github.com/spring-cloud/spring-cloud-dataflow-samples/tree/master/dataflow-template-example">spring-cloud-dataflow-samples</a>
on GitHub.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="howto">Appendix B: &#8220;How-to&#8221; guides</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section provides answers to some common &#8216;how do I do that&#8230;&#8203;&#8217; type of questions that often arise when using Spring Cloud Data Flow.</p>
</div>
<div class="paragraph">
<p>If you are having a specific problem that we do not cover here, you might want to check out <a href="https://stackoverflow.com/tags/spring-cloud-dataflow">stackoverflow.com</a> to see if someone has already provided an answer.
That is also a great place to ask new questions (please use the <code>spring-cloud-dataflow</code> tag).</p>
</div>
<div class="paragraph">
<p>We are also more than happy to extend this section. If you want to add a &#8220;how-to&#8221;, you can send us a <a href="https://github.com/spring-cloud/spring-cloud-dataflow">pull request</a>.</p>
</div>
<div class="sect2">
<h3 id="_configure_maven_properties">B.1. Configure Maven Properties</h3>
<div class="paragraph">
<p>You can set the maven properties such as local maven repository location, remote maven repositories, authentication credentials, and proxy server properties through command line properties when starting the Data Flow server.
Alternatively, you can set the properites using <code>SPRING_APPLICATION_JSON</code> environment property for the Data Flow server.</p>
</div>
<div class="paragraph">
<p>The remote maven repositories need to be configured explicitly if the apps are resolved using maven repository, except for a <code>local</code> Data Flow server.
The other Data Flow server implementations (that use maven resources for app artifacts resolution) have no default value for remote repositories.
The <code>local</code> server has <code><a href="https://repo.spring.io/libs-snapshot" class="bare">repo.spring.io/libs-snapshot</a></code> as the default remote repository.</p>
</div>
<div class="paragraph">
<p>To pass the properties as commandline options, run the server with a command similar to the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">$ java -jar &lt;dataflow-server&gt;.jar --maven.localRepository=mylocal
--maven.remote-repositories.repo1.url=https://repo1
--maven.remote-repositories.repo1.auth.username=repo1user
--maven.remote-repositories.repo1.auth.password=repo1pass
--maven.remote-repositories.repo2.url=https://repo2 --maven.proxy.host=proxyhost
--maven.proxy.port=9018 --maven.proxy.auth.username=proxyuser
--maven.proxy.auth.password=proxypass</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>SPRING_APPLICATION_JSON</code> environment property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">export SPRING_APPLICATION_JSON='{ "maven": { "local-repository": "local","remote-repositories": { "repo1": { "url": "https://repo1", "auth": { "username": "repo1user", "password": "repo1pass" } },
"repo2": { "url": "https://repo2" } }, "proxy": { "host": "proxyhost", "port": 9018, "auth": { "username": "proxyuser", "password": "proxypass" } } } }'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here is the same content in nicely formatted JSON:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">SPRING_APPLICATION_JSON='{
  "maven": {
    "local-repository": "local",
    "remote-repositories": {
      "repo1": {
        "url": "https://repo1",
        "auth": {
          "username": "repo1user",
          "password": "repo1pass"
        }
      },
      "repo2": {
        "url": "https://repo2"
      }
    },
    "proxy": {
      "host": "proxyhost",
      "port": 9018,
      "auth": {
        "username": "proxyuser",
        "password": "proxypass"
      }
    }
  }
}'</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Depending on the Spring Cloud Data Flow server implementation, you may have to pass the environment properties by using the platform specific environment-setting capabilities. For instance, in Cloud Foundry, you would pass them as <code>cf set-env SPRING_APPLICATION_JSON</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_troubleshooting">B.2. Troubleshooting</h3>
<div class="paragraph">
<p>This section covers how to troubleshoot Spring Cloud Data Flow on your platform of choice. Please visit the Troubleshooting sections of the microsite for <a href="https://dataflow.spring.io/docs/stream-developer-guides/troubleshooting/">Stream</a> and <a href="https://dataflow.spring.io/docs/batch-developer-guides/troubleshooting/">Batch</a> processing.</p>
</div>
</div>
<div class="sect2">
<h3 id="faqs">B.3. Frequently Asked Questions</h3>
<div class="paragraph">
<p>In this section, we review the frequently asked questions in Spring Cloud Data Flow.
Please see the <a href="https://dataflow.spring.io/docs/resources/faq/">Frequently Asked Questions</a> section of the microsite for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="building">Appendix C: Building</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To build the source, you need to install JDK 1.8.</p>
</div>
<div class="paragraph">
<p>The build uses the Maven wrapper so that you do not have to install a specific version of Maven.</p>
</div>
<div class="paragraph">
<p>The main build command is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw clean install</pre>
</div>
</div>
<div class="paragraph">
<p>If you like, you can add '-DskipTests' to avoid running the tests.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can also install Maven (&gt;=3.3.3) yourself and run the <code>mvn</code> command in place of <code>./mvnw</code> in the examples below.
If you do that, you also might need to add <code>-P spring</code> if your local Maven settings do not contain repository declarations for Spring pre-release artifacts.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You might need to increase the amount of memory available to Maven by setting a <code>MAVEN_OPTS</code> environment variable with a value similar to <code>-Xmx512m -XX:MaxPermSize=128m</code>.
We try to cover this in the <code>.mvn</code> configuration, so, if you find you have to do it to make a build succeed, please raise a ticket to get the settings added to source control.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_documentation">C.1. Documentation</h3>
<div class="paragraph">
<p>There is a <code>full</code> profile that generates documentation. You can build only the documentation by using the following command:</p>
</div>
<div class="paragraph">
<p><code>$ ./mvnw clean package -DskipTests -P full -pl spring-cloud-dataflow-docs -am</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_the_code">C.2. Working with the Code</h3>
<div class="paragraph">
<p>If you do not have an IDE preference, we recommend that you use <a href="https://spring.io/tools">Spring Tools Suite</a> or <a href="https://www.eclipse.org">Eclipse</a> when working with the code.
We use the <a href="https://www.eclipse.org/m2e/">m2eclipse</a> Eclipse plugin for Maven support.
Other IDEs and tools generally also work without issue.</p>
</div>
<div class="sect3">
<h4 id="_importing_into_eclipse_with_m2eclipse">C.2.1. Importing into Eclipse with m2eclipse</h4>
<div class="paragraph">
<p>We recommend the <a href="https://www.eclipse.org/m2e/">m2eclipe</a> eclipse plugin when working with Eclipse.
If you do not already have m2eclipse installed, it is available from the Eclipse marketplace.</p>
</div>
<div class="paragraph">
<p>Unfortunately, m2e does not yet support Maven 3.3.
Consequently, once the projects are imported into Eclipse, you also need to tell m2eclipse to use the <code>.settings.xml</code> file for the projects.
If you do not do this, you may see many different errors related to the POMs in the projects.
To do so:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open your Eclipse preferences.</p>
</li>
<li>
<p>Expand the Maven preferences.</p>
</li>
<li>
<p>Select User Settings.</p>
</li>
<li>
<p>In the User Settings field, click Browse and navigate to the Spring Cloud project you imported.</p>
</li>
<li>
<p>Select the <code>.settings.xml</code> file in that project.</p>
</li>
<li>
<p>Click Apply.</p>
</li>
<li>
<p>Click OK.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Alternatively, you can copy the repository settings from Spring Cloud&#8217;s <a href="https://github.com/spring-cloud/spring-cloud-build/blob/master/.settings.xml"><code>.settings.xml</code></a> file into your own <code>~/.m2/settings.xml</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_importing_into_eclipse_without_m2eclipse">C.2.2. Importing into Eclipse without m2eclipse</h4>
<div class="paragraph">
<p>If you prefer not to use m2eclipse, you can generate Eclipse project metadata by using the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ ./mvnw eclipse:eclipse</pre>
</div>
</div>
<div class="paragraph">
<p>The generated Eclipse projects can be imported by selecting <code>Import existing projects</code>
from the <code>File</code> menu.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="contributing">Appendix D: Contributing</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Spring Cloud is released under the non-restrictive Apache 2.0 license and follows a very standard Github development process, using Github tracker for issues and merging pull requests into master.
If you want to contribute even something trivial, please do not hesitate, but follow the guidelines below.</p>
</div>
<div class="sect2">
<h3 id="_sign_the_contributor_license_agreement">D.1. Sign the Contributor License Agreement</h3>
<div class="paragraph">
<p>Before we accept a non-trivial patch or pull request, we need you to sign the <a href="https://cla.pivotal.io">contributor&#8217;s agreement</a>.
Signing the contributor&#8217;s agreement does not grant anyone commit rights to the main repository, but it does mean that we can accept your contributions, and you will get an author credit if we do.
Active contributors might be asked to join the core team and be given the ability to merge pull requests.</p>
</div>
</div>
<div class="sect2">
<h3 id="_code_conventions_and_housekeeping">D.2. Code Conventions and Housekeeping</h3>
<div class="paragraph">
<p>None of the following guidelines is essential for a pull request, but they all help your fellow developers understand and work with your code.
They can also be added after the original pull request but before a merge.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Spring Framework code format conventions. If you use Eclipse, you can import formatter settings by using the <code>eclipse-code-formatter.xml</code> file from the <a href="https://github.com/spring-cloud/spring-cloud-build/blob/master/spring-cloud-dependencies-parent/eclipse-code-formatter.xml">Spring Cloud Build</a> project.
If using IntelliJ, you can use the <a href="https://plugins.jetbrains.com/plugin/6546">Eclipse Code Formatter Plugin</a> to import the same file.</p>
</li>
<li>
<p>Make sure all new <code>.java</code> files have a simple Javadoc class comment with at least an  <code>@author</code> tag identifying you, and preferably at least a paragraph describing the class&#8217;s purpose.</p>
</li>
<li>
<p>Add the ASF license header comment to all new <code>.java</code> files (to do so, copy from existing files in the project).</p>
</li>
<li>
<p>Add yourself as an <code>@author</code> to the .java files that you modify substantially (more than cosmetic changes).</p>
</li>
<li>
<p>Add some Javadocs and, if you change the namespace, some XSD doc elements.</p>
</li>
<li>
<p>A few unit tests would help a lot as well. Someone has to do it, and your fellow developers appreciate the effort.</p>
</li>
<li>
<p>If no one else uses your branch, rebase it against the current master (or other target branch in the main project).</p>
</li>
<li>
<p>When writing a commit message, follow <a href="https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html">these conventions</a>.
If you fix an existing issue, add <code>Fixes gh-XXXX</code> (where XXXX is the issue number) at the end of the commit message.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnote_1">
<a href="#_footnoteref_1">1</a>. HATEOAS stands for Hypermedia as the Engine of Application State
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2019-05-17 16:21:15 UTC
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>