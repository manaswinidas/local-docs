<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>2.&nbsp;Splunk Adapter</title><link rel="stylesheet" href="css/manual-multipage.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Spring Integration Splunk Adapter"><link rel="up" href="spring-integration-adapters.html" title="Part&nbsp;II.&nbsp;Integration Adapters"><link rel="prev" href="spring-integration-adapters.html" title="Part&nbsp;II.&nbsp;Integration Adapters"><link rel="next" href="spring-integration-appendices.html" title="Part&nbsp;III.&nbsp;Appendices"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">2.&nbsp;Splunk Adapter</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="spring-integration-adapters.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;II.&nbsp;Integration Adapters</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="spring-integration-appendices.html">Next</a></td></tr></table><hr></div><div class="chapter" title="2.&nbsp;Splunk Adapter"><div class="titlepage"><div><div><h2 class="title"><a name="splunk"></a>2.&nbsp;Splunk Adapter</h2></div></div></div>
	
	<p>
		The Spring Integration Splunk Adapter provides outbound and inbound channel adapters:
	</p>
	<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
			<p>
				<span class="emphasis"><em>
					<a class="link" href="splunk.html#splunk-outbound-channel-adapter" title="2.1&nbsp;Outbound Channel Adapter">Outbound Channel adapter</a>
				</em></span>
			</p>
		</li><li class="listitem">
			<p>
				<span class="emphasis"><em>
					<a class="link" href="splunk.html#splunk-inbound-channel-adapter" title="2.2&nbsp;Inbound Channel Adapter">Inbound Channel Adapter</a>
				</em></span>
			</p>
		</li></ul></div>

	<p>
		To use Spring Integration adapter for Splunk, you have to import the XML namespace. For example, you can
		have following XML:
	</p>
	<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span>
	<span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="hl-attribute">xmlns:int</span>=<span class="hl-value">"http://www.springframework.org/schema/integration"</span>
	<span class="hl-attribute">xmlns:int-splunk</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk"</span>
	<span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk
		http://www.springframework.org/schema/integration/splunk/spring-integration-splunk.xsd
		http://www.springframework.org/schema/integration
		http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="hl-tag">&gt;</span>

<span class="hl-tag">&lt;/beans&gt;</span></pre>

		<p>
			Meanwhile, you have to define your Splunk server information. For example
			you can define server as following:
		</p>
		<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span>
	<span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="hl-attribute">xmlns:int-splunk</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk"</span>
	<span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk
		http://www.springframework.org/schema/integration/splunk/spring-integration-splunk.xsd
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="hl-tag">&gt;</span>
	...
	<span class="hl-tag">&lt;int-splunk:server</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkServer"</span> <span class="hl-attribute">host</span>=<span class="hl-value">"somehost"</span> <span class="hl-attribute">port</span>=<span class="hl-value">"8089"</span>
		<span class="hl-attribute">userName</span>=<span class="hl-value">"user"</span> <span class="hl-attribute">password</span>=<span class="hl-value">"password"</span> <span class="hl-attribute">owner</span>=<span class="hl-value">"admin"</span><span class="hl-tag">/&gt;</span>
				...
<span class="hl-tag">&lt;/beans&gt;</span></pre>

	<div class="section" title="2.1&nbsp;Outbound Channel Adapter"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="splunk-outbound-channel-adapter"></a>2.1&nbsp;Outbound Channel Adapter</h2></div></div></div>
		
		<p>
			Outbound channel adapter is used to put data into Splunk from
			channels in Spring Integration.
			There are 3 kinds of method to put data:
		</p>

		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Submit (HTTP REST)</li><li class="listitem">Stream</li><li class="listitem">Tcp</li></ul></div>

		<p>
			The main difference between using the REST inputs vs plain TCP/UDP inputs is really
			in the Splunk event handling pipeline.
		</p>

		<p>
			With REST , you have to  declare your event meta data (index, source, source type&#8230;)
			in the HTTP request at the source. You can't really transform the log event anymore
			after you have created and sent it to Splunk.Typically though, for people using REST,
			this is fine because they are well formatting their log events before sending them
			anyway ie: no further processing/transforming and manipulation is required.
			You can however still do dynamic search time transforms/filtering on the
			data when later searching over it in Splunk.
		</p>
		<p>
			To use outbound channel adapter with submit, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">pool-server-connection</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">sourceType</span>=<span class="hl-value">"spring-integration"</span> <span class="hl-attribute">source</span>=<span class="hl-value">"example"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"submit"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

		<p>
			With TCP inputs , you can manipulate and transform the event data in Splunk before
			it gets indexed (using entrys in props.conf/transforms.conf). The event meta data
			(index, source, source type&#8230;) gets declared on the Splunk side when you establish
			the TCP/UDP input and can also be dynamically created, so essentially you have
			a lot more control over the indexing of the event data.This is generally more
			important when you don't control the format of the data at the source and it needs
			manipulating/filtering ie: network devices syslogging etc&#8230;
		</p>

		<p>
			To use outbound channel adapter with tcp, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span>
	<span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span> <span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"tcp"</span> <span class="hl-attribute">tcpPort</span>=<span class="hl-value">"9999"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

		<p>
			To use outbound channel adapter with stream, you can define the adapter as following:
		</p>

		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span>
	<span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span> <span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"stream"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

	</div>

	<div class="section" title="2.2&nbsp;Inbound Channel Adapter"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="splunk-inbound-channel-adapter"></a>2.2&nbsp;Inbound Channel Adapter</h2></div></div></div>
		
		<p>
			Inbound channel adapter is used to get data out of Splunk and put
			into Spring Integration's channel.
			There are 5 ways to get data out of Splunk:
		</p>

		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Blocking</li><li class="listitem">Non blocking</li><li class="listitem">Saved search</li><li class="listitem">Realtime</li><li class="listitem">Export</li></ul></div>

		<p>
			For more information on the difference, please refer
			<a class="ulink" href="https://github.com/splunk/splunk-sdk-java/tree/master/examples" target="_top">Splunk SDK</a>
		</p>

		<p>
			To use bloking inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"blocking"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use non blocking inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"normal"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use saved search inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">savedSearch</span>=<span class="hl-value">"test"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"saved"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use realtime search inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"realtime"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>
		<p>
			To use export inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"export"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			As Splunk support range search, you can specify the search rage by using
			"latestTime", "earliestTime", "initEarliestTime".
		</p>
		<p>
			"initEarliestTime" is the value for "earliestTime" when the application first start.
			If you specify "earliestTime" and "latestTime", the poller will only search data
			in that range. Otherwise, the range will move forward as time goes. That means, the
			"latestTime" is equal to the time where the polling trigger, the "earliestTime" is
			equal to the time where the last polling is run.
		</p>
		<p>
			You can get more information on the rage search from
			<a class="ulink" href="http://docs.splunk.com/Documentation/Splunk/latest/User/ChangeTheTimeRangeOfYourSearch" target="_top">
			Splunk</a>.
		</p>
	</div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="spring-integration-adapters.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="spring-integration-adapters.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="spring-integration-appendices.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;II.&nbsp;Integration Adapters&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;Part&nbsp;III.&nbsp;Appendices</td></tr></table></div></body></html>