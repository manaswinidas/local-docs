<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Spring Integration Splunk Adapter</title><link rel="stylesheet" href="css/manual-singlepage.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="book" title="Spring Integration Splunk Adapter"><div class="titlepage"><div><div><h1 class="title"><a name="spring-integration-reference"></a>Spring Integration Splunk Adapter</h1></div><div><div class="authorgroup"><h2>Authors</h2>
			<span class="author"><span class="firstname">Jarred Li</span></span>
			, <span class="author"><span class="firstname">Mark Pollack</span></span>
			, <span class="author"><span class="firstname">Damien Dallimore</span></span>
		</div></div><div><p class="releaseinfo">1.1.0.RELEASE</p></div><div><div class="legalnotice" title="Legal Notice"><a name="d4e19"></a>
			<p>&copy; SpringSource Inc., 2012</p>
		</div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="part"><a href="#whats-new-part">I. What's new?</a></span></dt><dd><dl><dt><span class="chapter"><a href="#whats-new">1. What's new?</a></span></dt></dl></dd><dt><span class="part"><a href="#spring-integration-adapters">II. Integration Adapters</a></span></dt><dd><dl><dt><span class="chapter"><a href="#splunk">2. Splunk Adapter</a></span></dt><dd><dl><dt><span class="section"><a href="#splunk-outbound-channel-adapter">2.1. Outbound Channel Adapter</a></span></dt><dt><span class="section"><a href="#splunk-inbound-channel-adapter">2.2. Inbound Channel Adapter</a></span></dt></dl></dd></dl></dd><dt><span class="part"><a href="#spring-integration-appendices">III. Appendices</a></span></dt><dd><dl><dt><span class="appendix"><a href="#resources">A. Additional Resources</a></span></dt><dd><dl><dt><span class="section"><a href="#spring-integration-home">A.1. Spring Integration Home</a></span></dt><dt><span class="section"><a href="#splunk-home">A.2. Splunk Home</a></span></dt></dl></dd><dt><span class="appendix"><a href="#history">B. Change History</a></span></dt></dl></dd></dl></div>
	

	

	<div class="part" title="Part&nbsp;I.&nbsp;What's new?"><div class="titlepage"><div><div><h1 class="title"><a name="whats-new-part"></a>Part&nbsp;I.&nbsp;What's new?</h1></div></div></div>
		
		<div class="partintro" title="What's new?"><div></div>
			<p>
				If you are interested in the changes and features, that were introduced in
				earlier versions, please take a look at chapter:

				<a class="xref" href="#history" title="Appendix&nbsp;B.&nbsp;Change History">Appendix&nbsp;B, <i>Change History</i></a>

			</p>
		</div>
		<div class="chapter" title="1.&nbsp;What's new?"><div class="titlepage"><div><div><h2 class="title"><a name="whats-new"></a>1.&nbsp;What's new?</h2></div></div></div>
	
	<p>
		The Spring Integration adapter for Splunk includes two adapters:
	</p>
	<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
			Inbound Channel Adapter to search data from Splunk.
		</li><li class="listitem">
			Outbound Channel Adapter to push event data into Splunk.
		</li></ul></div>
</div>
	</div>

	<div class="part" title="Part&nbsp;II.&nbsp;Integration Adapters"><div class="titlepage"><div><div><h1 class="title"><a name="spring-integration-adapters"></a>Part&nbsp;II.&nbsp;Integration Adapters</h1></div></div></div>
		
		<div class="partintro" title="Integration Adapters"><div></div>
			<p>
			 Spring Integration adapter for Splunk includes inbound channel adapter to
			 read data from Splunk and outbound channel adapter to write data into
			 Splunk.
			</p>
		</div>
		<div class="chapter" title="2.&nbsp;Splunk Adapter"><div class="titlepage"><div><div><h2 class="title"><a name="splunk"></a>2.&nbsp;Splunk Adapter</h2></div></div></div>
	
	<p>
		The Spring Integration Splunk Adapter provides outbound and inbound channel adapters:
	</p>
	<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
			<p>
				<span class="emphasis"><em>
					<a class="link" href="#splunk-outbound-channel-adapter" title="2.1&nbsp;Outbound Channel Adapter">Outbound Channel adapter</a>
				</em></span>
			</p>
		</li><li class="listitem">
			<p>
				<span class="emphasis"><em>
					<a class="link" href="#splunk-inbound-channel-adapter" title="2.2&nbsp;Inbound Channel Adapter">Inbound Channel Adapter</a>
				</em></span>
			</p>
		</li></ul></div>

	<p>
		To use Spring Integration adapter for Splunk, you have to import the XML namespace. For example, you can
		have following XML:
	</p>
	<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span>
	<span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="hl-attribute">xmlns:int</span>=<span class="hl-value">"http://www.springframework.org/schema/integration"</span>
	<span class="hl-attribute">xmlns:int-splunk</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk"</span>
	<span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk
		http://www.springframework.org/schema/integration/splunk/spring-integration-splunk.xsd
		http://www.springframework.org/schema/integration
		http://www.springframework.org/schema/integration/spring-integration.xsd
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="hl-tag">&gt;</span>

<span class="hl-tag">&lt;/beans&gt;</span></pre>

		<p>
			Meanwhile, you have to define your Splunk server information. For example
			you can define server as following:
		</p>
		<pre class="programlisting"><span class="hl-directive" style="color: maroon">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hl-tag">&lt;beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span>
	<span class="hl-attribute">xmlns:xsi</span>=<span class="hl-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
	<span class="hl-attribute">xmlns:int-splunk</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk"</span>
	<span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"http://www.springframework.org/schema/integration/splunk
		http://www.springframework.org/schema/integration/splunk/spring-integration-splunk.xsd
		http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd"</span><span class="hl-tag">&gt;</span>
	...
	<span class="hl-tag">&lt;int-splunk:server</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkServer"</span> <span class="hl-attribute">host</span>=<span class="hl-value">"somehost"</span> <span class="hl-attribute">port</span>=<span class="hl-value">"8089"</span>
		<span class="hl-attribute">userName</span>=<span class="hl-value">"user"</span> <span class="hl-attribute">password</span>=<span class="hl-value">"password"</span> <span class="hl-attribute">owner</span>=<span class="hl-value">"admin"</span><span class="hl-tag">/&gt;</span>
				...
<span class="hl-tag">&lt;/beans&gt;</span></pre>

	<div class="section" title="2.1&nbsp;Outbound Channel Adapter"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="splunk-outbound-channel-adapter"></a>2.1&nbsp;Outbound Channel Adapter</h2></div></div></div>
		
		<p>
			Outbound channel adapter is used to put data into Splunk from
			channels in Spring Integration.
			There are 3 kinds of method to put data:
		</p>

		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Submit (HTTP REST)</li><li class="listitem">Stream</li><li class="listitem">Tcp</li></ul></div>

		<p>
			The main difference between using the REST inputs vs plain TCP/UDP inputs is really
			in the Splunk event handling pipeline.
		</p>

		<p>
			With REST , you have to  declare your event meta data (index, source, source type&#8230;)
			in the HTTP request at the source. You can't really transform the log event anymore
			after you have created and sent it to Splunk.Typically though, for people using REST,
			this is fine because they are well formatting their log events before sending them
			anyway ie: no further processing/transforming and manipulation is required.
			You can however still do dynamic search time transforms/filtering on the
			data when later searching over it in Splunk.
		</p>
		<p>
			To use outbound channel adapter with submit, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">pool-server-connection</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">sourceType</span>=<span class="hl-value">"spring-integration"</span> <span class="hl-attribute">source</span>=<span class="hl-value">"example"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"submit"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

		<p>
			With TCP inputs , you can manipulate and transform the event data in Splunk before
			it gets indexed (using entrys in props.conf/transforms.conf). The event meta data
			(index, source, source type&#8230;) gets declared on the Splunk side when you establish
			the TCP/UDP input and can also be dynamically created, so essentially you have
			a lot more control over the indexing of the event data.This is generally more
			important when you don't control the format of the data at the source and it needs
			manipulating/filtering ie: network devices syslogging etc&#8230;
		</p>

		<p>
			To use outbound channel adapter with tcp, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span>
	<span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span> <span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"tcp"</span> <span class="hl-attribute">tcpPort</span>=<span class="hl-value">"9999"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

		<p>
			To use outbound channel adapter with stream, you can define the adapter as following:
		</p>

		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:outbound-channel-adapter</span>
	<span class="hl-attribute">id</span>=<span class="hl-value">"splunkOutboundChannelAdapter"</span> <span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">order</span>=<span class="hl-value">"1"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"outputToSplunk"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">ingest</span>=<span class="hl-value">"stream"</span><span class="hl-tag">&gt;</span>
<span class="hl-tag">&lt;/int-splunk:outbound-channel-adapter&gt;</span></pre>

	</div>

	<div class="section" title="2.2&nbsp;Inbound Channel Adapter"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="splunk-inbound-channel-adapter"></a>2.2&nbsp;Inbound Channel Adapter</h2></div></div></div>
		
		<p>
			Inbound channel adapter is used to get data out of Splunk and put
			into Spring Integration's channel.
			There are 5 ways to get data out of Splunk:
		</p>

		<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">Blocking</li><li class="listitem">Non blocking</li><li class="listitem">Saved search</li><li class="listitem">Realtime</li><li class="listitem">Export</li></ul></div>

		<p>
			For more information on the difference, please refer
			<a class="ulink" href="https://github.com/splunk/splunk-sdk-java/tree/master/examples" target="_top">Splunk SDK</a>
		</p>

		<p>
			To use bloking inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"blocking"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use non blocking inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"normal"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use saved search inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">savedSearch</span>=<span class="hl-value">"test"</span> <span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"saved"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			To use realtime search inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"realtime"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>
		<p>
			To use export inbound channel adapter, you can define the adapter as following:
		</p>
		<pre class="programlisting"><span class="hl-tag">&lt;int-splunk:inbound-channel-adapter</span> <span class="hl-attribute">id</span>=<span class="hl-value">"splunkInboundChannelAdapter"</span>
	<span class="hl-attribute">auto-startup</span>=<span class="hl-value">"true"</span> <span class="hl-attribute">search</span>=<span class="hl-value">"search spring:example"</span>
	<span class="hl-attribute">splunk-server-ref</span>=<span class="hl-value">"splunkServer"</span>
	<span class="hl-attribute">channel</span>=<span class="hl-value">"inputFromSplunk"</span> <span class="hl-attribute">mode</span>=<span class="hl-value">"export"</span> <span class="hl-attribute">initEarliestTime</span>=<span class="hl-value">"-1d"</span><span class="hl-tag">&gt;</span>
	<span class="hl-tag">&lt;int:poller</span> <span class="hl-attribute">fixed-rate</span>=<span class="hl-value">"5"</span> <span class="hl-attribute">time-unit</span>=<span class="hl-value">"SECONDS"</span><span class="hl-tag">/&gt;</span>
<span class="hl-tag">&lt;/int-splunk:inbound-channel-adapter&gt;</span></pre>

		<p>
			As Splunk support range search, you can specify the search rage by using
			"latestTime", "earliestTime", "initEarliestTime".
		</p>
		<p>
			"initEarliestTime" is the value for "earliestTime" when the application first start.
			If you specify "earliestTime" and "latestTime", the poller will only search data
			in that range. Otherwise, the range will move forward as time goes. That means, the
			"latestTime" is equal to the time where the polling trigger, the "earliestTime" is
			equal to the time where the last polling is run.
		</p>
		<p>
			You can get more information on the rage search from
			<a class="ulink" href="http://docs.splunk.com/Documentation/Splunk/latest/User/ChangeTheTimeRangeOfYourSearch" target="_top">
			Splunk</a>.
		</p>
	</div>
</div>
	</div>
	<div class="part" title="Part&nbsp;III.&nbsp;Appendices"><div class="titlepage"><div><div><h1 class="title"><a name="spring-integration-appendices"></a>Part&nbsp;III.&nbsp;Appendices</h1></div></div></div>
		
		<div class="appendix" title="Appendix&nbsp;A.&nbsp;Additional Resources"><div class="titlepage"><div><div><h2 class="title"><a name="resources"></a>Appendix&nbsp;A.&nbsp;Additional Resources</h2></div></div></div>
	

	<div class="section" title="A.1&nbsp;Spring Integration Home"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="spring-integration-home"></a>A.1&nbsp;Spring Integration Home</h2></div></div></div>
		
		<p>
			The definitive source of information about Spring Integration is the
			<a class="ulink" href="http://www.springsource.org/spring-integration" target="_top">Spring Integration Home</a> at
			<a class="ulink" href="http://www.springsource.org" target="_top">http://www.springsource.org</a>. That site serves as a hub of
			information and is the best place to find up-to-date announcements about the project as well as links to
			articles, blogs, and new sample applications.
		</p>
	</div>

	<div class="section" title="A.2&nbsp;Splunk Home"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="splunk-home"></a>A.2&nbsp;Splunk Home</h2></div></div></div>
		
		<p>
			You can get more information on Splunk from <a class="ulink" href="http://www.splunk.com" target="_top">Splunk Home</a>.
		</p>
		<p>
			Splunk SDK API is in <a class="ulink" href="http://dev.splunk.com/" target="_top">Splunk Dev</a>.
		</p>
	</div>

</div>
		<div class="appendix" title="Appendix&nbsp;B.&nbsp;Change History"><div class="titlepage"><div><div><h2 class="title"><a name="history"></a>Appendix&nbsp;B.&nbsp;Change History</h2></div></div></div>
	
		<table id="d4e111">
			<thead>
			<td>Release</td>
			<td>Date</td>
			<td>Changes</td>
		</thead>
		<tbody>
		<tr>
			<td>0.5.0</td>
			<td>2012.9.28</td>
			<td>Initial release</td>
		</tr>
		</tbody>
	</table>
</div>
	</div>
</div></body></html>