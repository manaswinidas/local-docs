<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>4.&nbsp;Simple sample application using the Spring Shell</title><link rel="stylesheet" href="css/manual.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.75.2"><link rel="home" href="index.html" title="Spring Shell Documentation"><link rel="up" href="samples.html" title="Part&nbsp;IV.&nbsp;Spring Shell Sample application"><link rel="prev" href="samples.html" title="Part&nbsp;IV.&nbsp;Spring Shell Sample application"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">4.&nbsp;Simple sample application using the Spring Shell</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="samples.html">Prev</a>&nbsp;</td><th width="60%" align="center">Part&nbsp;IV.&nbsp;Spring Shell Sample application</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="chapter" title="4.&nbsp;Simple sample application using the Spring Shell"><div class="titlepage"><div><div><h2 class="title"><a name="simple-application"></a>4.&nbsp;Simple sample application using the Spring Shell</h2></div></div></div>
  

  <div class="section" title="4.1&nbsp;Introduction"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e274"></a>4.1&nbsp;Introduction</h2></div></div></div>
    

    <p>The sample application named 'helloworld' contains three
    '<code class="literal">hw</code>' commands, they are '<code class="literal">hw simple</code>',
    '<code class="literal">hw complex</code>' and '<code class="literal">hw enum</code>' and
    demonstrate simple to intermediate level usage of the
    <code class="literal">@Cli</code> annotation classes for creating commands.</p>

    <p>The example code is located in the distribution directory
    <code class="literal">&lt;spring-shell-install-dir&gt;/samples/helloworld</code>.</p>

    <p>To build the example cd to the helloworld directory and execute
    <code class="literal">gradlew installApp</code> (you first need to add the <code class="literal">gradlew</code>
    gradle wrapper to your path). To run the application cd to
    <code class="literal">build\install\helloworld\bin</code> and execute the helloworld
    script.</p>
  </div>

  <div class="section" title="4.2&nbsp;HelloWorldCommands"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d4e288"></a>4.2&nbsp;HelloWorldCommands</h2></div></div></div>
    

    <p>The <code class="classname">HelloWorldCommands</code> class is show
    below</p>

    <pre class="programlisting"><span class="hl-keyword">package</span> org.springframework.shell.samples.helloworld.commands;

<span class="hl-keyword">import</span> org.springframework.shell.core.CommandMarker;
<span class="hl-keyword">import</span> org.springframework.shell.core.annotation.CliAvailabilityIndicator;
<span class="hl-keyword">import</span> org.springframework.shell.core.annotation.CliCommand;
<span class="hl-keyword">import</span> org.springframework.shell.core.annotation.CliOption;
<span class="hl-keyword">import</span> org.springframework.stereotype.Component;

<i><span class="hl-annotation" style="color: gray">@Component</span></i>
<span class="hl-keyword">public</span> <span class="hl-keyword">class</span> HelloWorldCommands <span class="hl-keyword">implements</span> CommandMarker {
	
	<span class="hl-keyword">private</span> <span class="hl-keyword">boolean</span> simpleCommandExecuted = false;
	
	<i><span class="hl-annotation" style="color: gray">@CliAvailabilityIndicator({"hw simple"})</span></i>
	<span class="hl-keyword">public</span> <span class="hl-keyword">boolean</span> isSimpleAvailable() {
		<span class="hl-comment">//always available</span>
		<span class="hl-keyword">return</span> true;
	}
	
	<i><span class="hl-annotation" style="color: gray">@CliAvailabilityIndicator({"hw complex", "hw enum"})</span></i>
	<span class="hl-keyword">public</span> <span class="hl-keyword">boolean</span> isComplexAvailable() {
		<span class="hl-keyword">if</span> (simpleCommandExecuted) {
			<span class="hl-keyword">return</span> true;
		} <span class="hl-keyword">else</span> {
			<span class="hl-keyword">return</span> false;
		}
	}
		
	<i><span class="hl-annotation" style="color: gray">@CliCommand(value = "hw simple", help = "Print a simple hello world message")</span></i>
	<span class="hl-keyword">public</span> String simple(
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "message" }, mandatory = true, help = "The hello world message")</span></i> <span class="hl-keyword">final</span> String message,
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "location" }, mandatory = false, help = "Where you are saying hello", specifiedDefaultValue="At work")</span></i> <span class="hl-keyword">final</span> String location) {		
		simpleCommandExecuted = true;
		<span class="hl-keyword">return</span> <span class="hl-string">"Message = ["</span> + message + <span class="hl-string">"] Location = ["</span> + location + <span class="hl-string">"]"</span>;
	}
	
	<i><span class="hl-annotation" style="color: gray">@CliCommand(value = "hw complex", help = "Print a complex hello world message")</span></i>
	<span class="hl-keyword">public</span> String hello(
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "message" }, mandatory = true, help = "The hello world message")</span></i> <span class="hl-keyword">final</span> String message,
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "name1"}, mandatory = true, help = "Say hello to the first name")</span></i> <span class="hl-keyword">final</span> String name1,
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "name2" }, mandatory = true, help = "Say hello to a second name")</span></i> <span class="hl-keyword">final</span> String name2,
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "time" }, mandatory = false, specifiedDefaultValue="now", help = "When you are saying hello")</span></i> <span class="hl-keyword">final</span> String time,
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "location" }, mandatory = false, help = "Where you are saying hello")</span></i> <span class="hl-keyword">final</span> String location) {		
		<span class="hl-keyword">return</span> <span class="hl-string">"Hello "</span> + name1 + <span class="hl-string">" and "</span> + name2 + <span class="hl-string">". Your special message is "</span>  + message + <span class="hl-string">". time=["</span> + time + <span class="hl-string">"] location=["</span> + location + <span class="hl-string">"]"</span>;
	}
	
	<i><span class="hl-annotation" style="color: gray">@CliCommand(value = "hw enum", help = "Print a simple hello world message from an enumerated value")</span></i>
	<span class="hl-keyword">public</span> String eenum(
		<i><span class="hl-annotation" style="color: gray">@CliOption(key = { "message" }, mandatory = true, help = "The hello world message")</span></i> <span class="hl-keyword">final</span> MessageType message){		
		<span class="hl-keyword">return</span> <span class="hl-string">"Hello.  Your special enumerated message is "</span> + message;
	}
	
	enum MessageType {		
		Type1(<span class="hl-string">"type1"</span>),
		Type2(<span class="hl-string">"type2"</span>),
		Type3(<span class="hl-string">"type3"</span>);
		
		<span class="hl-keyword">private</span> String type;
		
		<span class="hl-keyword">private</span> MessageType(String type){
			<span class="hl-keyword">this</span>.type = type;
		}
		
		<span class="hl-keyword">public</span> String getType(){
			<span class="hl-keyword">return</span> type;
		}
	}
}
</pre>

    <p>The use of the <code class="classname">@CliAvailabilityIndicator</code>
    annotation on two methods, <code class="methodname">isSimpleAvailable</code> and
    <code class="methodname">isComplexAvailable</code> shows how you can enable the
    presence of the '<code class="literal">hw complex</code>' and '<code class="literal">hw
    enum</code>' commands only if the '<code class="literal">hw simple</code>'
    command was executed.</p>

    <p>Here is an example session showing the behavior.</p>

    <div class="mediaobject"><img src="images/shell-example.jpg"></div>

    <p>The '<code class="literal">hw enum</code>' command shows how the shell
    supports the use of an enumeration as command method arguments.</p>

    <div class="mediaobject"><img src="images/shell-example-enum.jpg"></div>
  </div>
</div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="samples.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="samples.html">Up</a></td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">Part&nbsp;IV.&nbsp;Spring Shell Sample application&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>