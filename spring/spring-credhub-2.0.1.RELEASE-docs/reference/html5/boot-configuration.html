<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Spring Boot Configuration</title>
<link rel="stylesheet" href="css/spring.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="book">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="boot-configuration"><a class="anchor" href="#boot-configuration"></a>1. Spring Boot Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When using the Spring CredHub starter dependency, Spring CredHub can be configured with <a href="https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-external-config.html#boot-features-external-config-application-property-files">Spring Boot application properties</a>.
With the proper configuration properties, Spring CredHub will auto-configure a connection to a CredHub server.</p>
</div>
<div class="sect2">
<h3 id="mutual-tls-authentication"><a class="anchor" href="#mutual-tls-authentication"></a>1.1. Mutual TLS Authentication</h3>
<div class="paragraph">
<p>An application running on Cloud Foundry can authenticate to a CredHub server deployed to the same platform using mutual TLS.
Mutual TLS is the default authentication scheme when no other authentication credentials are provided.
To use mutual TLS authentication to a CredHub server, simply provide the URL of the CredHub server as an application property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">Unresolved directive in boot-configuration.adoc - include::{examples-dir}config-minimal.yml[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the {credhub-api-home}version/2.0/#mutual-tls[CredHub documentation] for more information on mutual TLS authentication.</p>
</div>
<div class="paragraph">
<p>An application running on Cloud Foundry can use the internal address <code><a href="https://credhub.service.cf.internal:8844" class="bare">https://credhub.service.cf.internal:8844</a></code> to communicate with a CredHub server deployed to the same platform.</p>
</div>
</div>
<div class="sect2">
<h3 id="oauth2-authentication"><a class="anchor" href="#oauth2-authentication"></a>1.2. OAuth2 Authentication</h3>
<div class="paragraph">
<p>OAuth2 can be used to authenticate via UAA to any CredHub server.
Spring CredHub supports client credentials grant tokens for authentication using the following Spring CredHub and Spring Security configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">Unresolved directive in boot-configuration.adoc - include::{examples-dir}config-oauth2.yml[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The ID provided in <code>spring.credhub.oauth2.registration-id</code> must refer to a client configured under <code>spring.security.oauth2.client.registration</code>.
See the <a href="https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#boot-features-security-oauth2">Spring Boot documentation</a> for more information on Spring Boot OAuth2 client configuration.</p>
</div>
<div class="paragraph">
<p>The OAuth2 client specified in the Spring Security client registration must have CredHub scopes such as <code>credhub.read</code> or <code>credhub.write</code> to perform most operations.
See the {credhub-api-home}version/2.0/#uaa-oauth2[CredHub documentation] for more information on OAuth2 authentication with UAA.</p>
</div>
</div>
</div>
</div>
</div>
<script type="text/javascript" src="js/tocbot/tocbot.min.js"></script>
<script type="text/javascript" src="js/toc.js"></script>
<link rel="stylesheet" href="js/highlight/styles/atom-one-dark-reasonable.min.css">
<script src="js/highlight/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>