<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <title>Chapter&nbsp;5.&nbsp;Spring Data Graph</title><link rel="stylesheet" href="css/html.css" type="text/css"><meta name="generator" content="DocBook XSL Stylesheets V1.73.2"><link rel="start" href="index.html" title="Good Relationships"><link rel="up" href="tutorial.html" title="Part&nbsp;I.&nbsp;Tutorial"><link rel="prev" href="tutorial_neo4j.html" title="Chapter&nbsp;4.&nbsp;Learning Neo4j"><link rel="next" href="tutorial_annotations.html" title="Chapter&nbsp;6.&nbsp;Annotating the domain"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div xmlns:fo="http://www.w3.org/1999/XSL/Format" style="background-color:white;border:none;height:73px;border:1px solid black;"><a style="border:none;" href="http://static.springframework.org/spring-ws/site/" title="The Spring Framework - Spring Web Services"><img style="border:none;" src="images/xdev-spring_logo.jpg"></a><a style="border:none;" href="http://www.springsource.com/" title="SpringSource"><img style="border:none;position:absolute;padding-top:5px;right:42px;" src="images/s2_box_logo.png"></a></div><div class="chapter" lang="en"><div class="titlepage"><div><div><h2 class="title"><a name="tutorial_about-spring-data"></a>Chapter&nbsp;5.&nbsp;Spring Data Graph</h2></div><div><h3 class="subtitle"><i>Conjuring magic</i></h3></div></div></div><p>
        So far it had all been pure Spring Framework and Neo4j. However, using the Neo4j code in our domain
        classes polluted them with graph database details. For this application, we wanted to keep the domain
        classes clean. Spring Data Graph promised to do the heavy lifting for us, so we continued investigating it.
    </p><p>
        Spring Data Graph depends heavily on AspectJ <a class="xref" href="reference:aspectj-details.html" title="Chapter&nbsp;24.&nbsp;AspectJ details">Chapter&nbsp;24, <i>AspectJ details</i></a>.
        Some parts of our classes would get new behavior,
        but it would not be visible in our code. The upside of this is that you get rid of a lot of boilerplate
        code.
    </p><p>
        The first step was to configure Maven:
        </p><div class="example"><a name="d0e294"></a><p class="title"><b>Example&nbsp;5.1.&nbsp;Spring Data Graph Maven configuration</b></p><div class="example-contents"><pre class="programlisting">&lt;<span class="hl-tag">properties</span>&gt;
    &lt;<span class="hl-tag">aspectj.version</span>&gt;1.6.12.M1&lt;<span class="hl-tag">/aspectj.version</span>&gt;
&lt;<span class="hl-tag">/properties</span>&gt;

&lt;<span class="hl-tag">dependency</span>&gt;
  &lt;<span class="hl-tag">groupId</span>&gt;org.springframework.data&lt;<span class="hl-tag">/groupId</span>&gt;
  &lt;<span class="hl-tag">artifactId</span>&gt;spring-data-neo4j&lt;<span class="hl-tag">/artifactId</span>&gt;
  &lt;<span class="hl-tag">version</span>&gt;1.1.0&lt;<span class="hl-tag">/version</span>&gt;
&lt;<span class="hl-tag">/dependency</span>&gt;

&lt;<span class="hl-tag">dependency</span>&gt;
    &lt;<span class="hl-tag">groupId</span>&gt;org.aspectj&lt;<span class="hl-tag">/groupId</span>&gt;
    &lt;<span class="hl-tag">artifactId</span>&gt;aspectjrt&lt;<span class="hl-tag">/artifactId</span>&gt;
    &lt;<span class="hl-tag">version</span>&gt;${aspectj.version}&lt;<span class="hl-tag">/version</span>&gt;
&lt;<span class="hl-tag">/dependency</span>&gt;

&lt;<span class="hl-tag">build</span>&gt; &lt;<span class="hl-tag">plugins</span>&gt; &lt;<span class="hl-tag">plugin</span>&gt;
    &lt;<span class="hl-tag">groupId</span>&gt;org.codehaus.mojo&lt;<span class="hl-tag">/groupId</span>&gt;
    &lt;<span class="hl-tag">artifactId</span>&gt;aspectj-maven-plugin&lt;<span class="hl-tag">/artifactId</span>&gt;
    &lt;<span class="hl-tag">version</span>&gt;1.2&lt;<span class="hl-tag">/version</span>&gt;
    &lt;<span class="hl-tag">dependencies</span>&gt;
        &lt;<span class="hl-tag">dependency</span>&gt;
            &lt;<span class="hl-tag">groupId</span>&gt;org.aspectj&lt;<span class="hl-tag">/groupId</span>&gt;
            &lt;<span class="hl-tag">artifactId</span>&gt;aspectjrt&lt;<span class="hl-tag">/artifactId</span>&gt;
            &lt;<span class="hl-tag">version</span>&gt;${aspectj.version}&lt;<span class="hl-tag">/version</span>&gt;
        &lt;<span class="hl-tag">/dependency</span>&gt;
        &lt;<span class="hl-tag">dependency</span>&gt;
            &lt;<span class="hl-tag">groupId</span>&gt;org.aspectj&lt;<span class="hl-tag">/groupId</span>&gt;
            &lt;<span class="hl-tag">artifactId</span>&gt;aspectjtools&lt;<span class="hl-tag">/artifactId</span>&gt;
            &lt;<span class="hl-tag">version</span>&gt;${aspectj.version}&lt;<span class="hl-tag">/version</span>&gt;
        &lt;<span class="hl-tag">/dependency</span>&gt;
    &lt;<span class="hl-tag">/dependencies</span>&gt;
    &lt;<span class="hl-tag">executions</span>&gt;
        &lt;<span class="hl-tag">execution</span>&gt;
            &lt;<span class="hl-tag">goals</span>&gt;
                &lt;<span class="hl-tag">goal</span>&gt;compile&lt;<span class="hl-tag">/goal</span>&gt;
                &lt;<span class="hl-tag">goal</span>&gt;test-compile&lt;<span class="hl-tag">/goal</span>&gt;
            &lt;<span class="hl-tag">/goals</span>&gt;
        &lt;<span class="hl-tag">/execution</span>&gt;
    &lt;<span class="hl-tag">/executions</span>&gt;
    &lt;<span class="hl-tag">configuration</span>&gt;
        &lt;<span class="hl-tag">outxml</span>&gt;true&lt;<span class="hl-tag">/outxml</span>&gt;
        &lt;<span class="hl-tag">aspectLibraries</span>&gt;
            &lt;<span class="hl-tag">aspectLibrary</span>&gt;
                &lt;<span class="hl-tag">groupId</span>&gt;org.springframework&lt;<span class="hl-tag">/groupId</span>&gt;
                &lt;<span class="hl-tag">artifactId</span>&gt;spring-aspects&lt;<span class="hl-tag">/artifactId</span>&gt;
            &lt;<span class="hl-tag">/aspectLibrary</span>&gt;
            &lt;<span class="hl-tag">aspectLibrary</span>&gt;
                &lt;<span class="hl-tag">groupId</span>&gt;org.springframework.data&lt;<span class="hl-tag">/groupId</span>&gt;
                &lt;<span class="hl-tag">artifactId</span>&gt;spring-data-neo4j&lt;<span class="hl-tag">/artifactId</span>&gt;
            &lt;<span class="hl-tag">/aspectLibrary</span>&gt;
        &lt;<span class="hl-tag">/aspectLibraries</span>&gt;
        &lt;<span class="hl-tag">source</span>&gt;1.6&lt;<span class="hl-tag">/source</span>&gt;
        &lt;<span class="hl-tag">target</span>&gt;1.6&lt;<span class="hl-tag">/target</span>&gt;
    &lt;<span class="hl-tag">/configuration</span>&gt;
&lt;<span class="hl-tag">/plugin</span>&gt; &lt;<span class="hl-tag">/plugins</span>&gt; &lt;<span class="hl-tag">/build</span>&gt;
</pre></div></div><p><br class="example-break">
    </p><p>
        The Spring context configuration was much easier, thanks to a provided namespace:
    </p><p>
        </p><div class="example"><a name="d0e304"></a><p class="title"><b>Example&nbsp;5.2.&nbsp;Spring Data Graph context configuration</b></p><div class="example-contents"><pre class="programlisting">&lt;<span class="hl-tag">beans</span> <span class="hl-attribute">xmlns</span>=<span class="hl-value">"http://www.springframework.org/schema/beans"</span> <span class="hl-attribute">...</span>
       <span class="hl-attribute">xmlns:datagraph</span>=<span class="hl-value">"http://www.springframework.org/schema/data/graph"</span>
       <span class="hl-attribute">xsi:schemaLocation</span>=<span class="hl-value">"... http://www.springframework.org/schema/data/graph
       http://www.springframework.org/schema/data/graph/datagraph-1.0.xsd"</span>&gt;
    ...
    &lt;<span class="hl-tag">datagraph:config</span> <span class="hl-attribute">storeDirectory</span>=<span class="hl-value">"data/graph.db"</span>/&gt;
    ...
&lt;<span class="hl-tag">/beans</span>&gt;
</pre></div></div><p><br class="example-break">
    </p></div><div xmlns:fo="http://www.w3.org/1999/XSL/Format" class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tutorial_neo4j.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tutorial_annotations.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">Chapter&nbsp;4.&nbsp;Learning Neo4j&nbsp;</td><td width="20%" align="center"><span style="color:white;font-size:90%;"><a href="http://www.springsource.com/" title="SpringSource">Sponsored by SpringSource
                                        </a></span></td><td width="40%" align="right" valign="top">&nbsp;Chapter&nbsp;6.&nbsp;Annotating the domain</td></tr></table></div></body></html>